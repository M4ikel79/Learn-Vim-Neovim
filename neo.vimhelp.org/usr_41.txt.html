<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="color-scheme" content="light dark">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="description" content="Neovim help pages, always up-to-date">
<title>Neovim: usr_41.txt</title>
<link rel="shortcut icon" href="s/h3E0J2MHNKfIuCqP/favicon-neovim.ico">
<!-- favicon taken from https://neovim.io/favicon.ico, which is licensed under CC-BY-3.0: https://creativecommons.org/licenses/by/3.0/ -->

<link rel="stylesheet" href="s/MsMIu46igYudff1x/tom-select.min.css">
<script defer src="s/RLcAbtLBYX-q5me0/tom-select.base.min.js"></script>

<link rel="stylesheet" href="s/QRMkrs52-wJfIQ-w/vimhelp.css">
<noscript><link rel="stylesheet" href="s/eRFCn9A-K4lmzV_A/noscript.css"></noscript>
<script defer src="s/KpwrKyx19dtnhPoe/vimhelp.js"></script>
</head>
<body>




<div class="bar">
  <div class="ql">Quick links:
<a href="index.html">help overview</a> &middot;
<a href="quickref.txt.html">quick reference</a> &middot;
<a href="usr_toc.txt.html">user manual toc</a> &middot;
<a href="index.html#reference_toc">reference manual toc</a>
</div>
  <div class="tag srch need-js">
    <select id="vh-select-tag"></select>
    <div class="placeholder">Go to keyword<span class="not-mobile">&nbsp;(shortcut: <kbd>k</kbd>)</span></div>
  </div>
  <form class="site srch" action="https://duckduckgo.com" method="get" target="_blank" rel="noopener noreferrer">
    <input type="hidden" name="sites" value="neo.vimhelp.org">
    <input type="search" name="q" id="vh-srch-input" placeholder="Site search">
    <div class="placeholder need-js">Site search<span class="not-mobile">&nbsp;(shortcut: <kbd>s</kbd>)</span></div>
  </form>
  <div id="theme-switcher" class="need-js">
  <button id="theme-current" title="Switch theme">Theme</button>
  <div id="theme-dropdown"><ul>
    <li><button id="theme-native" title="Switch to native theme">Native</button></li>
    <li><button id="theme-light" title="Switch to light theme">Light</button></li>
    <li><button id="theme-dark" title="Switch to dark theme">Dark</button></li>
  </ul></div>
</div>

</div>

<main>
<div id="vh-sidebar">
<ul><li><a href="usr_41.txt.html#">↑Top↑</a></li>
<li><a href="usr_41.txt.html#41.1">Introduction</a></li>
<li><a href="usr_41.txt.html#41.2">Variables</a></li>
<li><a href="usr_41.txt.html#41.3">Expressions</a></li>
<li><a href="usr_41.txt.html#41.4">Conditionals</a></li>
<li><a href="usr_41.txt.html#41.5">Executing an expression</a></li>
<li><a href="usr_41.txt.html#41.6">Using functions</a></li>
<li><a href="usr_41.txt.html#41.7">Defining a function</a></li>
<li><a href="usr_41.txt.html#41.8">Lists and Dictionaries</a></li>
<li><a href="usr_41.txt.html#41.9">Exceptions</a></li>
<li><a href="usr_41.txt.html#41.10">Various remarks</a></li>
<li><a href="usr_41.txt.html#41.11">Writing a plugin</a></li>
<li><a href="usr_41.txt.html#41.12">Writing a filetype plugin</a></li>
<li><a href="usr_41.txt.html#41.13">Writing a compiler plugin</a></li>
<li><a href="usr_41.txt.html#41.14">Writing a plugin that loads quickly</a></li>
<li><a href="usr_41.txt.html#41.15">Writing library scripts</a></li>
<li><a href="usr_41.txt.html#41.16">Distributing Vim scripts</a></li>
</ul>
</div>
<div id="vh-content">
<pre>
<span id="usr_41.txt" class="t">usr_41.txt</span>  	Nvim

		     VIM USER MANUAL <a href="motion.txt.html#-" class="d">-</a> by <a href="intro.txt.html#Bram" class="d">Bram</a> <a href="intro.txt.html#Moolenaar" class="d">Moolenaar</a>

			      Write <a href="insert.txt.html#a" class="d">a</a> Vim <a href="usr_41.txt.html#script" class="d">script</a>


The Vim <a href="usr_41.txt.html#script" class="d">script</a> language <a href="motion.txt.html#is" class="d">is</a> used <a href="luaref.txt.html#for" class="d">for</a> the <a href="starting.txt.html#startup" class="d">startup</a> <a href="starting.txt.html#vimrc" class="d">vimrc</a> file, <a href="syntax.txt.html#syntax" class="d">syntax</a> files, and
many other things.  This chapter explains the items that can be used in <a href="insert.txt.html#a" class="d">a</a> Vim
script.  There are <a href="insert.txt.html#a" class="d">a</a> lot of them, thus this <a href="motion.txt.html#is" class="d">is</a> <a href="insert.txt.html#a" class="d">a</a> long chapter.

<a href="usr_41.txt.html#41.1" class="l">41.1</a>  	Introduction
<a href="usr_41.txt.html#41.2" class="l">41.2</a>  	Variables
<a href="usr_41.txt.html#41.3" class="l">41.3</a>  	Expressions
<a href="usr_41.txt.html#41.4" class="l">41.4</a>  	Conditionals
<a href="usr_41.txt.html#41.5" class="l">41.5</a>  	Executing an <a href="vimeval.txt.html#expression" class="d">expression</a>
<a href="usr_41.txt.html#41.6" class="l">41.6</a>  	Using <a href="vimeval.txt.html#functions" class="d">functions</a>
<a href="usr_41.txt.html#41.7" class="l">41.7</a>  	Defining <a href="insert.txt.html#a" class="d">a</a> function
<a href="usr_41.txt.html#41.8" class="l">41.8</a>  	<a href="vimeval.txt.html#Lists" class="d">Lists</a> and <a href="vimeval.txt.html#Dictionaries" class="d">Dictionaries</a>
<a href="usr_41.txt.html#41.9" class="l">41.9</a>  	Exceptions
<a href="usr_41.txt.html#41.10" class="l">41.10</a>  	Various remarks
<a href="usr_41.txt.html#41.11" class="l">41.11</a>  	Writing <a href="insert.txt.html#a" class="d">a</a> <a href="usr_05.txt.html#plugin" class="d">plugin</a>
<a href="usr_41.txt.html#41.12" class="l">41.12</a>  	Writing <a href="insert.txt.html#a" class="d">a</a> <a href="filetype.txt.html#filetype" class="d">filetype</a> <a href="usr_05.txt.html#plugin" class="d">plugin</a>
<a href="usr_41.txt.html#41.13" class="l">41.13</a>  	Writing <a href="insert.txt.html#a" class="d">a</a> compiler <a href="usr_05.txt.html#plugin" class="d">plugin</a>
<a href="usr_41.txt.html#41.14" class="l">41.14</a>  	Writing <a href="insert.txt.html#a" class="d">a</a> <a href="usr_05.txt.html#plugin" class="d">plugin</a> that loads quickly
<a href="usr_41.txt.html#41.15" class="l">41.15</a>  	Writing library scripts
<a href="usr_41.txt.html#41.16" class="l">41.16</a>  	Distributing Vim scripts

     Next chapter: <a href="usr_42.txt.html#usr_42.txt" class="l">usr_42.txt</a>  Add new <a href="gui.txt.html#menus" class="d">menus</a>
 Previous chapter: <a href="usr_40.txt.html#usr_40.txt" class="l">usr_40.txt</a>  Make new commands
Table of contents: <a href="usr_toc.txt.html#usr_toc.txt" class="l">usr_toc.txt</a>

<span class="h">==============================================================================</span>
<span id="41.1" class="t">41.1</span>  	Introduction				<span id="vim-script-intro" class="t">vim-script-intro</span> <span id="script" class="t">script</span>

Your first experience with Vim scripts <a href="motion.txt.html#is" class="d">is</a> the <a href="starting.txt.html#vimrc" class="d">vimrc</a> file.  Vim reads <a href="motion.txt.html#it" class="d">it</a> when
<a href="motion.txt.html#it" class="d">it</a> starts up and executes the commands.  You can set <a href="options.txt.html#options" class="d">options</a> to values you
prefer.  And you can use any colon command in <a href="motion.txt.html#it" class="d">it</a> (commands that start with <a href="insert.txt.html#a" class="d">a</a>
"<a href="cmdline.txt.html#%3A" class="d">:</a>"<a href="motion.txt.html#%3B" class="d">;</a> these are sometimes referred to <a href="motion.txt.html#as" class="d">as</a> <a href="intro.txt.html#Ex" class="d">Ex</a> commands or command-line commands).
   <a href="autocmd.txt.html#Syntax" class="d">Syntax</a> files are also Vim scripts.  As are files that set <a href="options.txt.html#options" class="d">options</a> <a href="luaref.txt.html#for" class="d">for</a> <a href="insert.txt.html#a" class="d">a</a>
specific file type.  <a href="insert.txt.html#A" class="d">A</a> complicated <a href="repeat.txt.html#macro" class="d">macro</a> can be defined by <a href="insert.txt.html#a" class="d">a</a> separate Vim
<a href="usr_41.txt.html#script" class="d">script</a> file.  You can think of other uses yourself.

	If you are familiar with Python, you can find <a href="insert.txt.html#a" class="d">a</a> comparison between
	<a href="if_pyth.txt.html#Python" class="d">Python</a> and Vim <a href="usr_41.txt.html#script" class="d">script</a> here, with pointers to other documents:
	   <a class="u" href="https://gist.github.com/yegappan/16d964a37ead0979b05e655aa036cad0">https://gist.github.com/yegappan/16d964a37ead0979b05e655aa036cad0</a>
	And if you are familiar with JavaScript:
	   <a class="u" href="https://w0rp.com/blog/post/vim-script-for-the-javascripter/">https://w0rp.com/blog/post/vim-script-for-the-javascripter/</a>

Let's start with <a href="insert.txt.html#a" class="d">a</a> simple example: 
<span class="e"></span>
<span class="e">	:let i = 1</span>
<span class="e">	:while i &lt; 5</span>
<span class="e">	:  echo "count is" i</span>
<span class="e">	:  let i += 1</span>
<span class="e">	:endwhile</span>

	<span class="n">Note:</span>
	The "<a href="cmdline.txt.html#%3A" class="d">:</a>" characters are not really needed here.  You only need to use
	them when you type <a href="insert.txt.html#a" class="d">a</a> command.  In <a href="insert.txt.html#a" class="d">a</a> Vim <a href="usr_41.txt.html#script" class="d">script</a> file they can be left
	out.  We will use them here anyway to make clear these are colon
	commands and make them stand out from <a href="intro.txt.html#Normal" class="d">Normal</a> mode commands.
	<span class="n">Note:</span>
	You can try out the examples by yanking the lines from the text here
	and executing them with <a href="repeat.txt.html#%3A%40" class="d">:@</a>"

The output of the example code is:

<span class="h">	count is 1 </span>
<span class="h">	count is 2 </span>
<span class="h">	count is 3 </span>
<span class="h">	count is 4 </span>

In the first line the "<a href="vimeval.txt.html#%3Alet" class="d">:let</a>" command assigns <a href="insert.txt.html#a" class="d">a</a> value to <a href="insert.txt.html#a" class="d">a</a> variable.  The
generic form is: 
<span class="e"></span>
<span class="e">	:let {variable} = {expression}</span>
<span class="e"></span>
In this <a href="change.txt.html#case" class="d">case</a> the variable name <a href="motion.txt.html#is" class="d">is</a> "<a href="insert.txt.html#i" class="d">i</a>" and the <a href="vimeval.txt.html#expression" class="d">expression</a> <a href="motion.txt.html#is" class="d">is</a> <a href="insert.txt.html#a" class="d">a</a> simple value,
the number one.
   The "<a href="vimeval.txt.html#%3Awhile" class="d">:while</a>" command starts <a href="insert.txt.html#a" class="d">a</a> loop.  The generic form is: 
<span class="e"></span>
<span class="e">	:while {condition}</span>
<span class="e">	:  {statements}</span>
<span class="e">	:endwhile</span>
<span class="e"></span>
The statements until the matching "<a href="vimeval.txt.html#%3Aendwhile" class="d">:endwhile</a>" are executed <a href="luaref.txt.html#for" class="d">for</a> <a href="motion.txt.html#as" class="d">as</a> long <a href="motion.txt.html#as" class="d">as</a> the
condition <a href="motion.txt.html#is" class="d">is</a> true.  The condition used here <a href="motion.txt.html#is" class="d">is</a> the <a href="vimeval.txt.html#expression" class="d">expression</a> "<a href="insert.txt.html#i" class="d">i</a> <a href="change.txt.html#%3C" class="d">&lt;</a> 5"<a href="repeat.txt.html#." class="d">.</a>  This
<a href="motion.txt.html#is" class="d">is</a> true when the variable <a href="insert.txt.html#i" class="d">i</a> <a href="motion.txt.html#is" class="d">is</a> smaller than five.
	<span class="n">Note:</span>
	If you happen to write <a href="insert.txt.html#a" class="d">a</a> while loop that keeps on running, you can
	interrupt <a href="motion.txt.html#it" class="d">it</a> by pressing <a href="pattern.txt.html#CTRL-C" class="k">CTRL-C</a> (CTRL-Break on MS-Windows).

The "<a href="vimeval.txt.html#%3Aecho" class="d">:echo</a>" command prints its arguments.  In this <a href="change.txt.html#case" class="d">case</a> the <a href="vimeval.txt.html#string" class="d">string</a> "<a href="intro.txt.html#count" class="d">count</a> <a href="motion.txt.html#is" class="d">is</a>"
and the value of the variable i.  Since <a href="insert.txt.html#i" class="d">i</a> <a href="motion.txt.html#is" class="d">is</a> one, this will print:

<span class="h">	count is 1 </span>

Then there <a href="motion.txt.html#is" class="d">is</a> the "<a href="vimeval.txt.html#%3Alet" class="d">:let</a> <a href="insert.txt.html#i" class="d">i</a> += 1" command.  This does the same thing <a href="motion.txt.html#as" class="d">as</a>
"<a href="vimeval.txt.html#%3Alet" class="d">:let</a> <a href="insert.txt.html#i" class="d">i</a> <a href="change.txt.html#%3D" class="d">=</a> <a href="insert.txt.html#i" class="d">i</a> <a href="motion.txt.html#%2B" class="d">+</a> 1"<a href="repeat.txt.html#." class="d">.</a>  This adds one to the variable <a href="insert.txt.html#i" class="d">i</a> and assigns the new value
to the same variable.

The example was given to explain the commands, but would you really want to
make such <a href="insert.txt.html#a" class="d">a</a> loop, <a href="motion.txt.html#it" class="d">it</a> can be written much more compact: 
<span class="e"></span>
<span class="e">	:for i in range(1, 4)</span>
<span class="e">	:  echo "count is" i</span>
<span class="e">	:endfor</span>
<span class="e"></span>
We won't explain how <a href="vimeval.txt.html#%3Afor" class="l">:for</a> and <a href="vimfn.txt.html#range%28%29" class="l">range()</a> work until later.  Follow the links
if you are impatient.


<span class="c">FOUR KINDS OF NUMBERS</span>

Numbers can be decimal, hexadecimal, <a href="vimeval.txt.html#octal" class="d">octal</a> or binary.

<a href="insert.txt.html#A" class="d">A</a> hexadecimal number starts with "<a href="vimeval.txt.html#0x" class="d">0x</a>" or "0X"<a href="repeat.txt.html#." class="d">.</a>  For example "0x1f" <a href="motion.txt.html#is" class="d">is</a> decimal
31.

An <a href="vimeval.txt.html#octal" class="d">octal</a> number starts with "<a href="vimeval.txt.html#0o" class="d">0o</a>"<a href="motion.txt.html#%2C" class="d">,</a> "0O" or <a href="insert.txt.html#a" class="d">a</a> zero and another digit.  "0o17" <a href="motion.txt.html#is" class="d">is</a>
decimal 15.

<a href="insert.txt.html#A" class="d">A</a> binary number starts with "0b" or "0B"<a href="repeat.txt.html#." class="d">.</a>  For example "0b101" <a href="motion.txt.html#is" class="d">is</a> decimal 5.

<a href="insert.txt.html#A" class="d">A</a> decimal number <a href="motion.txt.html#is" class="d">is</a> just digits.  Careful: don't <a href="change.txt.html#put" class="d">put</a> <a href="insert.txt.html#a" class="d">a</a> zero before <a href="insert.txt.html#a" class="d">a</a> decimal
number, <a href="motion.txt.html#it" class="d">it</a> will be interpreted <a href="motion.txt.html#as" class="d">as</a> an <a href="vimeval.txt.html#octal" class="d">octal</a> number!

The "<a href="vimeval.txt.html#%3Aecho" class="d">:echo</a>" command always prints decimal numbers.  Example: 
<span class="e"></span>
<span class="e">	:echo 0x7f 0o36</span>
<span class="h">	127 30 </span>

<a href="insert.txt.html#A" class="d">A</a> number <a href="motion.txt.html#is" class="d">is</a> made negative with <a href="insert.txt.html#a" class="d">a</a> minus sign.  This also works <a href="luaref.txt.html#for" class="d">for</a> hexadecimal,
<a href="vimeval.txt.html#octal" class="d">octal</a> and binary numbers.  <a href="insert.txt.html#A" class="d">A</a> minus sign <a href="motion.txt.html#is" class="d">is</a> also used <a href="luaref.txt.html#for" class="d">for</a> subtraction.  Compare
this with the previous example: 
<span class="e"></span>
<span class="e">	:echo 0x7f -0o36</span>
<span class="h">	97 </span>

White <a href="intro.txt.html#space" class="d">space</a> in an <a href="vimeval.txt.html#expression" class="d">expression</a> <a href="motion.txt.html#is" class="d">is</a> ignored.  However, it's recommended to use <a href="motion.txt.html#it" class="d">it</a>
<a href="luaref.txt.html#for" class="d">for</a> separating items, to make the <a href="vimeval.txt.html#expression" class="d">expression</a> easier to read.  For example, to
avoid the confusion with <a href="insert.txt.html#a" class="d">a</a> negative number above, <a href="change.txt.html#put" class="d">put</a> <a href="insert.txt.html#a" class="d">a</a> <a href="intro.txt.html#space" class="d">space</a> between the
minus sign and the following number: 
<span class="e"></span>
<span class="e">	:echo 0x7f - 0o36</span>
<span class="e"></span>
<span class="h">==============================================================================</span>
<span id="41.2" class="t">41.2</span>  	Variables

<a href="insert.txt.html#A" class="d">A</a> variable name consists of ASCII letters, digits and the underscore.  It
cannot start with <a href="insert.txt.html#a" class="d">a</a> digit.  Valid variable names are:

	counter
	_aap3
	very_long_variable_name_with_underscores
	FuncLength
	LENGTH

Invalid names are "foo.bar" and "6var"<a href="repeat.txt.html#." class="d">.</a>
   These <a href="vimeval.txt.html#variables" class="d">variables</a> are global.  To see <a href="insert.txt.html#a" class="d">a</a> <a href="vimeval.txt.html#list" class="d">list</a> of currently defined <a href="vimeval.txt.html#variables" class="d">variables</a>
use this command: 
<span class="e"></span>
<span class="e">	:let</span>
<span class="e"></span>
You can use global <a href="vimeval.txt.html#variables" class="d">variables</a> everywhere.  This also means that when the
variable "<a href="intro.txt.html#count" class="d">count</a>" <a href="motion.txt.html#is" class="d">is</a> used in one <a href="usr_41.txt.html#script" class="d">script</a> file, <a href="motion.txt.html#it" class="d">it</a> might also be used in another
file.  This leads to confusion <a href="motion.txt.html#at" class="d">at</a> least, and real problems <a href="motion.txt.html#at" class="d">at</a> worst.  To avoid
this, you can use <a href="insert.txt.html#a" class="d">a</a> variable local to <a href="insert.txt.html#a" class="d">a</a> <a href="usr_41.txt.html#script" class="d">script</a> file by prepending "s:"<a href="repeat.txt.html#." class="d">.</a>  For
example, one <a href="usr_41.txt.html#script" class="d">script</a> contains this code: 
<span class="e"></span>
<span class="e">	:let s:count = 1</span>
<span class="e">	:while s:count &lt; 5</span>
<span class="e">	:  source other.vim</span>
<span class="e">	:  let s:count += 1</span>
<span class="e">	:endwhile</span>
<span class="e"></span>
Since "s:count" <a href="motion.txt.html#is" class="d">is</a> local to this script, you can be sure that sourcing the
"other.vim" <a href="usr_41.txt.html#script" class="d">script</a> will not change this variable.  If "other.vim" also uses an
"s:count" variable, <a href="motion.txt.html#it" class="d">it</a> will be <a href="insert.txt.html#a" class="d">a</a> different copy, local to that script.  More
about <a href="map.txt.html#script-local" class="d">script-local</a> <a href="vimeval.txt.html#variables" class="d">variables</a> here: <a href="vimeval.txt.html#script-variable" class="l">script-variable</a><a href="repeat.txt.html#." class="d">.</a>

There are more kinds of variables, see <a href="vimeval.txt.html#internal-variables" class="l">internal-variables</a><a href="repeat.txt.html#." class="d">.</a>  The most often
used ones are:

	b:name		variable local to <a href="insert.txt.html#a" class="d">a</a> buffer
	w:name		variable local to <a href="insert.txt.html#a" class="d">a</a> <a href="windows.txt.html#window" class="d">window</a>
	g:name		global variable (also in <a href="insert.txt.html#a" class="d">a</a> function)
	v:name		variable predefined by Vim


<span class="c">DELETING VARIABLES</span>

Variables take up memory and show up in the output of the "<a href="vimeval.txt.html#%3Alet" class="d">:let</a>" command.  To
delete <a href="insert.txt.html#a" class="d">a</a> variable use the "<a href="vimeval.txt.html#%3Aunlet" class="d">:unlet</a>" command.  Example: 
<span class="e"></span>
<span class="e">	:unlet s:count</span>
<span class="e"></span>
This deletes the <a href="map.txt.html#script-local" class="d">script-local</a> variable "s:count" to free up the memory <a href="motion.txt.html#it" class="d">it</a>
uses.  If you are not sure if the variable exists, and don't want an error
message when <a href="motion.txt.html#it" class="d">it</a> doesn't, append !: 
<span class="e"></span>
<span class="e">	:unlet! s:count</span>
<span class="e"></span>
When <a href="insert.txt.html#a" class="d">a</a> <a href="usr_41.txt.html#script" class="d">script</a> has been processed to the end, the local <a href="vimeval.txt.html#variables" class="d">variables</a> declared
there will not be deleted.  Functions defined in the <a href="usr_41.txt.html#script" class="d">script</a> can use them.
Example:

	<a href="vimeval.txt.html#%3Aif" class="d">:if</a> !exists("s:call_count"<a href="motion.txt.html#%29" class="d">)</a>
	<a href="cmdline.txt.html#%3A" class="d">:</a>  let s:call_count <a href="change.txt.html#%3D" class="d">=</a> <a href="motion.txt.html#0" class="d">0</a>
	<a href="vimeval.txt.html#%3Aendif" class="d">:endif</a>
	<a href="vimeval.txt.html#%3Alet" class="d">:let</a> s:call_count <a href="change.txt.html#%3D" class="d">=</a> s:call_count <a href="motion.txt.html#%2B" class="d">+</a> 1
	<a href="vimeval.txt.html#%3Aecho" class="d">:echo</a> "called" s:call_count "times"

The "<a href="vimfn.txt.html#exists%28%29" class="d">exists()</a>" function checks if <a href="insert.txt.html#a" class="d">a</a> variable has already been defined.  Its
argument <a href="motion.txt.html#is" class="d">is</a> the name of the variable you want to check.  Not the variable
itself!  If you would <a href="diff.txt.html#do" class="d">do</a> this: 
<span class="e"></span>
<span class="e">	:if !exists(s:call_count)</span>
<span class="e"></span>
Then the value of s:call_count will be used <a href="motion.txt.html#as" class="d">as</a> the name of the variable that
<a href="vimfn.txt.html#exists%28%29" class="d">exists()</a> checks.  That's not what you want.
   The exclamation <a href="motion.txt.html#mark" class="d">mark</a> <a href="change.txt.html#%21" class="d">!</a> negates <a href="insert.txt.html#a" class="d">a</a> value.  When the value was true, <a href="motion.txt.html#it" class="d">it</a>
becomes false.  When <a href="motion.txt.html#it" class="d">it</a> was false, <a href="motion.txt.html#it" class="d">it</a> becomes true.  You can read <a href="motion.txt.html#it" class="d">it</a> <a href="motion.txt.html#as" class="d">as</a> "not"<a href="repeat.txt.html#." class="d">.</a>
Thus "if !exists()" can be read <a href="motion.txt.html#as" class="d">as</a> "if not <a href="vimfn.txt.html#exists%28%29" class="d">exists()</a>"<a href="repeat.txt.html#." class="d">.</a>
   What Vim calls true <a href="motion.txt.html#is" class="d">is</a> anything that <a href="motion.txt.html#is" class="d">is</a> not zero.  Zero <a href="motion.txt.html#is" class="d">is</a> false.
	<span class="n">Note:</span>
	Vim automatically converts <a href="insert.txt.html#a" class="d">a</a> <a href="vimeval.txt.html#string" class="d">string</a> to <a href="insert.txt.html#a" class="d">a</a> number when <a href="motion.txt.html#it" class="d">it</a> <a href="motion.txt.html#is" class="d">is</a> looking <a href="luaref.txt.html#for" class="d">for</a>
	<a href="insert.txt.html#a" class="d">a</a> number.  When using <a href="insert.txt.html#a" class="d">a</a> <a href="vimeval.txt.html#string" class="d">string</a> that doesn't start with <a href="insert.txt.html#a" class="d">a</a> digit the
	resulting number <a href="motion.txt.html#is" class="d">is</a> zero.  Thus look out <a href="luaref.txt.html#for" class="d">for</a> this: 
<span class="e">		:if "true"</span>
	The "true" will be interpreted <a href="motion.txt.html#as" class="d">as</a> <a href="insert.txt.html#a" class="d">a</a> zero, thus <a href="motion.txt.html#as" class="d">as</a> false!


<span class="c">STRING VARIABLES AND CONSTANTS</span>

So far only numbers were used <a href="luaref.txt.html#for" class="d">for</a> the variable value.  Strings can be used <a href="motion.txt.html#as" class="d">as</a>
well.  Numbers and strings are the basic types of <a href="vimeval.txt.html#variables" class="d">variables</a> that Vim supports.
The type <a href="motion.txt.html#is" class="d">is</a> dynamic, <a href="motion.txt.html#it" class="d">it</a> <a href="motion.txt.html#is" class="d">is</a> set each time when assigning <a href="insert.txt.html#a" class="d">a</a> value to the
variable with "<a href="vimeval.txt.html#%3Alet" class="d">:let</a>"<a href="repeat.txt.html#." class="d">.</a>  More about types in <a href="usr_41.txt.html#41.8" class="l">41.8</a><a href="repeat.txt.html#." class="d">.</a>
   To assign <a href="insert.txt.html#a" class="d">a</a> <a href="vimeval.txt.html#string" class="d">string</a> value to <a href="insert.txt.html#a" class="d">a</a> variable, you need to use <a href="insert.txt.html#a" class="d">a</a> <a href="vimeval.txt.html#string" class="d">string</a> constant.
There are two types of these.  First the <a href="vimeval.txt.html#string" class="d">string</a> in double quotes: 
<span class="e"></span>
<span class="e">	:let name = "peter"</span>
<span class="e">	:echo name</span>
<span class="h">	peter </span>

If you want to include <a href="insert.txt.html#a" class="d">a</a> double <a href="change.txt.html#quote" class="d">quote</a> inside the string, <a href="change.txt.html#put" class="d">put</a> <a href="insert.txt.html#a" class="d">a</a> <a href="intro.txt.html#backslash" class="d">backslash</a> in
front of it: 
<span class="e"></span>
<span class="e">	:let name = "\"peter\""</span>
<span class="e">	:echo name</span>
<span class="h">	"peter" </span>

To avoid the need <a href="luaref.txt.html#for" class="d">for</a> <a href="insert.txt.html#a" class="d">a</a> backslash, you can use <a href="insert.txt.html#a" class="d">a</a> <a href="vimeval.txt.html#string" class="d">string</a> in single quotes: 
<span class="e"></span>
<span class="e">	:let name = '"peter"'</span>
<span class="e">	:echo name</span>
<span class="h">	"peter" </span>

Inside <a href="insert.txt.html#a" class="d">a</a> single-quote <a href="vimeval.txt.html#string" class="d">string</a> all the characters are <a href="motion.txt.html#as" class="d">as</a> they are.  Only the
single <a href="change.txt.html#quote" class="d">quote</a> itself <a href="motion.txt.html#is" class="d">is</a> special: you need to use two to get one.  <a href="insert.txt.html#A" class="d">A</a> <a href="intro.txt.html#backslash" class="d">backslash</a>
<a href="motion.txt.html#is" class="d">is</a> taken literally, thus you can't use <a href="motion.txt.html#it" class="d">it</a> to change the meaning of the
character after it.
   In double-quote strings <a href="motion.txt.html#it" class="d">it</a> <a href="motion.txt.html#is" class="d">is</a> possible to use special characters.  Here are
<a href="insert.txt.html#a" class="d">a</a> few useful ones:

	\t		<a href="motion.txt.html#%3CTab%3E" class="s">&lt;Tab&gt;</a>
	\n		<a href="motion.txt.html#%3CNL%3E" class="s">&lt;NL&gt;</a>, line break
	\r		<a href="motion.txt.html#%3CCR%3E" class="s">&lt;CR&gt;</a>, <a href="intro.txt.html#%3CEnter%3E" class="s">&lt;Enter&gt;</a>
	\e		<a href="intro.txt.html#%3CEsc%3E" class="s">&lt;Esc&gt;</a>
	\b		<a href="motion.txt.html#%3CBS%3E" class="s">&lt;BS&gt;</a>, <a href="intro.txt.html#backspace" class="d">backspace</a>
	\"		"
	\\		\, <a href="intro.txt.html#backslash" class="d">backslash</a>
	\&lt;Esc&gt;		<a href="intro.txt.html#%3CEsc%3E" class="s">&lt;Esc&gt;</a>
	\&lt;C-W&gt;		<a href="index.txt.html#CTRL-W" class="k">CTRL-W</a>

The last two are just examples.  The  "\&lt;name&gt;" form can be used to include
the special key "name"<a href="repeat.txt.html#." class="d">.</a>
   See <a href="vimeval.txt.html#expr-quote" class="l">expr-quote</a> <a href="luaref.txt.html#for" class="d">for</a> the full <a href="vimeval.txt.html#list" class="d">list</a> of special items in <a href="insert.txt.html#a" class="d">a</a> string.

<span class="h">==============================================================================</span>
<span id="41.3" class="t">41.3</span>  	Expressions

Vim has <a href="insert.txt.html#a" class="d">a</a> rich, yet simple way to handle expressions.  You can read the
definition here: <a href="vimeval.txt.html#expression-syntax" class="l">expression-syntax</a><a href="repeat.txt.html#." class="d">.</a>  Here we will show the most common
items.
   The numbers, strings and <a href="vimeval.txt.html#variables" class="d">variables</a> mentioned above are expressions by
themselves.  Thus everywhere an <a href="vimeval.txt.html#expression" class="d">expression</a> <a href="motion.txt.html#is" class="d">is</a> expected, you can use <a href="insert.txt.html#a" class="d">a</a> number,
<a href="vimeval.txt.html#string" class="d">string</a> or variable.  Other basic items in an <a href="vimeval.txt.html#expression" class="d">expression</a> are:

	$NAME		environment variable
	&amp;name		option
	<a href="vimeval.txt.html#%40r" class="d">@r</a>		<a href="intro.txt.html#register" class="d">register</a>

Examples: 
<span class="e"></span>
<span class="e">	:echo "The value of 'tabstop' is" &amp;ts</span>
<span class="e">	:echo "Your home directory is" $HOME</span>
<span class="e">	:if @a &gt; 5</span>
<span class="e"></span>
The &amp;name form can be used to save an option value, set <a href="motion.txt.html#it" class="d">it</a> to <a href="insert.txt.html#a" class="d">a</a> new value,
<a href="diff.txt.html#do" class="d">do</a> something and restore the old value.  Example: 
<span class="e"></span>
<span class="e">	:let save_ic = &amp;ic</span>
<span class="e">	:set noic</span>
<span class="e">	:/The Start/,$delete</span>
<span class="e">	:let &amp;ic = save_ic</span>
<span class="e"></span>
This makes sure the "The Start" <a href="pattern.txt.html#pattern" class="d">pattern</a> <a href="motion.txt.html#is" class="d">is</a> used with the <a href="options.txt.html#%27ignorecase%27" class="o">'ignorecase'</a> option
off.  Still, <a href="motion.txt.html#it" class="d">it</a> keeps the value that the user had set.  (Another way to <a href="diff.txt.html#do" class="d">do</a>
this would be to add "\C" to the pattern, see <a href="pattern.txt.html#%2F%5CC" class="l">/\C</a>.)


<span class="c">MATHEMATICS</span>

It becomes more interesting if we combine these basic items.  Let's start with
mathematics on numbers:

	<a href="insert.txt.html#a" class="d">a</a> <a href="motion.txt.html#%2B" class="d">+</a> <a href="motion.txt.html#b" class="d">b</a>		add
	<a href="insert.txt.html#a" class="d">a</a> <a href="motion.txt.html#-" class="d">-</a> <a href="motion.txt.html#b" class="d">b</a>		subtract
	<a href="insert.txt.html#a" class="d">a</a> * <a href="motion.txt.html#b" class="d">b</a>		multiply
	<a href="insert.txt.html#a" class="d">a</a> <a href="pattern.txt.html#%2F" class="d">/</a> <a href="motion.txt.html#b" class="d">b</a>		divide
	<a href="insert.txt.html#a" class="d">a</a> <a href="motion.txt.html#%25" class="d">%</a> <a href="motion.txt.html#b" class="d">b</a>		modulo

The usual precedence <a href="motion.txt.html#is" class="d">is</a> used.  Example: 
<span class="e"></span>
<span class="e">	:echo 10 + 5 * 2</span>
<span class="h">	20 </span>

Grouping <a href="motion.txt.html#is" class="d">is</a> done with parentheses.  No surprises here.  Example: 
<span class="e"></span>
<span class="e">	:echo (10 + 5) * 2</span>
<span class="h">	30 </span>

Strings can be concatenated with ".." (see <a href="vimeval.txt.html#expr6" class="l">expr6</a>).  Example: 
<span class="e"></span>
<span class="e">	:echo "foo" .. "bar"</span>
<span class="h">	foobar </span>

When the "<a href="vimeval.txt.html#%3Aecho" class="d">:echo</a>" command gets multiple arguments, <a href="motion.txt.html#it" class="d">it</a> separates them with <a href="insert.txt.html#a" class="d">a</a>
space.  In the example the argument <a href="motion.txt.html#is" class="d">is</a> <a href="insert.txt.html#a" class="d">a</a> single expression, thus no <a href="intro.txt.html#space" class="d">space</a> <a href="motion.txt.html#is" class="d">is</a>
inserted.

Borrowed from the <a href="change.txt.html#C" class="d">C</a> language <a href="motion.txt.html#is" class="d">is</a> the conditional expression:

	<a href="insert.txt.html#a" class="d">a</a> <a href="pattern.txt.html#%3F" class="d">?</a> <a href="motion.txt.html#b" class="d">b</a> <a href="cmdline.txt.html#%3A" class="d">:</a> <a href="change.txt.html#c" class="d">c</a>

If "<a href="insert.txt.html#a" class="d">a</a>" evaluates to true "<a href="motion.txt.html#b" class="d">b</a>" <a href="motion.txt.html#is" class="d">is</a> used, otherwise "<a href="change.txt.html#c" class="d">c</a>" <a href="motion.txt.html#is" class="d">is</a> used.  Example: 
<span class="e"></span>
<span class="e">	:let i = 4</span>
<span class="e">	:echo i &gt; 5 ? "i is big" : "i is small"</span>
<span class="h">	i is small </span>

The three parts of the constructs are always evaluated first, thus you could
see <a href="motion.txt.html#it" class="d">it</a> work as:

	(a) <a href="pattern.txt.html#%3F" class="d">?</a> (b) <a href="cmdline.txt.html#%3A" class="d">:</a> (c)

<span class="h">==============================================================================</span>
<span id="41.4" class="t">41.4</span>  	Conditionals

The "<a href="vimeval.txt.html#%3Aif" class="d">:if</a>" commands executes the following statements, until the matching
"<a href="vimeval.txt.html#%3Aendif" class="d">:endif</a>"<a href="motion.txt.html#%2C" class="d">,</a> only when <a href="insert.txt.html#a" class="d">a</a> condition <a href="motion.txt.html#is" class="d">is</a> met.  The generic form is:

	<a href="vimeval.txt.html#%3Aif" class="d">:if</a> <span class="s">{condition}</span>
	   <span class="s">{statements}</span>
	<a href="vimeval.txt.html#%3Aendif" class="d">:endif</a>

Only when the <a href="vimeval.txt.html#expression" class="d">expression</a> <span class="s">{condition}</span> evaluates to true (non-zero) will the
<span class="s">{statements}</span> be executed.  These must still be valid commands.  If they
contain garbage, Vim won't be able to find the "<a href="vimeval.txt.html#%3Aendif" class="d">:endif</a>"<a href="repeat.txt.html#." class="d">.</a>
   You can also use "<a href="vimeval.txt.html#%3Aelse" class="d">:else</a>"<a href="repeat.txt.html#." class="d">.</a>  The generic form <a href="luaref.txt.html#for" class="d">for</a> this is:

	<a href="vimeval.txt.html#%3Aif" class="d">:if</a> <span class="s">{condition}</span>
	   <span class="s">{statements}</span>
	<a href="vimeval.txt.html#%3Aelse" class="d">:else</a>
	   <span class="s">{statements}</span>
	<a href="vimeval.txt.html#%3Aendif" class="d">:endif</a>

The second <span class="s">{statements}</span> <a href="motion.txt.html#is" class="d">is</a> only executed if the first one isn't.
   Finally, there <a href="motion.txt.html#is" class="d">is</a> "<a href="vimeval.txt.html#%3Aelseif" class="d">:elseif</a>"<a href="cmdline.txt.html#%3A" class="d">:</a>

	<a href="vimeval.txt.html#%3Aif" class="d">:if</a> <span class="s">{condition}</span>
	   <span class="s">{statements}</span>
	<a href="vimeval.txt.html#%3Aelseif" class="d">:elseif</a> <span class="s">{condition}</span>
	   <span class="s">{statements}</span>
	<a href="vimeval.txt.html#%3Aendif" class="d">:endif</a>

This works just like using "<a href="vimeval.txt.html#%3Aelse" class="d">:else</a>" and then "if"<a href="motion.txt.html#%2C" class="d">,</a> but without the need <a href="luaref.txt.html#for" class="d">for</a> an
extra "<a href="vimeval.txt.html#%3Aendif" class="d">:endif</a>"<a href="repeat.txt.html#." class="d">.</a>
   <a href="insert.txt.html#A" class="d">A</a> useful example <a href="luaref.txt.html#for" class="d">for</a> your <a href="starting.txt.html#vimrc" class="d">vimrc</a> file <a href="motion.txt.html#is" class="d">is</a> checking the <a href="vim_diff.txt.html#%27term%27" class="o">'term'</a> option and
doing something depending upon its value: 
<span class="e"></span>
<span class="e">	:if &amp;term == "xterm"</span>
<span class="e">	:  " Do stuff for xterm</span>
<span class="e">	:elseif &amp;term == "vt100"</span>
<span class="e">	:  " Do stuff for a vt100 terminal</span>
<span class="e">	:else</span>
<span class="e">	:  " Do something for other terminals</span>
<span class="e">	:endif</span>
<span class="e"></span>
<span class="e"></span>
<span class="c">LOGIC OPERATIONS</span>

We already used some of them in the examples.  These are the most often used
ones:

	<a href="insert.txt.html#a" class="d">a</a> <a href="change.txt.html#%3D%3D" class="d">==</a> <a href="motion.txt.html#b" class="d">b</a>		equal to
	<a href="insert.txt.html#a" class="d">a</a> != <a href="motion.txt.html#b" class="d">b</a>		not equal to
	<a href="insert.txt.html#a" class="d">a</a> <a href="change.txt.html#%3E" class="d">&gt;</a>  <a href="motion.txt.html#b" class="d">b</a>		greater than
	<a href="insert.txt.html#a" class="d">a</a> &gt;= <a href="motion.txt.html#b" class="d">b</a>		greater than or equal to
	<a href="insert.txt.html#a" class="d">a</a> <a href="change.txt.html#%3C" class="d">&lt;</a>  <a href="motion.txt.html#b" class="d">b</a>		<a href="various.txt.html#less" class="d">less</a> than
	<a href="insert.txt.html#a" class="d">a</a> &lt;= <a href="motion.txt.html#b" class="d">b</a>		<a href="various.txt.html#less" class="d">less</a> than or equal to

The result <a href="motion.txt.html#is" class="d">is</a> one if the condition <a href="motion.txt.html#is" class="d">is</a> met and zero otherwise.  An example: 
<span class="e"></span>
<span class="e">	:if v:version &gt;= 700</span>
<span class="e">	:  echo "congratulations"</span>
<span class="e">	:else</span>
<span class="e">	:  echo "you are using an old version, upgrade!"</span>
<span class="e">	:endif</span>
<span class="e"></span>
Here "<a href="vvars.txt.html#v%3Aversion" class="d">v:version</a>" <a href="motion.txt.html#is" class="d">is</a> <a href="insert.txt.html#a" class="d">a</a> variable defined by Vim, which has the value of the Vim
version.  600 <a href="motion.txt.html#is" class="d">is</a> <a href="luaref.txt.html#for" class="d">for</a> version 6.0.  Version 6.1 has the value 601.  This <a href="motion.txt.html#is" class="d">is</a>
very useful to write <a href="insert.txt.html#a" class="d">a</a> <a href="usr_41.txt.html#script" class="d">script</a> that works with multiple versions of Vim.
<a href="vvars.txt.html#v%3Aversion" class="l">v:version</a>

The logic operators work both <a href="luaref.txt.html#for" class="d">for</a> numbers and strings.  When comparing two
strings, the mathematical difference <a href="motion.txt.html#is" class="d">is</a> used.  This compares byte values,
which may not be right <a href="luaref.txt.html#for" class="d">for</a> some languages.
   When comparing <a href="insert.txt.html#a" class="d">a</a> <a href="vimeval.txt.html#string" class="d">string</a> with <a href="insert.txt.html#a" class="d">a</a> number, the <a href="vimeval.txt.html#string" class="d">string</a> <a href="motion.txt.html#is" class="d">is</a> first converted to <a href="insert.txt.html#a" class="d">a</a>
number.  This <a href="motion.txt.html#is" class="d">is</a> <a href="insert.txt.html#a" class="d">a</a> bit tricky, because when <a href="insert.txt.html#a" class="d">a</a> <a href="vimeval.txt.html#string" class="d">string</a> doesn't look like <a href="insert.txt.html#a" class="d">a</a>
number, the number zero <a href="motion.txt.html#is" class="d">is</a> used.  Example: 
<span class="e"></span>
<span class="e">	:if 0 == "one"</span>
<span class="e">	:  echo "yes"</span>
<span class="e">	:endif</span>
<span class="e"></span>
This will echo "yes"<a href="motion.txt.html#%2C" class="d">,</a> because "one" doesn't look like <a href="insert.txt.html#a" class="d">a</a> number, thus <a href="motion.txt.html#it" class="d">it</a> <a href="motion.txt.html#is" class="d">is</a>
converted to the number zero.

For strings there are two more items:

	<a href="insert.txt.html#a" class="d">a</a> =~ <a href="motion.txt.html#b" class="d">b</a>		matches with
	<a href="insert.txt.html#a" class="d">a</a> !~ <a href="motion.txt.html#b" class="d">b</a>		does not match with

The left item "<a href="insert.txt.html#a" class="d">a</a>" <a href="motion.txt.html#is" class="d">is</a> used <a href="motion.txt.html#as" class="d">as</a> <a href="insert.txt.html#a" class="d">a</a> string.  The right item "<a href="motion.txt.html#b" class="d">b</a>" <a href="motion.txt.html#is" class="d">is</a> used <a href="motion.txt.html#as" class="d">as</a> <a href="insert.txt.html#a" class="d">a</a>
pattern, like what's used <a href="luaref.txt.html#for" class="d">for</a> searching.  Example: 
<span class="e"></span>
<span class="e">	:if str =~ " "</span>
<span class="e">	:  echo "str contains a space"</span>
<span class="e">	:endif</span>
<span class="e">	:if str !~ '\.$'</span>
<span class="e">	:  echo "str does not end in a full stop"</span>
<span class="e">	:endif</span>
<span class="e"></span>
Notice the use of <a href="insert.txt.html#a" class="d">a</a> single-quote <a href="vimeval.txt.html#string" class="d">string</a> <a href="luaref.txt.html#for" class="d">for</a> the pattern.  This <a href="motion.txt.html#is" class="d">is</a> useful,
because backslashes would need to be doubled in <a href="insert.txt.html#a" class="d">a</a> double-quote <a href="vimeval.txt.html#string" class="d">string</a> and
patterns tend to contain many backslashes.

The <a href="options.txt.html#%27ignorecase%27" class="o">'ignorecase'</a> option <a href="motion.txt.html#is" class="d">is</a> used when comparing strings.  When you don't want
that, append "<a href="pattern.txt.html#%23" class="d">#</a>" to match <a href="change.txt.html#case" class="d">case</a> and "<a href="pattern.txt.html#%3F" class="d">?</a>" to ignore case.  Thus "==?" compares
two strings to be equal while ignoring case.  And "!~#" checks if <a href="insert.txt.html#a" class="d">a</a> <a href="pattern.txt.html#pattern" class="d">pattern</a>
doesn't match, also checking the <a href="change.txt.html#case" class="d">case</a> of letters.  For the full table see
<a href="vimeval.txt.html#expr-%3D%3D" class="l">expr-==</a><a href="repeat.txt.html#." class="d">.</a>


<span class="c">MORE LOOPING</span>

The "<a href="vimeval.txt.html#%3Awhile" class="d">:while</a>" command was already mentioned.  Two more statements can be used
in between the "<a href="vimeval.txt.html#%3Awhile" class="d">:while</a>" and the "<a href="vimeval.txt.html#%3Aendwhile" class="d">:endwhile</a>"<a href="cmdline.txt.html#%3A" class="d">:</a>

	<a href="vimeval.txt.html#%3Acontinue" class="d">:continue</a>		Jump back to the start of the while loop; the
				loop continues.
	<a href="vimeval.txt.html#%3Abreak" class="d">:break</a>			Jump forward to the "<a href="vimeval.txt.html#%3Aendwhile" class="d">:endwhile</a>"<a href="motion.txt.html#%3B" class="d">;</a> the loop <a href="motion.txt.html#is" class="d">is</a>
				discontinued.

Example: 
<span class="e"></span>
<span class="e">	:while counter &lt; 40</span>
<span class="e">	:  call do_something()</span>
<span class="e">	:  if skip_flag</span>
<span class="e">	:    continue</span>
<span class="e">	:  endif</span>
<span class="e">	:  if finished_flag</span>
<span class="e">	:    break</span>
<span class="e">	:  endif</span>
<span class="e">	:  sleep 50m</span>
<span class="e">	:endwhile</span>
<span class="e"></span>
The "<a href="various.txt.html#%3Asleep" class="d">:sleep</a>" command makes Vim take <a href="insert.txt.html#a" class="d">a</a> nap.  The "50m" specifies fifty
milliseconds.  Another example <a href="motion.txt.html#is" class="d">is</a> "<a href="various.txt.html#%3Asleep" class="d">:sleep</a> 4"<a href="motion.txt.html#%2C" class="d">,</a> which sleeps <a href="luaref.txt.html#for" class="d">for</a> four seconds.

Even more looping can be done with the "<a href="vimeval.txt.html#%3Afor" class="d">:for</a>" command, see below in <a href="usr_41.txt.html#41.8" class="l">41.8</a><a href="repeat.txt.html#." class="d">.</a>

<span class="h">==============================================================================</span>
<span id="41.5" class="t">41.5</span>  	Executing an <a href="vimeval.txt.html#expression" class="d">expression</a>

So far the commands in the <a href="usr_41.txt.html#script" class="d">script</a> were executed by Vim directly.  The
"<a href="vimeval.txt.html#%3Aexecute" class="d">:execute</a>" command allows executing the result of an expression.  This <a href="motion.txt.html#is" class="d">is</a> <a href="insert.txt.html#a" class="d">a</a>
very powerful way to build commands and execute them.
   An example <a href="motion.txt.html#is" class="d">is</a> to jump to <a href="insert.txt.html#a" class="d">a</a> tag, which <a href="motion.txt.html#is" class="d">is</a> contained in <a href="insert.txt.html#a" class="d">a</a> variable: 
<span class="e"></span>
<span class="e">	:execute "tag " .. tag_name</span>
<span class="e"></span>
The ".." <a href="motion.txt.html#is" class="d">is</a> used to concatenate the <a href="vimeval.txt.html#string" class="d">string</a> "<a href="tagsrch.txt.html#tag" class="d">tag</a> " with the value of variable
"tag_name"<a href="repeat.txt.html#." class="d">.</a>  Suppose "tag_name" has the value "get_cmd"<a href="motion.txt.html#%2C" class="d">,</a> then the command that
will be executed is: 
<span class="e"></span>
<span class="e">	:tag get_cmd</span>
<span class="e"></span>
The "<a href="vimeval.txt.html#%3Aexecute" class="d">:execute</a>" command can only execute colon commands.  The "<a href="various.txt.html#%3Anormal" class="d">:normal</a>" command
executes <a href="intro.txt.html#Normal" class="d">Normal</a> mode commands.  However, its argument <a href="motion.txt.html#is" class="d">is</a> not an <a href="vimeval.txt.html#expression" class="d">expression</a> but
the literal command characters.  Example: 
<span class="e"></span>
<span class="e">	:normal gg=G</span>
<span class="e"></span>
This jumps to the first line and formats all lines with the "<a href="change.txt.html#%3D" class="d">=</a>" operator.
   To make "<a href="various.txt.html#%3Anormal" class="d">:normal</a>" work with an expression, combine "<a href="vimeval.txt.html#%3Aexecute" class="d">:execute</a>" with it.
Example: 
<span class="e"></span>
<span class="e">	:execute "normal " .. normal_commands</span>
<span class="e"></span>
The variable "normal_commands" must contain the <a href="intro.txt.html#Normal" class="d">Normal</a> mode commands.
   Make sure that the argument <a href="luaref.txt.html#for" class="d">for</a> "<a href="various.txt.html#%3Anormal" class="d">:normal</a>" <a href="motion.txt.html#is" class="d">is</a> <a href="insert.txt.html#a" class="d">a</a> complete command.  Otherwise
Vim will run into the <a href="intro.txt.html#end" class="d">end</a> of the argument and abort the command.  For example,
if you start <a href="insert.txt.html#Insert" class="d">Insert</a> mode, you must leave <a href="insert.txt.html#Insert" class="d">Insert</a> mode <a href="motion.txt.html#as" class="d">as</a> well.  This works: 
<span class="e"></span>
<span class="e">	:execute "normal Inew text \&lt;Esc&gt;"</span>
<span class="e"></span>
This inserts "new text " in the current line.  Notice the use of the special
key "\&lt;Esc&gt;"<a href="repeat.txt.html#." class="d">.</a>  This avoids having to enter <a href="insert.txt.html#a" class="d">a</a> real <a href="intro.txt.html#%3CEsc%3E" class="s">&lt;Esc&gt;</a> character in your
script.

If you don't want to execute <a href="insert.txt.html#a" class="d">a</a> <a href="vimeval.txt.html#string" class="d">string</a> but evaluate <a href="motion.txt.html#it" class="d">it</a> to get its <a href="vimeval.txt.html#expression" class="d">expression</a>
value, you can use the <a href="vimfn.txt.html#eval%28%29" class="d">eval()</a> function: 
<span class="e"></span>
<span class="e">	:let optname = "path"</span>
<span class="e">	:let optval = eval('&amp;' .. optname)</span>
<span class="e"></span>
<a href="insert.txt.html#A" class="d">A</a> "<a href="change.txt.html#%26" class="d">&amp;</a>" character <a href="motion.txt.html#is" class="d">is</a> prepended to "path"<a href="motion.txt.html#%2C" class="d">,</a> thus the argument to <a href="vimfn.txt.html#eval%28%29" class="d">eval()</a> <a href="motion.txt.html#is" class="d">is</a>
"&amp;path"<a href="repeat.txt.html#." class="d">.</a>  The result will then be the value of the <a href="options.txt.html#%27path%27" class="o">'path'</a> option.
   The same thing can be done with: 
<span class="e">	:exe 'let optval = &amp;' .. optname</span>
<span class="e"></span>
<span class="h">==============================================================================</span>
<span id="41.6" class="t">41.6</span>  	Using <a href="vimeval.txt.html#functions" class="d">functions</a>

Vim defines many <a href="vimeval.txt.html#functions" class="d">functions</a> and provides <a href="insert.txt.html#a" class="d">a</a> large amount of functionality that
way.  <a href="insert.txt.html#A" class="d">A</a> few examples will be given in this section.  You can find the whole
<a href="vimeval.txt.html#list" class="d">list</a> below: <a href="usr_41.txt.html#function-list" class="l">function-list</a><a href="repeat.txt.html#." class="d">.</a>

<a href="insert.txt.html#A" class="d">A</a> function <a href="motion.txt.html#is" class="d">is</a> called with the "<a href="userfunc.txt.html#%3Acall" class="d">:call</a>" command.  The parameters are passed in
between parentheses separated by commas.  Example: 
<span class="e"></span>
<span class="e">	:call search("Date: ", "W")</span>
<span class="e"></span>
This calls the <a href="vimfn.txt.html#search%28%29" class="d">search()</a> function, with arguments "Date: " and "<a href="motion.txt.html#W" class="d">W</a>"<a href="repeat.txt.html#." class="d">.</a>  The
<a href="vimfn.txt.html#search%28%29" class="d">search()</a> function uses its first argument <a href="motion.txt.html#as" class="d">as</a> <a href="insert.txt.html#a" class="d">a</a> search <a href="pattern.txt.html#pattern" class="d">pattern</a> and the second
one <a href="motion.txt.html#as" class="d">as</a> flags.  The "<a href="motion.txt.html#W" class="d">W</a>" flag means the search doesn't wrap around the <a href="intro.txt.html#end" class="d">end</a> of
the file.

<a href="insert.txt.html#A" class="d">A</a> function can be called in an expression.  Example: 
<span class="e"></span>
<span class="e">	:let line = getline(".")</span>
<span class="e">	:let repl = substitute(line, '\a', "*", "g")</span>
<span class="e">	:call setline(".", repl)</span>
<span class="e"></span>
The <a href="vimfn.txt.html#getline%28%29" class="d">getline()</a> function obtains <a href="insert.txt.html#a" class="d">a</a> line from the current buffer.  Its argument
<a href="motion.txt.html#is" class="d">is</a> <a href="insert.txt.html#a" class="d">a</a> specification of the line number.  In this <a href="change.txt.html#case" class="d">case</a> "<a href="repeat.txt.html#." class="d">.</a>" <a href="motion.txt.html#is" class="d">is</a> used, which means
the line where the cursor is.
   The <a href="vimfn.txt.html#substitute%28%29" class="d">substitute()</a> function does something similar to the "<a href="change.txt.html#%3Asubstitute" class="d">:substitute</a>"
command.  The first argument <a href="motion.txt.html#is" class="d">is</a> the <a href="vimeval.txt.html#string" class="d">string</a> on which to perform the
substitution.  The second argument <a href="motion.txt.html#is" class="d">is</a> the pattern, the third the replacement
string.  Finally, the last arguments are the flags.
   The <a href="vimfn.txt.html#setline%28%29" class="d">setline()</a> function sets the line, specified by the first argument, to <a href="insert.txt.html#a" class="d">a</a>
new string, the second argument.  In this example the line under the cursor <a href="motion.txt.html#is" class="d">is</a>
replaced with the result of the substitute().  Thus the effect of the three
statements <a href="motion.txt.html#is" class="d">is</a> equal to: 
<span class="e"></span>
<span class="e">	:substitute/\a/*/g</span>
<span class="e"></span>
Using the <a href="vimeval.txt.html#functions" class="d">functions</a> becomes interesting when you <a href="diff.txt.html#do" class="d">do</a> more work before and
after the <a href="vimfn.txt.html#substitute%28%29" class="d">substitute()</a> call.


<span class="c">FUNCTIONS</span>						<span id="function-list" class="t">function-list</span>

There are many functions.  We will mention them here, grouped by what they are
used for.  You can find an alphabetical <a href="vimeval.txt.html#list" class="d">list</a> here: <a href="vimfn.txt.html#builtin-function-details" class="l">builtin-function-details</a><a href="repeat.txt.html#." class="d">.</a>
Use <a href="tagsrch.txt.html#CTRL-%5D" class="k">CTRL-]</a> on the function name to jump to detailed <a href="helphelp.txt.html#help" class="d">help</a> on it.

<a href="vimeval.txt.html#String" class="d">String</a> manipulation:					<span id="string-functions" class="t">string-functions</span>
	<a href="vimfn.txt.html#nr2char%28%29" class="d">nr2char()</a>		get <a href="insert.txt.html#a" class="d">a</a> character by its number value
	<a href="vimfn.txt.html#list2str%28%29" class="d">list2str()</a>		get <a href="insert.txt.html#a" class="d">a</a> character <a href="vimeval.txt.html#string" class="d">string</a> from <a href="insert.txt.html#a" class="d">a</a> <a href="vimeval.txt.html#list" class="d">list</a> of numbers
	<a href="vimfn.txt.html#char2nr%28%29" class="d">char2nr()</a>		get number value of <a href="insert.txt.html#a" class="d">a</a> character
	<a href="vimfn.txt.html#str2list%28%29" class="d">str2list()</a>		get <a href="vimeval.txt.html#list" class="d">list</a> of numbers from <a href="insert.txt.html#a" class="d">a</a> <a href="vimeval.txt.html#string" class="d">string</a>
	<a href="vimfn.txt.html#str2nr%28%29" class="d">str2nr()</a>		convert <a href="insert.txt.html#a" class="d">a</a> <a href="vimeval.txt.html#string" class="d">string</a> to <a href="insert.txt.html#a" class="d">a</a> <a href="vimeval.txt.html#Number" class="d">Number</a>
	<a href="vimfn.txt.html#str2float%28%29" class="d">str2float()</a>		convert <a href="insert.txt.html#a" class="d">a</a> <a href="vimeval.txt.html#string" class="d">string</a> to <a href="insert.txt.html#a" class="d">a</a> <a href="vimeval.txt.html#Float" class="d">Float</a>
	<a href="vimfn.txt.html#printf%28%29" class="d">printf()</a>		format <a href="insert.txt.html#a" class="d">a</a> <a href="vimeval.txt.html#string" class="d">string</a> according to <a href="motion.txt.html#%25" class="d">%</a> items
	<a href="vimfn.txt.html#escape%28%29" class="d">escape()</a>		<a href="intro.txt.html#escape" class="d">escape</a> characters in <a href="insert.txt.html#a" class="d">a</a> <a href="vimeval.txt.html#string" class="d">string</a> with <a href="insert.txt.html#a" class="d">a</a> '\'
	<a href="vimfn.txt.html#shellescape%28%29" class="d">shellescape()</a>		<a href="intro.txt.html#escape" class="d">escape</a> <a href="insert.txt.html#a" class="d">a</a> <a href="vimeval.txt.html#string" class="d">string</a> <a href="luaref.txt.html#for" class="d">for</a> use with <a href="insert.txt.html#a" class="d">a</a> shell command
	<a href="vimfn.txt.html#fnameescape%28%29" class="d">fnameescape()</a>		<a href="intro.txt.html#escape" class="d">escape</a> <a href="insert.txt.html#a" class="d">a</a> file name <a href="luaref.txt.html#for" class="d">for</a> use with <a href="insert.txt.html#a" class="d">a</a> Vim command
	<a href="vimfn.txt.html#tr%28%29" class="d">tr()</a>			translate characters from one set to another
	<a href="vimfn.txt.html#strtrans%28%29" class="d">strtrans()</a>		translate <a href="insert.txt.html#a" class="d">a</a> <a href="vimeval.txt.html#string" class="d">string</a> to make <a href="motion.txt.html#it" class="d">it</a> printable
	<a href="vimfn.txt.html#keytrans%28%29" class="d">keytrans()</a>		translate internal <a href="intro.txt.html#keycodes" class="d">keycodes</a> to <a href="insert.txt.html#a" class="d">a</a> form that
				can be used by <a href="map.txt.html#%3Amap" class="l">:map</a>
	<a href="vimfn.txt.html#tolower%28%29" class="d">tolower()</a>		turn <a href="insert.txt.html#a" class="d">a</a> <a href="vimeval.txt.html#string" class="d">string</a> to <a href="change.txt.html#lowercase" class="d">lowercase</a>
	<a href="vimfn.txt.html#toupper%28%29" class="d">toupper()</a>		turn <a href="insert.txt.html#a" class="d">a</a> <a href="vimeval.txt.html#string" class="d">string</a> to <a href="change.txt.html#uppercase" class="d">uppercase</a>
	<a href="vimfn.txt.html#charclass%28%29" class="d">charclass()</a>		class of <a href="insert.txt.html#a" class="d">a</a> character
	<a href="vimfn.txt.html#match%28%29" class="d">match()</a>			position where <a href="insert.txt.html#a" class="d">a</a> <a href="pattern.txt.html#pattern" class="d">pattern</a> matches in <a href="insert.txt.html#a" class="d">a</a> <a href="vimeval.txt.html#string" class="d">string</a>
	<a href="vimfn.txt.html#matchbufline%28%29" class="d">matchbufline()</a>		all the matches of <a href="insert.txt.html#a" class="d">a</a> <a href="pattern.txt.html#pattern" class="d">pattern</a> in <a href="insert.txt.html#a" class="d">a</a> buffer
	<a href="vimfn.txt.html#matchend%28%29" class="d">matchend()</a>		position where <a href="insert.txt.html#a" class="d">a</a> <a href="pattern.txt.html#pattern" class="d">pattern</a> match ends in <a href="insert.txt.html#a" class="d">a</a> <a href="vimeval.txt.html#string" class="d">string</a>
	<a href="vimfn.txt.html#matchfuzzy%28%29" class="d">matchfuzzy()</a>		fuzzy matches <a href="insert.txt.html#a" class="d">a</a> <a href="vimeval.txt.html#string" class="d">string</a> in <a href="insert.txt.html#a" class="d">a</a> <a href="vimeval.txt.html#list" class="d">list</a> of strings
	<a href="vimfn.txt.html#matchfuzzypos%28%29" class="d">matchfuzzypos()</a>		fuzzy matches <a href="insert.txt.html#a" class="d">a</a> <a href="vimeval.txt.html#string" class="d">string</a> in <a href="insert.txt.html#a" class="d">a</a> <a href="vimeval.txt.html#list" class="d">list</a> of strings
	<a href="vimfn.txt.html#matchstr%28%29" class="d">matchstr()</a>		match of <a href="insert.txt.html#a" class="d">a</a> <a href="pattern.txt.html#pattern" class="d">pattern</a> in <a href="insert.txt.html#a" class="d">a</a> <a href="vimeval.txt.html#string" class="d">string</a>
	<a href="vimfn.txt.html#matchstrlist%28%29" class="d">matchstrlist()</a>		all the matches of <a href="insert.txt.html#a" class="d">a</a> <a href="pattern.txt.html#pattern" class="d">pattern</a> in <a href="insert.txt.html#a" class="d">a</a> <a href="vimeval.txt.html#List" class="d">List</a> of
				strings
	<a href="vimfn.txt.html#matchstrpos%28%29" class="d">matchstrpos()</a>		match and positions of <a href="insert.txt.html#a" class="d">a</a> <a href="pattern.txt.html#pattern" class="d">pattern</a> in <a href="insert.txt.html#a" class="d">a</a> <a href="vimeval.txt.html#string" class="d">string</a>
	<a href="vimfn.txt.html#matchlist%28%29" class="d">matchlist()</a>		like <a href="vimfn.txt.html#matchstr%28%29" class="d">matchstr()</a> and also return submatches
	<a href="vimfn.txt.html#stridx%28%29" class="d">stridx()</a>		first <a href="index.txt.html#index" class="d">index</a> of <a href="insert.txt.html#a" class="d">a</a> short <a href="vimeval.txt.html#string" class="d">string</a> in <a href="insert.txt.html#a" class="d">a</a> long <a href="vimeval.txt.html#string" class="d">string</a>
	<a href="vimfn.txt.html#strridx%28%29" class="d">strridx()</a>		last <a href="index.txt.html#index" class="d">index</a> of <a href="insert.txt.html#a" class="d">a</a> short <a href="vimeval.txt.html#string" class="d">string</a> in <a href="insert.txt.html#a" class="d">a</a> long <a href="vimeval.txt.html#string" class="d">string</a>
	<a href="vimfn.txt.html#strlen%28%29" class="d">strlen()</a>		length of <a href="insert.txt.html#a" class="d">a</a> <a href="vimeval.txt.html#string" class="d">string</a> in bytes
	<a href="vimfn.txt.html#strcharlen%28%29" class="d">strcharlen()</a>		length of <a href="insert.txt.html#a" class="d">a</a> <a href="vimeval.txt.html#string" class="d">string</a> in characters
	<a href="vimfn.txt.html#strchars%28%29" class="d">strchars()</a>		number of characters in <a href="insert.txt.html#a" class="d">a</a> <a href="vimeval.txt.html#string" class="d">string</a>
	<a href="vimfn.txt.html#strutf16len%28%29" class="d">strutf16len()</a>		number of UTF-16 code units in <a href="insert.txt.html#a" class="d">a</a> <a href="vimeval.txt.html#string" class="d">string</a>
	<a href="vimfn.txt.html#strwidth%28%29" class="d">strwidth()</a>		size of <a href="vimeval.txt.html#string" class="d">string</a> when displayed
	<a href="vimfn.txt.html#strdisplaywidth%28%29" class="d">strdisplaywidth()</a>	size of <a href="vimeval.txt.html#string" class="d">string</a> when displayed, deals with tabs
	<a href="vimfn.txt.html#setcellwidths%28%29" class="d">setcellwidths()</a>		set character cell width overrides
	<a href="vimfn.txt.html#getcellwidths%28%29" class="d">getcellwidths()</a>		get character cell width overrides
	<a href="vimfn.txt.html#reverse%28%29" class="d">reverse()</a>		reverse the order of characters in <a href="insert.txt.html#a" class="d">a</a> <a href="vimeval.txt.html#string" class="d">string</a>
	<a href="vimfn.txt.html#substitute%28%29" class="d">substitute()</a>		substitute <a href="insert.txt.html#a" class="d">a</a> <a href="pattern.txt.html#pattern" class="d">pattern</a> match with <a href="insert.txt.html#a" class="d">a</a> <a href="vimeval.txt.html#string" class="d">string</a>
	<a href="vimfn.txt.html#submatch%28%29" class="d">submatch()</a>		get <a href="insert.txt.html#a" class="d">a</a> specific match in "<a href="change.txt.html#%3As" class="d">:s</a>" and <a href="vimfn.txt.html#substitute%28%29" class="d">substitute()</a>
	<a href="vimfn.txt.html#strpart%28%29" class="d">strpart()</a>		get part of <a href="insert.txt.html#a" class="d">a</a> <a href="vimeval.txt.html#string" class="d">string</a> using byte <a href="index.txt.html#index" class="d">index</a>
	<a href="vimfn.txt.html#strcharpart%28%29" class="d">strcharpart()</a>		get part of <a href="insert.txt.html#a" class="d">a</a> <a href="vimeval.txt.html#string" class="d">string</a> using char <a href="index.txt.html#index" class="d">index</a>
	<a href="vimfn.txt.html#slice%28%29" class="d">slice()</a>			take <a href="insert.txt.html#a" class="d">a</a> <a href="vimeval.txt.html#slice" class="d">slice</a> of <a href="insert.txt.html#a" class="d">a</a> string, using char <a href="index.txt.html#index" class="d">index</a> in
				Vim9 <a href="usr_41.txt.html#script" class="d">script</a>
	<a href="vimfn.txt.html#strgetchar%28%29" class="d">strgetchar()</a>		get character from <a href="insert.txt.html#a" class="d">a</a> <a href="vimeval.txt.html#string" class="d">string</a> using char <a href="index.txt.html#index" class="d">index</a>
	<a href="vimfn.txt.html#expand%28%29" class="d">expand()</a>		expand special keywords
	<a href="vimfn.txt.html#expandcmd%28%29" class="d">expandcmd()</a>		expand <a href="insert.txt.html#a" class="d">a</a> command like done <a href="luaref.txt.html#for" class="d">for</a> <span class="e">:edit</span>
	<a href="vimfn.txt.html#iconv%28%29" class="d">iconv()</a>			convert text from one encoding to another
	<a href="vimfn.txt.html#byteidx%28%29" class="d">byteidx()</a>		byte <a href="index.txt.html#index" class="d">index</a> of <a href="insert.txt.html#a" class="d">a</a> character in <a href="insert.txt.html#a" class="d">a</a> <a href="vimeval.txt.html#string" class="d">string</a>
	<a href="vimfn.txt.html#byteidxcomp%28%29" class="d">byteidxcomp()</a>		like <a href="vimfn.txt.html#byteidx%28%29" class="d">byteidx()</a> but <a href="intro.txt.html#count" class="d">count</a> composing characters
	<a href="vimfn.txt.html#charidx%28%29" class="d">charidx()</a>		character <a href="index.txt.html#index" class="d">index</a> of <a href="insert.txt.html#a" class="d">a</a> byte in <a href="insert.txt.html#a" class="d">a</a> <a href="vimeval.txt.html#string" class="d">string</a>
	<a href="vimfn.txt.html#utf16idx%28%29" class="d">utf16idx()</a>		UTF-16 <a href="index.txt.html#index" class="d">index</a> of <a href="insert.txt.html#a" class="d">a</a> byte in <a href="insert.txt.html#a" class="d">a</a> <a href="vimeval.txt.html#string" class="d">string</a>
	<a href="vimfn.txt.html#repeat%28%29" class="d">repeat()</a>		repeat <a href="insert.txt.html#a" class="d">a</a> <a href="vimeval.txt.html#string" class="d">string</a> multiple times
	<a href="vimfn.txt.html#eval%28%29" class="d">eval()</a>			evaluate <a href="insert.txt.html#a" class="d">a</a> <a href="vimeval.txt.html#string" class="d">string</a> <a href="vimeval.txt.html#expression" class="d">expression</a>
	<a href="vimfn.txt.html#execute%28%29" class="d">execute()</a>		execute an <a href="intro.txt.html#Ex" class="d">Ex</a> command and get the output
	<a href="vimfn.txt.html#win_execute%28%29" class="d">win_execute()</a>		like <a href="vimfn.txt.html#execute%28%29" class="d">execute()</a> but in <a href="insert.txt.html#a" class="d">a</a> specified <a href="windows.txt.html#window" class="d">window</a>
	<a href="vimfn.txt.html#trim%28%29" class="d">trim()</a>			trim characters from <a href="insert.txt.html#a" class="d">a</a> <a href="vimeval.txt.html#string" class="d">string</a>
	<a href="vimfn.txt.html#gettext%28%29" class="d">gettext()</a>		lookup message translation

<a href="vimeval.txt.html#List" class="d">List</a> manipulation:					<span id="list-functions" class="t">list-functions</span>
	<a href="vimfn.txt.html#get%28%29" class="d">get()</a>			get an item without error <a href="luaref.txt.html#for" class="d">for</a> wrong <a href="index.txt.html#index" class="d">index</a>
	<a href="vimfn.txt.html#len%28%29" class="d">len()</a>			number of items in <a href="insert.txt.html#a" class="d">a</a> <a href="vimeval.txt.html#List" class="d">List</a>
	<a href="vimfn.txt.html#empty%28%29" class="d">empty()</a>			check if <a href="vimeval.txt.html#List" class="d">List</a> <a href="motion.txt.html#is" class="d">is</a> empty
	<a href="vimfn.txt.html#insert%28%29" class="d">insert()</a>		<a href="insert.txt.html#insert" class="d">insert</a> an item somewhere in <a href="insert.txt.html#a" class="d">a</a> <a href="vimeval.txt.html#List" class="d">List</a>
	<a href="vimfn.txt.html#add%28%29" class="d">add()</a>			append an item to <a href="insert.txt.html#a" class="d">a</a> <a href="vimeval.txt.html#List" class="d">List</a>
	<a href="vimfn.txt.html#extend%28%29" class="d">extend()</a>		append <a href="insert.txt.html#a" class="d">a</a> <a href="vimeval.txt.html#List" class="d">List</a> to <a href="insert.txt.html#a" class="d">a</a> <a href="vimeval.txt.html#List" class="d">List</a>
	<a href="vimfn.txt.html#extendnew%28%29" class="d">extendnew()</a>		make <a href="insert.txt.html#a" class="d">a</a> new <a href="vimeval.txt.html#List" class="d">List</a> and append items
	<a href="vimfn.txt.html#remove%28%29" class="d">remove()</a>		remove one or more items from <a href="insert.txt.html#a" class="d">a</a> <a href="vimeval.txt.html#List" class="d">List</a>
	<a href="vimfn.txt.html#copy%28%29" class="d">copy()</a>			make <a href="insert.txt.html#a" class="d">a</a> shallow copy of <a href="insert.txt.html#a" class="d">a</a> <a href="vimeval.txt.html#List" class="d">List</a>
	<a href="vimfn.txt.html#deepcopy%28%29" class="d">deepcopy()</a>		make <a href="insert.txt.html#a" class="d">a</a> full copy of <a href="insert.txt.html#a" class="d">a</a> <a href="vimeval.txt.html#List" class="d">List</a>
	<a href="vimfn.txt.html#filter%28%29" class="d">filter()</a>		remove selected items from <a href="insert.txt.html#a" class="d">a</a> <a href="vimeval.txt.html#List" class="d">List</a>
	<a href="vimfn.txt.html#map%28%29" class="d">map()</a>			change each <a href="vimeval.txt.html#List" class="d">List</a> item
	<a href="vimfn.txt.html#mapnew%28%29" class="d">mapnew()</a>		make <a href="insert.txt.html#a" class="d">a</a> new <a href="vimeval.txt.html#List" class="d">List</a> with changed items
	<a href="vimfn.txt.html#foreach%28%29" class="d">foreach()</a>		apply function to <a href="vimeval.txt.html#List" class="d">List</a> items
	<a href="vimfn.txt.html#reduce%28%29" class="d">reduce()</a>		reduce <a href="insert.txt.html#a" class="d">a</a> <a href="vimeval.txt.html#List" class="d">List</a> to <a href="insert.txt.html#a" class="d">a</a> value
	<a href="vimfn.txt.html#slice%28%29" class="d">slice()</a>			take <a href="insert.txt.html#a" class="d">a</a> <a href="vimeval.txt.html#slice" class="d">slice</a> of <a href="insert.txt.html#a" class="d">a</a> <a href="vimeval.txt.html#List" class="d">List</a>
	<a href="vimfn.txt.html#sort%28%29" class="d">sort()</a>			sort <a href="insert.txt.html#a" class="d">a</a> <a href="vimeval.txt.html#List" class="d">List</a>
	<a href="vimfn.txt.html#reverse%28%29" class="d">reverse()</a>		reverse the order of items in <a href="insert.txt.html#a" class="d">a</a> <a href="vimeval.txt.html#List" class="d">List</a>
	<a href="vimfn.txt.html#uniq%28%29" class="d">uniq()</a>			remove copies of repeated adjacent items
	<a href="vimfn.txt.html#split%28%29" class="d">split()</a>			split <a href="insert.txt.html#a" class="d">a</a> <a href="vimeval.txt.html#String" class="d">String</a> into <a href="insert.txt.html#a" class="d">a</a> <a href="vimeval.txt.html#List" class="d">List</a>
	<a href="vimfn.txt.html#join%28%29" class="d">join()</a>			join <a href="vimeval.txt.html#List" class="d">List</a> items into <a href="insert.txt.html#a" class="d">a</a> <a href="vimeval.txt.html#String" class="d">String</a>
	<a href="vimfn.txt.html#range%28%29" class="d">range()</a>			return <a href="insert.txt.html#a" class="d">a</a> <a href="vimeval.txt.html#List" class="d">List</a> with <a href="insert.txt.html#a" class="d">a</a> sequence of numbers
	<a href="vimfn.txt.html#string%28%29" class="d">string()</a>		<a href="vimeval.txt.html#String" class="d">String</a> representation of <a href="insert.txt.html#a" class="d">a</a> <a href="vimeval.txt.html#List" class="d">List</a>
	<a href="vimfn.txt.html#call%28%29" class="d">call()</a>			call <a href="insert.txt.html#a" class="d">a</a> function with <a href="vimeval.txt.html#List" class="d">List</a> <a href="motion.txt.html#as" class="d">as</a> arguments
	<a href="vimfn.txt.html#index%28%29" class="d">index()</a>			<a href="index.txt.html#index" class="d">index</a> of <a href="insert.txt.html#a" class="d">a</a> value in <a href="insert.txt.html#a" class="d">a</a> <a href="vimeval.txt.html#List" class="d">List</a> or <a href="vimeval.txt.html#Blob" class="d">Blob</a>
	<a href="vimfn.txt.html#indexof%28%29" class="d">indexof()</a>		<a href="index.txt.html#index" class="d">index</a> in <a href="insert.txt.html#a" class="d">a</a> <a href="vimeval.txt.html#List" class="d">List</a> or <a href="vimeval.txt.html#Blob" class="d">Blob</a> where an <a href="vimeval.txt.html#expression" class="d">expression</a>
				evaluates to true
	<a href="vimfn.txt.html#max%28%29" class="d">max()</a>			maximum value in <a href="insert.txt.html#a" class="d">a</a> <a href="vimeval.txt.html#List" class="d">List</a>
	<a href="vimfn.txt.html#min%28%29" class="d">min()</a>			minimum value in <a href="insert.txt.html#a" class="d">a</a> <a href="vimeval.txt.html#List" class="d">List</a>
	<a href="vimfn.txt.html#count%28%29" class="d">count()</a>			<a href="intro.txt.html#count" class="d">count</a> number of times <a href="insert.txt.html#a" class="d">a</a> value appears in <a href="insert.txt.html#a" class="d">a</a> <a href="vimeval.txt.html#List" class="d">List</a>
	<a href="vimfn.txt.html#repeat%28%29" class="d">repeat()</a>		repeat <a href="insert.txt.html#a" class="d">a</a> <a href="vimeval.txt.html#List" class="d">List</a> multiple times
	<a href="vimfn.txt.html#flatten%28%29" class="d">flatten()</a>		flatten <a href="insert.txt.html#a" class="d">a</a> <a href="vimeval.txt.html#List" class="d">List</a>
	<a href="vimfn.txt.html#flattennew%28%29" class="d">flattennew()</a>		flatten <a href="insert.txt.html#a" class="d">a</a> copy of <a href="insert.txt.html#a" class="d">a</a> <a href="vimeval.txt.html#List" class="d">List</a>

<a href="vimeval.txt.html#Dictionary" class="d">Dictionary</a> manipulation:				<span id="dict-functions" class="t">dict-functions</span>
	<a href="vimfn.txt.html#get%28%29" class="d">get()</a>			get an entry without an error <a href="luaref.txt.html#for" class="d">for</a> <a href="insert.txt.html#a" class="d">a</a> wrong key
	<a href="vimfn.txt.html#len%28%29" class="d">len()</a>			number of entries in <a href="insert.txt.html#a" class="d">a</a> <a href="vimeval.txt.html#Dictionary" class="d">Dictionary</a>
	<a href="vimfn.txt.html#has_key%28%29" class="d">has_key()</a>		check whether <a href="insert.txt.html#a" class="d">a</a> key appears in <a href="insert.txt.html#a" class="d">a</a> <a href="vimeval.txt.html#Dictionary" class="d">Dictionary</a>
	<a href="vimfn.txt.html#empty%28%29" class="d">empty()</a>			check if <a href="vimeval.txt.html#Dictionary" class="d">Dictionary</a> <a href="motion.txt.html#is" class="d">is</a> empty
	<a href="vimfn.txt.html#remove%28%29" class="d">remove()</a>		remove an entry from <a href="insert.txt.html#a" class="d">a</a> <a href="vimeval.txt.html#Dictionary" class="d">Dictionary</a>
	<a href="vimfn.txt.html#extend%28%29" class="d">extend()</a>		add entries from one <a href="vimeval.txt.html#Dictionary" class="d">Dictionary</a> to another
	<a href="vimfn.txt.html#extendnew%28%29" class="d">extendnew()</a>		make <a href="insert.txt.html#a" class="d">a</a> new <a href="vimeval.txt.html#Dictionary" class="d">Dictionary</a> and append items
	<a href="vimfn.txt.html#filter%28%29" class="d">filter()</a>		remove selected entries from <a href="insert.txt.html#a" class="d">a</a> <a href="vimeval.txt.html#Dictionary" class="d">Dictionary</a>
	<a href="vimfn.txt.html#map%28%29" class="d">map()</a>			change each <a href="vimeval.txt.html#Dictionary" class="d">Dictionary</a> entry
	<a href="vimfn.txt.html#mapnew%28%29" class="d">mapnew()</a>		make <a href="insert.txt.html#a" class="d">a</a> new <a href="vimeval.txt.html#Dictionary" class="d">Dictionary</a> with changed items
	<a href="vimfn.txt.html#foreach%28%29" class="d">foreach()</a>		apply function to <a href="vimeval.txt.html#Dictionary" class="d">Dictionary</a> items
	<a href="vimfn.txt.html#keys%28%29" class="d">keys()</a>			get <a href="vimeval.txt.html#List" class="d">List</a> of <a href="vimeval.txt.html#Dictionary" class="d">Dictionary</a> keys
	<a href="vimfn.txt.html#values%28%29" class="d">values()</a>		get <a href="vimeval.txt.html#List" class="d">List</a> of <a href="vimeval.txt.html#Dictionary" class="d">Dictionary</a> values
	<a href="vimfn.txt.html#items%28%29" class="d">items()</a>			get <a href="vimeval.txt.html#List" class="d">List</a> of <a href="vimeval.txt.html#Dictionary" class="d">Dictionary</a> key-value pairs
	<a href="vimfn.txt.html#copy%28%29" class="d">copy()</a>			make <a href="insert.txt.html#a" class="d">a</a> shallow copy of <a href="insert.txt.html#a" class="d">a</a> <a href="vimeval.txt.html#Dictionary" class="d">Dictionary</a>
	<a href="vimfn.txt.html#deepcopy%28%29" class="d">deepcopy()</a>		make <a href="insert.txt.html#a" class="d">a</a> full copy of <a href="insert.txt.html#a" class="d">a</a> <a href="vimeval.txt.html#Dictionary" class="d">Dictionary</a>
	<a href="vimfn.txt.html#string%28%29" class="d">string()</a>		<a href="vimeval.txt.html#String" class="d">String</a> representation of <a href="insert.txt.html#a" class="d">a</a> <a href="vimeval.txt.html#Dictionary" class="d">Dictionary</a>
	<a href="vimfn.txt.html#max%28%29" class="d">max()</a>			maximum value in <a href="insert.txt.html#a" class="d">a</a> <a href="vimeval.txt.html#Dictionary" class="d">Dictionary</a>
	<a href="vimfn.txt.html#min%28%29" class="d">min()</a>			minimum value in <a href="insert.txt.html#a" class="d">a</a> <a href="vimeval.txt.html#Dictionary" class="d">Dictionary</a>
	<a href="vimfn.txt.html#count%28%29" class="d">count()</a>			<a href="intro.txt.html#count" class="d">count</a> number of times <a href="insert.txt.html#a" class="d">a</a> value appears

Floating point computation:				<span id="float-functions" class="t">float-functions</span>
	<a href="vimfn.txt.html#float2nr%28%29" class="d">float2nr()</a>		convert <a href="vimeval.txt.html#Float" class="d">Float</a> to <a href="vimeval.txt.html#Number" class="d">Number</a>
	<a href="vimfn.txt.html#abs%28%29" class="d">abs()</a>			absolute value (also works <a href="luaref.txt.html#for" class="d">for</a> Number)
	<a href="vimfn.txt.html#round%28%29" class="d">round()</a>			round off
	<a href="vimfn.txt.html#ceil%28%29" class="d">ceil()</a>			round up
	<a href="vimfn.txt.html#floor%28%29" class="d">floor()</a>			round down
	<a href="vimfn.txt.html#trunc%28%29" class="d">trunc()</a>			remove value after decimal point
	<a href="vimfn.txt.html#fmod%28%29" class="d">fmod()</a>			remainder of division
	<a href="vimfn.txt.html#exp%28%29" class="d">exp()</a>			exponential
	<a href="vimfn.txt.html#log%28%29" class="d">log()</a>			natural logarithm (logarithm to base e)
	<a href="vimfn.txt.html#log10%28%29" class="d">log10()</a>			logarithm to base 10
	<a href="vimfn.txt.html#pow%28%29" class="d">pow()</a>			value of <a href="change.txt.html#x" class="d">x</a> to the exponent <a href="change.txt.html#y" class="d">y</a>
	<a href="vimfn.txt.html#sqrt%28%29" class="d">sqrt()</a>			square root
	<a href="vimfn.txt.html#sin%28%29" class="d">sin()</a>			sine
	<a href="vimfn.txt.html#cos%28%29" class="d">cos()</a>			cosine
	<a href="vimfn.txt.html#tan%28%29" class="d">tan()</a>			tangent
	<a href="vimfn.txt.html#asin%28%29" class="d">asin()</a>			arc sine
	<a href="vimfn.txt.html#acos%28%29" class="d">acos()</a>			arc cosine
	<a href="vimfn.txt.html#atan%28%29" class="d">atan()</a>			arc tangent
	<a href="vimfn.txt.html#atan2%28%29" class="d">atan2()</a>			arc tangent
	<a href="vimfn.txt.html#sinh%28%29" class="d">sinh()</a>			hyperbolic sine
	<a href="vimfn.txt.html#cosh%28%29" class="d">cosh()</a>			hyperbolic cosine
	<a href="vimfn.txt.html#tanh%28%29" class="d">tanh()</a>			hyperbolic tangent
	<a href="vimfn.txt.html#isinf%28%29" class="d">isinf()</a>			check <a href="luaref.txt.html#for" class="d">for</a> infinity
	<a href="vimfn.txt.html#isnan%28%29" class="d">isnan()</a>			check <a href="luaref.txt.html#for" class="d">for</a> not <a href="insert.txt.html#a" class="d">a</a> number

<a href="vimeval.txt.html#Blob" class="d">Blob</a> manipulation:					<span id="blob-functions" class="t">blob-functions</span>
	<a href="vimfn.txt.html#blob2list%28%29" class="d">blob2list()</a>		get <a href="insert.txt.html#a" class="d">a</a> <a href="vimeval.txt.html#list" class="d">list</a> of numbers from <a href="insert.txt.html#a" class="d">a</a> <a href="vimeval.txt.html#blob" class="d">blob</a>
	<a href="vimfn.txt.html#list2blob%28%29" class="d">list2blob()</a>		get <a href="insert.txt.html#a" class="d">a</a> <a href="vimeval.txt.html#blob" class="d">blob</a> from <a href="insert.txt.html#a" class="d">a</a> <a href="vimeval.txt.html#list" class="d">list</a> of numbers
	<a href="vimfn.txt.html#reverse%28%29" class="d">reverse()</a>		reverse the order of numbers in <a href="insert.txt.html#a" class="d">a</a> <a href="vimeval.txt.html#blob" class="d">blob</a>

Other computation:					<span id="bitwise-function" class="t">bitwise-function</span>
	<a href="vimfn.txt.html#and%28%29" class="d">and()</a>			bitwise AND
	<a href="vimfn.txt.html#invert%28%29" class="d">invert()</a>		bitwise invert
	<a href="vimfn.txt.html#or%28%29" class="d">or()</a>			bitwise OR
	<a href="vimfn.txt.html#xor%28%29" class="d">xor()</a>			bitwise XOR
	<a href="vimfn.txt.html#sha256%28%29" class="d">sha256()</a>		SHA-256 hash
	<a href="vimfn.txt.html#rand%28%29" class="d">rand()</a>			get <a href="insert.txt.html#a" class="d">a</a> pseudo-random number
	<a href="vimfn.txt.html#srand%28%29" class="d">srand()</a>			initialize seed used by <a href="vimfn.txt.html#rand%28%29" class="d">rand()</a>

Variables:						<span id="var-functions" class="t">var-functions</span>
	<a href="vimfn.txt.html#type%28%29" class="d">type()</a>			type of <a href="insert.txt.html#a" class="d">a</a> variable
	<a href="vimfn.txt.html#islocked%28%29" class="d">islocked()</a>		check if <a href="insert.txt.html#a" class="d">a</a> variable <a href="motion.txt.html#is" class="d">is</a> locked
	<a href="vimfn.txt.html#funcref%28%29" class="d">funcref()</a>		get <a href="insert.txt.html#a" class="d">a</a> <a href="vimeval.txt.html#Funcref" class="d">Funcref</a> <a href="luaref.txt.html#for" class="d">for</a> <a href="insert.txt.html#a" class="d">a</a> function <a href="intro.txt.html#reference" class="d">reference</a>
	<a href="vimfn.txt.html#function%28%29" class="d">function()</a>		get <a href="insert.txt.html#a" class="d">a</a> <a href="vimeval.txt.html#Funcref" class="d">Funcref</a> <a href="luaref.txt.html#for" class="d">for</a> <a href="insert.txt.html#a" class="d">a</a> function name
	<a href="vimfn.txt.html#getbufvar%28%29" class="d">getbufvar()</a>		get <a href="insert.txt.html#a" class="d">a</a> variable value from <a href="insert.txt.html#a" class="d">a</a> specific buffer
	<a href="vimfn.txt.html#setbufvar%28%29" class="d">setbufvar()</a>		set <a href="insert.txt.html#a" class="d">a</a> variable in <a href="insert.txt.html#a" class="d">a</a> specific buffer
	<a href="vimfn.txt.html#getwinvar%28%29" class="d">getwinvar()</a>		get <a href="insert.txt.html#a" class="d">a</a> variable from specific <a href="windows.txt.html#window" class="d">window</a>
	<a href="vimfn.txt.html#gettabvar%28%29" class="d">gettabvar()</a>		get <a href="insert.txt.html#a" class="d">a</a> variable from specific <a href="intro.txt.html#tab" class="d">tab</a> page
	<a href="vimfn.txt.html#gettabwinvar%28%29" class="d">gettabwinvar()</a>		get <a href="insert.txt.html#a" class="d">a</a> variable from specific <a href="windows.txt.html#window" class="d">window</a> <a href="change.txt.html#%26" class="d">&amp;</a> <a href="intro.txt.html#tab" class="d">tab</a> page
	<a href="vimfn.txt.html#setwinvar%28%29" class="d">setwinvar()</a>		set <a href="insert.txt.html#a" class="d">a</a> variable in <a href="insert.txt.html#a" class="d">a</a> specific <a href="windows.txt.html#window" class="d">window</a>
	<a href="vimfn.txt.html#settabvar%28%29" class="d">settabvar()</a>		set <a href="insert.txt.html#a" class="d">a</a> variable in <a href="insert.txt.html#a" class="d">a</a> specific <a href="intro.txt.html#tab" class="d">tab</a> page
	<a href="vimfn.txt.html#settabwinvar%28%29" class="d">settabwinvar()</a>		set <a href="insert.txt.html#a" class="d">a</a> variable in <a href="insert.txt.html#a" class="d">a</a> specific <a href="windows.txt.html#window" class="d">window</a> <a href="change.txt.html#%26" class="d">&amp;</a> <a href="intro.txt.html#tab" class="d">tab</a> page
	<a href="vimfn.txt.html#garbagecollect%28%29" class="d">garbagecollect()</a>	possibly free memory

Cursor and <a href="motion.txt.html#mark" class="d">mark</a> position:		<span id="cursor-functions" class="t">cursor-functions</span> <span id="mark-functions" class="t">mark-functions</span>
	<a href="vimfn.txt.html#col%28%29" class="d">col()</a>			column number of the cursor or <a href="insert.txt.html#a" class="d">a</a> <a href="motion.txt.html#mark" class="d">mark</a>
	<a href="vimfn.txt.html#virtcol%28%29" class="d">virtcol()</a>		screen column of the cursor or <a href="insert.txt.html#a" class="d">a</a> <a href="motion.txt.html#mark" class="d">mark</a>
	<a href="vimfn.txt.html#line%28%29" class="d">line()</a>			line number of the cursor or <a href="motion.txt.html#mark" class="d">mark</a>
	<a href="vimfn.txt.html#wincol%28%29" class="d">wincol()</a>		<a href="windows.txt.html#window" class="d">window</a> column number of the cursor
	<a href="vimfn.txt.html#winline%28%29" class="d">winline()</a>		<a href="windows.txt.html#window" class="d">window</a> line number of the cursor
	<a href="vimfn.txt.html#cursor%28%29" class="d">cursor()</a>		position the cursor <a href="motion.txt.html#at" class="d">at</a> <a href="insert.txt.html#a" class="d">a</a> line/column
	<a href="vimfn.txt.html#screencol%28%29" class="d">screencol()</a>		get screen column of the cursor
	<a href="vimfn.txt.html#screenrow%28%29" class="d">screenrow()</a>		get screen row of the cursor
	<a href="vimfn.txt.html#screenpos%28%29" class="d">screenpos()</a>		screen row and col of <a href="insert.txt.html#a" class="d">a</a> text character
	<a href="vimfn.txt.html#virtcol2col%28%29" class="d">virtcol2col()</a>		byte <a href="index.txt.html#index" class="d">index</a> of <a href="insert.txt.html#a" class="d">a</a> text character on screen
	<a href="vimfn.txt.html#getcurpos%28%29" class="d">getcurpos()</a>		get position of the cursor
	<a href="vimfn.txt.html#getpos%28%29" class="d">getpos()</a>		get position of cursor, mark, etc.
	<a href="vimfn.txt.html#setpos%28%29" class="d">setpos()</a>		set position of cursor, mark, etc.
	<a href="vimfn.txt.html#getmarklist%28%29" class="d">getmarklist()</a>		<a href="vimeval.txt.html#list" class="d">list</a> of global/local marks
	<a href="vimfn.txt.html#byte2line%28%29" class="d">byte2line()</a>		get line number <a href="motion.txt.html#at" class="d">at</a> <a href="insert.txt.html#a" class="d">a</a> specific byte <a href="intro.txt.html#count" class="d">count</a>
	<a href="vimfn.txt.html#line2byte%28%29" class="d">line2byte()</a>		byte <a href="intro.txt.html#count" class="d">count</a> <a href="motion.txt.html#at" class="d">at</a> <a href="insert.txt.html#a" class="d">a</a> specific line
	<a href="vimfn.txt.html#diff_filler%28%29" class="d">diff_filler()</a>		get the number of filler lines above <a href="insert.txt.html#a" class="d">a</a> line
	<a href="vimfn.txt.html#screenattr%28%29" class="d">screenattr()</a>		get attribute <a href="motion.txt.html#at" class="d">at</a> <a href="insert.txt.html#a" class="d">a</a> screen line/row
	<a href="vimfn.txt.html#screenchar%28%29" class="d">screenchar()</a>		get character code <a href="motion.txt.html#at" class="d">at</a> <a href="insert.txt.html#a" class="d">a</a> screen line/row
	<a href="vimfn.txt.html#screenchars%28%29" class="d">screenchars()</a>		get character codes <a href="motion.txt.html#at" class="d">at</a> <a href="insert.txt.html#a" class="d">a</a> screen line/row
	<a href="vimfn.txt.html#screenstring%28%29" class="d">screenstring()</a>		get <a href="vimeval.txt.html#string" class="d">string</a> of characters <a href="motion.txt.html#at" class="d">at</a> <a href="insert.txt.html#a" class="d">a</a> screen line/row
	<a href="vimfn.txt.html#charcol%28%29" class="d">charcol()</a>		character number of the cursor or <a href="insert.txt.html#a" class="d">a</a> <a href="motion.txt.html#mark" class="d">mark</a>
	<a href="vimfn.txt.html#getcharpos%28%29" class="d">getcharpos()</a>		get character position of cursor, mark, etc.
	<a href="vimfn.txt.html#setcharpos%28%29" class="d">setcharpos()</a>		set character position of cursor, mark, etc.
	<a href="vimfn.txt.html#getcursorcharpos%28%29" class="d">getcursorcharpos()</a>	get character position of the cursor
	<a href="vimfn.txt.html#setcursorcharpos%28%29" class="d">setcursorcharpos()</a>	set character position of the cursor

Working with text in the current buffer:		<span id="text-functions" class="t">text-functions</span>
	<a href="vimfn.txt.html#getline%28%29" class="d">getline()</a>		get <a href="insert.txt.html#a" class="d">a</a> line or <a href="vimeval.txt.html#list" class="d">list</a> of lines from the buffer
	<a href="vimfn.txt.html#getregion%28%29" class="d">getregion()</a>		get <a href="insert.txt.html#a" class="d">a</a> region of text from the buffer
	<a href="vimfn.txt.html#getregionpos%28%29" class="d">getregionpos()</a>		get <a href="insert.txt.html#a" class="d">a</a> <a href="vimeval.txt.html#list" class="d">list</a> of positions <a href="luaref.txt.html#for" class="d">for</a> <a href="insert.txt.html#a" class="d">a</a> region
	<a href="vimfn.txt.html#setline%28%29" class="d">setline()</a>		replace <a href="insert.txt.html#a" class="d">a</a> line in the buffer
	<a href="vimfn.txt.html#append%28%29" class="d">append()</a>		append line or <a href="vimeval.txt.html#list" class="d">list</a> of lines in the buffer
	<a href="vimfn.txt.html#indent%28%29" class="d">indent()</a>		indent of <a href="insert.txt.html#a" class="d">a</a> specific line
	<a href="vimfn.txt.html#cindent%28%29" class="d">cindent()</a>		indent according to <a href="change.txt.html#C" class="d">C</a> indenting
	<a href="vimfn.txt.html#lispindent%28%29" class="d">lispindent()</a>		indent according to Lisp indenting
	<a href="vimfn.txt.html#nextnonblank%28%29" class="d">nextnonblank()</a>		find next non-blank line
	<a href="vimfn.txt.html#prevnonblank%28%29" class="d">prevnonblank()</a>		find previous non-blank line
	<a href="vimfn.txt.html#search%28%29" class="d">search()</a>		find <a href="insert.txt.html#a" class="d">a</a> match <a href="luaref.txt.html#for" class="d">for</a> <a href="insert.txt.html#a" class="d">a</a> <a href="pattern.txt.html#pattern" class="d">pattern</a>
	<a href="vimfn.txt.html#searchpos%28%29" class="d">searchpos()</a>		find <a href="insert.txt.html#a" class="d">a</a> match <a href="luaref.txt.html#for" class="d">for</a> <a href="insert.txt.html#a" class="d">a</a> <a href="pattern.txt.html#pattern" class="d">pattern</a>
	<a href="vimfn.txt.html#searchcount%28%29" class="d">searchcount()</a>		get number of matches before/after the cursor
	<a href="vimfn.txt.html#searchpair%28%29" class="d">searchpair()</a>		find the other <a href="intro.txt.html#end" class="d">end</a> of <a href="insert.txt.html#a" class="d">a</a> start/skip/end
	<a href="vimfn.txt.html#searchpairpos%28%29" class="d">searchpairpos()</a>		find the other <a href="intro.txt.html#end" class="d">end</a> of <a href="insert.txt.html#a" class="d">a</a> start/skip/end
	<a href="vimfn.txt.html#searchdecl%28%29" class="d">searchdecl()</a>		search <a href="luaref.txt.html#for" class="d">for</a> the declaration of <a href="insert.txt.html#a" class="d">a</a> name
	<a href="vimfn.txt.html#getcharsearch%28%29" class="d">getcharsearch()</a>		return character search information
	<a href="vimfn.txt.html#setcharsearch%28%29" class="d">setcharsearch()</a>		set character search information

Working with text in another buffer:
	<a href="vimfn.txt.html#getbufline%28%29" class="d">getbufline()</a>		get <a href="insert.txt.html#a" class="d">a</a> <a href="vimeval.txt.html#list" class="d">list</a> of lines from the specified buffer
	<a href="vimfn.txt.html#getbufoneline%28%29" class="d">getbufoneline()</a>		get <a href="insert.txt.html#a" class="d">a</a> one line from the specified buffer
	<a href="vimfn.txt.html#setbufline%28%29" class="d">setbufline()</a>		replace <a href="insert.txt.html#a" class="d">a</a> line in the specified buffer
	<a href="vimfn.txt.html#appendbufline%28%29" class="d">appendbufline()</a>		append <a href="insert.txt.html#a" class="d">a</a> <a href="vimeval.txt.html#list" class="d">list</a> of lines in the specified buffer
	<a href="vimfn.txt.html#deletebufline%28%29" class="d">deletebufline()</a>		delete lines from <a href="insert.txt.html#a" class="d">a</a> specified buffer

					<span id="system-functions" class="t">system-functions</span> <span id="file-functions" class="t">file-functions</span>
System <a href="vimeval.txt.html#functions" class="d">functions</a> and manipulation of files:
	<a href="vimfn.txt.html#glob%28%29" class="d">glob()</a>			expand <a href="editing.txt.html#wildcards" class="d">wildcards</a>
	<a href="vimfn.txt.html#globpath%28%29" class="d">globpath()</a>		expand <a href="editing.txt.html#wildcards" class="d">wildcards</a> in <a href="insert.txt.html#a" class="d">a</a> number of directories
	<a href="vimfn.txt.html#glob2regpat%28%29" class="d">glob2regpat()</a>		convert <a href="insert.txt.html#a" class="d">a</a> glob <a href="pattern.txt.html#pattern" class="d">pattern</a> into <a href="insert.txt.html#a" class="d">a</a> search <a href="pattern.txt.html#pattern" class="d">pattern</a>
	<a href="vimfn.txt.html#findfile%28%29" class="d">findfile()</a>		find <a href="insert.txt.html#a" class="d">a</a> file in <a href="insert.txt.html#a" class="d">a</a> <a href="vimeval.txt.html#list" class="d">list</a> of directories
	<a href="vimfn.txt.html#finddir%28%29" class="d">finddir()</a>		find <a href="insert.txt.html#a" class="d">a</a> directory in <a href="insert.txt.html#a" class="d">a</a> <a href="vimeval.txt.html#list" class="d">list</a> of directories
	<a href="vimfn.txt.html#resolve%28%29" class="d">resolve()</a>		find out where <a href="insert.txt.html#a" class="d">a</a> shortcut points to
	<a href="vimfn.txt.html#fnamemodify%28%29" class="d">fnamemodify()</a>		modify <a href="insert.txt.html#a" class="d">a</a> file name
	<a href="vimfn.txt.html#pathshorten%28%29" class="d">pathshorten()</a>		shorten directory names in <a href="insert.txt.html#a" class="d">a</a> path
	<a href="vimfn.txt.html#simplify%28%29" class="d">simplify()</a>		simplify <a href="insert.txt.html#a" class="d">a</a> path without <a href="change.txt.html#changing" class="d">changing</a> its meaning
	<a href="vimfn.txt.html#executable%28%29" class="d">executable()</a>		check if an executable program exists
	<a href="vimfn.txt.html#exepath%28%29" class="d">exepath()</a>		full path of an executable program
	<a href="vimfn.txt.html#filereadable%28%29" class="d">filereadable()</a>		check if <a href="insert.txt.html#a" class="d">a</a> file can be read
	<a href="vimfn.txt.html#filewritable%28%29" class="d">filewritable()</a>		check if <a href="insert.txt.html#a" class="d">a</a> file can be written to
	<a href="vimfn.txt.html#getfperm%28%29" class="d">getfperm()</a>		get the permissions of <a href="insert.txt.html#a" class="d">a</a> file
	<a href="vimfn.txt.html#setfperm%28%29" class="d">setfperm()</a>		set the permissions of <a href="insert.txt.html#a" class="d">a</a> file
	<a href="vimfn.txt.html#getftype%28%29" class="d">getftype()</a>		get the kind of <a href="insert.txt.html#a" class="d">a</a> file
	<a href="vimfn.txt.html#isabsolutepath%28%29" class="d">isabsolutepath()</a>	check if <a href="insert.txt.html#a" class="d">a</a> path <a href="motion.txt.html#is" class="d">is</a> absolute
	<a href="vimfn.txt.html#isdirectory%28%29" class="d">isdirectory()</a>		check if <a href="insert.txt.html#a" class="d">a</a> directory exists
	<a href="vimfn.txt.html#getfsize%28%29" class="d">getfsize()</a>		get the size of <a href="insert.txt.html#a" class="d">a</a> file
	<a href="vimfn.txt.html#getcwd%28%29" class="d">getcwd()</a>		get the current working directory
	<a href="vimfn.txt.html#haslocaldir%28%29" class="d">haslocaldir()</a>		check if current <a href="windows.txt.html#window" class="d">window</a> used <a href="editing.txt.html#%3Alcd" class="l">:lcd</a> or <a href="editing.txt.html#%3Atcd" class="l">:tcd</a>
	<a href="vimfn.txt.html#tempname%28%29" class="d">tempname()</a>		get the name of <a href="insert.txt.html#a" class="d">a</a> temporary file
	<a href="vimfn.txt.html#mkdir%28%29" class="d">mkdir()</a>			create <a href="insert.txt.html#a" class="d">a</a> new directory
	<a href="vimfn.txt.html#chdir%28%29" class="d">chdir()</a>			change current working directory
	<a href="vimfn.txt.html#delete%28%29" class="d">delete()</a>		delete <a href="insert.txt.html#a" class="d">a</a> file
	<a href="vimfn.txt.html#rename%28%29" class="d">rename()</a>		rename <a href="insert.txt.html#a" class="d">a</a> file
	<a href="vimfn.txt.html#system%28%29" class="d">system()</a>		get the result of <a href="insert.txt.html#a" class="d">a</a> shell command <a href="motion.txt.html#as" class="d">as</a> <a href="insert.txt.html#a" class="d">a</a> <a href="vimeval.txt.html#string" class="d">string</a>
	<a href="vimfn.txt.html#systemlist%28%29" class="d">systemlist()</a>		get the result of <a href="insert.txt.html#a" class="d">a</a> shell command <a href="motion.txt.html#as" class="d">as</a> <a href="insert.txt.html#a" class="d">a</a> <a href="vimeval.txt.html#list" class="d">list</a>
	<a href="vimfn.txt.html#environ%28%29" class="d">environ()</a>		get all environment <a href="vimeval.txt.html#variables" class="d">variables</a>
	<a href="vimfn.txt.html#getenv%28%29" class="d">getenv()</a>		get one environment variable
	<a href="vimfn.txt.html#setenv%28%29" class="d">setenv()</a>		set an environment variable
	<a href="vimfn.txt.html#hostname%28%29" class="d">hostname()</a>		name of the system
	<a href="vimfn.txt.html#readfile%28%29" class="d">readfile()</a>		read <a href="insert.txt.html#a" class="d">a</a> file into <a href="insert.txt.html#a" class="d">a</a> <a href="vimeval.txt.html#List" class="d">List</a> of lines
	<a href="vimfn.txt.html#readblob%28%29" class="d">readblob()</a>		read <a href="insert.txt.html#a" class="d">a</a> file into <a href="insert.txt.html#a" class="d">a</a> <a href="vimeval.txt.html#Blob" class="d">Blob</a>
	<a href="vimfn.txt.html#readdir%28%29" class="d">readdir()</a>		get <a href="insert.txt.html#a" class="d">a</a> <a href="vimeval.txt.html#List" class="d">List</a> of file names in <a href="insert.txt.html#a" class="d">a</a> directory
	<a href="vimfn.txt.html#writefile%28%29" class="d">writefile()</a>		write <a href="insert.txt.html#a" class="d">a</a> <a href="vimeval.txt.html#List" class="d">List</a> of lines or <a href="vimeval.txt.html#Blob" class="d">Blob</a> into <a href="insert.txt.html#a" class="d">a</a> file
	<a href="vimfn.txt.html#filecopy%28%29" class="d">filecopy()</a>		copy <a href="insert.txt.html#a" class="d">a</a> file <span class="s">{from}</span> to <span class="s">{to}</span>

Date and Time:				<span id="date-functions" class="t">date-functions</span> <span id="time-functions" class="t">time-functions</span>
	<a href="vimfn.txt.html#getftime%28%29" class="d">getftime()</a>		get last modification time of <a href="insert.txt.html#a" class="d">a</a> file
	<a href="vimfn.txt.html#localtime%28%29" class="d">localtime()</a>		get current time in seconds
	<a href="vimfn.txt.html#strftime%28%29" class="d">strftime()</a>		convert time to <a href="insert.txt.html#a" class="d">a</a> <a href="vimeval.txt.html#string" class="d">string</a>
	<a href="vimfn.txt.html#strptime%28%29" class="d">strptime()</a>		convert <a href="insert.txt.html#a" class="d">a</a> date/time <a href="vimeval.txt.html#string" class="d">string</a> to time
	<a href="vimfn.txt.html#reltime%28%29" class="d">reltime()</a>		get the current or elapsed time accurately
	<a href="vimfn.txt.html#reltimestr%28%29" class="d">reltimestr()</a>		convert <a href="vimfn.txt.html#reltime%28%29" class="d">reltime()</a> result to <a href="insert.txt.html#a" class="d">a</a> <a href="vimeval.txt.html#string" class="d">string</a>
	<a href="vimfn.txt.html#reltimefloat%28%29" class="d">reltimefloat()</a>		convert <a href="vimfn.txt.html#reltime%28%29" class="d">reltime()</a> result to <a href="insert.txt.html#a" class="d">a</a> <a href="vimeval.txt.html#Float" class="d">Float</a>

			<span id="buffer-functions" class="t">buffer-functions</span> <span id="window-functions" class="t">window-functions</span> <span id="arg-functions" class="t">arg-functions</span>
Buffers, <a href="windows.txt.html#windows" class="d">windows</a> and the argument list:
	<a href="vimfn.txt.html#argc%28%29" class="d">argc()</a>			number of entries in the argument <a href="vimeval.txt.html#list" class="d">list</a>
	<a href="vimfn.txt.html#argidx%28%29" class="d">argidx()</a>		current position in the argument <a href="vimeval.txt.html#list" class="d">list</a>
	<a href="vimfn.txt.html#arglistid%28%29" class="d">arglistid()</a>		get id of the argument <a href="vimeval.txt.html#list" class="d">list</a>
	<a href="vimfn.txt.html#argv%28%29" class="d">argv()</a>			get one entry from the argument <a href="vimeval.txt.html#list" class="d">list</a>
	<a href="vimfn.txt.html#bufadd%28%29" class="d">bufadd()</a>		add <a href="insert.txt.html#a" class="d">a</a> file to the <a href="vimeval.txt.html#list" class="d">list</a> of <a href="windows.txt.html#buffers" class="d">buffers</a>
	<a href="vimfn.txt.html#bufexists%28%29" class="d">bufexists()</a>		check if <a href="insert.txt.html#a" class="d">a</a> buffer exists
	<a href="vimfn.txt.html#buflisted%28%29" class="d">buflisted()</a>		check if <a href="insert.txt.html#a" class="d">a</a> buffer exists and <a href="motion.txt.html#is" class="d">is</a> listed
	<a href="vimfn.txt.html#bufload%28%29" class="d">bufload()</a>		ensure <a href="insert.txt.html#a" class="d">a</a> buffer <a href="motion.txt.html#is" class="d">is</a> loaded
	<a href="vimfn.txt.html#bufloaded%28%29" class="d">bufloaded()</a>		check if <a href="insert.txt.html#a" class="d">a</a> buffer exists and <a href="motion.txt.html#is" class="d">is</a> loaded
	<a href="vimfn.txt.html#bufname%28%29" class="d">bufname()</a>		get the name of <a href="insert.txt.html#a" class="d">a</a> specific buffer
	<a href="vimfn.txt.html#bufnr%28%29" class="d">bufnr()</a>			get the buffer number of <a href="insert.txt.html#a" class="d">a</a> specific buffer
	<a href="vimfn.txt.html#tabpagebuflist%28%29" class="d">tabpagebuflist()</a>	return <a href="vimeval.txt.html#List" class="d">List</a> of <a href="windows.txt.html#buffers" class="d">buffers</a> in <a href="insert.txt.html#a" class="d">a</a> <a href="intro.txt.html#tab" class="d">tab</a> page
	<a href="vimfn.txt.html#tabpagenr%28%29" class="d">tabpagenr()</a>		get the number of <a href="insert.txt.html#a" class="d">a</a> <a href="intro.txt.html#tab" class="d">tab</a> page
	<a href="vimfn.txt.html#tabpagewinnr%28%29" class="d">tabpagewinnr()</a>		like <a href="vimfn.txt.html#winnr%28%29" class="d">winnr()</a> <a href="luaref.txt.html#for" class="d">for</a> <a href="insert.txt.html#a" class="d">a</a> specified <a href="intro.txt.html#tab" class="d">tab</a> page
	<a href="vimfn.txt.html#winnr%28%29" class="d">winnr()</a>			get the <a href="windows.txt.html#window" class="d">window</a> number <a href="luaref.txt.html#for" class="d">for</a> the current <a href="windows.txt.html#window" class="d">window</a>
	<a href="vimfn.txt.html#bufwinid%28%29" class="d">bufwinid()</a>		get the <a href="windows.txt.html#window" class="d">window</a> ID of <a href="insert.txt.html#a" class="d">a</a> specific buffer
	<a href="vimfn.txt.html#bufwinnr%28%29" class="d">bufwinnr()</a>		get the <a href="windows.txt.html#window" class="d">window</a> number of <a href="insert.txt.html#a" class="d">a</a> specific buffer
	<a href="vimfn.txt.html#winbufnr%28%29" class="d">winbufnr()</a>		get the buffer number of <a href="insert.txt.html#a" class="d">a</a> specific <a href="windows.txt.html#window" class="d">window</a>
	<a href="vimfn.txt.html#win_findbuf%28%29" class="d">win_findbuf()</a>		find <a href="windows.txt.html#windows" class="d">windows</a> containing <a href="insert.txt.html#a" class="d">a</a> buffer
	<a href="vimfn.txt.html#win_getid%28%29" class="d">win_getid()</a>		get <a href="windows.txt.html#window" class="d">window</a> ID of <a href="insert.txt.html#a" class="d">a</a> <a href="windows.txt.html#window" class="d">window</a>
	<a href="vimfn.txt.html#win_gettype%28%29" class="d">win_gettype()</a>		get type of <a href="windows.txt.html#window" class="d">window</a>
	<a href="vimfn.txt.html#win_gotoid%28%29" class="d">win_gotoid()</a>		<a href="motion.txt.html#go" class="d">go</a> to <a href="windows.txt.html#window" class="d">window</a> with ID
	<a href="vimfn.txt.html#win_id2tabwin%28%29" class="d">win_id2tabwin()</a>		get <a href="intro.txt.html#tab" class="d">tab</a> and <a href="windows.txt.html#window" class="d">window</a> nr from <a href="windows.txt.html#window" class="d">window</a> ID
	<a href="vimfn.txt.html#win_id2win%28%29" class="d">win_id2win()</a>		get <a href="windows.txt.html#window" class="d">window</a> nr from <a href="windows.txt.html#window" class="d">window</a> ID
	<a href="vimfn.txt.html#win_move_separator%28%29" class="d">win_move_separator()</a>	move <a href="windows.txt.html#window" class="d">window</a> vertical separator
	<a href="vimfn.txt.html#win_move_statusline%28%29" class="d">win_move_statusline()</a>	move <a href="windows.txt.html#window" class="d">window</a> status line
	<a href="vimfn.txt.html#win_splitmove%28%29" class="d">win_splitmove()</a>		move <a href="windows.txt.html#window" class="d">window</a> to <a href="insert.txt.html#a" class="d">a</a> split of another <a href="windows.txt.html#window" class="d">window</a>
	<a href="vimfn.txt.html#getbufinfo%28%29" class="d">getbufinfo()</a>		get <a href="insert.txt.html#a" class="d">a</a> <a href="vimeval.txt.html#list" class="d">list</a> with buffer information
	<a href="vimfn.txt.html#gettabinfo%28%29" class="d">gettabinfo()</a>		get <a href="insert.txt.html#a" class="d">a</a> <a href="vimeval.txt.html#list" class="d">list</a> with <a href="intro.txt.html#tab" class="d">tab</a> page information
	<a href="vimfn.txt.html#getwininfo%28%29" class="d">getwininfo()</a>		get <a href="insert.txt.html#a" class="d">a</a> <a href="vimeval.txt.html#list" class="d">list</a> with <a href="windows.txt.html#window" class="d">window</a> information
	<a href="vimfn.txt.html#getchangelist%28%29" class="d">getchangelist()</a>		get <a href="insert.txt.html#a" class="d">a</a> <a href="vimeval.txt.html#list" class="d">list</a> of change <a href="vimeval.txt.html#list" class="d">list</a> entries
	<a href="vimfn.txt.html#getjumplist%28%29" class="d">getjumplist()</a>		get <a href="insert.txt.html#a" class="d">a</a> <a href="vimeval.txt.html#list" class="d">list</a> of jump <a href="vimeval.txt.html#list" class="d">list</a> entries
	<a href="vimfn.txt.html#swapfilelist%28%29" class="d">swapfilelist()</a>		<a href="vimeval.txt.html#list" class="d">list</a> of existing swap files in <a href="options.txt.html#%27directory%27" class="o">'directory'</a>
	<a href="vimfn.txt.html#swapinfo%28%29" class="d">swapinfo()</a>		information about <a href="insert.txt.html#a" class="d">a</a> swap file
	<a href="vimfn.txt.html#swapname%28%29" class="d">swapname()</a>		get the swap file path of <a href="insert.txt.html#a" class="d">a</a> buffer

Command line:					<span id="command-line-functions" class="t">command-line-functions</span>
	<a href="vimfn.txt.html#getcmdcomplpat%28%29" class="d">getcmdcomplpat()</a>	get completion <a href="pattern.txt.html#pattern" class="d">pattern</a> of the current command
				line
	<a href="vimfn.txt.html#getcmdcompltype%28%29" class="d">getcmdcompltype()</a>	get the type of the current command line
				completion
	<a href="vimfn.txt.html#getcmdline%28%29" class="d">getcmdline()</a>		get the current command line input
	<a href="vimfn.txt.html#getcmdprompt%28%29" class="d">getcmdprompt()</a>		get the current command line prompt
	<a href="vimfn.txt.html#getcmdpos%28%29" class="d">getcmdpos()</a>		get position of the cursor in the command line
	<a href="vimfn.txt.html#getcmdscreenpos%28%29" class="d">getcmdscreenpos()</a>	get screen position of the cursor in the
				command line
	<a href="vimfn.txt.html#setcmdline%28%29" class="d">setcmdline()</a>		set the current command line
	<a href="vimfn.txt.html#setcmdpos%28%29" class="d">setcmdpos()</a>		set position of the cursor in the command line
	<a href="vimfn.txt.html#getcmdtype%28%29" class="d">getcmdtype()</a>		return the current command-line type
	<a href="vimfn.txt.html#getcmdwintype%28%29" class="d">getcmdwintype()</a>		return the current command-line <a href="windows.txt.html#window" class="d">window</a> type
	<a href="vimfn.txt.html#getcompletion%28%29" class="d">getcompletion()</a>		<a href="vimeval.txt.html#list" class="d">list</a> of command-line completion matches
	<a href="vimfn.txt.html#fullcommand%28%29" class="d">fullcommand()</a>		get full command name

<a href="quickfix.txt.html#Quickfix" class="d">Quickfix</a> and location lists:			<span id="quickfix-functions" class="t">quickfix-functions</span>
	<a href="vimfn.txt.html#getqflist%28%29" class="d">getqflist()</a>		<a href="vimeval.txt.html#list" class="d">list</a> of <a href="quickfix.txt.html#quickfix" class="d">quickfix</a> <a href="message.txt.html#errors" class="d">errors</a>
	<a href="vimfn.txt.html#setqflist%28%29" class="d">setqflist()</a>		modify <a href="insert.txt.html#a" class="d">a</a> <a href="quickfix.txt.html#quickfix" class="d">quickfix</a> <a href="vimeval.txt.html#list" class="d">list</a>
	<a href="vimfn.txt.html#getloclist%28%29" class="d">getloclist()</a>		<a href="vimeval.txt.html#list" class="d">list</a> of location <a href="vimeval.txt.html#list" class="d">list</a> items
	<a href="vimfn.txt.html#setloclist%28%29" class="d">setloclist()</a>		modify <a href="insert.txt.html#a" class="d">a</a> location <a href="vimeval.txt.html#list" class="d">list</a>

<a href="insert.txt.html#Insert" class="d">Insert</a> mode completion:				<span id="completion-functions" class="t">completion-functions</span>
	<a href="vimfn.txt.html#complete%28%29" class="d">complete()</a>		set found matches
	<a href="vimfn.txt.html#complete_add%28%29" class="d">complete_add()</a>		add to found matches
	<a href="vimfn.txt.html#complete_check%28%29" class="d">complete_check()</a>	check if completion should be aborted
	<a href="vimfn.txt.html#complete_info%28%29" class="d">complete_info()</a>		get current completion information
	<a href="vimfn.txt.html#pumvisible%28%29" class="d">pumvisible()</a>		check if the popup menu <a href="motion.txt.html#is" class="d">is</a> displayed
	<a href="vimfn.txt.html#pum_getpos%28%29" class="d">pum_getpos()</a>		position and size of popup menu if visible

Folding:					<span id="folding-functions" class="t">folding-functions</span>
	<a href="vimfn.txt.html#foldclosed%28%29" class="d">foldclosed()</a>		check <a href="luaref.txt.html#for" class="d">for</a> <a href="insert.txt.html#a" class="d">a</a> closed fold <a href="motion.txt.html#at" class="d">at</a> <a href="insert.txt.html#a" class="d">a</a> specific line
	<a href="vimfn.txt.html#foldclosedend%28%29" class="d">foldclosedend()</a>		like <a href="vimfn.txt.html#foldclosed%28%29" class="d">foldclosed()</a> but return the last line
	<a href="vimfn.txt.html#foldlevel%28%29" class="d">foldlevel()</a>		check <a href="luaref.txt.html#for" class="d">for</a> the fold level <a href="motion.txt.html#at" class="d">at</a> <a href="insert.txt.html#a" class="d">a</a> specific line
	<a href="vimfn.txt.html#foldtext%28%29" class="d">foldtext()</a>		generate the line displayed <a href="luaref.txt.html#for" class="d">for</a> <a href="insert.txt.html#a" class="d">a</a> closed fold
	<a href="vimfn.txt.html#foldtextresult%28%29" class="d">foldtextresult()</a>	get the text displayed <a href="luaref.txt.html#for" class="d">for</a> <a href="insert.txt.html#a" class="d">a</a> closed fold

<a href="autocmd.txt.html#Syntax" class="d">Syntax</a> and highlighting:	  <span id="syntax-functions" class="t">syntax-functions</span> <span id="highlighting-functions" class="t">highlighting-functions</span>
	<a href="vimfn.txt.html#clearmatches%28%29" class="d">clearmatches()</a>		clear all matches defined by <a href="vimfn.txt.html#matchadd%28%29" class="l">matchadd()</a> and
				the <a href="pattern.txt.html#%3Amatch" class="l">:match</a> commands
	<a href="vimfn.txt.html#getmatches%28%29" class="d">getmatches()</a>		get all matches defined by <a href="vimfn.txt.html#matchadd%28%29" class="l">matchadd()</a> and
				the <a href="pattern.txt.html#%3Amatch" class="l">:match</a> commands
	<a href="vimfn.txt.html#hlexists%28%29" class="d">hlexists()</a>		check if <a href="insert.txt.html#a" class="d">a</a> highlight group exists
	<a href="vimfn.txt.html#hlID%28%29" class="d">hlID()</a>			get ID of <a href="insert.txt.html#a" class="d">a</a> highlight group
	<a href="vimfn.txt.html#synID%28%29" class="d">synID()</a>			get <a href="syntax.txt.html#syntax" class="d">syntax</a> ID <a href="motion.txt.html#at" class="d">at</a> <a href="insert.txt.html#a" class="d">a</a> specific position
	<a href="vimfn.txt.html#synIDattr%28%29" class="d">synIDattr()</a>		get <a href="insert.txt.html#a" class="d">a</a> specific attribute of <a href="insert.txt.html#a" class="d">a</a> <a href="syntax.txt.html#syntax" class="d">syntax</a> ID
	<a href="vimfn.txt.html#synIDtrans%28%29" class="d">synIDtrans()</a>		get translated <a href="syntax.txt.html#syntax" class="d">syntax</a> ID
	<a href="vimfn.txt.html#synstack%28%29" class="d">synstack()</a>		get <a href="vimeval.txt.html#list" class="d">list</a> of <a href="syntax.txt.html#syntax" class="d">syntax</a> IDs <a href="motion.txt.html#at" class="d">at</a> <a href="insert.txt.html#a" class="d">a</a> specific position
	<a href="vimfn.txt.html#synconcealed%28%29" class="d">synconcealed()</a>		get info about (syntax) concealing
	<a href="vimfn.txt.html#diff_hlID%28%29" class="d">diff_hlID()</a>		get highlight ID <a href="luaref.txt.html#for" class="d">for</a> <a href="diff.txt.html#diff" class="d">diff</a> mode <a href="motion.txt.html#at" class="d">at</a> <a href="insert.txt.html#a" class="d">a</a> position
	<a href="vimfn.txt.html#matchadd%28%29" class="d">matchadd()</a>		define <a href="insert.txt.html#a" class="d">a</a> <a href="pattern.txt.html#pattern" class="d">pattern</a> to highlight (a "match"<a href="motion.txt.html#%29" class="d">)</a>
	<a href="vimfn.txt.html#matchaddpos%28%29" class="d">matchaddpos()</a>		define <a href="insert.txt.html#a" class="d">a</a> <a href="vimeval.txt.html#list" class="d">list</a> of positions to highlight
	<a href="vimfn.txt.html#matcharg%28%29" class="d">matcharg()</a>		get info about <a href="pattern.txt.html#%3Amatch" class="l">:match</a> arguments
	<a href="vimfn.txt.html#matchdelete%28%29" class="d">matchdelete()</a>		delete <a href="insert.txt.html#a" class="d">a</a> match defined by <a href="vimfn.txt.html#matchadd%28%29" class="l">matchadd()</a> or <a href="insert.txt.html#a" class="d">a</a>
				<a href="pattern.txt.html#%3Amatch" class="l">:match</a> command
	<a href="vimfn.txt.html#setmatches%28%29" class="d">setmatches()</a>		restore <a href="insert.txt.html#a" class="d">a</a> <a href="vimeval.txt.html#list" class="d">list</a> of matches saved by
				<a href="vimfn.txt.html#getmatches%28%29" class="l">getmatches()</a>

Spelling:					<span id="spell-functions" class="t">spell-functions</span>
	<a href="vimfn.txt.html#spellbadword%28%29" class="d">spellbadword()</a>		locate badly spelled <a href="motion.txt.html#word" class="d">word</a> <a href="motion.txt.html#at" class="d">at</a> or after cursor
	<a href="vimfn.txt.html#spellsuggest%28%29" class="d">spellsuggest()</a>		return suggested spelling corrections
	<a href="vimfn.txt.html#soundfold%28%29" class="d">soundfold()</a>		return the sound-a-like equivalent of <a href="insert.txt.html#a" class="d">a</a> <a href="motion.txt.html#word" class="d">word</a>

History:					<span id="history-functions" class="t">history-functions</span>
	<a href="vimfn.txt.html#histadd%28%29" class="d">histadd()</a>		add an item to <a href="insert.txt.html#a" class="d">a</a> <a href="cmdline.txt.html#history" class="d">history</a>
	<a href="vimfn.txt.html#histdel%28%29" class="d">histdel()</a>		delete an item from <a href="insert.txt.html#a" class="d">a</a> <a href="cmdline.txt.html#history" class="d">history</a>
	<a href="vimfn.txt.html#histget%28%29" class="d">histget()</a>		get an item from <a href="insert.txt.html#a" class="d">a</a> <a href="cmdline.txt.html#history" class="d">history</a>
	<a href="vimfn.txt.html#histnr%28%29" class="d">histnr()</a>		get highest <a href="index.txt.html#index" class="d">index</a> of <a href="insert.txt.html#a" class="d">a</a> <a href="cmdline.txt.html#history" class="d">history</a> <a href="vimeval.txt.html#list" class="d">list</a>

Interactive:					<span id="interactive-functions" class="t">interactive-functions</span>
	<a href="vimfn.txt.html#browse%28%29" class="d">browse()</a>		<a href="change.txt.html#put" class="d">put</a> up <a href="insert.txt.html#a" class="d">a</a> file requester
	<a href="vimfn.txt.html#browsedir%28%29" class="d">browsedir()</a>		<a href="change.txt.html#put" class="d">put</a> up <a href="insert.txt.html#a" class="d">a</a> directory requester
	<a href="vimfn.txt.html#confirm%28%29" class="d">confirm()</a>		let the user make <a href="insert.txt.html#a" class="d">a</a> choice
	<a href="vimfn.txt.html#getchar%28%29" class="d">getchar()</a>		get <a href="insert.txt.html#a" class="d">a</a> character from the user
	<a href="vimfn.txt.html#getcharmod%28%29" class="d">getcharmod()</a>		get modifiers <a href="luaref.txt.html#for" class="d">for</a> the last typed character
	<a href="vimfn.txt.html#getmousepos%28%29" class="d">getmousepos()</a>		get last known mouse position
	<a href="vimfn.txt.html#feedkeys%28%29" class="d">feedkeys()</a>		<a href="change.txt.html#put" class="d">put</a> characters in the typeahead queue
	<a href="vimfn.txt.html#input%28%29" class="d">input()</a>			get <a href="insert.txt.html#a" class="d">a</a> line from the user
	<a href="vimfn.txt.html#inputlist%28%29" class="d">inputlist()</a>		let the user pick an entry from <a href="insert.txt.html#a" class="d">a</a> <a href="vimeval.txt.html#list" class="d">list</a>
	<a href="vimfn.txt.html#inputsecret%28%29" class="d">inputsecret()</a>		get <a href="insert.txt.html#a" class="d">a</a> line from the user without showing <a href="motion.txt.html#it" class="d">it</a>
	<a href="deprecated.txt.html#inputdialog%28%29" class="d">inputdialog()</a>		get <a href="insert.txt.html#a" class="d">a</a> line from the user in <a href="insert.txt.html#a" class="d">a</a> dialog
	<a href="vimfn.txt.html#inputsave%28%29" class="d">inputsave()</a>		save and clear typeahead
	<a href="vimfn.txt.html#inputrestore%28%29" class="d">inputrestore()</a>		restore typeahead

GUI:						<span id="gui-functions" class="t">gui-functions</span>
	<a href="vimfn.txt.html#getfontname%28%29" class="d">getfontname()</a>		get name of current font being used
	<a href="vimfn.txt.html#getwinpos%28%29" class="d">getwinpos()</a>		position of the Vim <a href="windows.txt.html#window" class="d">window</a>
	<a href="vimfn.txt.html#getwinposx%28%29" class="d">getwinposx()</a>		<a href="change.txt.html#X" class="d">X</a> position of the Vim <a href="windows.txt.html#window" class="d">window</a>
	<a href="vimfn.txt.html#getwinposy%28%29" class="d">getwinposy()</a>		<a href="change.txt.html#Y" class="d">Y</a> position of the Vim <a href="windows.txt.html#window" class="d">window</a>
	balloon_show()		set the balloon content
	balloon_split()		split <a href="insert.txt.html#a" class="d">a</a> message <a href="luaref.txt.html#for" class="d">for</a> <a href="insert.txt.html#a" class="d">a</a> balloon
	balloon_gettext()	get the text in the balloon

Vim server:					<span id="server-functions" class="t">server-functions</span>
	<a href="vimfn.txt.html#serverlist%28%29" class="d">serverlist()</a>		return the <a href="vimeval.txt.html#list" class="d">list</a> of server names
	remote_startserver()	run <a href="insert.txt.html#a" class="d">a</a> server
	remote_send()		send command characters to <a href="insert.txt.html#a" class="d">a</a> Vim server
	remote_expr()		evaluate an <a href="vimeval.txt.html#expression" class="d">expression</a> in <a href="insert.txt.html#a" class="d">a</a> Vim server
	server2client()		send <a href="insert.txt.html#a" class="d">a</a> reply to <a href="insert.txt.html#a" class="d">a</a> client of <a href="insert.txt.html#a" class="d">a</a> Vim server
	remote_peek()		check if there <a href="motion.txt.html#is" class="d">is</a> <a href="insert.txt.html#a" class="d">a</a> reply from <a href="insert.txt.html#a" class="d">a</a> Vim server
	remote_read()		read <a href="insert.txt.html#a" class="d">a</a> reply from <a href="insert.txt.html#a" class="d">a</a> Vim server
	foreground()		move the Vim <a href="windows.txt.html#window" class="d">window</a> to the foreground
	remote_foreground()	move the Vim server <a href="windows.txt.html#window" class="d">window</a> to the foreground

Window size and position:			<span id="window-size-functions" class="t">window-size-functions</span>
	<a href="vimfn.txt.html#winheight%28%29" class="d">winheight()</a>		get height of <a href="insert.txt.html#a" class="d">a</a> specific <a href="windows.txt.html#window" class="d">window</a>
	<a href="vimfn.txt.html#winwidth%28%29" class="d">winwidth()</a>		get width of <a href="insert.txt.html#a" class="d">a</a> specific <a href="windows.txt.html#window" class="d">window</a>
	<a href="vimfn.txt.html#win_screenpos%28%29" class="d">win_screenpos()</a>		get screen position of <a href="insert.txt.html#a" class="d">a</a> <a href="windows.txt.html#window" class="d">window</a>
	<a href="vimfn.txt.html#winlayout%28%29" class="d">winlayout()</a>		get layout of <a href="windows.txt.html#windows" class="d">windows</a> in <a href="insert.txt.html#a" class="d">a</a> <a href="intro.txt.html#tab" class="d">tab</a> page
	<a href="vimfn.txt.html#winrestcmd%28%29" class="d">winrestcmd()</a>		return command to restore <a href="windows.txt.html#window" class="d">window</a> sizes
	<a href="vimfn.txt.html#winsaveview%28%29" class="d">winsaveview()</a>		get view of current <a href="windows.txt.html#window" class="d">window</a>
	<a href="vimfn.txt.html#winrestview%28%29" class="d">winrestview()</a>		restore saved view of current <a href="windows.txt.html#window" class="d">window</a>

Mappings and Menus:			    <span id="mapping-functions" class="t">mapping-functions</span>
	<a href="vimfn.txt.html#digraph_get%28%29" class="d">digraph_get()</a>		get <a href="digraph.txt.html#digraph" class="l">digraph</a>
	<a href="vimfn.txt.html#digraph_getlist%28%29" class="d">digraph_getlist()</a>	get all <a href="digraph.txt.html#digraph" class="l">digraph</a><a href="change.txt.html#s" class="d">s</a>
	<a href="vimfn.txt.html#digraph_set%28%29" class="d">digraph_set()</a>		<a href="intro.txt.html#register" class="d">register</a> <a href="digraph.txt.html#digraph" class="l">digraph</a>
	<a href="vimfn.txt.html#digraph_setlist%28%29" class="d">digraph_setlist()</a>	<a href="intro.txt.html#register" class="d">register</a> multiple <a href="digraph.txt.html#digraph" class="l">digraph</a><a href="change.txt.html#s" class="d">s</a>
	<a href="vimfn.txt.html#hasmapto%28%29" class="d">hasmapto()</a>		check if <a href="insert.txt.html#a" class="d">a</a> <a href="map.txt.html#mapping" class="d">mapping</a> exists
	<a href="vimfn.txt.html#mapcheck%28%29" class="d">mapcheck()</a>		check if <a href="insert.txt.html#a" class="d">a</a> matching <a href="map.txt.html#mapping" class="d">mapping</a> exists
	<a href="vimfn.txt.html#maparg%28%29" class="d">maparg()</a>		get rhs of <a href="insert.txt.html#a" class="d">a</a> <a href="map.txt.html#mapping" class="d">mapping</a>
	<a href="vimfn.txt.html#maplist%28%29" class="d">maplist()</a>		get <a href="vimeval.txt.html#list" class="d">list</a> of all mappings
	<a href="vimfn.txt.html#mapset%28%29" class="d">mapset()</a>		restore <a href="insert.txt.html#a" class="d">a</a> <a href="map.txt.html#mapping" class="d">mapping</a>
	<a href="vimfn.txt.html#menu_info%28%29" class="d">menu_info()</a>		get information about <a href="insert.txt.html#a" class="d">a</a> menu item
	<a href="vimfn.txt.html#wildmenumode%28%29" class="d">wildmenumode()</a>		check if the wildmode <a href="motion.txt.html#is" class="d">is</a> active

Signs:						<span id="sign-functions" class="t">sign-functions</span>
	<a href="vimfn.txt.html#sign_define%28%29" class="d">sign_define()</a>		define or update <a href="insert.txt.html#a" class="d">a</a> sign
	<a href="vimfn.txt.html#sign_getdefined%28%29" class="d">sign_getdefined()</a>	get <a href="insert.txt.html#a" class="d">a</a> <a href="vimeval.txt.html#list" class="d">list</a> of defined <a href="sign.txt.html#signs" class="d">signs</a>
	<a href="vimfn.txt.html#sign_getplaced%28%29" class="d">sign_getplaced()</a>	get <a href="insert.txt.html#a" class="d">a</a> <a href="vimeval.txt.html#list" class="d">list</a> of placed <a href="sign.txt.html#signs" class="d">signs</a>
	<a href="vimfn.txt.html#sign_jump%28%29" class="d">sign_jump()</a>		jump to <a href="insert.txt.html#a" class="d">a</a> sign
	<a href="vimfn.txt.html#sign_place%28%29" class="d">sign_place()</a>		place <a href="insert.txt.html#a" class="d">a</a> sign
	<a href="vimfn.txt.html#sign_placelist%28%29" class="d">sign_placelist()</a>	place <a href="insert.txt.html#a" class="d">a</a> <a href="vimeval.txt.html#list" class="d">list</a> of <a href="sign.txt.html#signs" class="d">signs</a>
	<a href="vimfn.txt.html#sign_undefine%28%29" class="d">sign_undefine()</a>		undefine <a href="insert.txt.html#a" class="d">a</a> sign
	<a href="vimfn.txt.html#sign_unplace%28%29" class="d">sign_unplace()</a>		unplace <a href="insert.txt.html#a" class="d">a</a> sign
	<a href="vimfn.txt.html#sign_unplacelist%28%29" class="d">sign_unplacelist()</a>	unplace <a href="insert.txt.html#a" class="d">a</a> <a href="vimeval.txt.html#list" class="d">list</a> of <a href="sign.txt.html#signs" class="d">signs</a>


Testing:				    <span id="test-functions" class="t">test-functions</span>
	<a href="vimfn.txt.html#assert_equal%28%29" class="d">assert_equal()</a>		assert that two expressions values are equal
	<a href="vimfn.txt.html#assert_equalfile%28%29" class="d">assert_equalfile()</a>	assert that two file contents are equal
	<a href="vimfn.txt.html#assert_notequal%28%29" class="d">assert_notequal()</a>	assert that two expressions values are not equal
	<a href="vimfn.txt.html#assert_inrange%28%29" class="d">assert_inrange()</a>	assert that an <a href="vimeval.txt.html#expression" class="d">expression</a> <a href="motion.txt.html#is" class="d">is</a> inside <a href="insert.txt.html#a" class="d">a</a> range
	<a href="vimfn.txt.html#assert_match%28%29" class="d">assert_match()</a>		assert that <a href="insert.txt.html#a" class="d">a</a> <a href="pattern.txt.html#pattern" class="d">pattern</a> matches the value
	<a href="vimfn.txt.html#assert_notmatch%28%29" class="d">assert_notmatch()</a>	assert that <a href="insert.txt.html#a" class="d">a</a> <a href="pattern.txt.html#pattern" class="d">pattern</a> does not match the value
	<a href="vimfn.txt.html#assert_false%28%29" class="d">assert_false()</a>		assert that an <a href="vimeval.txt.html#expression" class="d">expression</a> <a href="motion.txt.html#is" class="d">is</a> false
	<a href="vimfn.txt.html#assert_true%28%29" class="d">assert_true()</a>		assert that an <a href="vimeval.txt.html#expression" class="d">expression</a> <a href="motion.txt.html#is" class="d">is</a> true
	<a href="vimfn.txt.html#assert_exception%28%29" class="d">assert_exception()</a>	assert that <a href="insert.txt.html#a" class="d">a</a> command throws an exception
	<a href="vimfn.txt.html#assert_beeps%28%29" class="d">assert_beeps()</a>		assert that <a href="insert.txt.html#a" class="d">a</a> command beeps
	<a href="vimfn.txt.html#assert_nobeep%28%29" class="d">assert_nobeep()</a>		assert that <a href="insert.txt.html#a" class="d">a</a> command does not cause <a href="insert.txt.html#a" class="d">a</a> beep
	<a href="vimfn.txt.html#assert_fails%28%29" class="d">assert_fails()</a>		assert that <a href="insert.txt.html#a" class="d">a</a> command fails
	<a href="vimfn.txt.html#assert_report%28%29" class="d">assert_report()</a>		report <a href="insert.txt.html#a" class="d">a</a> test failure

Timers:						<span id="timer-functions" class="t">timer-functions</span>
	<a href="vimfn.txt.html#timer_start%28%29" class="d">timer_start()</a>		create <a href="insert.txt.html#a" class="d">a</a> <a href="vimfn.txt.html#timer" class="d">timer</a>
	<a href="vimfn.txt.html#timer_pause%28%29" class="d">timer_pause()</a>		pause or unpause <a href="insert.txt.html#a" class="d">a</a> <a href="vimfn.txt.html#timer" class="d">timer</a>
	<a href="vimfn.txt.html#timer_stop%28%29" class="d">timer_stop()</a>		stop <a href="insert.txt.html#a" class="d">a</a> <a href="vimfn.txt.html#timer" class="d">timer</a>
	<a href="vimfn.txt.html#timer_stopall%28%29" class="d">timer_stopall()</a>		stop all timers
	<a href="vimfn.txt.html#timer_info%28%29" class="d">timer_info()</a>		get information about timers
	<a href="vimfn.txt.html#wait%28%29" class="d">wait()</a>			wait <a href="luaref.txt.html#for" class="d">for</a> <a href="insert.txt.html#a" class="d">a</a> condition

Tags:						<span id="tag-functions" class="t">tag-functions</span>
	<a href="vimfn.txt.html#taglist%28%29" class="d">taglist()</a>		get <a href="vimeval.txt.html#list" class="d">list</a> of matching <a href="tagsrch.txt.html#tags" class="d">tags</a>
	<a href="vimfn.txt.html#tagfiles%28%29" class="d">tagfiles()</a>		get <a href="insert.txt.html#a" class="d">a</a> <a href="vimeval.txt.html#list" class="d">list</a> of <a href="tagsrch.txt.html#tags" class="d">tags</a> files
	<a href="vimfn.txt.html#gettagstack%28%29" class="d">gettagstack()</a>		get the <a href="tagsrch.txt.html#tag" class="d">tag</a> stack of <a href="insert.txt.html#a" class="d">a</a> <a href="windows.txt.html#window" class="d">window</a>
	<a href="vimfn.txt.html#settagstack%28%29" class="d">settagstack()</a>		modify the <a href="tagsrch.txt.html#tag" class="d">tag</a> stack of <a href="insert.txt.html#a" class="d">a</a> <a href="windows.txt.html#window" class="d">window</a>

Prompt Buffer:					<span id="promptbuffer-functions" class="t">promptbuffer-functions</span>
	<a href="vimfn.txt.html#prompt_getprompt%28%29" class="d">prompt_getprompt()</a>	get the effective prompt text <a href="luaref.txt.html#for" class="d">for</a> <a href="insert.txt.html#a" class="d">a</a> buffer
	<a href="vimfn.txt.html#prompt_setcallback%28%29" class="d">prompt_setcallback()</a>	set prompt callback <a href="luaref.txt.html#for" class="d">for</a> <a href="insert.txt.html#a" class="d">a</a> buffer
	<a href="vimfn.txt.html#prompt_setinterrupt%28%29" class="d">prompt_setinterrupt()</a>	set interrupt callback <a href="luaref.txt.html#for" class="d">for</a> <a href="insert.txt.html#a" class="d">a</a> buffer
	<a href="vimfn.txt.html#prompt_setprompt%28%29" class="d">prompt_setprompt()</a>	set the prompt text <a href="luaref.txt.html#for" class="d">for</a> <a href="insert.txt.html#a" class="d">a</a> buffer

Registers:					<span id="register-functions" class="t">register-functions</span>
	<a href="vimfn.txt.html#getreg%28%29" class="d">getreg()</a>		get contents of <a href="insert.txt.html#a" class="d">a</a> <a href="intro.txt.html#register" class="d">register</a>
	<a href="vimfn.txt.html#getreginfo%28%29" class="d">getreginfo()</a>		get information about <a href="insert.txt.html#a" class="d">a</a> <a href="intro.txt.html#register" class="d">register</a>
	<a href="vimfn.txt.html#getregtype%28%29" class="d">getregtype()</a>		get type of <a href="insert.txt.html#a" class="d">a</a> <a href="intro.txt.html#register" class="d">register</a>
	<a href="vimfn.txt.html#setreg%28%29" class="d">setreg()</a>		set contents and type of <a href="insert.txt.html#a" class="d">a</a> <a href="intro.txt.html#register" class="d">register</a>
	<a href="vimfn.txt.html#reg_executing%28%29" class="d">reg_executing()</a>		return the name of the <a href="intro.txt.html#register" class="d">register</a> being executed
	<a href="vimfn.txt.html#reg_recording%28%29" class="d">reg_recording()</a>		return the name of the <a href="intro.txt.html#register" class="d">register</a> being recorded

<a href="repeat.txt.html#Context" class="d">Context</a> Stack:					<span id="ctx-functions" class="t">ctx-functions</span>
	<a href="vimfn.txt.html#ctxget%28%29" class="d">ctxget()</a>		return <a href="repeat.txt.html#context" class="d">context</a> <a href="motion.txt.html#at" class="d">at</a> given <a href="index.txt.html#index" class="d">index</a> from top
	<a href="vimfn.txt.html#ctxpop%28%29" class="d">ctxpop()</a>		pop and restore top <a href="repeat.txt.html#context" class="d">context</a>
	<a href="vimfn.txt.html#ctxpush%28%29" class="d">ctxpush()</a>		push given <a href="repeat.txt.html#context" class="d">context</a>
	<a href="vimfn.txt.html#ctxset%28%29" class="d">ctxset()</a>		set <a href="repeat.txt.html#context" class="d">context</a> <a href="motion.txt.html#at" class="d">at</a> given <a href="index.txt.html#index" class="d">index</a> from top
	<a href="vimfn.txt.html#ctxsize%28%29" class="d">ctxsize()</a>		return <a href="repeat.txt.html#context" class="d">context</a> stack size

Various:					<span id="various-functions" class="t">various-functions</span>
	<a href="vimfn.txt.html#mode%28%29" class="d">mode()</a>			get current editing mode
	<a href="vimfn.txt.html#visualmode%28%29" class="d">visualmode()</a>		last visual mode used
	<a href="vimfn.txt.html#exists%28%29" class="d">exists()</a>		check if <a href="insert.txt.html#a" class="d">a</a> variable, function, etc. exists
	<a href="vimfn.txt.html#has%28%29" class="d">has()</a>			check if <a href="insert.txt.html#a" class="d">a</a> feature <a href="motion.txt.html#is" class="d">is</a> supported in Vim
	<a href="vimfn.txt.html#changenr%28%29" class="d">changenr()</a>		return number of most recent change
	<a href="vimfn.txt.html#did_filetype%28%29" class="d">did_filetype()</a>		check if <a href="insert.txt.html#a" class="d">a</a> <a href="autocmd.txt.html#FileType" class="d">FileType</a> <a href="autocmd.txt.html#autocommand" class="d">autocommand</a> was used
	<a href="vimfn.txt.html#eventhandler%28%29" class="d">eventhandler()</a>		check if invoked by an event handler
	<a href="vimfn.txt.html#getpid%28%29" class="d">getpid()</a>		get process ID of Vim
	<a href="vimfn.txt.html#getscriptinfo%28%29" class="d">getscriptinfo()</a>		get <a href="vimeval.txt.html#list" class="d">list</a> of sourced Vim scripts
	<a href="vimfn.txt.html#getstacktrace%28%29" class="d">getstacktrace()</a>		get current stack trace of Vim scripts

	<a href="vimfn.txt.html#libcall%28%29" class="d">libcall()</a>		call <a href="insert.txt.html#a" class="d">a</a> function in an external library
	<a href="vimfn.txt.html#libcallnr%28%29" class="d">libcallnr()</a>		idem, returning <a href="insert.txt.html#a" class="d">a</a> number

	<a href="vimfn.txt.html#undofile%28%29" class="d">undofile()</a>		get the name of the <a href="undo.txt.html#undo" class="d">undo</a> file
	<a href="vimfn.txt.html#undotree%28%29" class="d">undotree()</a>		return the state of the <a href="undo.txt.html#undo" class="d">undo</a> tree <a href="luaref.txt.html#for" class="d">for</a> <a href="insert.txt.html#a" class="d">a</a> buffer

	<a href="vimfn.txt.html#shiftwidth%28%29" class="d">shiftwidth()</a>		effective value of <a href="options.txt.html#%27shiftwidth%27" class="o">'shiftwidth'</a>

	<a href="vimfn.txt.html#wordcount%28%29" class="d">wordcount()</a>		get byte/word/char <a href="intro.txt.html#count" class="d">count</a> of buffer

	<a href="vimfn.txt.html#luaeval%28%29" class="d">luaeval()</a>		evaluate <a href="lua.txt.html#Lua" class="l">Lua</a> <a href="vimeval.txt.html#expression" class="d">expression</a>
	<a href="vimfn.txt.html#py3eval%28%29" class="d">py3eval()</a>		evaluate <a href="if_pyth.txt.html#Python" class="l">Python</a> <a href="vimeval.txt.html#expression" class="d">expression</a>
	<a href="vimfn.txt.html#pyeval%28%29" class="d">pyeval()</a>		evaluate <a href="if_pyth.txt.html#Python" class="l">Python</a> <a href="vimeval.txt.html#expression" class="d">expression</a>
	<a href="vimfn.txt.html#pyxeval%28%29" class="d">pyxeval()</a>		evaluate <a href="if_pyth.txt.html#python_x" class="l">python_x</a> <a href="vimeval.txt.html#expression" class="d">expression</a>
	<a href="vimfn.txt.html#rubyeval%28%29" class="d">rubyeval()</a>		evaluate <a href="if_ruby.txt.html#Ruby" class="l">Ruby</a> <a href="vimeval.txt.html#expression" class="d">expression</a>

	<a href="vimfn.txt.html#debugbreak%28%29" class="d">debugbreak()</a>		interrupt <a href="insert.txt.html#a" class="d">a</a> program being debugged

<span class="h">==============================================================================</span>
<span id="41.7" class="t">41.7</span>  	Defining <a href="insert.txt.html#a" class="d">a</a> function

Vim enables you to define your own functions.  The basic function declaration
begins <a href="motion.txt.html#as" class="d">as</a> follows: 
<span class="e"></span>
<span class="e">	:function {name}({var1}, {var2}, ...)</span>
<span class="e">	:  {body}</span>
<span class="e">	:endfunction</span>

	<span class="n">Note:</span>
	Function names must begin with <a href="insert.txt.html#a" class="d">a</a> capital letter.

Let's define <a href="insert.txt.html#a" class="d">a</a> short function to return the smaller of two numbers.  It starts
with this line: 
<span class="e"></span>
<span class="e">	:function Min(num1, num2)</span>
<span class="e"></span>
This tells Vim that the function <a href="motion.txt.html#is" class="d">is</a> named "Min" and <a href="motion.txt.html#it" class="d">it</a> takes two arguments:
"num1" and "num2"<a href="repeat.txt.html#." class="d">.</a>
   The first thing you need to <a href="diff.txt.html#do" class="d">do</a> <a href="motion.txt.html#is" class="d">is</a> to check to see which number <a href="motion.txt.html#is" class="d">is</a> smaller:
   
<span class="e">	:  if a:num1 &lt; a:num2</span>
<span class="e"></span>
The special prefix "a:" tells Vim that the variable <a href="motion.txt.html#is" class="d">is</a> <a href="insert.txt.html#a" class="d">a</a> function argument.
Let's assign the variable "smaller" the value of the smallest number: 
<span class="e"></span>
<span class="e">	:  if a:num1 &lt; a:num2</span>
<span class="e">	:    let smaller = a:num1</span>
<span class="e">	:  else</span>
<span class="e">	:    let smaller = a:num2</span>
<span class="e">	:  endif</span>
<span class="e"></span>
The variable "smaller" <a href="motion.txt.html#is" class="d">is</a> <a href="insert.txt.html#a" class="d">a</a> local variable.  Variables used inside <a href="insert.txt.html#a" class="d">a</a> function
are local unless prefixed by something like "<a href="vimeval.txt.html#g%3A" class="d">g:</a>"<a href="motion.txt.html#%2C" class="d">,</a> "a:"<a href="motion.txt.html#%2C" class="d">,</a> or "s:"<a href="repeat.txt.html#." class="d">.</a>

	<span class="n">Note:</span>
	To access <a href="insert.txt.html#a" class="d">a</a> global variable from inside <a href="insert.txt.html#a" class="d">a</a> function you must prepend
	"<a href="vimeval.txt.html#g%3A" class="d">g:</a>" to it.  Thus "g:today" inside <a href="insert.txt.html#a" class="d">a</a> function <a href="motion.txt.html#is" class="d">is</a> used <a href="luaref.txt.html#for" class="d">for</a> the global
	variable "today"<a href="motion.txt.html#%2C" class="d">,</a> and "today" <a href="motion.txt.html#is" class="d">is</a> another variable, local to the
	function.

You now use the "<a href="userfunc.txt.html#%3Areturn" class="d">:return</a>" statement to return the smallest number to the user.
Finally, you <a href="intro.txt.html#end" class="d">end</a> the function: 
<span class="e"></span>
<span class="e">	:  return smaller</span>
<span class="e">	:endfunction</span>
<span class="e"></span>
The complete function definition <a href="motion.txt.html#is" class="d">is</a> <a href="motion.txt.html#as" class="d">as</a> follows: 
<span class="e"></span>
<span class="e">	:function Min(num1, num2)</span>
<span class="e">	:  if a:num1 &lt; a:num2</span>
<span class="e">	:    let smaller = a:num1</span>
<span class="e">	:  else</span>
<span class="e">	:    let smaller = a:num2</span>
<span class="e">	:  endif</span>
<span class="e">	:  return smaller</span>
<span class="e">	:endfunction</span>
<span class="e"></span>
For people who like short functions, this does the same thing: 
<span class="e"></span>
<span class="e">	:function Min(num1, num2)</span>
<span class="e">	:  if a:num1 &lt; a:num2</span>
<span class="e">	:    return a:num1</span>
<span class="e">	:  endif</span>
<span class="e">	:  return a:num2</span>
<span class="e">	:endfunction</span>
<span class="e"></span>
<a href="insert.txt.html#A" class="d">A</a> user defined function <a href="motion.txt.html#is" class="d">is</a> called in exactly the same way <a href="motion.txt.html#as" class="d">as</a> <a href="insert.txt.html#a" class="d">a</a> built-in
function.  Only the name <a href="motion.txt.html#is" class="d">is</a> different.  The Min function can be used like
this: 
<span class="e"></span>
<span class="e">	:echo Min(5, 8)</span>
<span class="e"></span>
Only now will the function be executed and the lines be interpreted by Vim.
If there are mistakes, like using an undefined variable or function, you will
now get an error message.  When defining the function these <a href="message.txt.html#errors" class="d">errors</a> are not
detected.

When <a href="insert.txt.html#a" class="d">a</a> function reaches "<a href="userfunc.txt.html#%3Aendfunction" class="d">:endfunction</a>" or "<a href="userfunc.txt.html#%3Areturn" class="d">:return</a>" <a href="motion.txt.html#is" class="d">is</a> used without an
argument, the function returns zero.

To redefine <a href="insert.txt.html#a" class="d">a</a> function that already exists, use the <a href="change.txt.html#%21" class="d">!</a> <a href="luaref.txt.html#for" class="d">for</a> the "<a href="userfunc.txt.html#%3Afunction" class="d">:function</a>"
command: 
<span class="e"></span>
<span class="e">	:function!  Min(num1, num2, num3)</span>
<span class="e"></span>
<span class="e"></span>
<span class="c">USING A RANGE</span>

The "<a href="userfunc.txt.html#%3Acall" class="d">:call</a>" command can be given <a href="insert.txt.html#a" class="d">a</a> line range.  This can have one of two
meanings.  When <a href="insert.txt.html#a" class="d">a</a> function has been defined with the "range" keyword, <a href="motion.txt.html#it" class="d">it</a> will
take care of the line range itself.
  The function will be passed the <a href="vimeval.txt.html#variables" class="d">variables</a> "<a href="userfunc.txt.html#a%3Afirstline" class="d">a:firstline</a>" and "<a href="userfunc.txt.html#a%3Alastline" class="d">a:lastline</a>"<a href="repeat.txt.html#." class="d">.</a>
These will have the line numbers from the range the function was called with.
Example: 
<span class="e"></span>
<span class="e">	:function Count_words() range</span>
<span class="e">	:  let lnum = a:firstline</span>
<span class="e">	:  let n = 0</span>
<span class="e">	:  while lnum &lt;= a:lastline</span>
<span class="e">	:    let n = n + len(split(getline(lnum)))</span>
<span class="e">	:    let lnum = lnum + 1</span>
<span class="e">	:  endwhile</span>
<span class="e">	:  echo "found " .. n .. " words"</span>
<span class="e">	:endfunction</span>
<span class="e"></span>
You can call this function with: 
<span class="e"></span>
<span class="e">	:10,30call Count_words()</span>
<span class="e"></span>
It will be executed once and echo the number of words.
   The other way to use <a href="insert.txt.html#a" class="d">a</a> line range <a href="motion.txt.html#is" class="d">is</a> by defining <a href="insert.txt.html#a" class="d">a</a> function without the
"range" keyword.  The function will be called once <a href="luaref.txt.html#for" class="d">for</a> every line in the
range, with the cursor in that line.  Example: 
<span class="e"></span>
<span class="e">	:function  Number()</span>
<span class="e">	:  echo "line " .. line(".") .. " contains: " .. getline(".")</span>
<span class="e">	:endfunction</span>
<span class="e"></span>
If you call this function with: 
<span class="e"></span>
<span class="e">	:10,15call Number()</span>
<span class="e"></span>
The function will be called six times.


<span class="c">VARIABLE NUMBER OF ARGUMENTS</span>

Vim enables you to define <a href="vimeval.txt.html#functions" class="d">functions</a> that have <a href="insert.txt.html#a" class="d">a</a> variable number of arguments.
The following command, <a href="luaref.txt.html#for" class="d">for</a> instance, defines <a href="insert.txt.html#a" class="d">a</a> function that must have 1
argument (start) and can have up to 20 additional arguments: 
<span class="e"></span>
<span class="e">	:function Show(start, ...)</span>
<span class="e"></span>
The variable "<a href="userfunc.txt.html#a%3A1" class="d">a:1</a>" contains the first optional argument, "a:2" the second, and
so on.  The variable "<a href="userfunc.txt.html#a%3A0" class="d">a:0</a>" contains the number of extra arguments.
   For example: 
<span class="e"></span>
<span class="e">	:function Show(start, ...)</span>
<span class="e">	:  echohl Title</span>
<span class="e">	:  echo "start is " .. a:start</span>
<span class="e">	:  echohl None</span>
<span class="e">	:  let index = 1</span>
<span class="e">	:  while index &lt;= a:0</span>
<span class="e">	:    echo "  Arg " .. index .. " is " .. a:{index}</span>
<span class="e">	:    let index = index + 1</span>
<span class="e">	:  endwhile</span>
<span class="e">	:  echo ""</span>
<span class="e">	:endfunction</span>
<span class="e"></span>
This uses the "<a href="vimeval.txt.html#%3Aechohl" class="d">:echohl</a>" command to specify the highlighting used <a href="luaref.txt.html#for" class="d">for</a> the
following "<a href="vimeval.txt.html#%3Aecho" class="d">:echo</a>" command.  "<a href="vimeval.txt.html#%3Aechohl" class="d">:echohl</a> None" stops <a href="motion.txt.html#it" class="d">it</a> again.  The "<a href="vimeval.txt.html#%3Aechon" class="d">:echon</a>"
command works like "<a href="vimeval.txt.html#%3Aecho" class="d">:echo</a>"<a href="motion.txt.html#%2C" class="d">,</a> but doesn't output <a href="insert.txt.html#a" class="d">a</a> line break.

You can also use the <a href="userfunc.txt.html#a%3A000" class="d">a:000</a> variable, <a href="motion.txt.html#it" class="d">it</a> <a href="motion.txt.html#is" class="d">is</a> <a href="insert.txt.html#a" class="d">a</a> <a href="vimeval.txt.html#List" class="d">List</a> of all the "<a href="userfunc.txt.html#..." class="d">...</a>" arguments.
See <a href="userfunc.txt.html#a%3A000" class="l">a:000</a><a href="repeat.txt.html#." class="d">.</a>


<span class="c">LISTING FUNCTIONS</span>

The "<a href="userfunc.txt.html#%3Afunction" class="d">:function</a>" command lists the names and arguments of all user-defined
functions: 
<span class="e"></span>
<span class="e">	:function</span>
<span class="h">	function Show(start, ...) </span>
<span class="h">	function GetVimIndent() </span>
<span class="h">	function SetSyn(name) </span>

To see what <a href="insert.txt.html#a" class="d">a</a> function does, use its name <a href="motion.txt.html#as" class="d">as</a> an argument <a href="luaref.txt.html#for" class="d">for</a> "<a href="userfunc.txt.html#%3Afunction" class="d">:function</a>"<a href="cmdline.txt.html#%3A" class="d">:</a> 
<span class="e"></span>
<span class="e">	:function SetSyn</span>
<span class="h">	1     if &amp;syntax == '' </span>
<span class="h">	2       let &amp;syntax = a:name </span>
<span class="h">	3     endif </span>
<span class="h">	   endfunction </span>


<span class="c">DEBUGGING</span>

The line number <a href="motion.txt.html#is" class="d">is</a> useful <a href="luaref.txt.html#for" class="d">for</a> when you get an error message or when debugging.
See <a href="repeat.txt.html#debug-scripts" class="l">debug-scripts</a> about debugging mode.
   You can also set the <a href="options.txt.html#%27verbose%27" class="o">'verbose'</a> option to 12 or higher to see all function
calls.  Set <a href="motion.txt.html#it" class="d">it</a> to 15 or higher to see every executed line.


<span class="c">DELETING A FUNCTION</span>

To delete the Show() function: 
<span class="e"></span>
<span class="e">	:delfunction Show</span>
<span class="e"></span>
You get an error when the function doesn't exist.


<span class="c">FUNCTION REFERENCES</span>

Sometimes <a href="motion.txt.html#it" class="d">it</a> can be useful to have <a href="insert.txt.html#a" class="d">a</a> variable point to one function or
another.  You can <a href="diff.txt.html#do" class="d">do</a> <a href="motion.txt.html#it" class="d">it</a> with the <a href="vimfn.txt.html#function%28%29" class="d">function()</a> function.  It turns the name of <a href="insert.txt.html#a" class="d">a</a>
function into <a href="insert.txt.html#a" class="d">a</a> reference: 
<span class="e"></span>
<span class="e">	:let result = 0		" or 1</span>
<span class="e">	:function! Right()</span>
<span class="e">	:  return 'Right!'</span>
<span class="e">	:endfunc</span>
<span class="e">	:function! Wrong()</span>
<span class="e">	:  return 'Wrong!'</span>
<span class="e">	:endfunc</span>
<span class="e">	:</span>
<span class="e">	:if result == 1</span>
<span class="e">	:  let Afunc = function('Right')</span>
<span class="e">	:else</span>
<span class="e">	:  let Afunc = function('Wrong')</span>
<span class="e">	:endif</span>
<span class="e">	:echo call(Afunc, [])</span>
<span class="h">	Wrong! </span>

<span class="n">Note</span> that the name of <a href="insert.txt.html#a" class="d">a</a> variable that holds <a href="insert.txt.html#a" class="d">a</a> function <a href="intro.txt.html#reference" class="d">reference</a> must start
with <a href="insert.txt.html#a" class="d">a</a> capital.  Otherwise <a href="motion.txt.html#it" class="d">it</a> could be confused with the name of <a href="insert.txt.html#a" class="d">a</a> builtin
function.
   The way to invoke <a href="insert.txt.html#a" class="d">a</a> function that <a href="insert.txt.html#a" class="d">a</a> variable refers to <a href="motion.txt.html#is" class="d">is</a> with the <a href="vimfn.txt.html#call%28%29" class="d">call()</a>
function.  Its first argument <a href="motion.txt.html#is" class="d">is</a> the function reference, the second argument
<a href="motion.txt.html#is" class="d">is</a> <a href="insert.txt.html#a" class="d">a</a> <a href="vimeval.txt.html#List" class="d">List</a> with arguments.

Function references are most useful in combination with <a href="insert.txt.html#a" class="d">a</a> Dictionary, <a href="motion.txt.html#as" class="d">as</a> <a href="motion.txt.html#is" class="d">is</a>
explained in the next section.

More information about defining your own <a href="vimeval.txt.html#functions" class="d">functions</a> here: <a href="vimeval.txt.html#user-function" class="l">user-function</a><a href="repeat.txt.html#." class="d">.</a>

<span class="h">==============================================================================</span>
<span id="41.8" class="t">41.8</span>  	<a href="vimeval.txt.html#Lists" class="d">Lists</a> and <a href="vimeval.txt.html#Dictionaries" class="d">Dictionaries</a>

So far we have used the basic types <a href="vimeval.txt.html#String" class="d">String</a> and Number.  Vim also supports two
composite types: <a href="vimeval.txt.html#List" class="d">List</a> and Dictionary.

<a href="insert.txt.html#A" class="d">A</a> <a href="vimeval.txt.html#List" class="d">List</a> <a href="motion.txt.html#is" class="d">is</a> an ordered sequence of things.  The things can be any kind of value,
thus you can make <a href="insert.txt.html#a" class="d">a</a> <a href="vimeval.txt.html#List" class="d">List</a> of numbers, <a href="insert.txt.html#a" class="d">a</a> <a href="vimeval.txt.html#List" class="d">List</a> of <a href="vimeval.txt.html#Lists" class="d">Lists</a> and even <a href="insert.txt.html#a" class="d">a</a> <a href="vimeval.txt.html#List" class="d">List</a> of mixed
items.  To create <a href="insert.txt.html#a" class="d">a</a> <a href="vimeval.txt.html#List" class="d">List</a> with three strings: 
<span class="e"></span>
<span class="e">	:let alist = ['aap', 'mies', 'noot']</span>
<span class="e"></span>
The <a href="vimeval.txt.html#List" class="d">List</a> items are enclosed in square brackets and separated by commas.  To
create an empty List: 
<span class="e"></span>
<span class="e">	:let alist = []</span>
<span class="e"></span>
You can add items to <a href="insert.txt.html#a" class="d">a</a> <a href="vimeval.txt.html#List" class="d">List</a> with the <a href="vimfn.txt.html#add%28%29" class="d">add()</a> function: 
<span class="e"></span>
<span class="e">	:let alist = []</span>
<span class="e">	:call add(alist, 'foo')</span>
<span class="e">	:call add(alist, 'bar')</span>
<span class="e">	:echo alist</span>
<span class="h">	['foo', 'bar'] </span>

<a href="vimeval.txt.html#List" class="d">List</a> concatenation <a href="motion.txt.html#is" class="d">is</a> done with +: 
<span class="e"></span>
<span class="e">	:echo alist + ['foo', 'bar']</span>
<span class="h">	['foo', 'bar', 'foo', 'bar'] </span>

Or, if you want to extend <a href="insert.txt.html#a" class="d">a</a> <a href="vimeval.txt.html#List" class="d">List</a> directly: 
<span class="e"></span>
<span class="e">	:let alist = ['one']</span>
<span class="e">	:call extend(alist, ['two', 'three'])</span>
<span class="e">	:echo alist</span>
<span class="h">	['one', 'two', 'three'] </span>

Notice that using <a href="vimfn.txt.html#add%28%29" class="d">add()</a> will have <a href="insert.txt.html#a" class="d">a</a> different effect: 
<span class="e"></span>
<span class="e">	:let alist = ['one']</span>
<span class="e">	:call add(alist, ['two', 'three'])</span>
<span class="e">	:echo alist</span>
<span class="h">	['one', ['two', 'three']] </span>

The second argument of <a href="vimfn.txt.html#add%28%29" class="d">add()</a> <a href="motion.txt.html#is" class="d">is</a> added <a href="motion.txt.html#as" class="d">as</a> <a href="insert.txt.html#a" class="d">a</a> single item.


<span class="c">FOR LOOP</span>

One of the nice things you can <a href="diff.txt.html#do" class="d">do</a> with <a href="insert.txt.html#a" class="d">a</a> <a href="vimeval.txt.html#List" class="d">List</a> <a href="motion.txt.html#is" class="d">is</a> iterate over it: 
<span class="e"></span>
<span class="e">	:let alist = ['one', 'two', 'three']</span>
<span class="e">	:for n in alist</span>
<span class="e">	:  echo n</span>
<span class="e">	:endfor</span>
<span class="h">	one </span>
<span class="h">	two </span>
<span class="h">	three </span>

This will loop over each element in <a href="vimeval.txt.html#List" class="d">List</a> "alist"<a href="motion.txt.html#%2C" class="d">,</a> assigning the value to
variable "<a href="pattern.txt.html#n" class="d">n</a>"<a href="repeat.txt.html#." class="d">.</a>  The generic form of <a href="insert.txt.html#a" class="d">a</a> <a href="luaref.txt.html#for" class="d">for</a> loop is: 
<span class="e"></span>
<span class="e">	:for {varname} in {listexpression}</span>
<span class="e">	:  {commands}</span>
<span class="e">	:endfor</span>
<span class="e"></span>
To loop <a href="insert.txt.html#a" class="d">a</a> certain number of times you need <a href="insert.txt.html#a" class="d">a</a> <a href="vimeval.txt.html#List" class="d">List</a> of <a href="insert.txt.html#a" class="d">a</a> specific length.  The
<a href="vimfn.txt.html#range%28%29" class="d">range()</a> function creates one <a href="luaref.txt.html#for" class="d">for</a> you: 
<span class="e"></span>
<span class="e">	:for a in range(3)</span>
<span class="e">	:  echo a</span>
<span class="e">	:endfor</span>
<span class="h">	0 </span>
<span class="h">	1 </span>
<span class="h">	2 </span>

Notice that the first item of the <a href="vimeval.txt.html#List" class="d">List</a> that <a href="vimfn.txt.html#range%28%29" class="d">range()</a> produces <a href="motion.txt.html#is" class="d">is</a> zero, thus the
last item <a href="motion.txt.html#is" class="d">is</a> one <a href="various.txt.html#less" class="d">less</a> than the length of the list.
   You can also specify the maximum value, the stride and even <a href="motion.txt.html#go" class="d">go</a> backwards: 
<span class="e"></span>
<span class="e">	:for a in range(8, 4, -2)</span>
<span class="e">	:  echo a</span>
<span class="e">	:endfor</span>
<span class="h">	8 </span>
<span class="h">	6 </span>
<span class="h">	4 </span>

<a href="insert.txt.html#A" class="d">A</a> more useful example, looping over lines in the buffer: 
<span class="e"></span>
<span class="e">	:for line in getline(1, 20)</span>
<span class="e">	:  if line =~ "Date: "</span>
<span class="e">	:    echo matchstr(line, 'Date: \zs.*')</span>
<span class="e">	:  endif</span>
<span class="e">	:endfor</span>
<span class="e"></span>
This looks into lines 1 to 20 (inclusive) and echoes any date found in there.


<span class="c">DICTIONARIES</span>

<a href="insert.txt.html#A" class="d">A</a> <a href="vimeval.txt.html#Dictionary" class="d">Dictionary</a> stores key-value pairs.  You can quickly lookup <a href="insert.txt.html#a" class="d">a</a> value if you
know the key.  <a href="insert.txt.html#A" class="d">A</a> <a href="vimeval.txt.html#Dictionary" class="d">Dictionary</a> <a href="motion.txt.html#is" class="d">is</a> created with curly braces: 
<span class="e"></span>
<span class="e">	:let uk2nl = {'one': 'een', 'two': 'twee', 'three': 'drie'}</span>
<span class="e"></span>
Now you can lookup words by putting the key in square brackets: 
<span class="e"></span>
<span class="e">	:echo uk2nl['two']</span>
<span class="h">	twee </span>

The generic form <a href="luaref.txt.html#for" class="d">for</a> defining <a href="insert.txt.html#a" class="d">a</a> <a href="vimeval.txt.html#Dictionary" class="d">Dictionary</a> is: 
<span class="e"></span>
<span class="e">	{&lt;key&gt; : &lt;value&gt;, ...}</span>
<span class="e"></span>
An empty <a href="vimeval.txt.html#Dictionary" class="d">Dictionary</a> <a href="motion.txt.html#is" class="d">is</a> one without any keys: 
<span class="e"></span>
<span class="e">	{}</span>
<span class="e"></span>
The possibilities with <a href="vimeval.txt.html#Dictionaries" class="d">Dictionaries</a> are numerous.  There are <a href="various.txt.html#various" class="d">various</a> <a href="vimeval.txt.html#functions" class="d">functions</a>
<a href="luaref.txt.html#for" class="d">for</a> them <a href="motion.txt.html#as" class="d">as</a> well.  For example, you can obtain <a href="insert.txt.html#a" class="d">a</a> <a href="vimeval.txt.html#list" class="d">list</a> of the keys and loop
over them: 
<span class="e"></span>
<span class="e">	:for key in keys(uk2nl)</span>
<span class="e">	:  echo key</span>
<span class="e">	:endfor</span>
<span class="h">	three </span>
<span class="h">	one </span>
<span class="h">	two </span>

You will notice the keys are not ordered.  You can sort the <a href="vimeval.txt.html#list" class="d">list</a> to get <a href="insert.txt.html#a" class="d">a</a>
specific order: 
<span class="e"></span>
<span class="e">	:for key in sort(keys(uk2nl))</span>
<span class="e">	:  echo key</span>
<span class="e">	:endfor</span>
<span class="h">	one </span>
<span class="h">	three </span>
<span class="h">	two </span>

But you can never get back the order in which items are defined.  For that you
need to use <a href="insert.txt.html#a" class="d">a</a> List, <a href="motion.txt.html#it" class="d">it</a> stores items in an ordered sequence.


<span class="c">DICTIONARY FUNCTIONS</span>

The items in <a href="insert.txt.html#a" class="d">a</a> <a href="vimeval.txt.html#Dictionary" class="d">Dictionary</a> can normally be obtained with an <a href="index.txt.html#index" class="d">index</a> in square
brackets: 
<span class="e"></span>
<span class="e">	:echo uk2nl['one']</span>
<span class="h">	een </span>

<a href="insert.txt.html#A" class="d">A</a> <a href="vimeval.txt.html#method" class="d">method</a> that does the same, but without so many punctuation characters: 
<span class="e"></span>
<span class="e">	:echo uk2nl.one</span>
<span class="h">	een </span>

This only works <a href="luaref.txt.html#for" class="d">for</a> <a href="insert.txt.html#a" class="d">a</a> key that <a href="motion.txt.html#is" class="d">is</a> made of ASCII letters, digits and the
underscore.  You can also assign <a href="insert.txt.html#a" class="d">a</a> new value this way: 
<span class="e"></span>
<span class="e">	:let uk2nl.four = 'vier'</span>
<span class="e">	:echo uk2nl</span>
<span class="h">	{'three': 'drie', 'four': 'vier', 'one': 'een', 'two': 'twee'} </span>

And now <a href="luaref.txt.html#for" class="d">for</a> something special: you can directly define <a href="insert.txt.html#a" class="d">a</a> function and store <a href="insert.txt.html#a" class="d">a</a>
<a href="intro.txt.html#reference" class="d">reference</a> to <a href="motion.txt.html#it" class="d">it</a> in the dictionary: 
<span class="e"></span>
<span class="e">	:function uk2nl.translate(line) dict</span>
<span class="e">	:  return join(map(split(a:line), 'get(self, v:val, "???")'))</span>
<span class="e">	:endfunction</span>
<span class="e"></span>
Let's first try <a href="motion.txt.html#it" class="d">it</a> out: 
<span class="e"></span>
<span class="e">	:echo uk2nl.translate('three two five one')</span>
<span class="h">	drie twee ??? een </span>

The first special thing you notice <a href="motion.txt.html#is" class="d">is</a> the "<a href="vimeval.txt.html#dict" class="d">dict</a>" <a href="motion.txt.html#at" class="d">at</a> the <a href="intro.txt.html#end" class="d">end</a> of the "<a href="userfunc.txt.html#%3Afunction" class="d">:function</a>"
line.  This marks the function <a href="motion.txt.html#as" class="d">as</a> being used from <a href="insert.txt.html#a" class="d">a</a> Dictionary.  The "<a href="vimeval.txt.html#self" class="d">self</a>"
local variable will then refer to that Dictionary.
   Now let's break up the complicated return command: 
<span class="e"></span>
<span class="e">	split(a:line)</span>
<span class="e"></span>
The <a href="vimfn.txt.html#split%28%29" class="d">split()</a> function takes <a href="insert.txt.html#a" class="d">a</a> string, chops <a href="motion.txt.html#it" class="d">it</a> into <a href="pattern.txt.html#whitespace" class="d">whitespace</a> separated words
and returns <a href="insert.txt.html#a" class="d">a</a> <a href="vimeval.txt.html#list" class="d">list</a> with these words.  Thus in the example <a href="motion.txt.html#it" class="d">it</a> returns: 
<span class="e"></span>
<span class="e">	:echo split('three two five one')</span>
<span class="h">	['three', 'two', 'five', 'one'] </span>

This <a href="vimeval.txt.html#list" class="d">list</a> <a href="motion.txt.html#is" class="d">is</a> the first argument to the <a href="vimfn.txt.html#map%28%29" class="d">map()</a> function.  This will <a href="motion.txt.html#go" class="d">go</a> through
the list, evaluating its second argument with "<a href="vvars.txt.html#v%3Aval" class="d">v:val</a>" set to the value of each
item.  This <a href="motion.txt.html#is" class="d">is</a> <a href="insert.txt.html#a" class="d">a</a> shortcut to using <a href="insert.txt.html#a" class="d">a</a> <a href="luaref.txt.html#for" class="d">for</a> loop.  This command: 
<span class="e"></span>
<span class="e">	:let alist = map(split(a:line), 'get(self, v:val, "???")')</span>
<span class="e"></span>
Is equivalent to: 
<span class="e"></span>
<span class="e">	:let alist = split(a:line)</span>
<span class="e">	:for idx in range(len(alist))</span>
<span class="e">	:  let alist[idx] = get(self, alist[idx], "???")</span>
<span class="e">	:endfor</span>
<span class="e"></span>
The <a href="vimfn.txt.html#get%28%29" class="d">get()</a> function checks if <a href="insert.txt.html#a" class="d">a</a> key <a href="motion.txt.html#is" class="d">is</a> present in <a href="insert.txt.html#a" class="d">a</a> Dictionary.  If <a href="motion.txt.html#it" class="d">it</a> is, then
the value <a href="motion.txt.html#is" class="d">is</a> retrieved.  If <a href="motion.txt.html#it" class="d">it</a> isn't, then the default value <a href="motion.txt.html#is" class="d">is</a> returned, in
the example it's '???'.  This <a href="motion.txt.html#is" class="d">is</a> <a href="insert.txt.html#a" class="d">a</a> convenient way to handle situations where <a href="insert.txt.html#a" class="d">a</a>
key may not be present and you don't want an error message.

The <a href="vimfn.txt.html#join%28%29" class="d">join()</a> function does the opposite of split(): <a href="motion.txt.html#it" class="d">it</a> joins together <a href="insert.txt.html#a" class="d">a</a> <a href="vimeval.txt.html#list" class="d">list</a> of
words, putting <a href="insert.txt.html#a" class="d">a</a> <a href="intro.txt.html#space" class="d">space</a> in between.
  This combination of split(), <a href="vimfn.txt.html#map%28%29" class="d">map()</a> and <a href="vimfn.txt.html#join%28%29" class="d">join()</a> <a href="motion.txt.html#is" class="d">is</a> <a href="insert.txt.html#a" class="d">a</a> nice way to <a href="change.txt.html#filter" class="d">filter</a> <a href="insert.txt.html#a" class="d">a</a> line
of words in <a href="insert.txt.html#a" class="d">a</a> very compact way.


<span class="c">OBJECT ORIENTED PROGRAMMING</span>

Now that you can <a href="change.txt.html#put" class="d">put</a> both values and <a href="vimeval.txt.html#functions" class="d">functions</a> in <a href="insert.txt.html#a" class="d">a</a> Dictionary, you can
actually use <a href="insert.txt.html#a" class="d">a</a> <a href="vimeval.txt.html#Dictionary" class="d">Dictionary</a> like an object.
   Above we used <a href="insert.txt.html#a" class="d">a</a> <a href="vimeval.txt.html#Dictionary" class="d">Dictionary</a> <a href="luaref.txt.html#for" class="d">for</a> translating Dutch to English.  We might want
to <a href="diff.txt.html#do" class="d">do</a> the same <a href="luaref.txt.html#for" class="d">for</a> other languages.  Let's first make an object (aka
Dictionary) that has the translate function, but no words to translate: 
<span class="e"></span>
<span class="e">	:let transdict = {}</span>
<span class="e">	:function transdict.translate(line) dict</span>
<span class="e">	:  return join(map(split(a:line), 'get(self.words, v:val, "???")'))</span>
<span class="e">	:endfunction</span>
<span class="e"></span>
It's slightly different from the function above, using 'self.words' to lookup
<a href="motion.txt.html#word" class="d">word</a> translations.  But we don't have <a href="insert.txt.html#a" class="d">a</a> self.words.  Thus you could call this
an abstract class.

Now we can instantiate <a href="insert.txt.html#a" class="d">a</a> Dutch translation object: 
<span class="e"></span>
<span class="e">	:let uk2nl = copy(transdict)</span>
<span class="e">	:let uk2nl.words = {'one': 'een', 'two': 'twee', 'three': 'drie'}</span>
<span class="e">	:echo uk2nl.translate('three one')</span>
<span class="h">	drie een </span>

And <a href="insert.txt.html#a" class="d">a</a> German translator: 
<span class="e"></span>
<span class="e">	:let uk2de = copy(transdict)</span>
<span class="e">	:let uk2de.words = {'one': 'eins', 'two': 'zwei', 'three': 'drei'}</span>
<span class="e">	:echo uk2de.translate('three one')</span>
<span class="h">	drei eins </span>

You see that the <a href="vimfn.txt.html#copy%28%29" class="d">copy()</a> function <a href="motion.txt.html#is" class="d">is</a> used to make <a href="insert.txt.html#a" class="d">a</a> copy of the "transdict"
<a href="vimeval.txt.html#Dictionary" class="d">Dictionary</a> and then the copy <a href="motion.txt.html#is" class="d">is</a> changed to add the words.  The original
remains the same, of course.

Now you can <a href="motion.txt.html#go" class="d">go</a> one step further, and use your preferred translator: 
<span class="e"></span>
<span class="e">	:if $LANG =~ "de"</span>
<span class="e">	:  let trans = uk2de</span>
<span class="e">	:else</span>
<span class="e">	:  let trans = uk2nl</span>
<span class="e">	:endif</span>
<span class="e">	:echo trans.translate('one two three')</span>
<span class="h">	een twee drie </span>

Here "trans" refers to one of the two <a href="index.txt.html#objects" class="d">objects</a> (Dictionaries).  No copy <a href="motion.txt.html#is" class="d">is</a>
made.  More about <a href="vimeval.txt.html#List" class="d">List</a> and <a href="vimeval.txt.html#Dictionary" class="d">Dictionary</a> identity can be found <a href="motion.txt.html#at" class="d">at</a> <a href="vimeval.txt.html#list-identity" class="l">list-identity</a>
and <a href="vimeval.txt.html#dict-identity" class="l">dict-identity</a><a href="repeat.txt.html#." class="d">.</a>

Now you might use <a href="insert.txt.html#a" class="d">a</a> language that isn't supported.  You can overrule the
translate() function to <a href="diff.txt.html#do" class="d">do</a> nothing: 
<span class="e"></span>
<span class="e">	:let uk2uk = copy(transdict)</span>
<span class="e">	:function! uk2uk.translate(line)</span>
<span class="e">	:  return a:line</span>
<span class="e">	:endfunction</span>
<span class="e">	:echo uk2uk.translate('three one wladiwostok')</span>
<span class="h">	three one wladiwostok </span>

Notice that <a href="insert.txt.html#a" class="d">a</a> <a href="change.txt.html#%21" class="d">!</a> was used to overwrite the existing function reference.  Now
use "uk2uk" when no recognized language <a href="motion.txt.html#is" class="d">is</a> found: 
<span class="e"></span>
<span class="e">	:if $LANG =~ "de"</span>
<span class="e">	:  let trans = uk2de</span>
<span class="e">	:elseif $LANG =~ "nl"</span>
<span class="e">	:  let trans = uk2nl</span>
<span class="e">	:else</span>
<span class="e">	:  let trans = uk2uk</span>
<span class="e">	:endif</span>
<span class="e">	:echo trans.translate('one two three')</span>
<span class="h">	one two three </span>

For further reading see <a href="vimeval.txt.html#Lists" class="l">Lists</a> and <a href="vimeval.txt.html#Dictionaries" class="l">Dictionaries</a><a href="repeat.txt.html#." class="d">.</a>

<span class="h">==============================================================================</span>
<span id="41.9" class="t">41.9</span>  	Exceptions

Let's start with an example: 
<span class="e"></span>
<span class="e">	:try</span>
<span class="e">	:   read ~/templates/pascal.tmpl</span>
<span class="e">	:catch /E484:/</span>
<span class="e">	:   echo "Sorry, the Pascal template file cannot be found."</span>
<span class="e">	:endtry</span>
<span class="e"></span>
The "<a href="insert.txt.html#%3Aread" class="d">:read</a>" command will fail if the file does not exist.  Instead of
generating an error message, this code catches the error and gives the user <a href="insert.txt.html#a" class="d">a</a>
nice message.

For the commands in between "<a href="vimeval.txt.html#%3Atry" class="d">:try</a>" and "<a href="vimeval.txt.html#%3Aendtry" class="d">:endtry</a>" <a href="message.txt.html#errors" class="d">errors</a> are turned into
exceptions.  An exception <a href="motion.txt.html#is" class="d">is</a> <a href="insert.txt.html#a" class="d">a</a> string.  In the <a href="change.txt.html#case" class="d">case</a> of an error the <a href="vimeval.txt.html#string" class="d">string</a>
contains the error message.  And every error message has <a href="insert.txt.html#a" class="d">a</a> number.  In this
case, the error we catch contains "E484:"<a href="repeat.txt.html#." class="d">.</a>  This number <a href="motion.txt.html#is" class="d">is</a> guaranteed to stay
the same (the text may change, e.g., <a href="motion.txt.html#it" class="d">it</a> may be translated).

When the "<a href="insert.txt.html#%3Aread" class="d">:read</a>" command causes another error, the <a href="pattern.txt.html#pattern" class="d">pattern</a> "E484:" will not
match in it.  Thus this exception will not be caught and result in the usual
error message and execution <a href="motion.txt.html#is" class="d">is</a> aborted.

You might be tempted to <a href="diff.txt.html#do" class="d">do</a> this: 
<span class="e"></span>
<span class="e">	:try</span>
<span class="e">	:   read ~/templates/pascal.tmpl</span>
<span class="e">	:catch</span>
<span class="e">	:   echo "Sorry, the Pascal template file cannot be found."</span>
<span class="e">	:endtry</span>
<span class="e"></span>
This means all <a href="message.txt.html#errors" class="d">errors</a> are caught.  But then you will not see <a href="message.txt.html#errors" class="d">errors</a> that are
useful, such <a href="motion.txt.html#as" class="d">as</a> "E21: Cannot make changes, <a href="options.txt.html#%27modifiable%27" class="o">'modifiable'</a> <a href="motion.txt.html#is" class="d">is</a> off"<a href="repeat.txt.html#." class="d">.</a>

Another useful mechanism <a href="motion.txt.html#is" class="d">is</a> the "<a href="vimeval.txt.html#%3Afinally" class="d">:finally</a>" command: 
<span class="e"></span>
<span class="e">	:let tmp = tempname()</span>
<span class="e">	:try</span>
<span class="e">	:   exe ".,$write " .. tmp</span>
<span class="e">	:   exe "!filter " .. tmp</span>
<span class="e">	:   .,$delete</span>
<span class="e">	:   exe "$read " .. tmp</span>
<span class="e">	:finally</span>
<span class="e">	:   call delete(tmp)</span>
<span class="e">	:endtry</span>
<span class="e"></span>
This filters the lines from the cursor until the <a href="intro.txt.html#end" class="d">end</a> of the file through the
"<a href="change.txt.html#filter" class="d">filter</a>" command, which takes <a href="insert.txt.html#a" class="d">a</a> file name argument.  No matter if the
filtering works, something goes wrong in between "<a href="vimeval.txt.html#%3Atry" class="d">:try</a>" and "<a href="vimeval.txt.html#%3Afinally" class="d">:finally</a>" or the
user cancels the filtering by pressing <a href="pattern.txt.html#CTRL-C" class="k">CTRL-C</a>, the "call delete(tmp)" <a href="motion.txt.html#is" class="d">is</a>
always executed.  This makes sure you don't leave the temporary file behind.

More information about exception handling can be found in the <a href="intro.txt.html#reference" class="d">reference</a>
manual: <a href="vimeval.txt.html#exception-handling" class="l">exception-handling</a><a href="repeat.txt.html#." class="d">.</a>

<span class="h">==============================================================================</span>
<span id="41.10" class="t">41.10</span>  	Various remarks

Here <a href="motion.txt.html#is" class="d">is</a> <a href="insert.txt.html#a" class="d">a</a> summary of items that apply to Vim scripts.  They are also mentioned
elsewhere, but form <a href="insert.txt.html#a" class="d">a</a> nice checklist.

The end-of-line character depends on the system.  For Vim scripts <a href="motion.txt.html#it" class="d">it</a> <a href="motion.txt.html#is" class="d">is</a>
recommended to always use the Unix fileformat.  Lines are then separated with
the Newline character.  This also works on any other system.  That way you can
copy your Vim scripts from MS-Windows to Unix and they still work.  See
<a href="repeat.txt.html#%3Asource_crnl" class="l">:source_crnl</a><a href="repeat.txt.html#." class="d">.</a>  To be sure <a href="motion.txt.html#it" class="d">it</a> <a href="motion.txt.html#is" class="d">is</a> set right, <a href="diff.txt.html#do" class="d">do</a> this before <a href="editing.txt.html#writing" class="d">writing</a> the file:
 
<span class="e">	:setlocal fileformat=unix</span>
<span class="e"></span>
When using "dos" fileformat, lines are separated with CR-NL, two characters.
The CR character causes <a href="various.txt.html#various" class="d">various</a> problems, better avoid this.


<span class="c">WHITE SPACE</span>

Blank lines are allowed in <a href="insert.txt.html#a" class="d">a</a> <a href="usr_41.txt.html#script" class="d">script</a> and ignored.

Leading <a href="pattern.txt.html#whitespace" class="d">whitespace</a> characters (blanks and TABs) are ignored, except when using
<a href="vimeval.txt.html#%3Alet-heredoc" class="l">:let-heredoc</a> without "trim"<a href="repeat.txt.html#." class="d">.</a>

Trailing <a href="pattern.txt.html#whitespace" class="d">whitespace</a> <a href="motion.txt.html#is" class="d">is</a> often ignored, but not always.  One command that
includes <a href="motion.txt.html#it" class="d">it</a> <a href="motion.txt.html#is" class="d">is</a> <span class="e">map</span>.  You have to watch out <a href="luaref.txt.html#for" class="d">for</a> that, <a href="motion.txt.html#it" class="d">it</a> can cause hard to
understand mistakes.  <a href="insert.txt.html#A" class="d">A</a> generic solution <a href="motion.txt.html#is" class="d">is</a> to never use trailing white space,
unless you really need it.

To include <a href="insert.txt.html#a" class="d">a</a> <a href="pattern.txt.html#whitespace" class="d">whitespace</a> character in the value of an option, <a href="motion.txt.html#it" class="d">it</a> must be
escaped by <a href="insert.txt.html#a" class="d">a</a> "\" (backslash)  <a href="motion.txt.html#as" class="d">as</a> in the following example: 
<span class="e"></span>
<span class="e">	:set tags=my\ nice\ file</span>
<span class="e"></span>
The same example written as: 
<span class="e"></span>
<span class="e">	:set tags=my nice file</span>
<span class="e"></span>
will issue an error, because <a href="motion.txt.html#it" class="d">it</a> <a href="motion.txt.html#is" class="d">is</a> interpreted as: 
<span class="e"></span>
<span class="e">	:set tags=my</span>
<span class="e">	:set nice</span>
<span class="e">	:set file</span>
<span class="e"></span>
<span class="e"></span>
<span class="c">COMMENTS</span>

The character " (the double <a href="change.txt.html#quote" class="d">quote</a> mark) starts <a href="insert.txt.html#a" class="d">a</a> comment.  Everything after
and including this character until the end-of-line <a href="motion.txt.html#is" class="d">is</a> considered <a href="insert.txt.html#a" class="d">a</a> comment and
<a href="motion.txt.html#is" class="d">is</a> ignored, except <a href="luaref.txt.html#for" class="d">for</a> commands that don't consider comments, <a href="motion.txt.html#as" class="d">as</a> shown in
examples below.  <a href="insert.txt.html#A" class="d">A</a> comment can start on any character position on the line.

There <a href="motion.txt.html#is" class="d">is</a> <a href="insert.txt.html#a" class="d">a</a> little "catch" with comments <a href="luaref.txt.html#for" class="d">for</a> some commands.  Examples: 
<span class="e"></span>
<span class="e">	:abbrev dev development		" shorthand</span>
<span class="e">	:map &lt;F3&gt; o#include		" insert include</span>
<span class="e">	:execute cmd			" do it</span>
<span class="e">	:!ls *.c			" list C files</span>
<span class="e"></span>
The <a href="map.txt.html#abbreviation" class="d">abbreviation</a> "<a href="develop.txt.html#dev" class="d">dev</a>" will be expanded to 'development     " shorthand'.  The
<a href="map.txt.html#mapping" class="d">mapping</a> of <span class="s">&lt;F3&gt;</span> will actually be the whole line after the 'o# ....' including
the <a href="motion.txt.html#%27" class="d">'</a>" <a href="insert.txt.html#insert" class="d">insert</a> include'.  The "execute" command will give an error.  The "<a href="change.txt.html#%21" class="d">!</a>"
command will send everything after <a href="motion.txt.html#it" class="d">it</a> to the shell, causing an error <a href="luaref.txt.html#for" class="d">for</a> an
unmatched <a href="motion.txt.html#%27" class="d">'</a>"<a href="motion.txt.html#%27" class="d">'</a> character.
   There can be no comment after "<a href="map.txt.html#%3Amap" class="d">:map</a>"<a href="motion.txt.html#%2C" class="d">,</a> "<a href="map.txt.html#%3Aabbreviate" class="d">:abbreviate</a>"<a href="motion.txt.html#%2C" class="d">,</a> "<a href="vimeval.txt.html#%3Aexecute" class="d">:execute</a>" and "<a href="change.txt.html#%21" class="d">!</a>"
commands (there are <a href="insert.txt.html#a" class="d">a</a> few more commands with this restriction).  For the
"<a href="map.txt.html#%3Amap" class="d">:map</a>"<a href="motion.txt.html#%2C" class="d">,</a> "<a href="map.txt.html#%3Aabbreviate" class="d">:abbreviate</a>" and "<a href="vimeval.txt.html#%3Aexecute" class="d">:execute</a>" commands there <a href="motion.txt.html#is" class="d">is</a> <a href="insert.txt.html#a" class="d">a</a> trick: 
<span class="e"></span>
<span class="e">	:abbrev dev development|" shorthand</span>
<span class="e">	:map &lt;F3&gt; o#include|" insert include</span>
<span class="e">	:execute cmd			|" do it</span>
<span class="e"></span>
With the <a href="motion.txt.html#%27" class="d">'</a>|<a href="motion.txt.html#%27" class="d">'</a> character the command <a href="motion.txt.html#is" class="d">is</a> separated from the next one.  And that
next command <a href="motion.txt.html#is" class="d">is</a> only <a href="insert.txt.html#a" class="d">a</a> comment.  For the last command you need to <a href="diff.txt.html#do" class="d">do</a> two
things: <a href="vimeval.txt.html#%3Aexecute" class="l">:execute</a> and use <a href="motion.txt.html#%27" class="d">'</a>|': 
<span class="e">	:exe '!ls *.c'			|" list C files</span>
<span class="e"></span>
Notice that there <a href="motion.txt.html#is" class="d">is</a> no white <a href="intro.txt.html#space" class="d">space</a> before the <a href="motion.txt.html#%27" class="d">'</a>|<a href="motion.txt.html#%27" class="d">'</a> in the <a href="map.txt.html#abbreviation" class="d">abbreviation</a> and
mapping.  For these commands, any character until the end-of-line or <a href="motion.txt.html#%27" class="d">'</a>|<a href="motion.txt.html#%27" class="d">'</a> <a href="motion.txt.html#is" class="d">is</a>
included.  As <a href="insert.txt.html#a" class="d">a</a> consequence of this behavior, you don't always see that
trailing <a href="pattern.txt.html#whitespace" class="d">whitespace</a> <a href="motion.txt.html#is" class="d">is</a> included: 
<span class="e"></span>
<span class="e">	:map &lt;F4&gt; o#include  </span>
<span class="e"></span>
To spot these problems, you can set the <a href="options.txt.html#%27list%27" class="o">'list'</a> option when editing <a href="starting.txt.html#vimrc" class="d">vimrc</a>
files.

For Unix there <a href="motion.txt.html#is" class="d">is</a> one special way to comment <a href="insert.txt.html#a" class="d">a</a> line, that allows making <a href="insert.txt.html#a" class="d">a</a> Vim
<a href="usr_41.txt.html#script" class="d">script</a> executable: 
<span class="e">	#!/usr/bin/env vim -S</span>
<span class="e">	echo "this is a Vim script"</span>
<span class="e">	quit</span>
<span class="e"></span>
The "<a href="pattern.txt.html#%23" class="d">#</a>" command by itself lists <a href="insert.txt.html#a" class="d">a</a> line with the line number.  Adding an
exclamation <a href="motion.txt.html#mark" class="d">mark</a> changes <a href="motion.txt.html#it" class="d">it</a> into doing nothing, so that you can add the shell
command to execute the rest of the file. <a href="various.txt.html#%3A%23%21" class="l">:#!</a> <a href="starting.txt.html#-S" class="l">-S</a>


<span class="c">PITFALLS</span>

Even bigger problem arises in the following example: 
<span class="e"></span>
<span class="e">	:map ,ab o#include</span>
<span class="e">	:unmap ,ab</span>
<span class="e"></span>
Here the unmap command will not work, because <a href="motion.txt.html#it" class="d">it</a> tries to unmap ",ab "<a href="repeat.txt.html#." class="d">.</a>  This
does not exist <a href="motion.txt.html#as" class="d">as</a> <a href="insert.txt.html#a" class="d">a</a> mapped sequence.  An error will be issued, which <a href="motion.txt.html#is" class="d">is</a> very
hard to identify, because the ending <a href="pattern.txt.html#whitespace" class="d">whitespace</a> character in "<a href="map.txt.html#%3Aunmap" class="d">:unmap</a> ,ab " <a href="motion.txt.html#is" class="d">is</a>
not visible.

And this <a href="motion.txt.html#is" class="d">is</a> the same <a href="motion.txt.html#as" class="d">as</a> what happens when one uses <a href="insert.txt.html#a" class="d">a</a> comment after an "unmap"
command: 
<span class="e"></span>
<span class="e">	:unmap ,ab     " comment</span>
<span class="e"></span>
Here the comment part will be ignored.  However, Vim will try to unmap
',ab     ', which does not exist.  Rewrite <a href="motion.txt.html#it" class="d">it</a> as: 
<span class="e"></span>
<span class="e">	:unmap ,ab|    " comment</span>
<span class="e"></span>
<span class="e"></span>
<span class="c">RESTORING THE VIEW</span>

Sometimes you want to make <a href="insert.txt.html#a" class="d">a</a> change and <a href="motion.txt.html#go" class="d">go</a> back to where the cursor was.
Restoring the relative position would also be nice, so that the same line
appears <a href="motion.txt.html#at" class="d">at</a> the top of the window.
   This example yanks the current line, puts <a href="motion.txt.html#it" class="d">it</a> above the first line in the
file and then restores the view: 
<span class="e"></span>
<span class="e">	map ,p ma"aYHmbgg"aP`bzt`a</span>
<span class="e"></span>
What this does: 
<span class="e">	ma"aYHmbgg"aP`bzt`a</span>
	ma			set <a href="motion.txt.html#mark" class="d">mark</a> <a href="insert.txt.html#a" class="d">a</a> <a href="motion.txt.html#at" class="d">at</a> cursor position
	  "aY			<a href="change.txt.html#yank" class="d">yank</a> current line into <a href="intro.txt.html#register" class="d">register</a> <a href="insert.txt.html#a" class="d">a</a>
	     Hmb		<a href="motion.txt.html#go" class="d">go</a> to top line in <a href="windows.txt.html#window" class="d">window</a> and set <a href="motion.txt.html#mark" class="d">mark</a> <a href="motion.txt.html#b" class="d">b</a> there
		<a href="motion.txt.html#gg" class="d">gg</a>		<a href="motion.txt.html#go" class="d">go</a> to first line in file
		  "aP		<a href="change.txt.html#put" class="d">put</a> the yanked line above <a href="motion.txt.html#it" class="d">it</a>
		     `b		<a href="motion.txt.html#go" class="d">go</a> back to top line in display
		       <a href="scroll.txt.html#zt" class="d">zt</a>	position the text in the <a href="windows.txt.html#window" class="d">window</a> <a href="motion.txt.html#as" class="d">as</a> before
			 <a href="motion.txt.html#%60a" class="d">`a</a>	<a href="motion.txt.html#go" class="d">go</a> back to saved cursor position


<span class="c">PACKAGING</span>

To avoid your function names to interfere with <a href="vimeval.txt.html#functions" class="d">functions</a> that you get from
others, use this scheme:
<a href="motion.txt.html#-" class="d">-</a> Prepend <a href="insert.txt.html#a" class="d">a</a> unique <a href="vimeval.txt.html#string" class="d">string</a> before each function name.  <a href="insert.txt.html#I" class="d">I</a> often use an
  abbreviation.  For example, "OW_" <a href="motion.txt.html#is" class="d">is</a> used <a href="luaref.txt.html#for" class="d">for</a> the option <a href="windows.txt.html#window" class="d">window</a> functions.
<a href="motion.txt.html#-" class="d">-</a> Put the definition of your <a href="vimeval.txt.html#functions" class="d">functions</a> together in <a href="insert.txt.html#a" class="d">a</a> file.  Set <a href="insert.txt.html#a" class="d">a</a> global
  variable to indicate that the <a href="vimeval.txt.html#functions" class="d">functions</a> have been loaded.  When sourcing the
  file again, first unload the functions.
Example: 
<span class="e"></span>
<span class="e">	" This is the XXX package</span>
<span class="e"></span>
<span class="e">	if exists("XXX_loaded")</span>
<span class="e">	  delfun XXX_one</span>
<span class="e">	  delfun XXX_two</span>
<span class="e">	endif</span>
<span class="e"></span>
<span class="e">	function XXX_one(a)</span>
<span class="e">		... body of function ...</span>
<span class="e">	endfun</span>
<span class="e"></span>
<span class="e">	function XXX_two(b)</span>
<span class="e">		... body of function ...</span>
<span class="e">	endfun</span>
<span class="e"></span>
<span class="e">	let XXX_loaded = 1</span>
<span class="e"></span>
<span class="h">==============================================================================</span>
<span id="41.11" class="t">41.11</span>  	Writing <a href="insert.txt.html#a" class="d">a</a> <a href="usr_05.txt.html#plugin" class="d">plugin</a>				<span id="write-plugin" class="t">write-plugin</span>

You can write <a href="insert.txt.html#a" class="d">a</a> Vim <a href="usr_41.txt.html#script" class="d">script</a> in such <a href="insert.txt.html#a" class="d">a</a> way that many people can use it.  This <a href="motion.txt.html#is" class="d">is</a>
called <a href="insert.txt.html#a" class="d">a</a> plugin.  Vim users can drop your <a href="usr_41.txt.html#script" class="d">script</a> in their <a href="usr_05.txt.html#plugin" class="d">plugin</a> directory and
use its features right away <a href="usr_05.txt.html#add-plugin" class="l">add-plugin</a><a href="repeat.txt.html#." class="d">.</a>

There are actually two types of plugins:

  global plugins: For all types of files.
<a href="filetype.txt.html#filetype" class="d">filetype</a> plugins: Only <a href="luaref.txt.html#for" class="d">for</a> files of <a href="insert.txt.html#a" class="d">a</a> specific type.

In this <a href="motion.txt.html#section" class="d">section</a> the first type <a href="motion.txt.html#is" class="d">is</a> explained.  Most items are also relevant <a href="luaref.txt.html#for" class="d">for</a>
<a href="editing.txt.html#writing" class="d">writing</a> <a href="filetype.txt.html#filetype" class="d">filetype</a> plugins.  The specifics <a href="luaref.txt.html#for" class="d">for</a> <a href="filetype.txt.html#filetype" class="d">filetype</a> plugins are in the next
<a href="motion.txt.html#section" class="d">section</a> <a href="usr_41.txt.html#write-filetype-plugin" class="l">write-filetype-plugin</a><a href="repeat.txt.html#." class="d">.</a>


<span class="c">NAME</span>

First of all you must choose <a href="insert.txt.html#a" class="d">a</a> name <a href="luaref.txt.html#for" class="d">for</a> your plugin.  The features provided
by the <a href="usr_05.txt.html#plugin" class="d">plugin</a> should be clear from its name.  And <a href="motion.txt.html#it" class="d">it</a> should be unlikely that
someone else writes <a href="insert.txt.html#a" class="d">a</a> <a href="usr_05.txt.html#plugin" class="d">plugin</a> with the same name but which does something
different.  And please limit the name to 8 characters, to avoid problems on
old MS-Windows systems.

<a href="insert.txt.html#A" class="d">A</a> <a href="usr_41.txt.html#script" class="d">script</a> that corrects typing mistakes could be called "typecorr.vim"<a href="repeat.txt.html#." class="d">.</a>  We
will use <a href="motion.txt.html#it" class="d">it</a> here <a href="motion.txt.html#as" class="d">as</a> an example.

For the <a href="usr_05.txt.html#plugin" class="d">plugin</a> to work <a href="luaref.txt.html#for" class="d">for</a> everybody, <a href="motion.txt.html#it" class="d">it</a> should follow <a href="insert.txt.html#a" class="d">a</a> few guidelines.  This
will be explained step-by-step.  The complete example <a href="usr_05.txt.html#plugin" class="d">plugin</a> <a href="motion.txt.html#is" class="d">is</a> <a href="motion.txt.html#at" class="d">at</a> the end.


<span class="c">BODY</span>

Let's start with the body of the plugin, the lines that <a href="diff.txt.html#do" class="d">do</a> the actual work: 
<span class="e"></span>
<span class="e"> 14	iabbrev teh the</span>
<span class="e"> 15	iabbrev otehr other</span>
<span class="e"> 16	iabbrev wnat want</span>
<span class="e"> 17	iabbrev synchronisation</span>
<span class="e"> 18		\ synchronization</span>
<span class="e"> 19	let s:count = 4</span>
<span class="e"></span>
The actual <a href="vimeval.txt.html#list" class="d">list</a> should be much longer, of course.

The line numbers have only been added to explain <a href="insert.txt.html#a" class="d">a</a> few things, don't <a href="change.txt.html#put" class="d">put</a> them
in your <a href="usr_05.txt.html#plugin" class="d">plugin</a> file!


<span class="c">HEADER</span>

You will probably add new corrections to the <a href="usr_05.txt.html#plugin" class="d">plugin</a> and soon have several
versions lying around.  And when distributing this file, people will want to
know who wrote this wonderful <a href="usr_05.txt.html#plugin" class="d">plugin</a> and where they can send remarks.
Therefore, <a href="change.txt.html#put" class="d">put</a> <a href="insert.txt.html#a" class="d">a</a> header <a href="motion.txt.html#at" class="d">at</a> the top of your plugin: 
<span class="e"></span>
<span class="e">  1	" Vim global plugin for correcting typing mistakes</span>
<span class="e">  2	" Last Change:	2000 Oct 15</span>
<span class="e">  3	" Maintainer:	Bram Moolenaar &lt;Bram@vim.org&gt;</span>
<span class="e"></span>
About <a href="uganda.txt.html#copyright" class="d">copyright</a> and licensing: Since plugins are very useful and it's hardly
worth restricting their distribution, please consider making your <a href="usr_05.txt.html#plugin" class="d">plugin</a>
either public domain or use the Vim <a href="uganda.txt.html#license" class="l">license</a><a href="repeat.txt.html#." class="d">.</a>  <a href="insert.txt.html#A" class="d">A</a> short <span class="n">note</span> about this near
the top of the <a href="usr_05.txt.html#plugin" class="d">plugin</a> should be sufficient.  Example: 
<span class="e"></span>
<span class="e">  4	" License:	This file is placed in the public domain.</span>
<span class="e"></span>
<span class="e"></span>
<span class="c">LINE CONTINUATION, AVOIDING SIDE EFFECTS</span>		<span id="use-cpo-save" class="t">use-cpo-save</span>

In line 18 above, the <a href="repeat.txt.html#line-continuation" class="d">line-continuation</a> mechanism <a href="motion.txt.html#is" class="d">is</a> used <a href="repeat.txt.html#line-continuation" class="l">line-continuation</a><a href="repeat.txt.html#." class="d">.</a>
Users with <a href="vim_diff.txt.html#%27compatible%27" class="o">'compatible'</a> set will run into trouble here, they will get an error
message.  We can't just reset <a href="vim_diff.txt.html#%27compatible%27" class="o">'compatible'</a>, because that has <a href="insert.txt.html#a" class="d">a</a> lot of side
effects.  To avoid this, we will set the <a href="options.txt.html#%27cpoptions%27" class="o">'cpoptions'</a> option to its Vim default
value and restore <a href="motion.txt.html#it" class="d">it</a> later.  That will allow the use of <a href="repeat.txt.html#line-continuation" class="d">line-continuation</a> and
make the <a href="usr_41.txt.html#script" class="d">script</a> work <a href="luaref.txt.html#for" class="d">for</a> most people.  It <a href="motion.txt.html#is" class="d">is</a> done like this: 
<span class="e"></span>
<span class="e"> 11	let s:save_cpo = &amp;cpo</span>
<span class="e"> 12	set cpo&amp;vim</span>
<span class="e"> ..</span>
<span class="e"> 42	let &amp;cpo = s:save_cpo</span>
<span class="e"> 43	unlet s:save_cpo</span>
<span class="e"></span>
We first store the old value of <a href="options.txt.html#%27cpoptions%27" class="o">'cpoptions'</a> in the s:save_cpo variable.  At
the <a href="intro.txt.html#end" class="d">end</a> of the <a href="usr_05.txt.html#plugin" class="d">plugin</a> this value <a href="motion.txt.html#is" class="d">is</a> restored.

Notice that <a href="insert.txt.html#a" class="d">a</a> <a href="map.txt.html#script-local" class="d">script-local</a> variable <a href="motion.txt.html#is" class="d">is</a> used <a href="vimeval.txt.html#s%3Avar" class="l">s:var</a><a href="repeat.txt.html#." class="d">.</a>  <a href="insert.txt.html#A" class="d">A</a> global variable could
already be in use <a href="luaref.txt.html#for" class="d">for</a> something else.  Always use <a href="map.txt.html#script-local" class="d">script-local</a> <a href="vimeval.txt.html#variables" class="d">variables</a> <a href="luaref.txt.html#for" class="d">for</a>
things that are only used in the script.


<span class="c">NOT LOADING</span>

It's possible that <a href="insert.txt.html#a" class="d">a</a> user doesn't always want to load this plugin.  Or the
system administrator has dropped <a href="motion.txt.html#it" class="d">it</a> in the system-wide <a href="usr_05.txt.html#plugin" class="d">plugin</a> directory, but <a href="insert.txt.html#a" class="d">a</a>
user has their own <a href="usr_05.txt.html#plugin" class="d">plugin</a> they want to use.  Then the user must have <a href="insert.txt.html#a" class="d">a</a> chance to
disable loading this specific plugin.  This will make <a href="motion.txt.html#it" class="d">it</a> possible: 
<span class="e"></span>
<span class="e">  6	if exists("g:loaded_typecorr")</span>
<span class="e">  7	  finish</span>
<span class="e">  8	endif</span>
<span class="e">  9	let g:loaded_typecorr = 1</span>
<span class="e"></span>
This also avoids that when the <a href="usr_41.txt.html#script" class="d">script</a> <a href="motion.txt.html#is" class="d">is</a> loaded twice <a href="motion.txt.html#it" class="d">it</a> would cause error
<a href="message.txt.html#messages" class="d">messages</a> <a href="luaref.txt.html#for" class="d">for</a> redefining <a href="vimeval.txt.html#functions" class="d">functions</a> and cause trouble <a href="luaref.txt.html#for" class="d">for</a> autocommands that are
added twice.

The name <a href="motion.txt.html#is" class="d">is</a> recommended to start with "loaded_" and then the file name of the
plugin, literally.  The "<a href="vimeval.txt.html#g%3A" class="d">g:</a>" <a href="motion.txt.html#is" class="d">is</a> prepended just to avoid mistakes when using
the variable in <a href="insert.txt.html#a" class="d">a</a> function (without "<a href="vimeval.txt.html#g%3A" class="d">g:</a>" <a href="motion.txt.html#it" class="d">it</a> would be <a href="insert.txt.html#a" class="d">a</a> variable local to the
function).

Using "finish" stops Vim from reading the rest of the file, it's much quicker
than using if-endif around the whole file.


<span class="c">MAPPING</span>

Now let's make the <a href="usr_05.txt.html#plugin" class="d">plugin</a> more interesting: We will add <a href="insert.txt.html#a" class="d">a</a> <a href="map.txt.html#mapping" class="d">mapping</a> that adds <a href="insert.txt.html#a" class="d">a</a>
correction <a href="luaref.txt.html#for" class="d">for</a> the <a href="motion.txt.html#word" class="d">word</a> under the cursor.  We could just pick <a href="insert.txt.html#a" class="d">a</a> key sequence
<a href="luaref.txt.html#for" class="d">for</a> this mapping, but the user might already use <a href="motion.txt.html#it" class="d">it</a> <a href="luaref.txt.html#for" class="d">for</a> something else.  To
allow the user to define which keys <a href="insert.txt.html#a" class="d">a</a> <a href="map.txt.html#mapping" class="d">mapping</a> in <a href="insert.txt.html#a" class="d">a</a> <a href="usr_05.txt.html#plugin" class="d">plugin</a> uses, the <a href="map.txt.html#%3CLeader%3E" class="s">&lt;Leader&gt;</a>
item can be used: 
<span class="e"></span>
<span class="e"> 22	  map &lt;unique&gt; &lt;Leader&gt;a  &lt;Plug&gt;TypecorrAdd;</span>
<span class="e"></span>
The "<a href="map.txt.html#%3CPlug%3E" class="s">&lt;Plug&gt;</a>TypecorrAdd;" thing will <a href="diff.txt.html#do" class="d">do</a> the work, more about that further on.

The user can set the "<a href="map.txt.html#mapleader" class="d">mapleader</a>" variable to the key sequence that they want
this <a href="map.txt.html#mapping" class="d">mapping</a> to start with.  Thus if the user has done: 
<span class="e"></span>
<span class="e">	let mapleader = "_"</span>
<span class="e"></span>
the <a href="map.txt.html#mapping" class="d">mapping</a> will define "_a"<a href="repeat.txt.html#." class="d">.</a>  If the user didn't <a href="diff.txt.html#do" class="d">do</a> this, the default value
will be used, which <a href="motion.txt.html#is" class="d">is</a> <a href="insert.txt.html#a" class="d">a</a> backslash.  Then <a href="insert.txt.html#a" class="d">a</a> map <a href="luaref.txt.html#for" class="d">for</a> "\a" will be defined.

<span class="n">Note</span> that <span class="s">&lt;unique&gt;</span> <a href="motion.txt.html#is" class="d">is</a> used, this will cause an error message if the <a href="map.txt.html#mapping" class="d">mapping</a>
already happened to exist. <a href="map.txt.html#%3Amap-%3Cunique%3E" class="l">:map-&lt;unique&gt;</a>

But what if the user wants to define their own key sequence?  We can allow that
with this mechanism: 
<span class="e"></span>
<span class="e"> 21	if !hasmapto('&lt;Plug&gt;TypecorrAdd;')</span>
<span class="e"> 22	  map &lt;unique&gt; &lt;Leader&gt;a  &lt;Plug&gt;TypecorrAdd;</span>
<span class="e"> 23	endif</span>
<span class="e"></span>
This checks if <a href="insert.txt.html#a" class="d">a</a> <a href="map.txt.html#mapping" class="d">mapping</a> to "<a href="map.txt.html#%3CPlug%3E" class="s">&lt;Plug&gt;</a>TypecorrAdd;" already exists, and only
defines the <a href="map.txt.html#mapping" class="d">mapping</a> from "<a href="map.txt.html#%3CLeader%3E" class="s">&lt;Leader&gt;</a>a" if <a href="motion.txt.html#it" class="d">it</a> doesn't.  The user then has <a href="insert.txt.html#a" class="d">a</a>
chance of putting this in their <a href="starting.txt.html#vimrc" class="d">vimrc</a> file: 
<span class="e"></span>
<span class="e">	map ,c  &lt;Plug&gt;TypecorrAdd;</span>
<span class="e"></span>
Then the mapped key sequence will be ",c" instead of "_a" or "\a"<a href="repeat.txt.html#." class="d">.</a>


<span class="c">PIECES</span>

If <a href="insert.txt.html#a" class="d">a</a> <a href="usr_41.txt.html#script" class="d">script</a> gets longer, you often want to break up the work in pieces.  You
can use <a href="vimeval.txt.html#functions" class="d">functions</a> or mappings <a href="luaref.txt.html#for" class="d">for</a> this.  But you don't want these <a href="vimeval.txt.html#functions" class="d">functions</a>
and mappings to interfere with the ones from other scripts.  For example, you
could define <a href="insert.txt.html#a" class="d">a</a> function Add(), but another <a href="usr_41.txt.html#script" class="d">script</a> could try to define the same
function.  To avoid this, we define the function local to the <a href="usr_41.txt.html#script" class="d">script</a> by
prepending <a href="motion.txt.html#it" class="d">it</a> with "s:"<a href="repeat.txt.html#." class="d">.</a>

We will define <a href="insert.txt.html#a" class="d">a</a> function that adds <a href="insert.txt.html#a" class="d">a</a> new typing correction: 
<span class="e"></span>
<span class="e"> 30	function s:Add(from, correct)</span>
<span class="e"> 31	  let to = input("type the correction for " .. a:from .. ": ")</span>
<span class="e"> 32	  exe ":iabbrev " .. a:from .. " " .. to</span>
<span class="e"> ..</span>
<span class="e"> 36	endfunction</span>
<span class="e"></span>
Now we can call the function s:Add() from within this script.  If another
<a href="usr_41.txt.html#script" class="d">script</a> also defines s:Add(), <a href="motion.txt.html#it" class="d">it</a> will be local to that <a href="usr_41.txt.html#script" class="d">script</a> and can only
be called from the <a href="usr_41.txt.html#script" class="d">script</a> <a href="motion.txt.html#it" class="d">it</a> was defined in.  There can also be <a href="insert.txt.html#a" class="d">a</a> global Add()
function (without the "s:"), which <a href="motion.txt.html#is" class="d">is</a> again another function.

<a href="map.txt.html#%3CSID%3E" class="s">&lt;SID&gt;</a> can be used with mappings.  It generates <a href="insert.txt.html#a" class="d">a</a> <a href="usr_41.txt.html#script" class="d">script</a> ID, which identifies
the current script.  In our typing correction <a href="usr_05.txt.html#plugin" class="d">plugin</a> we use <a href="motion.txt.html#it" class="d">it</a> like this: 
<span class="e"></span>
<span class="e"> 24	noremap &lt;unique&gt; &lt;script&gt; &lt;Plug&gt;TypecorrAdd;  &lt;SID&gt;Add</span>
<span class="e"> ..</span>
<span class="e"> 28	noremap &lt;SID&gt;Add  :call &lt;SID&gt;Add(expand("&lt;cword&gt;"), 1)&lt;CR&gt;</span>
<span class="e"></span>
Thus when <a href="insert.txt.html#a" class="d">a</a> user types "\a"<a href="motion.txt.html#%2C" class="d">,</a> this sequence <a href="motion.txt.html#is" class="d">is</a> invoked: 
<span class="e"></span>
<span class="e">	\a  -&gt;  &lt;Plug&gt;TypecorrAdd;  -&gt;  &lt;SID&gt;Add  -&gt;  :call &lt;SID&gt;Add()</span>
<span class="e"></span>
If another <a href="usr_41.txt.html#script" class="d">script</a> also maps <a href="map.txt.html#%3CSID%3E" class="s">&lt;SID&gt;</a>Add, <a href="motion.txt.html#it" class="d">it</a> will get another <a href="usr_41.txt.html#script" class="d">script</a> ID and
thus define another mapping.

<span class="n">Note</span> that instead of s:Add() we use <a href="map.txt.html#%3CSID%3E" class="s">&lt;SID&gt;</a>Add() here.  That <a href="motion.txt.html#is" class="d">is</a> because the
<a href="map.txt.html#mapping" class="d">mapping</a> <a href="motion.txt.html#is" class="d">is</a> typed by the user, thus outside of the script.  The <a href="map.txt.html#%3CSID%3E" class="s">&lt;SID&gt;</a> <a href="motion.txt.html#is" class="d">is</a>
translated to the <a href="usr_41.txt.html#script" class="d">script</a> ID, so that Vim knows in which <a href="usr_41.txt.html#script" class="d">script</a> to look <a href="luaref.txt.html#for" class="d">for</a>
the Add() function.

This <a href="motion.txt.html#is" class="d">is</a> <a href="insert.txt.html#a" class="d">a</a> bit complicated, but it's required <a href="luaref.txt.html#for" class="d">for</a> the <a href="usr_05.txt.html#plugin" class="d">plugin</a> to work together
with other plugins.  The basic rule <a href="motion.txt.html#is" class="d">is</a> that you use <a href="map.txt.html#%3CSID%3E" class="s">&lt;SID&gt;</a>Add() in mappings and
s:Add() in other places (the <a href="usr_41.txt.html#script" class="d">script</a> itself, autocommands, user commands).

We can also add <a href="insert.txt.html#a" class="d">a</a> menu entry to <a href="diff.txt.html#do" class="d">do</a> the same <a href="motion.txt.html#as" class="d">as</a> the mapping: 
<span class="e"></span>
<span class="e"> 26	noremenu &lt;script&gt; Plugin.Add\ Correction      &lt;SID&gt;Add</span>
<span class="e"></span>
The "Plugin" menu <a href="motion.txt.html#is" class="d">is</a> recommended <a href="luaref.txt.html#for" class="d">for</a> adding menu items <a href="luaref.txt.html#for" class="d">for</a> plugins.  In this
<a href="change.txt.html#case" class="d">case</a> only one item <a href="motion.txt.html#is" class="d">is</a> used.  When adding more items, creating <a href="insert.txt.html#a" class="d">a</a> submenu <a href="motion.txt.html#is" class="d">is</a>
recommended.  For example, "Plugin.CVS" could be used <a href="luaref.txt.html#for" class="d">for</a> <a href="insert.txt.html#a" class="d">a</a> <a href="usr_05.txt.html#plugin" class="d">plugin</a> that offers
CVS operations "Plugin.CVS.checkin"<a href="motion.txt.html#%2C" class="d">,</a> "Plugin.CVS.checkout"<a href="motion.txt.html#%2C" class="d">,</a> etc.

<span class="n">Note</span> that in line 28 "<a href="map.txt.html#%3Anoremap" class="d">:noremap</a>" <a href="motion.txt.html#is" class="d">is</a> used to avoid that any other mappings cause
trouble.  Someone may have remapped "<a href="userfunc.txt.html#%3Acall" class="d">:call</a>"<a href="motion.txt.html#%2C" class="d">,</a> <a href="luaref.txt.html#for" class="d">for</a> example.  In line 24 we also
use "<a href="map.txt.html#%3Anoremap" class="d">:noremap</a>"<a href="motion.txt.html#%2C" class="d">,</a> but we <a href="diff.txt.html#do" class="d">do</a> want "<a href="map.txt.html#%3CSID%3E" class="s">&lt;SID&gt;</a>Add" to be remapped.  This <a href="motion.txt.html#is" class="d">is</a> why
"<a href="cmdline.txt.html#%3Cscript%3E" class="s">&lt;script&gt;</a>" <a href="motion.txt.html#is" class="d">is</a> used here.  This only allows mappings which are local to the
script. <a href="map.txt.html#%3Amap-%3Cscript%3E" class="l">:map-&lt;script&gt;</a>  The same <a href="motion.txt.html#is" class="d">is</a> done in line 26 <a href="luaref.txt.html#for" class="d">for</a> "<a href="gui.txt.html#%3Anoremenu" class="d">:noremenu</a>"<a href="repeat.txt.html#." class="d">.</a>
<a href="gui.txt.html#%3Amenu-%3Cscript%3E" class="l">:menu-&lt;script&gt;</a>


<a href="map.txt.html#%3CSID%3E" class="s">&lt;SID&gt;</a> AND <a href="map.txt.html#%3CPlug%3E" class="s">&lt;Plug&gt;</a>					<span id="using-%3CPlug%3E" class="t">using-&lt;Plug&gt;</span>

Both <a href="map.txt.html#%3CSID%3E" class="s">&lt;SID&gt;</a> and <a href="map.txt.html#%3CPlug%3E" class="s">&lt;Plug&gt;</a> are used to avoid that mappings of typed keys interfere
with mappings that are only to be used from other mappings.  <span class="n">Note</span> the
difference between using <a href="map.txt.html#%3CSID%3E" class="s">&lt;SID&gt;</a> and <a href="map.txt.html#%3CPlug%3E" class="s">&lt;Plug&gt;</a>:

<a href="map.txt.html#%3CPlug%3E" class="s">&lt;Plug&gt;</a>	<a href="motion.txt.html#is" class="d">is</a> visible outside of the script.  It <a href="motion.txt.html#is" class="d">is</a> used <a href="luaref.txt.html#for" class="d">for</a> mappings which the
	user might want to map <a href="insert.txt.html#a" class="d">a</a> key sequence to.  <a href="map.txt.html#%3CPlug%3E" class="s">&lt;Plug&gt;</a> <a href="motion.txt.html#is" class="d">is</a> <a href="insert.txt.html#a" class="d">a</a> special code
	that <a href="insert.txt.html#a" class="d">a</a> typed key will never produce.
	To make <a href="motion.txt.html#it" class="d">it</a> very unlikely that other plugins use the same sequence of
	characters, use this structure: <a href="map.txt.html#%3CPlug%3E" class="s">&lt;Plug&gt;</a> scriptname mapname
	In our example the scriptname <a href="motion.txt.html#is" class="d">is</a> "Typecorr" and the mapname <a href="motion.txt.html#is" class="d">is</a> "Add"<a href="repeat.txt.html#." class="d">.</a>
	We add <a href="insert.txt.html#a" class="d">a</a> semicolon <a href="motion.txt.html#as" class="d">as</a> the terminator.  This results in
	"<a href="map.txt.html#%3CPlug%3E" class="s">&lt;Plug&gt;</a>TypecorrAdd;"<a href="repeat.txt.html#." class="d">.</a>  Only the first character of scriptname and
	mapname <a href="motion.txt.html#is" class="d">is</a> uppercase, so that we can see where mapname starts.

<a href="map.txt.html#%3CSID%3E" class="s">&lt;SID&gt;</a>	<a href="motion.txt.html#is" class="d">is</a> the <a href="usr_41.txt.html#script" class="d">script</a> ID, <a href="insert.txt.html#a" class="d">a</a> unique identifier <a href="luaref.txt.html#for" class="d">for</a> <a href="insert.txt.html#a" class="d">a</a> script.
	Internally Vim translates <a href="map.txt.html#%3CSID%3E" class="s">&lt;SID&gt;</a> to "<a href="map.txt.html#%3CSNR%3E" class="s">&lt;SNR&gt;</a>123_"<a href="motion.txt.html#%2C" class="d">,</a> where "123" can be any
	number.  Thus <a href="insert.txt.html#a" class="d">a</a> function "<a href="map.txt.html#%3CSID%3E" class="s">&lt;SID&gt;</a>Add()" will have <a href="insert.txt.html#a" class="d">a</a> name "<a href="map.txt.html#%3CSNR%3E" class="s">&lt;SNR&gt;</a>11_Add()"
	in one script, and "<a href="map.txt.html#%3CSNR%3E" class="s">&lt;SNR&gt;</a>22_Add()" in another.  You can see this if
	you use the "<a href="userfunc.txt.html#%3Afunction" class="d">:function</a>" command to get <a href="insert.txt.html#a" class="d">a</a> <a href="vimeval.txt.html#list" class="d">list</a> of functions.  The
	translation of <a href="map.txt.html#%3CSID%3E" class="s">&lt;SID&gt;</a> in mappings <a href="motion.txt.html#is" class="d">is</a> exactly the same, that's how you
	can call <a href="insert.txt.html#a" class="d">a</a> <a href="map.txt.html#script-local" class="d">script-local</a> function from <a href="insert.txt.html#a" class="d">a</a> mapping.


<span class="c">USER COMMAND</span>

Now let's add <a href="insert.txt.html#a" class="d">a</a> user command to add <a href="insert.txt.html#a" class="d">a</a> correction: 
<span class="e"></span>
<span class="e"> 38	if !exists(":Correct")</span>
<span class="e"> 39	  command -nargs=1  Correct  :call s:Add(&lt;q-args&gt;, 0)</span>
<span class="e"> 40	endif</span>
<span class="e"></span>
The user command <a href="motion.txt.html#is" class="d">is</a> defined only if no command with the same name already
exists.  Otherwise we would get an error here.  Overriding the existing user
command with ":command!" <a href="motion.txt.html#is" class="d">is</a> not <a href="insert.txt.html#a" class="d">a</a> good idea, this would probably make the user
wonder why the command they defined themself doesn't work.  <a href="map.txt.html#%3Acommand" class="l">:command</a>


<span class="c">SCRIPT VARIABLES</span>

When <a href="insert.txt.html#a" class="d">a</a> variable starts with "s:" <a href="motion.txt.html#it" class="d">it</a> <a href="motion.txt.html#is" class="d">is</a> <a href="insert.txt.html#a" class="d">a</a> <a href="usr_41.txt.html#script" class="d">script</a> variable.  It can only be used
inside <a href="insert.txt.html#a" class="d">a</a> script.  Outside the <a href="usr_41.txt.html#script" class="d">script</a> it's not visible.  This avoids trouble
with using the same variable name in different scripts.  The <a href="vimeval.txt.html#variables" class="d">variables</a> will be
kept <a href="motion.txt.html#as" class="d">as</a> long <a href="motion.txt.html#as" class="d">as</a> Vim <a href="motion.txt.html#is" class="d">is</a> running.  And the same <a href="vimeval.txt.html#variables" class="d">variables</a> are used when sourcing
the same <a href="usr_41.txt.html#script" class="d">script</a> again. <a href="vimeval.txt.html#s%3Avar" class="l">s:var</a>

The fun <a href="motion.txt.html#is" class="d">is</a> that these <a href="vimeval.txt.html#variables" class="d">variables</a> can also be used in functions, autocommands
and user commands that are defined in the script.  In our example we can add
<a href="insert.txt.html#a" class="d">a</a> few lines to <a href="intro.txt.html#count" class="d">count</a> the number of corrections: 
<span class="e"></span>
<span class="e"> 19	let s:count = 4</span>
<span class="e"> ..</span>
<span class="e"> 30	function s:Add(from, correct)</span>
<span class="e"> ..</span>
<span class="e"> 34	  let s:count = s:count + 1</span>
<span class="e"> 35	  echo s:count .. " corrections now"</span>
<span class="e"> 36	endfunction</span>
<span class="e"></span>
First s:count <a href="motion.txt.html#is" class="d">is</a> initialized to 4 in the <a href="usr_41.txt.html#script" class="d">script</a> itself.  When later the
s:Add() function <a href="motion.txt.html#is" class="d">is</a> called, <a href="motion.txt.html#it" class="d">it</a> increments s:count.  It doesn't matter from
where the function was called, since <a href="motion.txt.html#it" class="d">it</a> has been defined in the script, <a href="motion.txt.html#it" class="d">it</a>
will use the local <a href="vimeval.txt.html#variables" class="d">variables</a> from this script.


<span class="c">THE RESULT</span>

Here <a href="motion.txt.html#is" class="d">is</a> the resulting complete example: 
<span class="e"></span>
<span class="e">  1	" Vim global plugin for correcting typing mistakes</span>
<span class="e">  2	" Last Change:	2000 Oct 15</span>
<span class="e">  3	" Maintainer:	Bram Moolenaar &lt;Bram@vim.org&gt;</span>
<span class="e">  4	" License:	This file is placed in the public domain.</span>
<span class="e">  5</span>
<span class="e">  6	if exists("g:loaded_typecorr")</span>
<span class="e">  7	  finish</span>
<span class="e">  8	endif</span>
<span class="e">  9	let g:loaded_typecorr = 1</span>
<span class="e"> 10</span>
<span class="e"> 11	let s:save_cpo = &amp;cpo</span>
<span class="e"> 12	set cpo&amp;vim</span>
<span class="e"> 13</span>
<span class="e"> 14	iabbrev teh the</span>
<span class="e"> 15	iabbrev otehr other</span>
<span class="e"> 16	iabbrev wnat want</span>
<span class="e"> 17	iabbrev synchronisation</span>
<span class="e"> 18		\ synchronization</span>
<span class="e"> 19	let s:count = 4</span>
<span class="e"> 20</span>
<span class="e"> 21	if !hasmapto('&lt;Plug&gt;TypecorrAdd;')</span>
<span class="e"> 22	  map &lt;unique&gt; &lt;Leader&gt;a  &lt;Plug&gt;TypecorrAdd;</span>
<span class="e"> 23	endif</span>
<span class="e"> 24	noremap &lt;unique&gt; &lt;script&gt; &lt;Plug&gt;TypecorrAdd;  &lt;SID&gt;Add</span>
<span class="e"> 25</span>
<span class="e"> 26	noremenu &lt;script&gt; Plugin.Add\ Correction      &lt;SID&gt;Add</span>
<span class="e"> 27</span>
<span class="e"> 28	noremap &lt;SID&gt;Add  :call &lt;SID&gt;Add(expand("&lt;cword&gt;"), 1)&lt;CR&gt;</span>
<span class="e"> 29</span>
<span class="e"> 30	function s:Add(from, correct)</span>
<span class="e"> 31	  let to = input("type the correction for " .. a:from .. ": ")</span>
<span class="e"> 32	  exe ":iabbrev " .. a:from .. " " .. to</span>
<span class="e"> 33	  if a:correct | exe "normal viws\&lt;C-R&gt;\" \b\e" | endif</span>
<span class="e"> 34	  let s:count = s:count + 1</span>
<span class="e"> 35	  echo s:count .. " corrections now"</span>
<span class="e"> 36	endfunction</span>
<span class="e"> 37</span>
<span class="e"> 38	if !exists(":Correct")</span>
<span class="e"> 39	  command -nargs=1  Correct  :call s:Add(&lt;q-args&gt;, 0)</span>
<span class="e"> 40	endif</span>
<span class="e"> 41</span>
<span class="e"> 42	let &amp;cpo = s:save_cpo</span>
<span class="e"> 43	unlet s:save_cpo</span>
<span class="e"></span>
Line 33 wasn't explained yet.  It applies the new correction to the <a href="motion.txt.html#word" class="d">word</a> under
the cursor.  The <a href="various.txt.html#%3Anormal" class="l">:normal</a> command <a href="motion.txt.html#is" class="d">is</a> used to use the new abbreviation.  <span class="n">Note</span>
that mappings and <a href="map.txt.html#abbreviations" class="d">abbreviations</a> are expanded here, even though the function
was called from <a href="insert.txt.html#a" class="d">a</a> <a href="map.txt.html#mapping" class="d">mapping</a> defined with "<a href="map.txt.html#%3Anoremap" class="d">:noremap</a>"<a href="repeat.txt.html#." class="d">.</a>

Using "unix" <a href="luaref.txt.html#for" class="d">for</a> the <a href="options.txt.html#%27fileformat%27" class="o">'fileformat'</a> option <a href="motion.txt.html#is" class="d">is</a> recommended.  The Vim scripts will
then work everywhere.  Scripts with <a href="options.txt.html#%27fileformat%27" class="o">'fileformat'</a> set to "dos" <a href="diff.txt.html#do" class="d">do</a> not work on
Unix.  Also see <a href="repeat.txt.html#%3Asource_crnl" class="l">:source_crnl</a><a href="repeat.txt.html#." class="d">.</a>  To be sure <a href="motion.txt.html#it" class="d">it</a> <a href="motion.txt.html#is" class="d">is</a> set right, <a href="diff.txt.html#do" class="d">do</a> this before
<a href="editing.txt.html#writing" class="d">writing</a> the file: 
<span class="e"></span>
<span class="e">	:set fileformat=unix</span>
<span class="e"></span>
<span class="e"></span>
<span class="c">DOCUMENTATION</span>						<span id="write-local-help" class="t">write-local-help</span>

It's <a href="insert.txt.html#a" class="d">a</a> good idea to also write some documentation <a href="luaref.txt.html#for" class="d">for</a> your plugin.  Especially
when its behavior can be changed by the user.  See <a href="usr_05.txt.html#add-local-help" class="l">add-local-help</a> <a href="luaref.txt.html#for" class="d">for</a> how
they are installed.

Here <a href="motion.txt.html#is" class="d">is</a> <a href="insert.txt.html#a" class="d">a</a> simple example <a href="luaref.txt.html#for" class="d">for</a> <a href="insert.txt.html#a" class="d">a</a> <a href="usr_05.txt.html#plugin" class="d">plugin</a> <a href="helphelp.txt.html#help" class="d">help</a> file, called "typecorr.txt"<a href="cmdline.txt.html#%3A" class="d">:</a> 
<span class="e"></span>
<span class="e">  1	*typecorr.txt*	Plugin for correcting typing mistakes</span>
<span class="e">  2</span>
<span class="e">  3	If you make typing mistakes, this plugin will have them corrected</span>
<span class="e">  4	automatically.</span>
<span class="e">  5</span>
<span class="e">  6	There are currently only a few corrections.  Add your own if you like.</span>
<span class="e">  7</span>
<span class="e">  8	Mappings:</span>
<span class="e">  9	&lt;Leader&gt;a   or   &lt;Plug&gt;TypecorrAdd;</span>
<span class="e"> 10		Add a correction for the word under the cursor.</span>
<span class="e"> 11</span>
<span class="e"> 12	Commands:</span>
<span class="e"> 13	:Correct {word}</span>
<span class="e"> 14		Add a correction for {word}.</span>
<span class="e"> 15</span>
<span class="e"> 16							*typecorr-settings*</span>
<span class="e"> 17	This plugin doesn't have any settings.</span>
<span class="e"></span>
The first line <a href="motion.txt.html#is" class="d">is</a> actually the only one <a href="luaref.txt.html#for" class="d">for</a> which the format matters.  It will
be extracted from the <a href="helphelp.txt.html#help" class="d">help</a> file to be <a href="change.txt.html#put" class="d">put</a> in the "LOCAL ADDITIONS:" <a href="motion.txt.html#section" class="d">section</a> of
<a href="index.html#help.txt" class="d">help.txt</a> <a href="index.html#local-additions" class="l">local-additions</a><a href="repeat.txt.html#." class="d">.</a>  The first "*" must be in the first column of the
first line.  After adding your <a href="helphelp.txt.html#help" class="d">help</a> file <a href="diff.txt.html#do" class="d">do</a> "<a href="helphelp.txt.html#%3Ahelp" class="d">:help</a>" and check that the entries
line up nicely.

You can add more <a href="tagsrch.txt.html#tags" class="d">tags</a> inside ** in your <a href="helphelp.txt.html#help" class="d">help</a> file.  But be careful not to use
existing <a href="helphelp.txt.html#help" class="d">help</a> tags.  You would probably use the name of your <a href="usr_05.txt.html#plugin" class="d">plugin</a> in most of
them, like "typecorr-settings" in the example.

Using references to other parts of the <a href="helphelp.txt.html#help" class="d">help</a> in || <a href="motion.txt.html#is" class="d">is</a> recommended.  This makes
<a href="motion.txt.html#it" class="d">it</a> easy <a href="luaref.txt.html#for" class="d">for</a> the user to find associated help.


<span class="c">FILETYPE DETECTION</span>					<span id="plugin-filetype" class="t">plugin-filetype</span>

If your <a href="filetype.txt.html#filetype" class="d">filetype</a> <a href="motion.txt.html#is" class="d">is</a> not already detected by Vim, you should create <a href="insert.txt.html#a" class="d">a</a> <a href="filetype.txt.html#filetype" class="d">filetype</a>
detection snippet in <a href="insert.txt.html#a" class="d">a</a> separate file.  It <a href="motion.txt.html#is" class="d">is</a> usually in the form of an
<a href="autocmd.txt.html#autocommand" class="d">autocommand</a> that sets the <a href="filetype.txt.html#filetype" class="d">filetype</a> when the file name matches <a href="insert.txt.html#a" class="d">a</a> pattern.
Example: 
<span class="e"></span>
<span class="e">	au BufNewFile,BufRead *.foo			set filetype=foofoo</span>
<span class="e"></span>
Write this single-line file <a href="motion.txt.html#as" class="d">as</a> "ftdetect/foofoo.vim" in the first directory
that appears in <a href="options.txt.html#%27runtimepath%27" class="o">'runtimepath'</a>.  For Unix that would be
"~/.config/nvim/ftdetect/foofoo.vim"<a href="repeat.txt.html#." class="d">.</a>  The convention <a href="motion.txt.html#is" class="d">is</a> to use the name of
the <a href="filetype.txt.html#filetype" class="d">filetype</a> <a href="luaref.txt.html#for" class="d">for</a> the <a href="usr_41.txt.html#script" class="d">script</a> name.

You can make more complicated checks if you like, <a href="luaref.txt.html#for" class="d">for</a> example to inspect the
contents of the file to recognize the language.  Also see <a href="filetype.txt.html#new-filetype" class="l">new-filetype</a><a href="repeat.txt.html#." class="d">.</a>


<span class="c">SUMMARY</span>							<span id="plugin-special" class="t">plugin-special</span>

Summary of special things to use in <a href="insert.txt.html#a" class="d">a</a> plugin:

s:name			Variables local to the script.

<a href="map.txt.html#%3CSID%3E" class="s">&lt;SID&gt;</a>			Script-ID, used <a href="luaref.txt.html#for" class="d">for</a> mappings and <a href="vimeval.txt.html#functions" class="d">functions</a> local to
			the script.

<a href="vimfn.txt.html#hasmapto%28%29" class="d">hasmapto()</a>		Function to test if the user already defined <a href="insert.txt.html#a" class="d">a</a> <a href="map.txt.html#mapping" class="d">mapping</a>
			<a href="luaref.txt.html#for" class="d">for</a> functionality the <a href="usr_41.txt.html#script" class="d">script</a> offers.

<a href="map.txt.html#%3CLeader%3E" class="s">&lt;Leader&gt;</a>		Value of "<a href="map.txt.html#mapleader" class="d">mapleader</a>"<a href="motion.txt.html#%2C" class="d">,</a> which the user defines <a href="motion.txt.html#as" class="d">as</a> the
			keys that <a href="usr_05.txt.html#plugin" class="d">plugin</a> mappings start with.

<a href="map.txt.html#%3Amap" class="d">:map</a> <span class="s">&lt;unique&gt;</span>		Give <a href="insert.txt.html#a" class="d">a</a> warning if <a href="insert.txt.html#a" class="d">a</a> <a href="map.txt.html#mapping" class="d">mapping</a> already exists.

<a href="map.txt.html#%3Anoremap" class="d">:noremap</a> <a href="cmdline.txt.html#%3Cscript%3E" class="s">&lt;script&gt;</a>	Use only mappings local to the script, not global
			mappings.

exists(":Cmd"<a href="motion.txt.html#%29" class="d">)</a>		Check if <a href="insert.txt.html#a" class="d">a</a> user command already exists.

<span class="h">==============================================================================</span>
<span id="41.12" class="t">41.12</span>  	Writing <a href="insert.txt.html#a" class="d">a</a> <a href="filetype.txt.html#filetype" class="d">filetype</a> <a href="usr_05.txt.html#plugin" class="d">plugin</a>	<span id="write-filetype-plugin" class="t">write-filetype-plugin</span> <span id="ftplugin" class="t">ftplugin</span>

<a href="insert.txt.html#A" class="d">A</a> <a href="filetype.txt.html#filetype" class="d">filetype</a> <a href="usr_05.txt.html#plugin" class="d">plugin</a> <a href="motion.txt.html#is" class="d">is</a> like <a href="insert.txt.html#a" class="d">a</a> global plugin, except that <a href="motion.txt.html#it" class="d">it</a> sets <a href="options.txt.html#options" class="d">options</a> and
defines mappings <a href="luaref.txt.html#for" class="d">for</a> the current buffer only.  See <a href="usr_05.txt.html#add-filetype-plugin" class="l">add-filetype-plugin</a> <a href="luaref.txt.html#for" class="d">for</a>
how this type of <a href="usr_05.txt.html#plugin" class="d">plugin</a> <a href="motion.txt.html#is" class="d">is</a> used.

First read the <a href="motion.txt.html#section" class="d">section</a> on global plugins above <a href="usr_41.txt.html#41.11" class="l">41.11</a><a href="repeat.txt.html#." class="d">.</a>  All that <a href="motion.txt.html#is" class="d">is</a> said there
also applies to <a href="filetype.txt.html#filetype" class="d">filetype</a> plugins.  There are <a href="insert.txt.html#a" class="d">a</a> few extras, which are explained
here.  The essential thing <a href="motion.txt.html#is" class="d">is</a> that <a href="insert.txt.html#a" class="d">a</a> <a href="filetype.txt.html#filetype" class="d">filetype</a> <a href="usr_05.txt.html#plugin" class="d">plugin</a> should only have an
effect on the current buffer.


<span class="c">DISABLING</span>

If you are <a href="editing.txt.html#writing" class="d">writing</a> <a href="insert.txt.html#a" class="d">a</a> <a href="filetype.txt.html#filetype" class="d">filetype</a> <a href="usr_05.txt.html#plugin" class="d">plugin</a> to be used by many people, they need <a href="insert.txt.html#a" class="d">a</a>
chance to disable loading it.  Put this <a href="motion.txt.html#at" class="d">at</a> the top of the plugin: 
<span class="e"></span>
<span class="e">	" Only do this when not done yet for this buffer</span>
<span class="e">	if exists("b:did_ftplugin")</span>
<span class="e">	  finish</span>
<span class="e">	endif</span>
<span class="e">	let b:did_ftplugin = 1</span>
<span class="e"></span>
This also needs to be used to avoid that the same <a href="usr_05.txt.html#plugin" class="d">plugin</a> <a href="motion.txt.html#is" class="d">is</a> executed twice <a href="luaref.txt.html#for" class="d">for</a>
the same buffer (happens when using an "<a href="editing.txt.html#%3Aedit" class="d">:edit</a>" command without arguments).

Now users can disable loading the default <a href="usr_05.txt.html#plugin" class="d">plugin</a> completely by making <a href="insert.txt.html#a" class="d">a</a>
<a href="filetype.txt.html#filetype" class="d">filetype</a> <a href="usr_05.txt.html#plugin" class="d">plugin</a> with only this line: 
<span class="e"></span>
<span class="e">	let b:did_ftplugin = 1</span>
<span class="e"></span>
This does require that the <a href="filetype.txt.html#filetype" class="d">filetype</a> <a href="usr_05.txt.html#plugin" class="d">plugin</a> directory comes before <a href="starting.txt.html#%24VIMRUNTIME" class="d">$VIMRUNTIME</a>
in <a href="options.txt.html#%27runtimepath%27" class="o">'runtimepath'</a>!

If you <a href="diff.txt.html#do" class="d">do</a> want to use the default plugin, but overrule one of the settings,
you can write the different setting in <a href="insert.txt.html#a" class="d">a</a> script: 
<span class="e"></span>
<span class="e">	setlocal textwidth=70</span>
<span class="e"></span>
Now write this in the "after" directory, so that <a href="motion.txt.html#it" class="d">it</a> gets sourced after the
distributed "<a href="syntax.txt.html#vim.vim" class="d">vim.vim</a>" <a href="usr_41.txt.html#ftplugin" class="d">ftplugin</a> <a href="options.txt.html#after-directory" class="l">after-directory</a><a href="repeat.txt.html#." class="d">.</a>  For Unix this would be
"~/.config/nvim/after/ftplugin/vim.vim"<a href="repeat.txt.html#." class="d">.</a>  <span class="n">Note</span> that the default <a href="usr_05.txt.html#plugin" class="d">plugin</a> will
have set "b:did_ftplugin"<a href="motion.txt.html#%2C" class="d">,</a> but <a href="motion.txt.html#it" class="d">it</a> <a href="motion.txt.html#is" class="d">is</a> ignored here.


<span class="c">OPTIONS</span>

To make sure the <a href="filetype.txt.html#filetype" class="d">filetype</a> <a href="usr_05.txt.html#plugin" class="d">plugin</a> only affects the current buffer use the 
<span class="e"></span>
<span class="e">	:setlocal</span>
<span class="e"></span>
command to set options.  And only set <a href="options.txt.html#options" class="d">options</a> which are local to <a href="insert.txt.html#a" class="d">a</a> buffer (see
the <a href="helphelp.txt.html#help" class="d">help</a> <a href="luaref.txt.html#for" class="d">for</a> the option to check that).  When using <a href="options.txt.html#%3Asetlocal" class="l">:setlocal</a> <a href="luaref.txt.html#for" class="d">for</a> global
<a href="options.txt.html#options" class="d">options</a> or <a href="options.txt.html#options" class="d">options</a> local to <a href="insert.txt.html#a" class="d">a</a> window, the value will change <a href="luaref.txt.html#for" class="d">for</a> many buffers,
and that <a href="motion.txt.html#is" class="d">is</a> not what <a href="insert.txt.html#a" class="d">a</a> <a href="filetype.txt.html#filetype" class="d">filetype</a> <a href="usr_05.txt.html#plugin" class="d">plugin</a> should do.

When an option has <a href="insert.txt.html#a" class="d">a</a> value that <a href="motion.txt.html#is" class="d">is</a> <a href="insert.txt.html#a" class="d">a</a> <a href="vimeval.txt.html#list" class="d">list</a> of flags or items, consider using
"+=" and "-=" to keep the existing value.  Be aware that the user may have
changed an option value already.  First resetting to the default value and
then <a href="change.txt.html#changing" class="d">changing</a> <a href="motion.txt.html#it" class="d">it</a> <a href="motion.txt.html#is" class="d">is</a> often <a href="insert.txt.html#a" class="d">a</a> good idea.  Example: 
<span class="e"></span>
<span class="e">	:setlocal formatoptions&amp; formatoptions+=ro</span>
<span class="e"></span>
<span class="e"></span>
<span class="c">MAPPINGS</span>

To make sure mappings will only work in the current buffer use the 
<span class="e"></span>
<span class="e">	:map &lt;buffer&gt;</span>
<span class="e"></span>
command.  This needs to be combined with the two-step <a href="map.txt.html#mapping" class="d">mapping</a> explained above.
An example of how to define functionality in <a href="insert.txt.html#a" class="d">a</a> <a href="filetype.txt.html#filetype" class="d">filetype</a> plugin: 
<span class="e"></span>
<span class="e">	if !hasmapto('&lt;Plug&gt;JavaImport;')</span>
<span class="e">	  map &lt;buffer&gt; &lt;unique&gt; &lt;LocalLeader&gt;i &lt;Plug&gt;JavaImport;</span>
<span class="e">	endif</span>
<span class="e">	noremap &lt;buffer&gt; &lt;unique&gt; &lt;Plug&gt;JavaImport; oimport ""&lt;Left&gt;&lt;Esc&gt;</span>
<span class="e"></span>
<a href="vimfn.txt.html#hasmapto%28%29" class="l">hasmapto()</a> <a href="motion.txt.html#is" class="d">is</a> used to check if the user has already defined <a href="insert.txt.html#a" class="d">a</a> map to
<a href="map.txt.html#%3CPlug%3E" class="s">&lt;Plug&gt;</a>JavaImport;.  If not, then the <a href="filetype.txt.html#filetype" class="d">filetype</a> <a href="usr_05.txt.html#plugin" class="d">plugin</a> defines the default
mapping.  This starts with <a href="map.txt.html#%3CLocalLeader%3E" class="l">&lt;LocalLeader&gt;</a><a href="motion.txt.html#%2C" class="d">,</a> which allows the user to select
the key(s) they want <a href="filetype.txt.html#filetype" class="d">filetype</a> <a href="usr_05.txt.html#plugin" class="d">plugin</a> mappings to start with.  The default <a href="motion.txt.html#is" class="d">is</a> <a href="insert.txt.html#a" class="d">a</a>
backslash.
"<span class="s">&lt;unique&gt;</span>" <a href="motion.txt.html#is" class="d">is</a> used to give an error message if the <a href="map.txt.html#mapping" class="d">mapping</a> already exists or
overlaps with an existing mapping.
<a href="map.txt.html#%3Anoremap" class="l">:noremap</a> <a href="motion.txt.html#is" class="d">is</a> used to avoid that any other mappings that the user has defined
interferes.  You might want to use "<a href="map.txt.html#%3Anoremap" class="d">:noremap</a> <a href="cmdline.txt.html#%3Cscript%3E" class="s">&lt;script&gt;</a>" to allow remapping
mappings defined in this <a href="usr_41.txt.html#script" class="d">script</a> that start with <a href="map.txt.html#%3CSID%3E" class="s">&lt;SID&gt;</a>.

The user must have <a href="insert.txt.html#a" class="d">a</a> chance to disable the mappings in <a href="insert.txt.html#a" class="d">a</a> <a href="filetype.txt.html#filetype" class="d">filetype</a> plugin,
without disabling everything.  Here <a href="motion.txt.html#is" class="d">is</a> an example of how this <a href="motion.txt.html#is" class="d">is</a> done <a href="luaref.txt.html#for" class="d">for</a> <a href="insert.txt.html#a" class="d">a</a>
<a href="usr_05.txt.html#plugin" class="d">plugin</a> <a href="luaref.txt.html#for" class="d">for</a> the mail filetype: 
<span class="e"></span>
<span class="e">	" Add mappings, unless the user didn't want this.</span>
<span class="e">	if !exists("no_plugin_maps") &amp;&amp; !exists("no_mail_maps")</span>
<span class="e">	  " Quote text by inserting "&gt; "</span>
<span class="e">	  if !hasmapto('&lt;Plug&gt;MailQuote;')</span>
<span class="e">	    vmap &lt;buffer&gt; &lt;LocalLeader&gt;q &lt;Plug&gt;MailQuote;</span>
<span class="e">	    nmap &lt;buffer&gt; &lt;LocalLeader&gt;q &lt;Plug&gt;MailQuote;</span>
<span class="e">	  endif</span>
<span class="e">	  vnoremap &lt;buffer&gt; &lt;Plug&gt;MailQuote; :s/^/&gt; /&lt;CR&gt;</span>
<span class="e">	  nnoremap &lt;buffer&gt; &lt;Plug&gt;MailQuote; :.,$s/^/&gt; /&lt;CR&gt;</span>
<span class="e">	endif</span>
<span class="e"></span>
Two global <a href="vimeval.txt.html#variables" class="d">variables</a> are used:
<a href="filetype.txt.html#no_plugin_maps" class="l">no_plugin_maps</a>  	disables mappings <a href="luaref.txt.html#for" class="d">for</a> all <a href="filetype.txt.html#filetype" class="d">filetype</a> plugins
<a href="filetype.txt.html#no_mail_maps" class="l">no_mail_maps</a>  		disables mappings <a href="luaref.txt.html#for" class="d">for</a> the "mail" <a href="filetype.txt.html#filetype" class="d">filetype</a>


<span class="c">USER COMMANDS</span>

To add <a href="insert.txt.html#a" class="d">a</a> user command <a href="luaref.txt.html#for" class="d">for</a> <a href="insert.txt.html#a" class="d">a</a> specific file type, so that <a href="motion.txt.html#it" class="d">it</a> can only be used in
one buffer, use the "-buffer" argument to <a href="map.txt.html#%3Acommand" class="l">:command</a><a href="repeat.txt.html#." class="d">.</a>  Example: 
<span class="e"></span>
<span class="e">	:command -buffer  Make  make %:r.s</span>
<span class="e"></span>
<span class="e"></span>
<span class="c">VARIABLES</span>

<a href="insert.txt.html#A" class="d">A</a> <a href="filetype.txt.html#filetype" class="d">filetype</a> <a href="usr_05.txt.html#plugin" class="d">plugin</a> will be sourced <a href="luaref.txt.html#for" class="d">for</a> each buffer of the type it's for.  Local
<a href="usr_41.txt.html#script" class="d">script</a> <a href="vimeval.txt.html#variables" class="d">variables</a> <a href="vimeval.txt.html#s%3Avar" class="l">s:var</a> will be shared between all invocations.  Use local
buffer <a href="vimeval.txt.html#variables" class="d">variables</a> <a href="vimeval.txt.html#b%3Avar" class="l">b:var</a> if you want <a href="insert.txt.html#a" class="d">a</a> variable specifically <a href="luaref.txt.html#for" class="d">for</a> one buffer.


<span class="c">FUNCTIONS</span>

When defining <a href="insert.txt.html#a" class="d">a</a> function, this only needs to be done once.  But the <a href="filetype.txt.html#filetype" class="d">filetype</a>
<a href="usr_05.txt.html#plugin" class="d">plugin</a> will be sourced every time <a href="insert.txt.html#a" class="d">a</a> file with this <a href="filetype.txt.html#filetype" class="d">filetype</a> will be opened.
This construct makes sure the function <a href="motion.txt.html#is" class="d">is</a> only defined once: 
<span class="e"></span>
<span class="e">	:if !exists("*s:Func")</span>
<span class="e">	:  function s:Func(arg)</span>
<span class="e">	:    ...</span>
<span class="e">	:  endfunction</span>
<span class="e">	:endif</span>


<span class="c">UNDO</span>						<span id="undo_indent" class="t">undo_indent</span> <span id="undo_ftplugin" class="t">undo_ftplugin</span>

When the user does "<a href="options.txt.html#%3Asetfiletype" class="d">:setfiletype</a> xyz" the effect of the previous <a href="filetype.txt.html#filetype" class="d">filetype</a>
should be undone.  Set the b:undo_ftplugin variable to the commands that will
<a href="undo.txt.html#undo" class="d">undo</a> the settings in your <a href="filetype.txt.html#filetype" class="d">filetype</a> plugin.  Example: 
<span class="e"></span>
<span class="e">	let b:undo_ftplugin = "setlocal fo&lt; com&lt; tw&lt; commentstring&lt;"</span>
<span class="e">		\ .. "| unlet b:match_ignorecase b:match_words b:match_skip"</span>
<span class="e"></span>
Using "<a href="options.txt.html#%3Asetlocal" class="d">:setlocal</a>" with "<a href="change.txt.html#%3C" class="d">&lt;</a>" after the option name resets the option to its
global value.  That <a href="motion.txt.html#is" class="d">is</a> mostly the best way to reset the option value.

This does require removing the "<a href="change.txt.html#C" class="d">C</a>" flag from <a href="options.txt.html#%27cpoptions%27" class="o">'cpoptions'</a> to allow line
continuation, <a href="motion.txt.html#as" class="d">as</a> mentioned above <a href="usr_41.txt.html#use-cpo-save" class="l">use-cpo-save</a><a href="repeat.txt.html#." class="d">.</a>

For undoing the effect of an indent script, the b:undo_indent variable should
be set accordingly.


<span class="c">FILE NAME</span>

The <a href="filetype.txt.html#filetype" class="d">filetype</a> must be included in the file name <a href="usr_05.txt.html#ftplugin-name" class="l">ftplugin-name</a><a href="repeat.txt.html#." class="d">.</a>  Use one of
these three forms:

	.../ftplugin/stuff.vim
	.../ftplugin/stuff_foo.vim
	.../ftplugin/stuff/bar.vim

"stuff" <a href="motion.txt.html#is" class="d">is</a> the filetype, "foo" and "<a href="motion.txt.html#bar" class="d">bar</a>" are arbitrary names.


<span class="c">SUMMARY</span>							<span id="ftplugin-special" class="t">ftplugin-special</span>

Summary of special things to use in <a href="insert.txt.html#a" class="d">a</a> <a href="filetype.txt.html#filetype" class="d">filetype</a> plugin:

<a href="map.txt.html#%3CLocalLeader%3E" class="s">&lt;LocalLeader&gt;</a>		Value of "<a href="map.txt.html#maplocalleader" class="d">maplocalleader</a>"<a href="motion.txt.html#%2C" class="d">,</a> which the user defines <a href="motion.txt.html#as" class="d">as</a>
			the keys that <a href="filetype.txt.html#filetype" class="d">filetype</a> <a href="usr_05.txt.html#plugin" class="d">plugin</a> mappings start with.

<a href="map.txt.html#%3Amap" class="d">:map</a> <a href="autocmd.txt.html#%3Cbuffer%3E" class="s">&lt;buffer&gt;</a>		Define <a href="insert.txt.html#a" class="d">a</a> <a href="map.txt.html#mapping" class="d">mapping</a> local to the buffer.

<a href="map.txt.html#%3Anoremap" class="d">:noremap</a> <a href="cmdline.txt.html#%3Cscript%3E" class="s">&lt;script&gt;</a>	Only remap mappings defined in this <a href="usr_41.txt.html#script" class="d">script</a> that start
			with <a href="map.txt.html#%3CSID%3E" class="s">&lt;SID&gt;</a>.

<a href="options.txt.html#%3Asetlocal" class="d">:setlocal</a>		Set an option <a href="luaref.txt.html#for" class="d">for</a> the current buffer only.

<a href="map.txt.html#%3Acommand" class="d">:command</a> -buffer	Define <a href="insert.txt.html#a" class="d">a</a> user command local to the buffer.

exists("*s:Func"<a href="motion.txt.html#%29" class="d">)</a>	Check if <a href="insert.txt.html#a" class="d">a</a> function was already defined.

Also see <a href="usr_41.txt.html#plugin-special" class="l">plugin-special</a><a href="motion.txt.html#%2C" class="d">,</a> the special things used <a href="luaref.txt.html#for" class="d">for</a> all plugins.

<span class="h">==============================================================================</span>
<span id="41.13" class="t">41.13</span>  	Writing <a href="insert.txt.html#a" class="d">a</a> compiler <a href="usr_05.txt.html#plugin" class="d">plugin</a>		<span id="write-compiler-plugin" class="t">write-compiler-plugin</span>

<a href="insert.txt.html#A" class="d">A</a> compiler <a href="usr_05.txt.html#plugin" class="d">plugin</a> sets <a href="options.txt.html#options" class="d">options</a> <a href="luaref.txt.html#for" class="d">for</a> use with <a href="insert.txt.html#a" class="d">a</a> specific compiler.  The user can
load <a href="motion.txt.html#it" class="d">it</a> with the <a href="quickfix.txt.html#%3Acompiler" class="l">:compiler</a> command.  The main use <a href="motion.txt.html#is" class="d">is</a> to set the
<a href="options.txt.html#%27errorformat%27" class="o">'errorformat'</a> and <a href="options.txt.html#%27makeprg%27" class="o">'makeprg'</a> options.

Easiest <a href="motion.txt.html#is" class="d">is</a> to have <a href="insert.txt.html#a" class="d">a</a> look <a href="motion.txt.html#at" class="d">at</a> examples.  This command will edit all the default
compiler plugins: 
<span class="e"></span>
<span class="e">	:next $VIMRUNTIME/compiler/*.vim</span>
<span class="e"></span>
Use <a href="editing.txt.html#%3Anext" class="l">:next</a> to <a href="motion.txt.html#go" class="d">go</a> to the next <a href="usr_05.txt.html#plugin" class="d">plugin</a> file.

There are two special items about these files.  First <a href="motion.txt.html#is" class="d">is</a> <a href="insert.txt.html#a" class="d">a</a> mechanism to allow
<a href="insert.txt.html#a" class="d">a</a> user to overrule or add to the default file.  The default files start with: 
<span class="e"></span>
<span class="e">	:if exists("current_compiler")</span>
<span class="e">	:  finish</span>
<span class="e">	:endif</span>
<span class="e">	:let current_compiler = "mine"</span>
<span class="e"></span>
When you write <a href="insert.txt.html#a" class="d">a</a> compiler file and <a href="change.txt.html#put" class="d">put</a> <a href="motion.txt.html#it" class="d">it</a> in your personal runtime directory
(e.g., ~/.config/nvim/compiler <a href="luaref.txt.html#for" class="d">for</a> Unix), you set the "<a href="quickfix.txt.html#current_compiler" class="d">current_compiler</a>"
variable to make the default file skip the settings.
							<span id="%3ACompilerSet" class="t">:CompilerSet</span>
The second mechanism <a href="motion.txt.html#is" class="d">is</a> to use "<a href="options.txt.html#%3Aset" class="d">:set</a>" <a href="luaref.txt.html#for" class="d">for</a> ":compiler!" and "<a href="options.txt.html#%3Asetlocal" class="d">:setlocal</a>" <a href="luaref.txt.html#for" class="d">for</a>
"<a href="quickfix.txt.html#%3Acompiler" class="d">:compiler</a>"<a href="repeat.txt.html#." class="d">.</a>  Vim defines the "<a href="usr_41.txt.html#%3ACompilerSet" class="d">:CompilerSet</a>" user command <a href="luaref.txt.html#for" class="d">for</a> this.  This <a href="motion.txt.html#is" class="d">is</a>
an example: 
<span class="e"></span>
<span class="e">  CompilerSet errorformat&amp;		" use the default 'errorformat'</span>
<span class="e">  CompilerSet makeprg=nmake</span>
<span class="e"></span>
When you write <a href="insert.txt.html#a" class="d">a</a> compiler <a href="usr_05.txt.html#plugin" class="d">plugin</a> <a href="luaref.txt.html#for" class="d">for</a> the Vim <a href="intro.txt.html#distribution" class="d">distribution</a> or <a href="luaref.txt.html#for" class="d">for</a> <a href="insert.txt.html#a" class="d">a</a> system-wide
runtime directory, use the mechanism mentioned above.  When
"<a href="quickfix.txt.html#current_compiler" class="d">current_compiler</a>" was already set by <a href="insert.txt.html#a" class="d">a</a> user <a href="usr_05.txt.html#plugin" class="d">plugin</a> nothing will be done.

When you write <a href="insert.txt.html#a" class="d">a</a> compiler <a href="usr_05.txt.html#plugin" class="d">plugin</a> to overrule settings from <a href="insert.txt.html#a" class="d">a</a> default plugin,
don't check "<a href="quickfix.txt.html#current_compiler" class="d">current_compiler</a>"<a href="repeat.txt.html#." class="d">.</a>  This <a href="usr_05.txt.html#plugin" class="d">plugin</a> <a href="motion.txt.html#is" class="d">is</a> supposed to be loaded
last, thus <a href="motion.txt.html#it" class="d">it</a> should be in <a href="insert.txt.html#a" class="d">a</a> directory <a href="motion.txt.html#at" class="d">at</a> the <a href="intro.txt.html#end" class="d">end</a> of <a href="options.txt.html#%27runtimepath%27" class="o">'runtimepath'</a>.  For Unix
that could be ~/.config/nvim/after/compiler.

<span class="h">==============================================================================</span>
<span id="41.14" class="t">41.14</span>  	Writing <a href="insert.txt.html#a" class="d">a</a> <a href="usr_05.txt.html#plugin" class="d">plugin</a> that loads quickly	<span id="write-plugin-quickload" class="t">write-plugin-quickload</span>

<a href="insert.txt.html#A" class="d">A</a> <a href="usr_05.txt.html#plugin" class="d">plugin</a> may grow and become quite long.  The <a href="starting.txt.html#startup" class="d">startup</a> delay may become
noticeable, while you hardly ever use the plugin.  Then it's time <a href="luaref.txt.html#for" class="d">for</a> <a href="insert.txt.html#a" class="d">a</a>
quickload plugin.

The basic idea <a href="motion.txt.html#is" class="d">is</a> that the <a href="usr_05.txt.html#plugin" class="d">plugin</a> <a href="motion.txt.html#is" class="d">is</a> loaded twice.  The first time user
commands and mappings are defined that offer the functionality.  The second
time the <a href="vimeval.txt.html#functions" class="d">functions</a> that implement the functionality are defined.

It may sound surprising that quickload means loading <a href="insert.txt.html#a" class="d">a</a> <a href="usr_41.txt.html#script" class="d">script</a> twice.  What we
mean <a href="motion.txt.html#is" class="d">is</a> that <a href="motion.txt.html#it" class="d">it</a> loads quickly the first time, postponing the bulk of the
<a href="usr_41.txt.html#script" class="d">script</a> to the second time, which only happens when you actually use it.  When
you always use the functionality <a href="motion.txt.html#it" class="d">it</a> actually gets slower!

<span class="n">Note</span> that since Vim 7 there <a href="motion.txt.html#is" class="d">is</a> an alternative: use the <a href="userfunc.txt.html#autoload" class="l">autoload</a>
functionality <a href="usr_41.txt.html#41.15" class="l">41.15</a><a href="repeat.txt.html#." class="d">.</a>

The following example shows how it's done: 
<span class="e"></span>
<span class="e">	" Vim global plugin for demonstrating quick loading</span>
<span class="e">	" Last Change:	2005 Feb 25</span>
<span class="e">	" Maintainer:	Bram Moolenaar &lt;Bram@vim.org&gt;</span>
<span class="e">	" License:	This file is placed in the public domain.</span>
<span class="e"></span>
<span class="e">	if !exists("s:did_load")</span>
<span class="e">		command -nargs=* BNRead  call BufNetRead(&lt;f-args&gt;)</span>
<span class="e">		map &lt;F19&gt; :call BufNetWrite('something')&lt;CR&gt;</span>
<span class="e"></span>
<span class="e">		let s:did_load = 1</span>
<span class="e">		exe 'au FuncUndefined BufNet* source ' .. expand('&lt;sfile&gt;')</span>
<span class="e">		finish</span>
<span class="e">	endif</span>
<span class="e"></span>
<span class="e">	function BufNetRead(...)</span>
<span class="e">		echo 'BufNetRead(' .. string(a:000) .. ')'</span>
<span class="e">		" read functionality here</span>
<span class="e">	endfunction</span>
<span class="e"></span>
<span class="e">	function BufNetWrite(...)</span>
<span class="e">		echo 'BufNetWrite(' .. string(a:000) .. ')'</span>
<span class="e">		" write functionality here</span>
<span class="e">	endfunction</span>
<span class="e"></span>
When the <a href="usr_41.txt.html#script" class="d">script</a> <a href="motion.txt.html#is" class="d">is</a> first loaded "s:did_load" <a href="motion.txt.html#is" class="d">is</a> not set.  The commands between
the "if" and "endif" will be executed.  This ends in <a href="insert.txt.html#a" class="d">a</a> <a href="repeat.txt.html#%3Afinish" class="l">:finish</a> command, thus
the rest of the <a href="usr_41.txt.html#script" class="d">script</a> <a href="motion.txt.html#is" class="d">is</a> not executed.

The second time the <a href="usr_41.txt.html#script" class="d">script</a> <a href="motion.txt.html#is" class="d">is</a> loaded "s:did_load" exists and the commands
after the "endif" are executed.  This defines the (possible long)
BufNetRead() and BufNetWrite() functions.

If you drop this <a href="usr_41.txt.html#script" class="d">script</a> in your <a href="usr_05.txt.html#plugin" class="d">plugin</a> directory Vim will execute <a href="motion.txt.html#it" class="d">it</a> on
startup.  This <a href="motion.txt.html#is" class="d">is</a> the sequence of <a href="autocmd.txt.html#events" class="d">events</a> that happens:

1. The "BNRead" command <a href="motion.txt.html#is" class="d">is</a> defined and the <span class="s">&lt;F19&gt;</span> key <a href="motion.txt.html#is" class="d">is</a> mapped when the <a href="usr_41.txt.html#script" class="d">script</a>
   <a href="motion.txt.html#is" class="d">is</a> sourced <a href="motion.txt.html#at" class="d">at</a> startup.  <a href="insert.txt.html#A" class="d">A</a> <a href="autocmd.txt.html#FuncUndefined" class="l">FuncUndefined</a> <a href="autocmd.txt.html#autocommand" class="d">autocommand</a> <a href="motion.txt.html#is" class="d">is</a> defined.  The
   "<a href="repeat.txt.html#%3Afinish" class="d">:finish</a>" command causes the <a href="usr_41.txt.html#script" class="d">script</a> to terminate early.

2. The user types the BNRead command or presses the <span class="s">&lt;F19&gt;</span> key.  The
   BufNetRead() or BufNetWrite() function will be called.

3. Vim can't find the function and triggers the <a href="autocmd.txt.html#FuncUndefined" class="l">FuncUndefined</a> <a href="autocmd.txt.html#autocommand" class="d">autocommand</a>
   event.  Since the <a href="pattern.txt.html#pattern" class="d">pattern</a> "BufNet*" matches the invoked function, the
   command "source fname" will be executed.  "fname" will be equal to the name
   of the script, no matter where <a href="motion.txt.html#it" class="d">it</a> <a href="motion.txt.html#is" class="d">is</a> located, because <a href="motion.txt.html#it" class="d">it</a> comes from
   expanding "<a href="cmdline.txt.html#%3Csfile%3E" class="s">&lt;sfile&gt;</a>" (see <a href="vimfn.txt.html#expand%28%29" class="l">expand()</a>).

4. The <a href="usr_41.txt.html#script" class="d">script</a> <a href="motion.txt.html#is" class="d">is</a> sourced again, the "s:did_load" variable exists and the
   <a href="vimeval.txt.html#functions" class="d">functions</a> are defined.

Notice that the <a href="vimeval.txt.html#functions" class="d">functions</a> that are loaded afterwards match the <a href="pattern.txt.html#pattern" class="d">pattern</a> in the
<a href="autocmd.txt.html#FuncUndefined" class="l">FuncUndefined</a> autocommand.  You must make sure that no other <a href="usr_05.txt.html#plugin" class="d">plugin</a> defines
<a href="vimeval.txt.html#functions" class="d">functions</a> that match this pattern.

<span class="h">==============================================================================</span>
<span id="41.15" class="t">41.15</span>  	Writing library scripts			<span id="write-library-script" class="t">write-library-script</span>

Some functionality will be required in several places.  When this becomes more
than <a href="insert.txt.html#a" class="d">a</a> few lines you will want to <a href="change.txt.html#put" class="d">put</a> <a href="motion.txt.html#it" class="d">it</a> in one <a href="usr_41.txt.html#script" class="d">script</a> and use <a href="motion.txt.html#it" class="d">it</a> from many
scripts.  We will call that one <a href="usr_41.txt.html#script" class="d">script</a> <a href="insert.txt.html#a" class="d">a</a> library script.

Manually loading <a href="insert.txt.html#a" class="d">a</a> library <a href="usr_41.txt.html#script" class="d">script</a> <a href="motion.txt.html#is" class="d">is</a> possible, so long <a href="motion.txt.html#as" class="d">as</a> you avoid loading <a href="motion.txt.html#it" class="d">it</a>
when it's already done.  You can <a href="diff.txt.html#do" class="d">do</a> this with the <a href="vimfn.txt.html#exists%28%29" class="l">exists()</a> function.
Example: 
<span class="e"></span>
<span class="e">	if !exists('*MyLibFunction')</span>
<span class="e">	   runtime library/mylibscript.vim</span>
<span class="e">	endif</span>
<span class="e">	call MyLibFunction(arg)</span>
<span class="e"></span>
Here you need to know that MyLibFunction() <a href="motion.txt.html#is" class="d">is</a> defined in <a href="insert.txt.html#a" class="d">a</a> <a href="usr_41.txt.html#script" class="d">script</a>
"library/mylibscript.vim" in one of the directories in <a href="options.txt.html#%27runtimepath%27" class="o">'runtimepath'</a>.

To make this <a href="insert.txt.html#a" class="d">a</a> bit simpler Vim offers the <a href="userfunc.txt.html#autoload" class="d">autoload</a> mechanism.  Then the
example looks like this: 
<span class="e"></span>
<span class="e">	call mylib#myfunction(arg)</span>
<span class="e"></span>
That's <a href="insert.txt.html#a" class="d">a</a> lot simpler, isn't it?  Vim will recognize the function name and when
it's not defined search <a href="luaref.txt.html#for" class="d">for</a> the <a href="usr_41.txt.html#script" class="d">script</a> "autoload/mylib.vim" in <a href="options.txt.html#%27runtimepath%27" class="o">'runtimepath'</a>.
That <a href="usr_41.txt.html#script" class="d">script</a> must define the "mylib#myfunction()" function.

You can <a href="change.txt.html#put" class="d">put</a> many other <a href="vimeval.txt.html#functions" class="d">functions</a> in the mylib.vim script, you are free to
organize your <a href="vimeval.txt.html#functions" class="d">functions</a> in library scripts.  But you must use function names
where the part before the '#' matches the <a href="usr_41.txt.html#script" class="d">script</a> name.  Otherwise Vim would
not know what <a href="usr_41.txt.html#script" class="d">script</a> to load.

If you get really enthusiastic and write lots of library scripts, you may
want to use subdirectories.  Example: 
<span class="e"></span>
<span class="e">	call netlib#ftp#read('somefile')</span>
<span class="e"></span>
For Unix the library <a href="usr_41.txt.html#script" class="d">script</a> used <a href="luaref.txt.html#for" class="d">for</a> this could be:

	~/.config/nvim/autoload/netlib/ftp.vim

Where the function <a href="motion.txt.html#is" class="d">is</a> defined like this: 
<span class="e"></span>
<span class="e">	function netlib#ftp#read(fname)</span>
<span class="e">		"  Read the file fname through ftp</span>
<span class="e">	endfunction</span>
<span class="e"></span>
Notice that the name the function <a href="motion.txt.html#is" class="d">is</a> defined with <a href="motion.txt.html#is" class="d">is</a> exactly the same <a href="motion.txt.html#as" class="d">as</a> the
name used <a href="luaref.txt.html#for" class="d">for</a> calling the function.  And the part before the last '#'
exactly matches the subdirectory and <a href="usr_41.txt.html#script" class="d">script</a> name.

You can use the same mechanism <a href="luaref.txt.html#for" class="d">for</a> variables: 
<span class="e"></span>
<span class="e">	let weekdays = dutch#weekdays</span>
<span class="e"></span>
This will load the <a href="usr_41.txt.html#script" class="d">script</a> "autoload/dutch.vim"<a href="motion.txt.html#%2C" class="d">,</a> which should contain something
like: 
<span class="e"></span>
<span class="e">	let dutch#weekdays = ['zondag', 'maandag', 'dinsdag', 'woensdag',</span>
<span class="e">		\ 'donderdag', 'vrijdag', 'zaterdag']</span>
<span class="e"></span>
Further reading: <a href="userfunc.txt.html#autoload" class="l">autoload</a><a href="repeat.txt.html#." class="d">.</a>

<span class="h">==============================================================================</span>
<span id="41.16" class="t">41.16</span>  	Distributing Vim scripts			<span id="distribute-script" class="t">distribute-script</span>

Vim users will look <a href="luaref.txt.html#for" class="d">for</a> scripts on the Vim website: <a class="u" href="https://www.vim.org">https://www.vim.org</a>.
If you made something that <a href="motion.txt.html#is" class="d">is</a> useful <a href="luaref.txt.html#for" class="d">for</a> others, share it!

Vim scripts can be used on any system.  There might not be <a href="insert.txt.html#a" class="d">a</a> <a href="pi_tar.txt.html#tar" class="d">tar</a> or <a href="pi_gzip.txt.html#gzip" class="d">gzip</a>
command.  If you want to pack files together and/or <a href="pi_gzip.txt.html#compress" class="d">compress</a> them the "<a href="pi_zip.txt.html#zip" class="d">zip</a>"
utility <a href="motion.txt.html#is" class="d">is</a> recommended.

<span class="h">==============================================================================</span>

Next chapter: <a href="usr_42.txt.html#usr_42.txt" class="l">usr_42.txt</a>  Add new <a href="gui.txt.html#menus" class="d">menus</a>

Copyright: see <a href="usr_01.txt.html#manual-copyright" class="l">manual-copyright</a>  vim:tw=78:ts=8:noet:ft=help:norl:


</pre>
</div>
</main>
<p>Quick links:
<a href="index.html">help overview</a> &middot;
<a href="quickref.txt.html">quick reference</a> &middot;
<a href="usr_toc.txt.html">user manual toc</a> &middot;
<a href="index.html#reference_toc">reference manual toc</a>
</p>
<footer>This site is maintained by Carlo Teubner (<i>(my first name) at cteubner dot net</i>).</footer>
</body>
</html>