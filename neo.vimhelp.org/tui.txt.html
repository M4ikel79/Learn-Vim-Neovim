<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="color-scheme" content="light dark">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="description" content="Neovim help pages, always up-to-date">
<title>Neovim: tui.txt</title>
<link rel="shortcut icon" href="s/h3E0J2MHNKfIuCqP/favicon-neovim.ico">
<!-- favicon taken from https://neovim.io/favicon.ico, which is licensed under CC-BY-3.0: https://creativecommons.org/licenses/by/3.0/ -->

<link rel="stylesheet" href="s/MsMIu46igYudff1x/tom-select.min.css">
<script defer src="s/RLcAbtLBYX-q5me0/tom-select.base.min.js"></script>

<link rel="stylesheet" href="s/QRMkrs52-wJfIQ-w/vimhelp.css">
<noscript><link rel="stylesheet" href="s/eRFCn9A-K4lmzV_A/noscript.css"></noscript>
<script defer src="s/KpwrKyx19dtnhPoe/vimhelp.js"></script>
</head>
<body>




<div class="bar">
  <div class="ql">Quick links:
<a href="index.html">help overview</a> &middot;
<a href="quickref.txt.html">quick reference</a> &middot;
<a href="usr_toc.txt.html">user manual toc</a> &middot;
<a href="index.html#reference_toc">reference manual toc</a>
</div>
  <div class="tag srch need-js">
    <select id="vh-select-tag"></select>
    <div class="placeholder">Go to keyword<span class="not-mobile">&nbsp;(shortcut: <kbd>k</kbd>)</span></div>
  </div>
  <form class="site srch" action="https://duckduckgo.com" method="get" target="_blank" rel="noopener noreferrer">
    <input type="hidden" name="sites" value="neo.vimhelp.org">
    <input type="search" name="q" id="vh-srch-input" placeholder="Site search">
    <div class="placeholder need-js">Site search<span class="not-mobile">&nbsp;(shortcut: <kbd>s</kbd>)</span></div>
  </form>
  <div id="theme-switcher" class="need-js">
  <button id="theme-current" title="Switch theme">Theme</button>
  <div id="theme-dropdown"><ul>
    <li><button id="theme-native" title="Switch to native theme">Native</button></li>
    <li><button id="theme-light" title="Switch to light theme">Light</button></li>
    <li><button id="theme-dark" title="Switch to dark theme">Dark</button></li>
  </ul></div>
</div>

</div>

<main>
<div id="vh-sidebar">
<ul><li><a href="tui.txt.html#">↑Top↑</a></li>
<li><a href="tui.txt.html#startup-tui">Startup</a></li>
<li><a href="tui.txt.html#window-size">Window size</a></li>
<li><a href="tui.txt.html#slow-fast-terminal">Slow and fast terminals</a></li>
</ul>
</div>
<div id="vh-content">
<pre>
<span id="tui.txt" class="t">tui.txt</span>      Nvim


                            <span class="i">NVIM REFERENCE MANUAL</span>


Terminal <a href="ui.txt.html#UI" class="d">UI</a>						<span id="TUI" class="t">TUI</span> <span id="tui" class="t">tui</span>

By default when you run <span class="e">nvim</span> (without <a href="starting.txt.html#--embed" class="l">--embed</a> or <a href="starting.txt.html#--headless" class="l">--headless</a><a href="motion.txt.html#%29" class="d">)</a> <a href="motion.txt.html#it" class="d">it</a> starts
the builtin "<a href="terminal.txt.html#terminal" class="d">terminal</a> <a href="ui.txt.html#UI" class="d">UI</a>" (TUI). This default <a href="ui.txt.html#UI" class="d">UI</a> <a href="motion.txt.html#is" class="d">is</a> optional: you can run Nvim
<a href="motion.txt.html#as" class="d">as</a> <a href="insert.txt.html#a" class="d">a</a> "headless" server, or you can use <a href="insert.txt.html#a" class="d">a</a> <a href="gui.txt.html#GUI" class="l">GUI</a><a href="repeat.txt.html#." class="d">.</a>

                                      Type <a href="various.txt.html#gO" class="l">gO</a> to see the table of contents.

<span class="h">==============================================================================</span>
Startup					<span id="startup-tui" class="t">startup-tui</span> <span id="startup-terminal" class="t">startup-terminal</span>

Nvim has <a href="insert.txt.html#a" class="d">a</a> <a href="remote.txt.html#client-server" class="d">client-server</a> architecture: by default when you run <span class="e">nvim</span>, this
starts the builtin <a href="ui.txt.html#UI" class="d">UI</a> client, which starts <a href="insert.txt.html#a" class="d">a</a> `nvim --embed` server (child)
process that the <a href="ui.txt.html#UI" class="d">UI</a> client connects to. After attaching to the server, the <a href="ui.txt.html#UI" class="d">UI</a>
client calls <a href="api.txt.html#nvim_set_client_info%28%29" class="l">nvim_set_client_info()</a> (as recommended <a href="luaref.txt.html#for" class="d">for</a> all UIs <a href="develop.txt.html#dev-ui" class="l">dev-ui</a><a href="motion.txt.html#%29" class="d">)</a>
and sets these fields on its channel: 
<span class="e"></span>
<span class="e">  client = {</span>
<span class="e">    attributes = {</span>
<span class="e">      license = 'Apache 2',</span>
<span class="e">      pid = …,</span>
<span class="e">      website = 'https://neovim.io',</span>
<span class="e">    },</span>
<span class="e">    name = 'nvim-tui',</span>
<span class="e">    type = 'ui',</span>
<span class="e">    version = { … },</span>
<span class="e">  }</span>
<span class="e"></span>
Nvim guesses the <a href="terminal.txt.html#terminal" class="d">terminal</a> type when <a href="motion.txt.html#it" class="d">it</a> starts (except in <a href="starting.txt.html#--embed" class="l">--embed</a> and
<a href="starting.txt.html#--headless" class="l">--headless</a> modes). The <a href="tui.txt.html#%24TERM" class="l">$TERM</a> environment variable <a href="motion.txt.html#is" class="d">is</a> the primary hint that
determines the <a href="terminal.txt.html#terminal" class="d">terminal</a> type.

					<span id="terminfo" class="t">terminfo</span> <span id="E557" class="t">E557</span> <span id="E558" class="t">E558</span> <span id="E559" class="t">E559</span>
To display its user interface, Nvim reads <a href="insert.txt.html#a" class="d">a</a> <a href="vimeval.txt.html#list" class="d">list</a> of "<a href="terminal.txt.html#terminal" class="d">terminal</a> capabilities"
from the system <a href="tui.txt.html#terminfo" class="d">terminfo</a> database (or builtin <a href="vim_diff.txt.html#defaults" class="d">defaults</a> if <a href="tui.txt.html#terminfo" class="d">terminfo</a> <a href="motion.txt.html#is" class="d">is</a> not
found). If that information <a href="motion.txt.html#is" class="d">is</a> wrong, the screen may be messed up or keys may
not be recognized.

The Unibilium library (used to read terminfo) allows you to override the
system <a href="tui.txt.html#terminfo" class="d">terminfo</a> with one in the "$HOME/.terminfo/" directory. Building your
own <a href="tui.txt.html#terminfo" class="d">terminfo</a> <a href="motion.txt.html#is" class="d">is</a> usually <a href="motion.txt.html#as" class="d">as</a> simple <a href="motion.txt.html#as" class="d">as</a> running this:

<span class="e">  curl -LO https://invisible-island.net/datafiles/current/terminfo.src.gz</span>
<span class="e">  gunzip terminfo.src.gz</span>
<span class="e">  tic -x terminfo.src</span>

								<span id="%24TERM" class="t">$TERM</span>
The <a href="tui.txt.html#%24TERM" class="d">$TERM</a> environment variable must match the <a href="terminal.txt.html#terminal" class="d">terminal</a> you are using!
Otherwise Nvim cannot know what sequences your <a href="terminal.txt.html#terminal" class="d">terminal</a> expects, and weird
or sub-optimal behavior will result (scrolling quirks, wrong colors, etc.).

<a href="tui.txt.html#%24TERM" class="d">$TERM</a> <a href="motion.txt.html#is" class="d">is</a> also important because <a href="motion.txt.html#it" class="d">it</a> <a href="motion.txt.html#is" class="d">is</a> forwarded by SSH to the remote session,
unlike most other environment variables.


<span class="e">  For this terminal           Set $TERM to                  |builtin-terms|</span>
<span class="e">  -------------------------------------------------------------------------</span>
<span class="e">  anything libvte-based       vte, vte-256color                   Y</span>
<span class="e">   (e.g. GNOME Terminal)      (aliases: gnome, gnome-256color)</span>
<span class="e">  iTerm (original)            iterm, iTerm.app                    N</span>
<span class="e">  iTerm2 (new capabilities)   iterm2, iTerm2.app                  Y</span>
<span class="e">  Konsole                     konsole-256color                    N</span>
<span class="e">  Linux virtual terminal      linux, linux-256color               Y</span>
<span class="e">  PuTTY                       putty, putty-256color               Y</span>
<span class="e">  rxvt                        rxvt, rxvt-256color                 Y</span>
<span class="e">  screen                      screen, screen-256color             Y</span>
<span class="e">  simple terminal (st)        st, st-256color                     Y</span>
<span class="e">  Terminal.app                nsterm                              N</span>
<span class="e">  tmux                        tmux, tmux-256color                 Y</span>
<span class="e">  Windows/ConEmu              conemu                              Y</span>
<span class="e">  Windows/Cygwin-built Nvim   cygwin                              Y</span>
<span class="e">  Windows/Interix             interix                             Y</span>
<span class="e">  Windows/VTP console         vtpcon                              Y</span>
<span class="e">  Windows/legacy console      win32con                            Y</span>
<span class="e">  xterm or compatible         xterm, xterm-256color               Y</span>


					<span id="builtin-terms" class="t">builtin-terms</span> <span id="builtin_terms" class="t">builtin_terms</span>
If <a href="insert.txt.html#a" class="d">a</a> <a href="tui.txt.html#terminfo" class="l">terminfo</a> database <a href="motion.txt.html#is" class="d">is</a> not available or there <a href="motion.txt.html#is" class="d">is</a> no entry <a href="luaref.txt.html#for" class="d">for</a> the current
terminal, Nvim will map <a href="tui.txt.html#%24TERM" class="l">$TERM</a> to <a href="insert.txt.html#a" class="d">a</a> builtin entry according to the above
table, or "ansi" if there <a href="motion.txt.html#is" class="d">is</a> no match. For example "TERM=putty-256color" will
be mapped to the builtin "putty" entry. See also <a href="tui.txt.html#tui-colors" class="l">tui-colors</a><a href="repeat.txt.html#." class="d">.</a>

The builtin <a href="tui.txt.html#terminfo" class="d">terminfo</a> <a href="motion.txt.html#is" class="d">is</a> not combined with any external <a href="tui.txt.html#terminfo" class="d">terminfo</a> database, nor
can <a href="motion.txt.html#it" class="d">it</a> be used in preference to one.  You can thus entirely override any
omissions or out-of-date information in the builtin <a href="tui.txt.html#terminfo" class="d">terminfo</a> database by
supplying an external one with entries <a href="luaref.txt.html#for" class="d">for</a> the <a href="terminal.txt.html#terminal" class="d">terminal</a> type.

Settings depending on <a href="terminal.txt.html#terminal" class="d">terminal</a>			<span id="term-dependent-settings" class="t">term-dependent-settings</span>

If you want to set terminal-dependent <a href="options.txt.html#options" class="d">options</a> or mappings, you can <a href="diff.txt.html#do" class="d">do</a> this in
your init.vim.  Example: 
<span class="e"></span>
<span class="e">    if $TERM =~ '^\(rxvt\|screen\|interix\|putty\)\(-.*\)\?$'</span>
<span class="e">        set notermguicolors</span>
<span class="e">    elseif $TERM =~ '^\(tmux\|iterm\|vte\|gnome\)\(-.*\)\?$'</span>
<span class="e">        set termguicolors</span>
<span class="e">    elseif $TERM =~ '^\(xterm\)\(-.*\)\?$'</span>
<span class="e">        if $XTERM_VERSION != ''</span>
<span class="e">            set termguicolors</span>
<span class="e">        elseif $KONSOLE_PROFILE_NAME != ''</span>
<span class="e">            set termguicolors</span>
<span class="e">        elseif $VTE_VERSION != ''</span>
<span class="e">            set termguicolors</span>
<span class="e">        else</span>
<span class="e">            set notermguicolors</span>
<span class="e">        endif</span>
<span class="e">    elseif $TERM =~ ...</span>
<span class="e">        ... and so forth ...</span>
<span class="e">    endif</span>

					<span id="scroll-region" class="t">scroll-region</span> <span id="xterm-scroll-region" class="t">xterm-scroll-region</span>
Where possible, Nvim will use the terminal's ability to set <a href="insert.txt.html#a" class="d">a</a> scroll region in
order to redraw faster when <a href="insert.txt.html#a" class="d">a</a> <a href="windows.txt.html#window" class="d">window</a> <a href="motion.txt.html#is" class="d">is</a> scrolled.  If the terminal's <a href="tui.txt.html#terminfo" class="d">terminfo</a>
description describes an ability to set top and bottom scroll margins, that <a href="motion.txt.html#is" class="d">is</a>
used.

This will not speed up <a href="scroll.txt.html#scrolling" class="d">scrolling</a> in <a href="insert.txt.html#a" class="d">a</a> <a href="windows.txt.html#window" class="d">window</a> that <a href="motion.txt.html#is" class="d">is</a> not the full width of the
terminal.  Xterm has an extra ability, not described by terminfo, to set left
and right scroll margins <a href="motion.txt.html#as" class="d">as</a> well.  If Nvim detects that the <a href="terminal.txt.html#terminal" class="d">terminal</a> <a href="motion.txt.html#is" class="d">is</a> Xterm,
<a href="motion.txt.html#it" class="d">it</a> will make use of this ability to speed up <a href="scroll.txt.html#scrolling" class="d">scrolling</a> that <a href="motion.txt.html#is" class="d">is</a> not the full
width of the terminal.

								<span id="tui-input" class="t">tui-input</span>
Historically, <a href="terminal.txt.html#terminal" class="d">terminal</a> emulators could not distinguish between certain <a href="intro.txt.html#control" class="d">control</a>
key modifiers and other keys. For example, <span class="s">&lt;C-I&gt;</span> and <a href="motion.txt.html#%3CTab%3E" class="s">&lt;Tab&gt;</a> are represented in
the same way, <a href="motion.txt.html#as" class="d">as</a> are <a href="intro.txt.html#%3CEsc%3E" class="s">&lt;Esc&gt;</a> and <span class="s">&lt;C-[&gt;</span>, <a href="motion.txt.html#%3CCR%3E" class="s">&lt;CR&gt;</a> and <span class="s">&lt;C-M&gt;</span>, and <a href="motion.txt.html#%3CNL%3E" class="s">&lt;NL&gt;</a> and <span class="s">&lt;C-J&gt;</span>.

Modern <a href="terminal.txt.html#terminal" class="d">terminal</a> emulators are able to distinguish between these pairs of keys
by encoding <a href="intro.txt.html#control" class="d">control</a> modifiers differently. There are two common but distinct
ways of doing this, known <a href="motion.txt.html#as" class="d">as</a> "modifyOtherKeys" and "CSI <a href="undo.txt.html#u" class="d">u</a>"<a href="repeat.txt.html#." class="d">.</a> Nvim supports both
encoding methods and <a href="motion.txt.html#at" class="d">at</a> <a href="starting.txt.html#startup" class="d">startup</a> will tell the <a href="terminal.txt.html#terminal" class="d">terminal</a> emulator that <a href="motion.txt.html#it" class="d">it</a>
understands these key encodings. If your <a href="terminal.txt.html#terminal" class="d">terminal</a> emulator supports <a href="motion.txt.html#it" class="d">it</a> then
this will allow you to map the key pairs listed above separately. <a href="motion.txt.html#%3CTab%3E" class="l">&lt;Tab&gt;</a>

Nvim uses libtermkey to convert <a href="terminal.txt.html#terminal" class="d">terminal</a> <a href="intro.txt.html#escape" class="d">escape</a> sequences to key codes.
<a href="tui.txt.html#terminfo" class="l">terminfo</a> <a href="motion.txt.html#is" class="d">is</a> used first, and CSI sequences not in <a href="tui.txt.html#terminfo" class="l">terminfo</a> (including
extended keys a.k.a. "modifyOtherKeys" or "CSI <a href="undo.txt.html#u" class="d">u</a>"<a href="motion.txt.html#%29" class="d">)</a> can also be parsed.

For example, when running Nvim in tmux, this makes Nvim leave <a href="insert.txt.html#Insert" class="d">Insert</a> mode and
<a href="motion.txt.html#go" class="d">go</a> to the <a href="windows.txt.html#window" class="d">window</a> below: 
<span class="e">        tmux send-keys 'Escape' [ 2 7 u 'C-W' j</span>
Where `'Escape' <a href="index.txt.html#%5B" class="d">[</a> 2 7 u` <a href="motion.txt.html#is" class="d">is</a> an unambiguous "CSI <a href="undo.txt.html#u" class="d">u</a>" sequence <a href="luaref.txt.html#for" class="d">for</a> the <a href="intro.txt.html#%3CEsc%3E" class="s">&lt;Esc&gt;</a> key.

The kitty keyboard protocol <a class="u" href="https://sw.kovidgoyal.net/kitty/keyboard-protocol/">https://sw.kovidgoyal.net/kitty/keyboard-protocol/</a>
<a href="motion.txt.html#is" class="d">is</a> partially supported, including keypad keys in <a href="mbyte.txt.html#Unicode" class="d">Unicode</a> Private Use Area.
For example, this sequence <a href="motion.txt.html#is" class="d">is</a> recognized by Nvim <a href="motion.txt.html#as" class="d">as</a> <span class="s">&lt;C-kEnter&gt;</span>: 
<span class="e">        CSI 57414 ; 5 u</span>
and can be used differently from <span class="s">&lt;C-CR&gt;</span> in mappings.

						<span id="tui-modifyOtherKeys" class="t">tui-modifyOtherKeys</span> <span id="tui-csiu" class="t">tui-csiu</span>
At <a href="starting.txt.html#startup" class="d">startup</a> Nvim will query your <a href="terminal.txt.html#terminal" class="d">terminal</a> to see if <a href="motion.txt.html#it" class="d">it</a> supports the "CSI <a href="undo.txt.html#u" class="d">u</a>"
encoding by <a href="editing.txt.html#writing" class="d">writing</a> the sequence 
<span class="e">        CSI ? u CSI c</span>
If your <a href="terminal.txt.html#terminal" class="d">terminal</a> emulator responds with 
<span class="e">        CSI ? &lt;flags&gt; u</span>
this means your <a href="terminal.txt.html#terminal" class="d">terminal</a> supports the "CSI <a href="undo.txt.html#u" class="d">u</a>" encoding and Nvim will tell your
<a href="terminal.txt.html#terminal" class="d">terminal</a> to enable <a href="motion.txt.html#it" class="d">it</a> by <a href="editing.txt.html#writing" class="d">writing</a> the sequence 
<span class="e">        CSI &gt; 1 u</span>
If your <a href="terminal.txt.html#terminal" class="d">terminal</a> does not <a href="support.txt.html#support" class="d">support</a> "CSI <a href="undo.txt.html#u" class="d">u</a>" then Nvim will instead enable the
"modifyOtherKeys" encoding by <a href="editing.txt.html#writing" class="d">writing</a> the sequence 
<span class="e">        CSI &gt; 4 ; 2 m</span>
<span class="e"></span>
When Nvim exits cleanly <a href="motion.txt.html#it" class="d">it</a> will send the corresponding sequence to disable the
special key encoding. If Nvim does not exit cleanly then your <a href="terminal.txt.html#terminal" class="d">terminal</a>
emulator could be in <a href="insert.txt.html#a" class="d">a</a> bad state. If this happens, simply run "reset"<a href="repeat.txt.html#." class="d">.</a>

							<span id="tui-colors" class="t">tui-colors</span>
Nvim uses 256 colours by default, ignoring <a href="tui.txt.html#terminfo" class="l">terminfo</a> <a href="luaref.txt.html#for" class="d">for</a> most <a href="terminal.txt.html#terminal" class="d">terminal</a> types,
including "linux" (whose virtual terminals have had 256-colour <a href="support.txt.html#support" class="d">support</a> since
4.8) and anything claiming to be "xterm"<a href="repeat.txt.html#." class="d">.</a>  Also when $COLORTERM or <a href="tui.txt.html#%24TERM" class="d">$TERM</a>
contain the <a href="vimeval.txt.html#string" class="d">string</a> "256"<a href="repeat.txt.html#." class="d">.</a>

Nvim similarly assumes that any <a href="terminal.txt.html#terminal" class="d">terminal</a> emulator that sets $COLORTERM to any
value, <a href="motion.txt.html#is" class="d">is</a> capable of <a href="motion.txt.html#at" class="d">at</a> least 16-colour operation.

						<span id="true-color" class="t">true-color</span> <span id="xterm-true-color" class="t">xterm-true-color</span>
Nvim emits true (24-bit) colours in the terminal, if <a href="options.txt.html#%27termguicolors%27" class="o">'termguicolors'</a> <a href="motion.txt.html#is" class="d">is</a> set.

It uses the "setrgbf" and "setrgbb" <a href="tui.txt.html#terminfo" class="l">terminfo</a> extensions (proposed by Rüdiger
Sonderfeld in 2013). If your <a href="tui.txt.html#terminfo" class="d">terminfo</a> definition <a href="motion.txt.html#is" class="d">is</a> missing them, then Nvim
will decide whether to add them to your <a href="tui.txt.html#terminfo" class="d">terminfo</a> definition, using the ISO
8613-6:1994/ITU T.416:1993 <a href="intro.txt.html#control" class="d">control</a> sequences <a href="luaref.txt.html#for" class="d">for</a> setting RGB colours (but
modified to use semicolons instead of colons unless the <a href="terminal.txt.html#terminal" class="d">terminal</a> <a href="motion.txt.html#is" class="d">is</a> known to
follow the standard).

Another convention, pioneered in 2016 by tmux, <a href="motion.txt.html#is" class="d">is</a> the "Tc" <a href="tui.txt.html#terminfo" class="d">terminfo</a> extension.
If <a href="tui.txt.html#terminfo" class="d">terminfo</a> has this flag, Nvim will add constructed "setrgbf" and "setrgbb"
capabilities <a href="motion.txt.html#as" class="d">as</a> if they had been in the <a href="tui.txt.html#terminfo" class="d">terminfo</a> definition.

If <a href="tui.txt.html#terminfo" class="d">terminfo</a> does not (yet) have this flag, Nvim will fall back to <a href="tui.txt.html#%24TERM" class="d">$TERM</a> and
other environment variables.  It will add constructed "setrgbf" and "setrgbb"
capabilities in the <a href="change.txt.html#case" class="d">case</a> of the "rxvt"<a href="motion.txt.html#%2C" class="d">,</a> "linux"<a href="motion.txt.html#%2C" class="d">,</a> "st"<a href="motion.txt.html#%2C" class="d">,</a> "tmux"<a href="motion.txt.html#%2C" class="d">,</a> and "iterm"
<a href="terminal.txt.html#terminal" class="d">terminal</a> types, or when Konsole, genuine Xterm, <a href="insert.txt.html#a" class="d">a</a> libvte <a href="terminal.txt.html#terminal" class="d">terminal</a> emulator
version 0.36 or later, or <a href="insert.txt.html#a" class="d">a</a> <a href="terminal.txt.html#terminal" class="d">terminal</a> emulator that sets the COLORTERM
environment variable to "truecolor" <a href="motion.txt.html#is" class="d">is</a> detected.

							<span id="xterm-resize" class="t">xterm-resize</span>
Nvim can resize the <a href="terminal.txt.html#terminal" class="d">terminal</a> display on some terminals that implement an
extension pioneered by dtterm.  <a href="tui.txt.html#terminfo" class="l">terminfo</a> does not have <a href="insert.txt.html#a" class="d">a</a> flag <a href="luaref.txt.html#for" class="d">for</a> this
extension.  So Nvim simply assumes that (all) "dtterm"<a href="motion.txt.html#%2C" class="d">,</a> "xterm"<a href="motion.txt.html#%2C" class="d">,</a> "teraterm"<a href="motion.txt.html#%2C" class="d">,</a>
"rxvt" <a href="terminal.txt.html#terminal" class="d">terminal</a> types, and Konsole, are capable of this.

							<span id="tui-cursor-shape" class="t">tui-cursor-shape</span>
Nvim will adjust the shape of the cursor from <a href="insert.txt.html#a" class="d">a</a> block to <a href="insert.txt.html#a" class="d">a</a> line when in <a href="insert.txt.html#insert" class="d">insert</a>
mode (or <a href="motion.txt.html#as" class="d">as</a> specified by the <a href="options.txt.html#%27guicursor%27" class="o">'guicursor'</a> option), on terminals that <a href="support.txt.html#support" class="d">support</a>
it.  It uses the same <a href="tui.txt.html#terminfo" class="l">terminfo</a> extensions that were pioneered by tmux <a href="luaref.txt.html#for" class="d">for</a>
this: "Ss" and "Se"<a href="repeat.txt.html#." class="d">.</a>
Similarly, if you set the cursor highlight group with blend=100, Nvim hides
the cursor through the "cvvis" and "civis" extensions.

If your <a href="tui.txt.html#terminfo" class="d">terminfo</a> definition <a href="motion.txt.html#is" class="d">is</a> missing them, then Nvim will decide whether to
add them to your <a href="tui.txt.html#terminfo" class="d">terminfo</a> definition, by looking <a href="motion.txt.html#at" class="d">at</a> <a href="tui.txt.html#%24TERM" class="d">$TERM</a> and other
environment variables.  For the "rxvt"<a href="motion.txt.html#%2C" class="d">,</a> "putty"<a href="motion.txt.html#%2C" class="d">,</a> "linux"<a href="motion.txt.html#%2C" class="d">,</a> "screen"<a href="motion.txt.html#%2C" class="d">,</a>
"teraterm"<a href="motion.txt.html#%2C" class="d">,</a> and "iterm" <a href="terminal.txt.html#terminal" class="d">terminal</a> types, or when Konsole, <a href="insert.txt.html#a" class="d">a</a> libvte-based
<a href="terminal.txt.html#terminal" class="d">terminal</a> emulator, or genuine Xterm are detected, <a href="motion.txt.html#it" class="d">it</a> will add constructed
"Ss" and "Se" capabilities.

							<span id="tui-cursor-tmux" class="t">tui-cursor-tmux</span>
Within tmux <a href="motion.txt.html#it" class="d">it</a> may appear that Nvim <a href="motion.txt.html#is" class="d">is</a> not <a href="change.txt.html#changing" class="d">changing</a> the cursor, but in fact <a href="motion.txt.html#it" class="d">it</a>
<a href="motion.txt.html#is" class="d">is</a> tmux receiving instructions from Nvim to change the cursor and not knowing
what to <a href="diff.txt.html#do" class="d">do</a> in turn.  tmux must translate what <a href="motion.txt.html#it" class="d">it</a> receives from Nvim into
whatever <a href="intro.txt.html#control" class="d">control</a> sequence <a href="motion.txt.html#is" class="d">is</a> appropriate <a href="luaref.txt.html#for" class="d">for</a> the host terminal.  It shares
<a href="insert.txt.html#a" class="d">a</a> common mechanism with Nvim, of using the "Ss" and "Se" capabilities from
<a href="tui.txt.html#terminfo" class="d">terminfo</a> (for the output terminal) if they are present. Unlike Nvim, if they
are not in <a href="tui.txt.html#terminfo" class="d">terminfo</a> you must add them by setting "terminal-overrides" in
~/.tmux.conf <a href="repeat.txt.html#." class="d">.</a>

See the tmux(1) manual page <a href="luaref.txt.html#for" class="d">for</a> the details of how and what to <a href="diff.txt.html#do" class="d">do</a> in the tmux
configuration file.  It will look something like: &gt;bash
        set -ga terminal-overrides <a href="motion.txt.html#%27" class="d">'</a>*:Ss=\E[%p1%d q:Se=\E[ q'
or (alas!) <a href="luaref.txt.html#for" class="d">for</a> Konsole 18.07.70 or older, something more complex like: &gt;bash
        set -ga terminal-overrides 'xterm*:\E]50;CursorShape=%?%p1%{3}%&lt;%t%{0}%e%{1}%;%d\007'
<a href="change.txt.html#%3C" class="d">&lt;</a>
<span class="h">==============================================================================</span>
Window size						<span id="window-size" class="t">window-size</span>

[This <a href="motion.txt.html#is" class="d">is</a> about the size of the whole <a href="windows.txt.html#window" class="d">window</a> Vim <a href="motion.txt.html#is" class="d">is</a> using, not <a href="insert.txt.html#a" class="d">a</a> <a href="windows.txt.html#window" class="d">window</a> that <a href="motion.txt.html#is" class="d">is</a>
created with the "<a href="windows.txt.html#%3Asplit" class="d">:split</a>" command.]

On Unix systems, three methods are tried to get the <a href="windows.txt.html#window" class="d">window</a> size:

<a href="motion.txt.html#-" class="d">-</a> an ioctl call (TIOCGSIZE or TIOCGWINSZ, depends on your system)
<a href="motion.txt.html#-" class="d">-</a> the environment <a href="vimeval.txt.html#variables" class="d">variables</a> "LINES" and "COLUMNS"
<a href="motion.txt.html#-" class="d">-</a> from the <a href="tui.txt.html#terminfo" class="l">terminfo</a> entries "lines" and "columns"

If everything fails <a href="insert.txt.html#a" class="d">a</a> default size of 24 lines and 80 columns <a href="motion.txt.html#is" class="d">is</a> assumed.  If
<a href="insert.txt.html#a" class="d">a</a> <a href="windows.txt.html#window-resize" class="d">window-resize</a> signal <a href="motion.txt.html#is" class="d">is</a> received the size will be set again.  If the <a href="windows.txt.html#window" class="d">window</a>
size <a href="motion.txt.html#is" class="d">is</a> wrong you can use the <a href="options.txt.html#%27lines%27" class="o">'lines'</a> and <a href="options.txt.html#%27columns%27" class="o">'columns'</a> <a href="options.txt.html#options" class="d">options</a> to set the
correct values. See <a href="various.txt.html#%3Amode" class="l">:mode</a><a href="repeat.txt.html#." class="d">.</a>

<span class="h">==============================================================================</span>
Slow and fast terminals				<span id="slow-fast-terminal" class="t">slow-fast-terminal</span>
						<span id="slow-terminal" class="t">slow-terminal</span>

If you have <a href="insert.txt.html#a" class="d">a</a> slow <a href="terminal.txt.html#terminal" class="d">terminal</a> you may want to reset the <a href="options.txt.html#%27showcmd%27" class="o">'showcmd'</a> and <a href="options.txt.html#%27ruler%27" class="o">'ruler'</a>
options.  The command characters and cursor positions will not be shown in the
status line (which involves <a href="insert.txt.html#a" class="d">a</a> lot of cursor motions and attribute changes <a href="luaref.txt.html#for" class="d">for</a>
every keypress or movement).  If the <a href="terminal.txt.html#terminal" class="d">terminal</a> scrolls very slowly, set the
<a href="options.txt.html#%27scrolljump%27" class="o">'scrolljump'</a> to 5 or so.  If the cursor <a href="motion.txt.html#is" class="d">is</a> moved off the screen (e.g., with
"<a href="motion.txt.html#j" class="d">j</a>"<a href="motion.txt.html#%29" class="d">)</a> Vim will scroll 5 lines <a href="motion.txt.html#at" class="d">at</a> <a href="insert.txt.html#a" class="d">a</a> time.  Another possibility <a href="motion.txt.html#is" class="d">is</a> to reduce the
number of lines that Vim uses with the command "z{height}&lt;CR&gt;"<a href="repeat.txt.html#." class="d">.</a>

If the characters from the <a href="terminal.txt.html#terminal" class="d">terminal</a> are arriving with more than 1 second
between them you might want to set the <a href="options.txt.html#%27timeout%27" class="o">'timeout'</a> and/or <a href="options.txt.html#%27ttimeout%27" class="o">'ttimeout'</a> option.

If you are using <a href="insert.txt.html#a" class="d">a</a> color <a href="terminal.txt.html#terminal" class="d">terminal</a> that <a href="motion.txt.html#is" class="d">is</a> slow when displaying lines beyond
the <a href="intro.txt.html#end" class="d">end</a> of <a href="insert.txt.html#a" class="d">a</a> buffer, this <a href="motion.txt.html#is" class="d">is</a> because Nvim <a href="motion.txt.html#is" class="d">is</a> drawing the <a href="pattern.txt.html#whitespace" class="d">whitespace</a> twice, in
two sets of colours and attributes.  To prevent this, use this command: 
<span class="e">        hi NonText cterm=NONE ctermfg=NONE</span>
This draws the spaces with the default colours and attributes, which allows the
second pass of drawing to be optimized away.  <span class="n">Note:</span> Although in theory the
colours of <a href="pattern.txt.html#whitespace" class="d">whitespace</a> are immaterial, in practice they change the colours of
cursors and selections that cross them.  This may have <a href="insert.txt.html#a" class="d">a</a> visible, but minor,
effect on some UIs.


 vim:et:sw=2:tw=78:ts=8:ft=help:norl:


</pre>
</div>
</main>
<p>Quick links:
<a href="index.html">help overview</a> &middot;
<a href="quickref.txt.html">quick reference</a> &middot;
<a href="usr_toc.txt.html">user manual toc</a> &middot;
<a href="index.html#reference_toc">reference manual toc</a>
</p>
<footer>This site is maintained by Carlo Teubner (<i>(my first name) at cteubner dot net</i>).</footer>
</body>
</html>