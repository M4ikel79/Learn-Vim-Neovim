<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="color-scheme" content="light dark">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="description" content="Neovim help pages, always up-to-date">
<title>Neovim: vimeval.txt</title>
<link rel="shortcut icon" href="s/h3E0J2MHNKfIuCqP/favicon-neovim.ico">
<!-- favicon taken from https://neovim.io/favicon.ico, which is licensed under CC-BY-3.0: https://creativecommons.org/licenses/by/3.0/ -->

<link rel="stylesheet" href="s/MsMIu46igYudff1x/tom-select.min.css">
<script defer src="s/RLcAbtLBYX-q5me0/tom-select.base.min.js"></script>

<link rel="stylesheet" href="s/QRMkrs52-wJfIQ-w/vimhelp.css">
<noscript><link rel="stylesheet" href="s/eRFCn9A-K4lmzV_A/noscript.css"></noscript>
<script defer src="s/KpwrKyx19dtnhPoe/vimhelp.js"></script>
</head>
<body>




<div class="bar">
  <div class="ql">Quick links:
<a href="index.html">help overview</a> &middot;
<a href="quickref.txt.html">quick reference</a> &middot;
<a href="usr_toc.txt.html">user manual toc</a> &middot;
<a href="index.html#reference_toc">reference manual toc</a>
</div>
  <div class="tag srch need-js">
    <select id="vh-select-tag"></select>
    <div class="placeholder">Go to keyword<span class="not-mobile">&nbsp;(shortcut: <kbd>k</kbd>)</span></div>
  </div>
  <form class="site srch" action="https://duckduckgo.com" method="get" target="_blank" rel="noopener noreferrer">
    <input type="hidden" name="sites" value="neo.vimhelp.org">
    <input type="search" name="q" id="vh-srch-input" placeholder="Site search">
    <div class="placeholder need-js">Site search<span class="not-mobile">&nbsp;(shortcut: <kbd>s</kbd>)</span></div>
  </form>
  <div id="theme-switcher" class="need-js">
  <button id="theme-current" title="Switch theme">Theme</button>
  <div id="theme-dropdown"><ul>
    <li><button id="theme-native" title="Switch to native theme">Native</button></li>
    <li><button id="theme-light" title="Switch to light theme">Light</button></li>
    <li><button id="theme-dark" title="Switch to dark theme">Dark</button></li>
  </ul></div>
</div>

</div>

<main>
<div id="vh-sidebar">
<ul><li><a href="vimeval.txt.html#">↑Top↑</a></li>
<li><a href="vimeval.txt.html#variables">Variables</a></li>
<li><a href="vimeval.txt.html#expression-syntax">Expression syntax</a></li>
<li><a href="vimeval.txt.html#internal-variables">Internal variable</a></li>
<li><a href="vimeval.txt.html#vim-function">Builtin Functions</a></li>
<li><a href="vimeval.txt.html#user-function">Defining functions</a></li>
<li><a href="vimeval.txt.html#curly-braces-names">Curly braces names</a></li>
<li><a href="vimeval.txt.html#expression-commands">Commands</a></li>
<li><a href="vimeval.txt.html#exception-handling">Exception handling</a></li>
<li><a href="vimeval.txt.html#eval-examples">Examples</a></li>
<li><a href="vimeval.txt.html#eval-sandbox">The sandbox</a></li>
<li><a href="vimeval.txt.html#textlock">Textlock</a></li>
<li><a href="vimeval.txt.html#vim-script-library">Vim script library</a></li>
<li><a href="vimeval.txt.html#expr-highlight">Command-line expressions highlighting</a></li>
</ul>
</div>
<div id="vh-content">
<pre>
<span id="vimeval.txt" class="t">vimeval.txt</span>  	Nvim


		  <span class="i">VIM REFERENCE MANUAL	  by Bram Moolenaar</span>


Expression evaluation	<span id="vimscript" class="t">vimscript</span> <span id="expression" class="t">expression</span> <span id="expr" class="t">expr</span> <span id="E15" class="t">E15</span> <span id="eval" class="t">eval</span> <span id="eval.txt" class="t">eval.txt</span>

Using expressions <a href="motion.txt.html#is" class="d">is</a> introduced in chapter 41 of the user manual <a href="usr_41.txt.html#usr_41.txt" class="l">usr_41.txt</a><a href="repeat.txt.html#." class="d">.</a>

				      Type <a href="various.txt.html#gO" class="l">gO</a> to see the table of contents.

<span class="h">==============================================================================</span>
1. Variables						<span id="variables" class="t">variables</span>

<span class="h">1.1 Variable types </span>
						<span id="E712" class="t">E712</span> <span id="E896" class="t">E896</span> <span id="E897" class="t">E897</span> <span id="E899" class="t">E899</span>
There are seven types of variables:

							<span id="Number" class="t">Number</span> <span id="Integer" class="t">Integer</span>
<a href="vimeval.txt.html#Number" class="d">Number</a>		<a href="insert.txt.html#A" class="d">A</a> 32 or 64 bit signed number.  <a href="vimeval.txt.html#expr-number" class="l">expr-number</a>
		The number of bits <a href="motion.txt.html#is" class="d">is</a> available in <a href="vvars.txt.html#v%3Anumbersize" class="l">v:numbersize</a><a href="repeat.txt.html#." class="d">.</a>
		Examples:  -123  0x10  0177  0o177  0b1011

<a href="vimeval.txt.html#Float" class="d">Float</a>		<a href="insert.txt.html#A" class="d">A</a> floating point number. <a href="vimeval.txt.html#floating-point-format" class="l">floating-point-format</a> <span id="Float" class="t">Float</span>
		Examples: 123.456  1.15e-6  -1.1e3

<a href="vimeval.txt.html#String" class="d">String</a>		<a href="insert.txt.html#A" class="d">A</a> NUL terminated <a href="vimeval.txt.html#string" class="d">string</a> of 8-bit unsigned characters (bytes).
		<a href="vimeval.txt.html#expr-string" class="l">expr-string</a> Examples: "ab\txx\"<a href="starting.txt.html#--" class="d">--</a>"  'x-z''a,c'

<a href="vimeval.txt.html#Funcref" class="d">Funcref</a>		<a href="insert.txt.html#A" class="d">A</a> <a href="intro.txt.html#reference" class="d">reference</a> to <a href="insert.txt.html#a" class="d">a</a> function <a href="vimeval.txt.html#Funcref" class="l">Funcref</a><a href="repeat.txt.html#." class="d">.</a>
		Example: function("strlen"<a href="motion.txt.html#%29" class="d">)</a>
		It can be bound to <a href="insert.txt.html#a" class="d">a</a> dictionary and arguments, <a href="motion.txt.html#it" class="d">it</a> then works
		like <a href="insert.txt.html#a" class="d">a</a> Partial.
		Example: function("Callback"<a href="motion.txt.html#%2C" class="d">,</a> <span class="s">[arg]</span>, myDict)

<a href="vimeval.txt.html#List" class="d">List</a>		An ordered sequence of items, see <a href="vimeval.txt.html#List" class="l">List</a> <a href="luaref.txt.html#for" class="d">for</a> details.
		Example: [1, 2, ['a', 'b']]

<a href="vimeval.txt.html#Dictionary" class="d">Dictionary</a>	An associative, unordered array: Each entry has <a href="insert.txt.html#a" class="d">a</a> key and <a href="insert.txt.html#a" class="d">a</a>
		value. <a href="vimeval.txt.html#Dictionary" class="l">Dictionary</a>
		Examples: 
<span class="e">			{"blue": "#0000ff", "red": "#ff0000"}</span>
<span class="e">			#{blue: "#0000ff", red: "#ff0000"}</span>
<span class="e"></span>
<a href="vimeval.txt.html#Blob" class="d">Blob</a>		Binary Large Object. Stores any sequence of bytes.  See <a href="vimeval.txt.html#Blob" class="l">Blob</a>
		<a href="luaref.txt.html#for" class="d">for</a> details.
		Example: 0zFF00ED015DAF
		0z <a href="motion.txt.html#is" class="d">is</a> an empty Blob.

The <a href="vimeval.txt.html#Number" class="d">Number</a> and <a href="vimeval.txt.html#String" class="d">String</a> types are converted automatically, depending on how they
are used.

Conversion from <a href="insert.txt.html#a" class="d">a</a> <a href="vimeval.txt.html#Number" class="d">Number</a> to <a href="insert.txt.html#a" class="d">a</a> <a href="vimeval.txt.html#String" class="d">String</a> <a href="motion.txt.html#is" class="d">is</a> by making the ASCII representation of
the Number.  Examples:
<span class="h">	Number 123	--&gt;	String "123" </span>
<span class="h">	Number 0	--&gt;	String "0" </span>
<span class="h">	Number -1	--&gt;	String "-1" </span>
							<span id="octal" class="t">octal</span>
Conversion from <a href="insert.txt.html#a" class="d">a</a> <a href="vimeval.txt.html#String" class="d">String</a> to <a href="insert.txt.html#a" class="d">a</a> <a href="vimeval.txt.html#Number" class="d">Number</a> <a href="motion.txt.html#is" class="d">is</a> done by converting the first digits to
<a href="insert.txt.html#a" class="d">a</a> number.  Hexadecimal "0xf9"<a href="motion.txt.html#%2C" class="d">,</a> Octal "017" or "0o17"<a href="motion.txt.html#%2C" class="d">,</a> and Binary "0b10"
numbers are recognized.  If the <a href="vimeval.txt.html#String" class="d">String</a> doesn't start with digits, the result
<a href="motion.txt.html#is" class="d">is</a> zero. Examples:
<span class="h">	String "456"	--&gt;	Number 456 </span>
<span class="h">	String "6bar"	--&gt;	Number 6 </span>
<span class="h">	String "foo"	--&gt;	Number 0 </span>
<span class="h">	String "0xf1"	--&gt;	Number 241 </span>
<span class="h">	String "0100"	--&gt;	Number 64 </span>
<span class="h">	String "0o100"	--&gt;	Number 64 </span>
<span class="h">	String "0b101"	--&gt;	Number 5 </span>
<span class="h">	String "-8"	--&gt;	Number -8 </span>
<span class="h">	String "+8"	--&gt;	Number 0 </span>

To force conversion from <a href="vimeval.txt.html#String" class="d">String</a> to Number, add zero to it: 
<span class="e">	:echo "0100" + 0</span>
<span class="h">	64 </span>

To avoid <a href="insert.txt.html#a" class="d">a</a> leading zero to cause <a href="vimeval.txt.html#octal" class="d">octal</a> conversion, or <a href="luaref.txt.html#for" class="d">for</a> using <a href="insert.txt.html#a" class="d">a</a> different
base, use <a href="vimfn.txt.html#str2nr%28%29" class="l">str2nr()</a><a href="repeat.txt.html#." class="d">.</a>

						<span id="TRUE" class="t">TRUE</span> <span id="FALSE" class="t">FALSE</span> <span id="Boolean" class="t">Boolean</span>
For <a href="options.txt.html#boolean" class="d">boolean</a> operators Numbers are used.  Zero <a href="motion.txt.html#is" class="d">is</a> FALSE, non-zero <a href="motion.txt.html#is" class="d">is</a> TRUE.
You can also use <a href="vvars.txt.html#v%3Afalse" class="l">v:false</a> and <a href="vvars.txt.html#v%3Atrue" class="l">v:true</a><a href="repeat.txt.html#." class="d">.</a>
When <a href="vimeval.txt.html#TRUE" class="d">TRUE</a> <a href="motion.txt.html#is" class="d">is</a> returned from <a href="insert.txt.html#a" class="d">a</a> function <a href="motion.txt.html#it" class="d">it</a> <a href="motion.txt.html#is" class="d">is</a> the <a href="vimeval.txt.html#Number" class="d">Number</a> one, <a href="vimeval.txt.html#FALSE" class="d">FALSE</a> <a href="motion.txt.html#is" class="d">is</a> the
number zero.

<span class="n">Note</span> that in the command: 
<span class="e">	:if "foo"</span>
<span class="e">	:" NOT executed</span>
"foo" <a href="motion.txt.html#is" class="d">is</a> converted to 0, which means FALSE.  If the <a href="vimeval.txt.html#string" class="d">string</a> starts with <a href="insert.txt.html#a" class="d">a</a>
non-zero number <a href="motion.txt.html#it" class="d">it</a> means TRUE: 
<span class="e">	:if "8foo"</span>
<span class="e">	:" executed</span>
To test <a href="luaref.txt.html#for" class="d">for</a> <a href="insert.txt.html#a" class="d">a</a> non-empty string, use empty(): 
<span class="e">	:if !empty("foo")</span>
<span class="e"></span>
						<span id="falsy" class="t">falsy</span> <span id="truthy" class="t">truthy</span>
An <a href="vimeval.txt.html#expression" class="d">expression</a> can be used <a href="motion.txt.html#as" class="d">as</a> <a href="insert.txt.html#a" class="d">a</a> condition, ignoring the type and only using
whether the value <a href="motion.txt.html#is" class="d">is</a> "sort of true" or "sort of false"<a href="repeat.txt.html#." class="d">.</a>  Falsy is:
	the number zero
	empty string, blob, <a href="vimeval.txt.html#list" class="d">list</a> or dictionary
Other values are truthy.  Examples:
	<a href="motion.txt.html#0" class="d">0</a>	<a href="vimeval.txt.html#falsy" class="d">falsy</a>
	1	<a href="vimeval.txt.html#truthy" class="d">truthy</a>
	-1	<a href="vimeval.txt.html#truthy" class="d">truthy</a>
	0.0	<a href="vimeval.txt.html#falsy" class="d">falsy</a>
	0.1	<a href="vimeval.txt.html#truthy" class="d">truthy</a>
	<a href="motion.txt.html#%27%27" class="d">''</a>	<a href="vimeval.txt.html#falsy" class="d">falsy</a>
	'x'	<a href="vimeval.txt.html#truthy" class="d">truthy</a>
	<a href="motion.txt.html#%5B%5D" class="d">[]</a>	<a href="vimeval.txt.html#falsy" class="d">falsy</a>
	[0]	<a href="vimeval.txt.html#truthy" class="d">truthy</a>
	<a href="intro.txt.html#%7B%7D" class="d">{}</a>	<a href="vimeval.txt.html#falsy" class="d">falsy</a>
	#{x: 1} <a href="vimeval.txt.html#truthy" class="d">truthy</a>
	0z	<a href="vimeval.txt.html#falsy" class="d">falsy</a>
	0z00	<a href="vimeval.txt.html#truthy" class="d">truthy</a>

							<span id="non-zero-arg" class="t">non-zero-arg</span>
Function arguments often behave slightly different from <a href="vimeval.txt.html#TRUE" class="l">TRUE</a><a href="cmdline.txt.html#%3A" class="d">:</a> If the
argument <a href="motion.txt.html#is" class="d">is</a> present and <a href="motion.txt.html#it" class="d">it</a> evaluates to <a href="insert.txt.html#a" class="d">a</a> non-zero Number, <a href="vvars.txt.html#v%3Atrue" class="l">v:true</a> or <a href="insert.txt.html#a" class="d">a</a>
non-empty String, then the value <a href="motion.txt.html#is" class="d">is</a> considered to be TRUE.
<span class="n">Note</span> that " " and "<a href="motion.txt.html#0" class="d">0</a>" are also non-empty strings, thus considered to be TRUE.
<a href="insert.txt.html#A" class="d">A</a> List, <a href="vimeval.txt.html#Dictionary" class="d">Dictionary</a> or <a href="vimeval.txt.html#Float" class="d">Float</a> <a href="motion.txt.html#is" class="d">is</a> not <a href="insert.txt.html#a" class="d">a</a> <a href="vimeval.txt.html#Number" class="d">Number</a> or String, thus evaluate to FALSE.

				<span id="E745" class="t">E745</span> <span id="E728" class="t">E728</span> <span id="E703" class="t">E703</span> <span id="E729" class="t">E729</span> <span id="E730" class="t">E730</span> <span id="E731" class="t">E731</span>
				<span id="E974" class="t">E974</span> <span id="E975" class="t">E975</span> <span id="E976" class="t">E976</span>
<a href="vimeval.txt.html#List" class="l">List</a><a href="motion.txt.html#%2C" class="d">,</a> <a href="vimeval.txt.html#Dictionary" class="l">Dictionary</a><a href="motion.txt.html#%2C" class="d">,</a> <a href="vimeval.txt.html#Funcref" class="l">Funcref</a><a href="motion.txt.html#%2C" class="d">,</a> and <a href="vimeval.txt.html#Blob" class="l">Blob</a> types are not automatically
converted.

							<span id="E805" class="t">E805</span> <span id="E806" class="t">E806</span> <span id="E808" class="t">E808</span>
When mixing <a href="vimeval.txt.html#Number" class="d">Number</a> and <a href="vimeval.txt.html#Float" class="d">Float</a> the <a href="vimeval.txt.html#Number" class="d">Number</a> <a href="motion.txt.html#is" class="d">is</a> converted to Float.  Otherwise
there <a href="motion.txt.html#is" class="d">is</a> no automatic conversion of Float.  You can use <a href="vimfn.txt.html#str2float%28%29" class="d">str2float()</a> <a href="luaref.txt.html#for" class="d">for</a> <a href="vimeval.txt.html#String" class="d">String</a>
to Float, <a href="vimfn.txt.html#printf%28%29" class="d">printf()</a> <a href="luaref.txt.html#for" class="d">for</a> <a href="vimeval.txt.html#Float" class="d">Float</a> to <a href="vimeval.txt.html#String" class="d">String</a> and <a href="vimfn.txt.html#float2nr%28%29" class="d">float2nr()</a> <a href="luaref.txt.html#for" class="d">for</a> <a href="vimeval.txt.html#Float" class="d">Float</a> to Number.

					<span id="E362" class="t">E362</span> <span id="E891" class="t">E891</span> <span id="E892" class="t">E892</span> <span id="E893" class="t">E893</span> <span id="E894" class="t">E894</span> <span id="E907" class="t">E907</span>
When expecting <a href="insert.txt.html#a" class="d">a</a> <a href="vimeval.txt.html#Float" class="d">Float</a> <a href="insert.txt.html#a" class="d">a</a> <a href="vimeval.txt.html#Number" class="d">Number</a> can also be used, but nothing else.

					<span id="no-type-checking" class="t">no-type-checking</span>
You will not get an error if you try to change the type of <a href="insert.txt.html#a" class="d">a</a> variable.


<span class="h">1.2 Function references </span>
					<span id="Funcref" class="t">Funcref</span> <span id="E695" class="t">E695</span> <span id="E718" class="t">E718</span> <span id="E1192" class="t">E1192</span>
<a href="insert.txt.html#A" class="d">A</a> <a href="vimeval.txt.html#Funcref" class="d">Funcref</a> variable <a href="motion.txt.html#is" class="d">is</a> obtained with the <a href="vimfn.txt.html#function%28%29" class="l">function()</a> function, the <a href="vimfn.txt.html#funcref%28%29" class="l">funcref()</a>
function or created with the <a href="vimeval.txt.html#lambda" class="d">lambda</a> <a href="vimeval.txt.html#expression" class="d">expression</a> <a href="vimeval.txt.html#expr-lambda" class="l">expr-lambda</a><a href="repeat.txt.html#." class="d">.</a>  It can be used
in an <a href="vimeval.txt.html#expression" class="d">expression</a> in the place of <a href="insert.txt.html#a" class="d">a</a> function name, before the parenthesis
around the arguments, to invoke the function <a href="motion.txt.html#it" class="d">it</a> refers to.  Example: 
<span class="e"></span>
<span class="e">	:let Fn = function("MyFunc")</span>
<span class="e">	:echo Fn()</span>
							<span id="E704" class="t">E704</span> <span id="E705" class="t">E705</span> <span id="E707" class="t">E707</span>
<a href="insert.txt.html#A" class="d">A</a> <a href="vimeval.txt.html#Funcref" class="d">Funcref</a> variable must start with <a href="insert.txt.html#a" class="d">a</a> capital, "s:"<a href="motion.txt.html#%2C" class="d">,</a> "<a href="vimeval.txt.html#w%3A" class="d">w:</a>"<a href="motion.txt.html#%2C" class="d">,</a> "<a href="vimeval.txt.html#t%3A" class="d">t:</a>" or "<a href="vimeval.txt.html#b%3A" class="d">b:</a>"<a href="repeat.txt.html#." class="d">.</a>  You
can use "<a href="vimeval.txt.html#g%3A" class="d">g:</a>" but the following name must still start with <a href="insert.txt.html#a" class="d">a</a> capital.  You
cannot have both <a href="insert.txt.html#a" class="d">a</a> <a href="vimeval.txt.html#Funcref" class="d">Funcref</a> variable and <a href="insert.txt.html#a" class="d">a</a> function with the same name.

<a href="insert.txt.html#A" class="d">A</a> special <a href="change.txt.html#case" class="d">case</a> <a href="motion.txt.html#is" class="d">is</a> defining <a href="insert.txt.html#a" class="d">a</a> function and directly assigning its <a href="vimeval.txt.html#Funcref" class="d">Funcref</a> to <a href="insert.txt.html#a" class="d">a</a>
<a href="vimeval.txt.html#Dictionary" class="d">Dictionary</a> entry.  Example: 
<span class="e">	:function dict.init() dict</span>
<span class="e">	:   let self.val = 0</span>
<span class="e">	:endfunction</span>
<span class="e"></span>
The key of the <a href="vimeval.txt.html#Dictionary" class="d">Dictionary</a> can start with <a href="insert.txt.html#a" class="d">a</a> lower <a href="change.txt.html#case" class="d">case</a> letter.  The actual
function name <a href="motion.txt.html#is" class="d">is</a> not used here.  Also see <a href="vimeval.txt.html#numbered-function" class="l">numbered-function</a><a href="repeat.txt.html#." class="d">.</a>

<a href="insert.txt.html#A" class="d">A</a> <a href="vimeval.txt.html#Funcref" class="d">Funcref</a> can also be used with the <a href="userfunc.txt.html#%3Acall" class="l">:call</a> command: 
<span class="e">	:call Fn()</span>
<span class="e">	:call dict.init()</span>
<span class="e"></span>
The name of the referenced function can be obtained with <a href="vimfn.txt.html#string%28%29" class="l">string()</a><a href="repeat.txt.html#." class="d">.</a> 
<span class="e">	:let func = string(Fn)</span>
<span class="e"></span>
You can use <a href="vimfn.txt.html#call%28%29" class="l">call()</a> to invoke <a href="insert.txt.html#a" class="d">a</a> <a href="vimeval.txt.html#Funcref" class="d">Funcref</a> and use <a href="insert.txt.html#a" class="d">a</a> <a href="vimeval.txt.html#list" class="d">list</a> variable <a href="luaref.txt.html#for" class="d">for</a> the
arguments: 
<span class="e">	:let r = call(Fn, mylist)</span>

								<span id="Partial" class="t">Partial</span>
<a href="insert.txt.html#A" class="d">A</a> <a href="vimeval.txt.html#Funcref" class="d">Funcref</a> optionally binds <a href="insert.txt.html#a" class="d">a</a> <a href="vimeval.txt.html#Dictionary" class="d">Dictionary</a> and/or arguments.  This <a href="motion.txt.html#is" class="d">is</a> also called
<a href="insert.txt.html#a" class="d">a</a> Partial.  This <a href="motion.txt.html#is" class="d">is</a> created by passing the <a href="vimeval.txt.html#Dictionary" class="d">Dictionary</a> and/or arguments to
<a href="vimfn.txt.html#function%28%29" class="d">function()</a> or funcref().  When calling the function the <a href="vimeval.txt.html#Dictionary" class="d">Dictionary</a> and/or
arguments will be passed to the function.  Example: 
<span class="e"></span>
<span class="e">	let Cb = function('Callback', ['foo'], myDict)</span>
<span class="e">	call Cb('bar')</span>
<span class="e"></span>
This will invoke the function <a href="motion.txt.html#as" class="d">as</a> if using: 
<span class="e">	call myDict.Callback('foo', 'bar')</span>
<span class="e"></span>
<span class="n">Note</span> that binding <a href="insert.txt.html#a" class="d">a</a> function to <a href="insert.txt.html#a" class="d">a</a> <a href="vimeval.txt.html#Dictionary" class="d">Dictionary</a> also happens when the function <a href="motion.txt.html#is" class="d">is</a>
<a href="insert.txt.html#a" class="d">a</a> member of the Dictionary: 
<span class="e"></span>
<span class="e">	let myDict.myFunction = MyFunction</span>
<span class="e">	call myDict.myFunction()</span>
<span class="e"></span>
Here MyFunction() will get myDict passed <a href="motion.txt.html#as" class="d">as</a> "<a href="vimeval.txt.html#self" class="d">self</a>"<a href="repeat.txt.html#." class="d">.</a>  This happens when the
"myFunction" member <a href="motion.txt.html#is" class="d">is</a> accessed.  When assigning "myFunction" to otherDict
and calling it, <a href="motion.txt.html#it" class="d">it</a> will be bound to otherDict: 
<span class="e"></span>
<span class="e">	let otherDict.myFunction = myDict.myFunction</span>
<span class="e">	call otherDict.myFunction()</span>
<span class="e"></span>
Now "<a href="vimeval.txt.html#self" class="d">self</a>" will be "otherDict"<a href="repeat.txt.html#." class="d">.</a>  But when the dictionary was bound explicitly
this won't happen: 
<span class="e"></span>
<span class="e">	let myDict.myFunction = function(MyFunction, myDict)</span>
<span class="e">	let otherDict.myFunction = myDict.myFunction</span>
<span class="e">	call otherDict.myFunction()</span>
<span class="e"></span>
Here "<a href="vimeval.txt.html#self" class="d">self</a>" will be "myDict"<a href="motion.txt.html#%2C" class="d">,</a> because <a href="motion.txt.html#it" class="d">it</a> was bound explicitly.


<span class="h">1.3 Lists </span>
						<span id="list" class="t">list</span> <span id="List" class="t">List</span> <span id="Lists" class="t">Lists</span> <span id="E686" class="t">E686</span>
<a href="insert.txt.html#A" class="d">A</a> <a href="vimeval.txt.html#List" class="d">List</a> <a href="motion.txt.html#is" class="d">is</a> an ordered sequence of items.  An item can be of any type.  Items
can be accessed by their <a href="index.txt.html#index" class="d">index</a> number.  Items can be added and removed <a href="motion.txt.html#at" class="d">at</a> any
position in the sequence.


<span class="h">List creation </span>
							<span id="E696" class="t">E696</span> <span id="E697" class="t">E697</span>
<a href="insert.txt.html#A" class="d">A</a> <a href="vimeval.txt.html#List" class="d">List</a> <a href="motion.txt.html#is" class="d">is</a> created with <a href="insert.txt.html#a" class="d">a</a> comma-separated <a href="vimeval.txt.html#list" class="d">list</a> of items in square brackets.
Examples: 
<span class="e">	:let mylist = [1, two, 3, "four"]</span>
<span class="e">	:let emptylist = []</span>
<span class="e"></span>
An item can be any expression.  Using <a href="insert.txt.html#a" class="d">a</a> <a href="vimeval.txt.html#List" class="d">List</a> <a href="luaref.txt.html#for" class="d">for</a> an item creates <a href="insert.txt.html#a" class="d">a</a>
<a href="vimeval.txt.html#List" class="d">List</a> of Lists: 
<span class="e">	:let nestlist = [[11, 12], [21, 22], [31, 32]]</span>
<span class="e"></span>
An extra comma after the last item <a href="motion.txt.html#is" class="d">is</a> ignored.


<span class="h">List index </span>
							<span id="list-index" class="t">list-index</span> <span id="E684" class="t">E684</span>
An item in the <a href="vimeval.txt.html#List" class="d">List</a> can be accessed by putting the <a href="index.txt.html#index" class="d">index</a> in square brackets
after the List.  Indexes are zero-based, thus the first item has <a href="index.txt.html#index" class="d">index</a> zero. 
<span class="e">	:let item = mylist[0]		" get the first item: 1</span>
<span class="e">	:let item = mylist[2]		" get the third item: 3</span>
<span class="e"></span>
When the resulting item <a href="motion.txt.html#is" class="d">is</a> <a href="insert.txt.html#a" class="d">a</a> <a href="vimeval.txt.html#list" class="d">list</a> this can be repeated: 
<span class="e">	:let item = nestlist[0][1]	" get the first list, second item: 12</span>

<a href="insert.txt.html#A" class="d">A</a> negative <a href="index.txt.html#index" class="d">index</a> <a href="motion.txt.html#is" class="d">is</a> counted from the end.  Index -1 refers to the last item in
the List, -2 to the last but one item, etc. 
<span class="e">	:let last = mylist[-1]		" get the last item: "four"</span>
<span class="e"></span>
To avoid an error <a href="luaref.txt.html#for" class="d">for</a> an invalid <a href="index.txt.html#index" class="d">index</a> use the <a href="vimfn.txt.html#get%28%29" class="l">get()</a> function.  When an item
<a href="motion.txt.html#is" class="d">is</a> not available <a href="motion.txt.html#it" class="d">it</a> returns zero or the default value you specify: 
<span class="e">	:echo get(mylist, idx)</span>
<span class="e">	:echo get(mylist, idx, "NONE")</span>
<span class="e"></span>
<span class="e"></span>
<span class="h">List concatenation </span>
							<span id="list-concatenation" class="t">list-concatenation</span>
Two lists can be concatenated with the "<a href="motion.txt.html#%2B" class="d">+</a>" operator: 
<span class="e">	:let longlist = mylist + [5, 6]</span>
<span class="e">	:let longlist = [5, 6] + mylist</span>
To prepend or append an item, turn <a href="motion.txt.html#it" class="d">it</a> into <a href="insert.txt.html#a" class="d">a</a> <a href="vimeval.txt.html#list" class="d">list</a> by putting <a href="motion.txt.html#%5B%5D" class="d">[]</a> around it.

<a href="insert.txt.html#A" class="d">A</a> <a href="vimeval.txt.html#list" class="d">list</a> can be concatenated with another one in-place using <a href="vimeval.txt.html#%3Alet%2B%3D" class="l">:let+=</a> or
<a href="vimfn.txt.html#extend%28%29" class="l">extend()</a><a href="cmdline.txt.html#%3A" class="d">:</a> 
<span class="e">	:let mylist += [7, 8]</span>
<span class="e">	:call extend(mylist, [7, 8])</span>

See <a href="vimeval.txt.html#list-modification" class="l">list-modification</a> below <a href="luaref.txt.html#for" class="d">for</a> more about <a href="change.txt.html#changing" class="d">changing</a> <a href="insert.txt.html#a" class="d">a</a> <a href="vimeval.txt.html#list" class="d">list</a> in-place.


<span class="h">Sublist </span>
							<span id="sublist" class="t">sublist</span>
<a href="insert.txt.html#A" class="d">A</a> part of the <a href="vimeval.txt.html#List" class="d">List</a> can be obtained by specifying the first and last index,
separated by <a href="insert.txt.html#a" class="d">a</a> colon in square brackets: 
<span class="e">	:let shortlist = mylist[2:-1]	" get List [3, "four"]</span>
<span class="e"></span>
Omitting the first <a href="index.txt.html#index" class="d">index</a> <a href="motion.txt.html#is" class="d">is</a> similar to zero.  Omitting the last <a href="index.txt.html#index" class="d">index</a> <a href="motion.txt.html#is" class="d">is</a>
similar to -1. 
<span class="e">	:let endlist = mylist[2:]	" from item 2 to the end: [3, "four"]</span>
<span class="e">	:let shortlist = mylist[2:2]	" List with one item: [3]</span>
<span class="e">	:let otherlist = mylist[:]	" make a copy of the List</span>
<span class="e"></span>
Notice that the last <a href="index.txt.html#index" class="d">index</a> <a href="motion.txt.html#is" class="d">is</a> inclusive.  If you prefer using an <a href="motion.txt.html#exclusive" class="d">exclusive</a>
<a href="index.txt.html#index" class="d">index</a> use the <a href="vimfn.txt.html#slice%28%29" class="l">slice()</a> method.

If the first <a href="index.txt.html#index" class="d">index</a> <a href="motion.txt.html#is" class="d">is</a> beyond the last item of the <a href="vimeval.txt.html#List" class="d">List</a> or the second item <a href="motion.txt.html#is" class="d">is</a>
before the first item, the result <a href="motion.txt.html#is" class="d">is</a> an empty list.  There <a href="motion.txt.html#is" class="d">is</a> no error
message.

If the second <a href="index.txt.html#index" class="d">index</a> <a href="motion.txt.html#is" class="d">is</a> equal to or greater than the length of the <a href="vimeval.txt.html#list" class="d">list</a> the
length minus one <a href="motion.txt.html#is" class="d">is</a> used: 
<span class="e">	:let mylist = [0, 1, 2, 3]</span>
<span class="e">	:echo mylist[2:8]		" result: [2, 3]</span>
<span class="e"></span>
<span class="n">NOTE:</span> mylist[s:e] means using the variable "s:e" <a href="motion.txt.html#as" class="d">as</a> index.  Watch out <a href="luaref.txt.html#for" class="d">for</a>
using <a href="insert.txt.html#a" class="d">a</a> single letter variable before the "<a href="cmdline.txt.html#%3A" class="d">:</a>"<a href="repeat.txt.html#." class="d">.</a>  <a href="insert.txt.html#Insert" class="d">Insert</a> <a href="insert.txt.html#a" class="d">a</a> <a href="intro.txt.html#space" class="d">space</a> when needed:
mylist[s <a href="cmdline.txt.html#%3A" class="d">:</a> e].


<span class="h">List identity </span>
							<span id="list-identity" class="t">list-identity</span>
When variable "aa" <a href="motion.txt.html#is" class="d">is</a> <a href="insert.txt.html#a" class="d">a</a> <a href="vimeval.txt.html#list" class="d">list</a> and you assign <a href="motion.txt.html#it" class="d">it</a> to another variable "bb"<a href="motion.txt.html#%2C" class="d">,</a> both
<a href="vimeval.txt.html#variables" class="d">variables</a> refer to the same list.  Thus <a href="change.txt.html#changing" class="d">changing</a> the <a href="vimeval.txt.html#list" class="d">list</a> "aa" will also
change "bb"<a href="cmdline.txt.html#%3A" class="d">:</a> 
<span class="e">	:let aa = [1, 2, 3]</span>
<span class="e">	:let bb = aa</span>
<span class="e">	:call add(aa, 4)</span>
<span class="e">	:echo bb</span>
	[1, 2, 3, 4]

Making <a href="insert.txt.html#a" class="d">a</a> copy of <a href="insert.txt.html#a" class="d">a</a> <a href="vimeval.txt.html#list" class="d">list</a> <a href="motion.txt.html#is" class="d">is</a> done with the <a href="vimfn.txt.html#copy%28%29" class="l">copy()</a> function.  Using [:] also
works, <a href="motion.txt.html#as" class="d">as</a> explained above.  This creates <a href="insert.txt.html#a" class="d">a</a> shallow copy of the list: Changing
<a href="insert.txt.html#a" class="d">a</a> <a href="vimeval.txt.html#list" class="d">list</a> item in the <a href="vimeval.txt.html#list" class="d">list</a> will also change the item in the copied list: 
<span class="e">	:let aa = [[1, 'a'], 2, 3]</span>
<span class="e">	:let bb = copy(aa)</span>
<span class="e">	:call add(aa, 4)</span>
<span class="e">	:let aa[0][1] = 'aaa'</span>
<span class="e">	:echo aa</span>
	[[1, aaa], 2, 3, 4] 
<span class="e">	:echo bb</span>
	[[1, aaa], 2, 3]

To make <a href="insert.txt.html#a" class="d">a</a> completely independent <a href="vimeval.txt.html#list" class="d">list</a> use <a href="vimfn.txt.html#deepcopy%28%29" class="l">deepcopy()</a><a href="repeat.txt.html#." class="d">.</a>  This also makes <a href="insert.txt.html#a" class="d">a</a>
copy of the values in the list, recursively.  Up to <a href="insert.txt.html#a" class="d">a</a> hundred levels deep.

The <a href="motion.txt.html#operator" class="d">operator</a> "<a href="motion.txt.html#is" class="d">is</a>" can be used to check if two <a href="vimeval.txt.html#variables" class="d">variables</a> refer to the same
List.  "isnot" does the opposite.  In contrast "<a href="change.txt.html#%3D%3D" class="d">==</a>" compares if two lists have
the same value. 
<span class="e">	:let alist = [1, 2, 3]</span>
<span class="e">	:let blist = [1, 2, 3]</span>
<span class="e">	:echo alist is blist</span>
	<a href="motion.txt.html#0" class="d">0</a> 
<span class="e">	:echo alist == blist</span>
	1

<span class="n">Note</span> about comparing lists: Two lists are considered equal if they have the
same length and all items compare equal, <a href="motion.txt.html#as" class="d">as</a> with using "<a href="change.txt.html#%3D%3D" class="d">==</a>"<a href="repeat.txt.html#." class="d">.</a>  There <a href="motion.txt.html#is" class="d">is</a> one
exception: When comparing <a href="insert.txt.html#a" class="d">a</a> number with <a href="insert.txt.html#a" class="d">a</a> <a href="vimeval.txt.html#string" class="d">string</a> they are considered
different.  There <a href="motion.txt.html#is" class="d">is</a> no automatic type conversion, <a href="motion.txt.html#as" class="d">as</a> with using "<a href="change.txt.html#%3D%3D" class="d">==</a>" on
variables.  Example: 
<span class="e">	echo 4 == "4"</span>
	1 
<span class="e">	echo [4] == ["4"]</span>
	<a href="motion.txt.html#0" class="d">0</a>

Thus comparing <a href="vimeval.txt.html#Lists" class="d">Lists</a> <a href="motion.txt.html#is" class="d">is</a> more strict than comparing numbers and strings.  You
can compare simple values this way too by putting them in <a href="insert.txt.html#a" class="d">a</a> list: 
<span class="e"></span>
<span class="e">	:let a = 5</span>
<span class="e">	:let b = "5"</span>
<span class="e">	:echo a == b</span>
	1 
<span class="e">	:echo [a] == [b]</span>
	<a href="motion.txt.html#0" class="d">0</a>


<span class="h">List unpack </span>

To unpack the items in <a href="insert.txt.html#a" class="d">a</a> <a href="vimeval.txt.html#list" class="d">list</a> to individual variables, <a href="change.txt.html#put" class="d">put</a> the <a href="vimeval.txt.html#variables" class="d">variables</a> in
square brackets, like <a href="vimeval.txt.html#list" class="d">list</a> items: 
<span class="e">	:let [var1, var2] = mylist</span>
<span class="e"></span>
When the number of <a href="vimeval.txt.html#variables" class="d">variables</a> does not match the number of items in the <a href="vimeval.txt.html#list" class="d">list</a>
this produces an error.  To handle any extra items from the <a href="vimeval.txt.html#list" class="d">list</a> append "<a href="motion.txt.html#%3B" class="d">;</a>"
and <a href="insert.txt.html#a" class="d">a</a> variable name: 
<span class="e">	:let [var1, var2; rest] = mylist</span>
<span class="e"></span>
This works like: 
<span class="e">	:let var1 = mylist[0]</span>
<span class="e">	:let var2 = mylist[1]</span>
<span class="e">	:let rest = mylist[2:]</span>
<span class="e"></span>
Except that there <a href="motion.txt.html#is" class="d">is</a> no error if there are only two items.  "rest" will be an
empty <a href="vimeval.txt.html#list" class="d">list</a> then.


<span class="h">List modification </span>
							<span id="list-modification" class="t">list-modification</span>
To change <a href="insert.txt.html#a" class="d">a</a> specific item of <a href="insert.txt.html#a" class="d">a</a> <a href="vimeval.txt.html#list" class="d">list</a> use <a href="vimeval.txt.html#%3Alet" class="l">:let</a> this way: 
<span class="e">	:let list[4] = "four"</span>
<span class="e">	:let listlist[0][3] = item</span>
<span class="e"></span>
To change part of <a href="insert.txt.html#a" class="d">a</a> <a href="vimeval.txt.html#list" class="d">list</a> you can specify the first and last item to be
modified.  The value must <a href="motion.txt.html#at" class="d">at</a> least have the number of items in the range: 
<span class="e">	:let list[3:5] = [3, 4, 5]</span>
<span class="e"></span>
To add items to <a href="insert.txt.html#a" class="d">a</a> <a href="vimeval.txt.html#List" class="d">List</a> in-place, you can use <a href="vimeval.txt.html#%3Alet%2B%3D" class="l">:let+=</a> <a href="motion.txt.html#%28" class="d">(</a><a href="vimeval.txt.html#list-concatenation" class="l">list-concatenation</a>): 
<span class="e">	:let listA = [1, 2]</span>
<span class="e">	:let listA += [3, 4]</span>

When two <a href="vimeval.txt.html#variables" class="d">variables</a> refer to the same List, <a href="change.txt.html#changing" class="d">changing</a> one <a href="vimeval.txt.html#List" class="d">List</a> in-place will
cause the referenced <a href="vimeval.txt.html#List" class="d">List</a> to be changed in-place: 
<span class="e">	:let listA = [1, 2]</span>
<span class="e">	:let listB = listA</span>
<span class="e">	:let listB += [3, 4]</span>
<span class="e">	:echo listA</span>
<span class="e">	[1, 2, 3, 4]</span>

Adding and removing items from <a href="insert.txt.html#a" class="d">a</a> <a href="vimeval.txt.html#list" class="d">list</a> <a href="motion.txt.html#is" class="d">is</a> done with functions.  Here are <a href="insert.txt.html#a" class="d">a</a> few
examples: 
<span class="e">	:call insert(list, 'a')		" prepend item 'a'</span>
<span class="e">	:call insert(list, 'a', 3)	" insert item 'a' before list[3]</span>
<span class="e">	:call add(list, "new")		" append String item</span>
<span class="e">	:call add(list, [1, 2])		" append a List as one new item</span>
<span class="e">	:call extend(list, [1, 2])	" extend the list with two more items</span>
<span class="e">	:let i = remove(list, 3)	" remove item 3</span>
<span class="e">	:unlet list[3]			" idem</span>
<span class="e">	:let l = remove(list, 3, -1)	" remove items 3 to last item</span>
<span class="e">	:unlet list[3 : ]		" idem</span>
<span class="e">	:call filter(list, 'v:val !~ "x"')  " remove items with an 'x'</span>
<span class="e"></span>
Changing the order of items in <a href="insert.txt.html#a" class="d">a</a> list: 
<span class="e">	:call sort(list)		" sort a list alphabetically</span>
<span class="e">	:call reverse(list)		" reverse the order of items</span>
<span class="e">	:call uniq(sort(list))		" sort and remove duplicates</span>
<span class="e"></span>
<span class="e"></span>
<span class="h">For loop </span>

The <a href="vimeval.txt.html#%3Afor" class="l">:for</a> loop executes commands <a href="luaref.txt.html#for" class="d">for</a> each item in <a href="insert.txt.html#a" class="d">a</a> <a href="vimeval.txt.html#List" class="l">List</a><a href="motion.txt.html#%2C" class="d">,</a> <a href="vimeval.txt.html#String" class="l">String</a> or <a href="vimeval.txt.html#Blob" class="l">Blob</a><a href="repeat.txt.html#." class="d">.</a>
<a href="insert.txt.html#A" class="d">A</a> variable <a href="motion.txt.html#is" class="d">is</a> set to each item in sequence.  Example with <a href="insert.txt.html#a" class="d">a</a> List: 
<span class="e">	:for item in mylist</span>
<span class="e">	:   call Doit(item)</span>
<span class="e">	:endfor</span>
<span class="e"></span>
This works like: 
<span class="e">	:let index = 0</span>
<span class="e">	:while index &lt; len(mylist)</span>
<span class="e">	:   let item = mylist[index]</span>
<span class="e">	:   :call Doit(item)</span>
<span class="e">	:   let index = index + 1</span>
<span class="e">	:endwhile</span>
<span class="e"></span>
If all you want to <a href="diff.txt.html#do" class="d">do</a> <a href="motion.txt.html#is" class="d">is</a> modify each item in the <a href="vimeval.txt.html#list" class="d">list</a> then the <a href="vimfn.txt.html#map%28%29" class="l">map()</a>
function will be <a href="insert.txt.html#a" class="d">a</a> simpler <a href="vimeval.txt.html#method" class="d">method</a> than <a href="insert.txt.html#a" class="d">a</a> <a href="luaref.txt.html#for" class="d">for</a> loop.

Just like the <a href="vimeval.txt.html#%3Alet" class="l">:let</a> command, <a href="vimeval.txt.html#%3Afor" class="l">:for</a> also accepts <a href="insert.txt.html#a" class="d">a</a> <a href="vimeval.txt.html#list" class="d">list</a> of variables.  This
requires the argument to be <a href="insert.txt.html#a" class="d">a</a> <a href="vimeval.txt.html#List" class="d">List</a> of Lists. 
<span class="e">	:for [lnum, col] in [[1, 3], [2, 8], [3, 0]]</span>
<span class="e">	:   call Doit(lnum, col)</span>
<span class="e">	:endfor</span>
<span class="e"></span>
This works like <a href="insert.txt.html#a" class="d">a</a> <a href="vimeval.txt.html#%3Alet" class="l">:let</a> command <a href="motion.txt.html#is" class="d">is</a> done <a href="luaref.txt.html#for" class="d">for</a> each <a href="vimeval.txt.html#list" class="d">list</a> item.  Again, the types
must remain the same to avoid an error.

It <a href="motion.txt.html#is" class="d">is</a> also possible to <a href="change.txt.html#put" class="d">put</a> remaining items in <a href="insert.txt.html#a" class="d">a</a> <a href="vimeval.txt.html#List" class="d">List</a> variable: 
<span class="e">	:for [i, j; rest] in listlist</span>
<span class="e">	:   call Doit(i, j)</span>
<span class="e">	:   if !empty(rest)</span>
<span class="e">	:      echo "remainder: " .. string(rest)</span>
<span class="e">	:   endif</span>
<span class="e">	:endfor</span>
<span class="e"></span>
For <a href="insert.txt.html#a" class="d">a</a> <a href="vimeval.txt.html#Blob" class="d">Blob</a> one byte <a href="motion.txt.html#at" class="d">at</a> <a href="insert.txt.html#a" class="d">a</a> time <a href="motion.txt.html#is" class="d">is</a> used.

For <a href="insert.txt.html#a" class="d">a</a> <a href="vimeval.txt.html#String" class="d">String</a> one character, including any composing characters, <a href="motion.txt.html#is" class="d">is</a> used <a href="motion.txt.html#as" class="d">as</a> <a href="insert.txt.html#a" class="d">a</a>
String.  Example: 
<span class="e">	for c in text</span>
<span class="e">	  echo 'This character is ' .. c</span>
<span class="e">	endfor</span>
<span class="e"></span>
<span class="e"></span>
<span class="h">List functions </span>
						<span id="E714" class="t">E714</span>
Functions that are useful with <a href="insert.txt.html#a" class="d">a</a> List: 
<span class="e">	:let r = call(funcname, list)	" call a function with an argument list</span>
<span class="e">	:if empty(list)			" check if list is empty</span>
<span class="e">	:let l = len(list)		" number of items in list</span>
<span class="e">	:let big = max(list)		" maximum value in list</span>
<span class="e">	:let small = min(list)		" minimum value in list</span>
<span class="e">	:let xs = count(list, 'x')	" count nr of times 'x' appears in list</span>
<span class="e">	:let i = index(list, 'x')	" index of first 'x' in list</span>
<span class="e">	:let lines = getline(1, 10)	" get ten text lines from buffer</span>
<span class="e">	:call append('$', lines)	" append text lines in buffer</span>
<span class="e">	:let list = split("a b c")	" create list from items in a string</span>
<span class="e">	:let string = join(list, ', ')	" create string from list items</span>
<span class="e">	:let s = string(list)		" String representation of list</span>
<span class="e">	:call map(list, '"&gt;&gt; " .. v:val')  " prepend "&gt;&gt; " to each item</span>
<span class="e"></span>
Don't forget that <a href="insert.txt.html#a" class="d">a</a> combination of features can make things simple.  For
example, to add up all the numbers in <a href="insert.txt.html#a" class="d">a</a> list: 
<span class="e">	:exe 'let sum = ' .. join(nrlist, '+')</span>
<span class="e"></span>
<span class="e"></span>
<span class="h">1.4 Dictionaries </span>
				 <span id="Dict" class="t">Dict</span> <span id="dict" class="t">dict</span> <span id="Dictionaries" class="t">Dictionaries</span> <span id="Dictionary" class="t">Dictionary</span>
<a href="insert.txt.html#A" class="d">A</a> <a href="vimeval.txt.html#Dictionary" class="d">Dictionary</a> <a href="motion.txt.html#is" class="d">is</a> an associative array: Each entry has <a href="insert.txt.html#a" class="d">a</a> key and <a href="insert.txt.html#a" class="d">a</a> value.  The
entry can be located with the key.  The entries are stored without <a href="insert.txt.html#a" class="d">a</a> specific
ordering.


<span class="h">Dictionary creation </span>
						<span id="E720" class="t">E720</span> <span id="E721" class="t">E721</span> <span id="E722" class="t">E722</span> <span id="E723" class="t">E723</span>
<a href="insert.txt.html#A" class="d">A</a> <a href="vimeval.txt.html#Dictionary" class="d">Dictionary</a> <a href="motion.txt.html#is" class="d">is</a> created with <a href="insert.txt.html#a" class="d">a</a> comma-separated <a href="vimeval.txt.html#list" class="d">list</a> of entries in curly
braces.  Each entry has <a href="insert.txt.html#a" class="d">a</a> key and <a href="insert.txt.html#a" class="d">a</a> value, separated by <a href="insert.txt.html#a" class="d">a</a> colon.  Each key can
only appear once.  Examples: 
<span class="e">	:let mydict = {1: 'one', 2: 'two', 3: 'three'}</span>
<span class="e">	:let emptydict = {}</span>
							<span id="E713" class="t">E713</span> <span id="E716" class="t">E716</span> <span id="E717" class="t">E717</span>
<a href="insert.txt.html#A" class="d">A</a> key <a href="motion.txt.html#is" class="d">is</a> always <a href="insert.txt.html#a" class="d">a</a> String.  You can use <a href="insert.txt.html#a" class="d">a</a> Number, <a href="motion.txt.html#it" class="d">it</a> will be converted to <a href="insert.txt.html#a" class="d">a</a>
<a href="vimeval.txt.html#String" class="d">String</a> automatically.  Thus the <a href="vimeval.txt.html#String" class="d">String</a> '4' and the number 4 will find the same
entry.  <span class="n">Note</span> that the <a href="vimeval.txt.html#String" class="d">String</a> '04' and the <a href="vimeval.txt.html#Number" class="d">Number</a> 04 are different, since the
<a href="vimeval.txt.html#Number" class="d">Number</a> will be converted to the <a href="vimeval.txt.html#String" class="d">String</a> '4', leading zeros are dropped.  The
empty <a href="vimeval.txt.html#string" class="d">string</a> can also be used <a href="motion.txt.html#as" class="d">as</a> <a href="insert.txt.html#a" class="d">a</a> key.
						<span id="literal-Dict" class="t">literal-Dict</span> <span id="%23%7B%7D" class="t">#{}</span>
To avoid having to <a href="change.txt.html#put" class="d">put</a> quotes around every key the <a href="vimeval.txt.html#%23%7B%7D" class="d">#{}</a> form can be used.  This
does require the key to consist only of ASCII letters, digits, '-' and '_'.
Example: 
<span class="e">	:let mydict = #{zero: 0, one_key: 1, two-key: 2, 333: 3}</span>
<span class="n">Note</span> that 333 here <a href="motion.txt.html#is" class="d">is</a> the <a href="vimeval.txt.html#string" class="d">string</a> "333"<a href="repeat.txt.html#." class="d">.</a>  Empty keys are not possible with #{}.

<a href="insert.txt.html#A" class="d">A</a> value can be any expression.  Using <a href="insert.txt.html#a" class="d">a</a> <a href="vimeval.txt.html#Dictionary" class="d">Dictionary</a> <a href="luaref.txt.html#for" class="d">for</a> <a href="insert.txt.html#a" class="d">a</a> value creates <a href="insert.txt.html#a" class="d">a</a>
nested Dictionary: 
<span class="e">	:let nestdict = {1: {11: 'a', 12: 'b'}, 2: {21: 'c'}}</span>
<span class="e"></span>
An extra comma after the last entry <a href="motion.txt.html#is" class="d">is</a> ignored.


<span class="h">Accessing entries </span>

The normal way to access an entry <a href="motion.txt.html#is" class="d">is</a> by putting the key in square brackets: 
<span class="e">	:let val = mydict["one"]</span>
<span class="e">	:let mydict["four"] = 4</span>
<span class="e"></span>
You can add new entries to an existing <a href="vimeval.txt.html#Dictionary" class="d">Dictionary</a> this way, unlike Lists.

For keys that consist entirely of letters, digits and underscore the following
form can be used <a href="vimeval.txt.html#expr-entry" class="l">expr-entry</a><a href="cmdline.txt.html#%3A" class="d">:</a> 
<span class="e">	:let val = mydict.one</span>
<span class="e">	:let mydict.four = 4</span>
<span class="e"></span>
Since an entry can be any type, also <a href="insert.txt.html#a" class="d">a</a> <a href="vimeval.txt.html#List" class="d">List</a> and <a href="insert.txt.html#a" class="d">a</a> Dictionary, the indexing and
key lookup can be repeated: 
<span class="e">	:echo dict.key[idx].key</span>
<span class="e"></span>
<span class="e"></span>
<span class="h">Dictionary to List conversion </span>

You may want to loop over the entries in <a href="insert.txt.html#a" class="d">a</a> dictionary.  For this you need to
turn the <a href="vimeval.txt.html#Dictionary" class="d">Dictionary</a> into <a href="insert.txt.html#a" class="d">a</a> <a href="vimeval.txt.html#List" class="d">List</a> and pass <a href="motion.txt.html#it" class="d">it</a> to <a href="vimeval.txt.html#%3Afor" class="l">:for</a><a href="repeat.txt.html#." class="d">.</a>

Most often you want to loop over the keys, using the <a href="vimfn.txt.html#keys%28%29" class="l">keys()</a> function: 
<span class="e">	:for key in keys(mydict)</span>
<span class="e">	:   echo key .. ': ' .. mydict[key]</span>
<span class="e">	:endfor</span>
<span class="e"></span>
The <a href="vimeval.txt.html#List" class="d">List</a> of keys <a href="motion.txt.html#is" class="d">is</a> unsorted.  You may want to sort them first: 
<span class="e">	:for key in sort(keys(mydict))</span>
<span class="e"></span>
To loop over the values use the <a href="vimfn.txt.html#values%28%29" class="l">values()</a> function:  
<span class="e">	:for v in values(mydict)</span>
<span class="e">	:   echo "value: " .. v</span>
<span class="e">	:endfor</span>
<span class="e"></span>
If you want both the key and the value use the <a href="vimfn.txt.html#items%28%29" class="l">items()</a> function.  It returns
<a href="insert.txt.html#a" class="d">a</a> <a href="vimeval.txt.html#List" class="d">List</a> in which each item <a href="motion.txt.html#is" class="d">is</a> <a href="insert.txt.html#a" class="d">a</a> <a href="vimeval.txt.html#List" class="d">List</a> with two items, the key and the value: 
<span class="e">	:for [key, value] in items(mydict)</span>
<span class="e">	:   echo key .. ': ' .. value</span>
<span class="e">	:endfor</span>
<span class="e"></span>
<span class="e"></span>
<span class="h">Dictionary identity </span>
							<span id="dict-identity" class="t">dict-identity</span>
Just like <a href="vimeval.txt.html#Lists" class="d">Lists</a> you need to use <a href="vimfn.txt.html#copy%28%29" class="l">copy()</a> and <a href="vimfn.txt.html#deepcopy%28%29" class="l">deepcopy()</a> to make <a href="insert.txt.html#a" class="d">a</a> copy of <a href="insert.txt.html#a" class="d">a</a>
Dictionary.  Otherwise, assignment results in referring to the same
Dictionary: 
<span class="e">	:let onedict = {'a': 1, 'b': 2}</span>
<span class="e">	:let adict = onedict</span>
<span class="e">	:let adict['a'] = 11</span>
<span class="e">	:echo onedict['a']</span>
<span class="e">	11</span>
<span class="e"></span>
Two <a href="vimeval.txt.html#Dictionaries" class="d">Dictionaries</a> compare equal if all the key-value pairs compare equal.  For
more info see <a href="vimeval.txt.html#list-identity" class="l">list-identity</a><a href="repeat.txt.html#." class="d">.</a>


<span class="h">Dictionary modification </span>
							<span id="dict-modification" class="t">dict-modification</span>
To change an already existing entry of <a href="insert.txt.html#a" class="d">a</a> Dictionary, or to add <a href="insert.txt.html#a" class="d">a</a> new entry,
use <a href="vimeval.txt.html#%3Alet" class="l">:let</a> this way: 
<span class="e">	:let dict[4] = "four"</span>
<span class="e">	:let dict['one'] = item</span>
<span class="e"></span>
Removing an entry from <a href="insert.txt.html#a" class="d">a</a> <a href="vimeval.txt.html#Dictionary" class="d">Dictionary</a> <a href="motion.txt.html#is" class="d">is</a> done with <a href="vimfn.txt.html#remove%28%29" class="l">remove()</a> or <a href="vimeval.txt.html#%3Aunlet" class="l">:unlet</a><a href="repeat.txt.html#." class="d">.</a>
Three ways to remove the entry with key "aaa" from dict: 
<span class="e">	:let i = remove(dict, 'aaa')</span>
<span class="e">	:unlet dict.aaa</span>
<span class="e">	:unlet dict['aaa']</span>
<span class="e"></span>
Merging <a href="insert.txt.html#a" class="d">a</a> <a href="vimeval.txt.html#Dictionary" class="d">Dictionary</a> with another <a href="motion.txt.html#is" class="d">is</a> done with <a href="vimfn.txt.html#extend%28%29" class="l">extend()</a><a href="cmdline.txt.html#%3A" class="d">:</a> 
<span class="e">	:call extend(adict, bdict)</span>
This extends adict with all entries from bdict.  Duplicate keys cause entries
in adict to be overwritten.  An optional third argument can change this.
<span class="n">Note</span> that the order of entries in <a href="insert.txt.html#a" class="d">a</a> <a href="vimeval.txt.html#Dictionary" class="d">Dictionary</a> <a href="motion.txt.html#is" class="d">is</a> irrelevant, thus don't
expect "<a href="vimeval.txt.html#%3Aecho" class="d">:echo</a> adict" to show the items from bdict after the older entries in
adict.

Weeding out entries from <a href="insert.txt.html#a" class="d">a</a> <a href="vimeval.txt.html#Dictionary" class="d">Dictionary</a> can be done with <a href="vimfn.txt.html#filter%28%29" class="l">filter()</a><a href="cmdline.txt.html#%3A" class="d">:</a> 
<span class="e">	:call filter(dict, 'v:val =~ "x"')</span>
This removes all entries from "<a href="vimeval.txt.html#dict" class="d">dict</a>" with <a href="insert.txt.html#a" class="d">a</a> value not matching 'x'.
This can also be used to remove all entries: 
<span class="e">	call filter(dict, 0)</span>
<span class="e"></span>
<span class="e"></span>
<span class="h">Dictionary function </span>
				<span id="Dictionary-function" class="t">Dictionary-function</span> <span id="self" class="t">self</span> <span id="E725" class="t">E725</span> <span id="E862" class="t">E862</span>
When <a href="insert.txt.html#a" class="d">a</a> function <a href="motion.txt.html#is" class="d">is</a> defined with the "<a href="vimeval.txt.html#dict" class="d">dict</a>" attribute <a href="motion.txt.html#it" class="d">it</a> can be used in <a href="insert.txt.html#a" class="d">a</a>
special way with <a href="insert.txt.html#a" class="d">a</a> dictionary.  Example: 
<span class="e">	:function Mylen() dict</span>
<span class="e">	:   return len(self.data)</span>
<span class="e">	:endfunction</span>
<span class="e">	:let mydict = {'data': [0, 1, 2, 3], 'len': function("Mylen")}</span>
<span class="e">	:echo mydict.len()</span>
<span class="e"></span>
This <a href="motion.txt.html#is" class="d">is</a> like <a href="insert.txt.html#a" class="d">a</a> <a href="vimeval.txt.html#method" class="d">method</a> in object oriented programming.  The entry in the
<a href="vimeval.txt.html#Dictionary" class="d">Dictionary</a> <a href="motion.txt.html#is" class="d">is</a> <a href="insert.txt.html#a" class="d">a</a> <a href="vimeval.txt.html#Funcref" class="l">Funcref</a><a href="repeat.txt.html#." class="d">.</a>  The local variable "<a href="vimeval.txt.html#self" class="d">self</a>" refers to the dictionary
the function was invoked from.

It <a href="motion.txt.html#is" class="d">is</a> also possible to add <a href="insert.txt.html#a" class="d">a</a> function without the "<a href="vimeval.txt.html#dict" class="d">dict</a>" attribute <a href="motion.txt.html#as" class="d">as</a> <a href="insert.txt.html#a" class="d">a</a>
<a href="vimeval.txt.html#Funcref" class="d">Funcref</a> to <a href="insert.txt.html#a" class="d">a</a> Dictionary, but the "<a href="vimeval.txt.html#self" class="d">self</a>" variable <a href="motion.txt.html#is" class="d">is</a> not available then.

				<span id="numbered-function" class="t">numbered-function</span> <span id="anonymous-function" class="t">anonymous-function</span>
To avoid the extra name <a href="luaref.txt.html#for" class="d">for</a> the function <a href="motion.txt.html#it" class="d">it</a> can be defined and directly
assigned to <a href="insert.txt.html#a" class="d">a</a> <a href="vimeval.txt.html#Dictionary" class="d">Dictionary</a> in this way: 
<span class="e">	:let mydict = {'data': [0, 1, 2, 3]}</span>
<span class="e">	:function mydict.len()</span>
<span class="e">	:   return len(self.data)</span>
<span class="e">	:endfunction</span>
<span class="e">	:echo mydict.len()</span>
<span class="e"></span>
The function will then get <a href="insert.txt.html#a" class="d">a</a> number and the value of dict.len <a href="motion.txt.html#is" class="d">is</a> <a href="insert.txt.html#a" class="d">a</a> <a href="vimeval.txt.html#Funcref" class="l">Funcref</a>
that references this function.  The function can only be used through <a href="insert.txt.html#a" class="d">a</a>
<a href="vimeval.txt.html#Funcref" class="l">Funcref</a><a href="repeat.txt.html#." class="d">.</a>  It will automatically be deleted when there <a href="motion.txt.html#is" class="d">is</a> no <a href="vimeval.txt.html#Funcref" class="l">Funcref</a>
remaining that refers to it.

It <a href="motion.txt.html#is" class="d">is</a> not necessary to use the "<a href="vimeval.txt.html#dict" class="d">dict</a>" attribute <a href="luaref.txt.html#for" class="d">for</a> <a href="insert.txt.html#a" class="d">a</a> numbered function.

If you get an error <a href="luaref.txt.html#for" class="d">for</a> <a href="insert.txt.html#a" class="d">a</a> numbered function, you can find out what <a href="motion.txt.html#it" class="d">it</a> <a href="motion.txt.html#is" class="d">is</a> with
<a href="insert.txt.html#a" class="d">a</a> trick.  Assuming the function <a href="motion.txt.html#is" class="d">is</a> 42, the command is: 
<span class="e">	:function g:42</span>
<span class="e"></span>
<span class="e"></span>
<span class="h">Functions for Dictionaries </span>
							<span id="E715" class="t">E715</span>
Functions that can be used with <a href="insert.txt.html#a" class="d">a</a> Dictionary: 
<span class="e">	:if has_key(dict, 'foo')	" TRUE if dict has entry with key "foo"</span>
<span class="e">	:if empty(dict)			" TRUE if dict is empty</span>
<span class="e">	:let l = len(dict)		" number of items in dict</span>
<span class="e">	:let big = max(dict)		" maximum value in dict</span>
<span class="e">	:let small = min(dict)		" minimum value in dict</span>
<span class="e">	:let xs = count(dict, 'x')	" count nr of times 'x' appears in dict</span>
<span class="e">	:let s = string(dict)		" String representation of dict</span>
<span class="e">	:call map(dict, '"&gt;&gt; " .. v:val')  " prepend "&gt;&gt; " to each item</span>
<span class="e"></span>
<span class="e"></span>
<span class="h">1.5 Blobs </span>
						<span id="blob" class="t">blob</span> <span id="Blob" class="t">Blob</span> <span id="Blobs" class="t">Blobs</span> <span id="E978" class="t">E978</span>
<a href="insert.txt.html#A" class="d">A</a> <a href="vimeval.txt.html#Blob" class="d">Blob</a> <a href="motion.txt.html#is" class="d">is</a> <a href="insert.txt.html#a" class="d">a</a> binary object.  It can be used to read an image from <a href="insert.txt.html#a" class="d">a</a> file and
send <a href="motion.txt.html#it" class="d">it</a> over <a href="insert.txt.html#a" class="d">a</a> channel, <a href="luaref.txt.html#for" class="d">for</a> example.

<a href="insert.txt.html#A" class="d">A</a> <a href="vimeval.txt.html#Blob" class="d">Blob</a> mostly behaves like <a href="insert.txt.html#a" class="d">a</a> <a href="vimeval.txt.html#List" class="l">List</a> of numbers, where each number has the
value of an 8-bit byte, from <a href="motion.txt.html#0" class="d">0</a> to 255.


<span class="h">Blob creation </span>

<a href="insert.txt.html#A" class="d">A</a> <a href="vimeval.txt.html#Blob" class="d">Blob</a> can be created with <a href="insert.txt.html#a" class="d">a</a> <a href="vimeval.txt.html#blob-literal" class="l">blob-literal</a><a href="cmdline.txt.html#%3A" class="d">:</a> 
<span class="e">	:let b = 0zFF00ED015DAF</span>
Dots can be inserted between bytes (pair of hex characters) <a href="luaref.txt.html#for" class="d">for</a> readability,
they don't change the value: 
<span class="e">	:let b = 0zFF00.ED01.5DAF</span>
<span class="e"></span>
<a href="insert.txt.html#A" class="d">A</a> <a href="vimeval.txt.html#blob" class="d">blob</a> can be read from <a href="insert.txt.html#a" class="d">a</a> file with <a href="vimfn.txt.html#readfile%28%29" class="l">readfile()</a> passing the <span class="s">{type}</span> argument
set to "<a href="motion.txt.html#B" class="d">B</a>"<a href="motion.txt.html#%2C" class="d">,</a> <a href="luaref.txt.html#for" class="d">for</a> example: 
<span class="e">	:let b = readfile('image.png', 'B')</span>
<span class="e"></span>
<span class="e"></span>
<span class="h">Blob index </span>
							<span id="blob-index" class="t">blob-index</span> <span id="E979" class="t">E979</span>
<a href="insert.txt.html#A" class="d">A</a> byte in the <a href="vimeval.txt.html#Blob" class="d">Blob</a> can be accessed by putting the <a href="index.txt.html#index" class="d">index</a> in square brackets
after the Blob.  Indexes are zero-based, thus the first byte has <a href="index.txt.html#index" class="d">index</a> zero. 
<span class="e">	:let myblob = 0z00112233</span>
<span class="e">	:let byte = myblob[0]		" get the first byte: 0x00</span>
<span class="e">	:let byte = myblob[2]		" get the third byte: 0x22</span>
<span class="e"></span>
<a href="insert.txt.html#A" class="d">A</a> negative <a href="index.txt.html#index" class="d">index</a> <a href="motion.txt.html#is" class="d">is</a> counted from the end.  Index -1 refers to the last byte in
the Blob, -2 to the last but one byte, etc. 
<span class="e">	:let last = myblob[-1]		" get the last byte: 0x33</span>
<span class="e"></span>
To avoid an error <a href="luaref.txt.html#for" class="d">for</a> an invalid <a href="index.txt.html#index" class="d">index</a> use the <a href="vimfn.txt.html#get%28%29" class="l">get()</a> function.  When an item
<a href="motion.txt.html#is" class="d">is</a> not available <a href="motion.txt.html#it" class="d">it</a> returns -1 or the default value you specify: 
<span class="e">	:echo get(myblob, idx)</span>
<span class="e">	:echo get(myblob, idx, 999)</span>
<span class="e"></span>
<span class="e"></span>
<span class="h">Blob iteration </span>

The <a href="vimeval.txt.html#%3Afor" class="l">:for</a> loop executes commands <a href="luaref.txt.html#for" class="d">for</a> each byte of <a href="insert.txt.html#a" class="d">a</a> Blob.  The loop variable <a href="motion.txt.html#is" class="d">is</a>
set to each byte in the Blob.  Example: 
<span class="e">	:for byte in 0z112233</span>
<span class="e">	:   call Doit(byte)</span>
<span class="e">	:endfor</span>
This calls Doit() with 0x11, 0x22 and 0x33.


<span class="h">Blob concatenation </span>
							<span id="blob-concatenation" class="t">blob-concatenation</span>
Two blobs can be concatenated with the "<a href="motion.txt.html#%2B" class="d">+</a>" operator: 
<span class="e">	:let longblob = myblob + 0z4455</span>
<span class="e">	:let longblob = 0z4455 + myblob</span>

<a href="insert.txt.html#A" class="d">A</a> <a href="vimeval.txt.html#blob" class="d">blob</a> can be concatenated with another one in-place using <a href="vimeval.txt.html#%3Alet%2B%3D" class="l">:let+=</a><a href="cmdline.txt.html#%3A" class="d">:</a> 
<span class="e">	:let myblob += 0z6677</span>

See <a href="vimeval.txt.html#blob-modification" class="l">blob-modification</a> below <a href="luaref.txt.html#for" class="d">for</a> more about <a href="change.txt.html#changing" class="d">changing</a> <a href="insert.txt.html#a" class="d">a</a> <a href="vimeval.txt.html#blob" class="d">blob</a> in-place.


<span class="h">Part of a blob </span>

<a href="insert.txt.html#A" class="d">A</a> part of the <a href="vimeval.txt.html#Blob" class="d">Blob</a> can be obtained by specifying the first and last index,
separated by <a href="insert.txt.html#a" class="d">a</a> colon in square brackets: 
<span class="e">	:let myblob = 0z00112233</span>
<span class="e">	:let shortblob = myblob[1:2]	" get 0z1122</span>
<span class="e">	:let shortblob = myblob[2:-1]	" get 0z2233</span>
<span class="e"></span>
Omitting the first <a href="index.txt.html#index" class="d">index</a> <a href="motion.txt.html#is" class="d">is</a> similar to zero.  Omitting the last <a href="index.txt.html#index" class="d">index</a> <a href="motion.txt.html#is" class="d">is</a>
similar to -1. 
<span class="e">	:let endblob = myblob[2:]	" from item 2 to the end: 0z2233</span>
<span class="e">	:let shortblob = myblob[2:2]	" Blob with one byte: 0z22</span>
<span class="e">	:let otherblob = myblob[:]	" make a copy of the Blob</span>
<span class="e"></span>
If the first <a href="index.txt.html#index" class="d">index</a> <a href="motion.txt.html#is" class="d">is</a> beyond the last byte of the <a href="vimeval.txt.html#Blob" class="d">Blob</a> or the second <a href="index.txt.html#index" class="d">index</a> <a href="motion.txt.html#is" class="d">is</a>
before the first index, the result <a href="motion.txt.html#is" class="d">is</a> an empty Blob.  There <a href="motion.txt.html#is" class="d">is</a> no error
message.

If the second <a href="index.txt.html#index" class="d">index</a> <a href="motion.txt.html#is" class="d">is</a> equal to or greater than the length of the <a href="vimeval.txt.html#Blob" class="d">Blob</a> the
length minus one <a href="motion.txt.html#is" class="d">is</a> used: 
<span class="e">	:echo myblob[2:8]		" result: 0z2233</span>
<span class="e"></span>
<span class="e"></span>
<span class="h">Blob modification </span>
							<span id="blob-modification" class="t">blob-modification</span>
To change <a href="insert.txt.html#a" class="d">a</a> specific byte of <a href="insert.txt.html#a" class="d">a</a> <a href="vimeval.txt.html#blob" class="d">blob</a> use <a href="vimeval.txt.html#%3Alet" class="l">:let</a> this way: 
<span class="e">	:let blob[4] = 0x44</span>
<span class="e"></span>
When the <a href="index.txt.html#index" class="d">index</a> <a href="motion.txt.html#is" class="d">is</a> just one beyond the <a href="intro.txt.html#end" class="d">end</a> of the Blob, <a href="motion.txt.html#it" class="d">it</a> <a href="motion.txt.html#is" class="d">is</a> appended. Any
higher <a href="index.txt.html#index" class="d">index</a> <a href="motion.txt.html#is" class="d">is</a> an error.

To change <a href="insert.txt.html#a" class="d">a</a> sequence of bytes the [:] <a href="intro.txt.html#notation" class="d">notation</a> can be used: 
<span class="e">	let blob[1:3] = 0z445566</span>
The length of the replaced bytes must be exactly the same <a href="motion.txt.html#as" class="d">as</a> the value
provided. <span id="E972" class="t">E972</span>

To change part of <a href="insert.txt.html#a" class="d">a</a> <a href="vimeval.txt.html#blob" class="d">blob</a> you can specify the first and last byte to be
modified.  The value must have the same number of bytes in the range: 
<span class="e">	:let blob[3:5] = 0z334455</span>
<span class="e"></span>
To add items to <a href="insert.txt.html#a" class="d">a</a> <a href="vimeval.txt.html#Blob" class="d">Blob</a> in-place, you can use <a href="vimeval.txt.html#%3Alet%2B%3D" class="l">:let+=</a> <a href="motion.txt.html#%28" class="d">(</a><a href="vimeval.txt.html#blob-concatenation" class="l">blob-concatenation</a>): 
<span class="e">	:let blobA = 0z1122</span>
<span class="e">	:let blobA += 0z3344</span>

When two <a href="vimeval.txt.html#variables" class="d">variables</a> refer to the same Blob, <a href="change.txt.html#changing" class="d">changing</a> one <a href="vimeval.txt.html#Blob" class="d">Blob</a> in-place will
cause the referenced <a href="vimeval.txt.html#Blob" class="d">Blob</a> to be changed in-place: 
<span class="e">	:let blobA = 0z1122</span>
<span class="e">	:let blobB = blobA</span>
<span class="e">	:let blobB += 0z3344</span>
<span class="e">	:echo blobA</span>
<span class="e">	0z11223344</span>

You can also use the <a href="vimeval.txt.html#functions" class="d">functions</a> <a href="vimfn.txt.html#add%28%29" class="l">add()</a><a href="motion.txt.html#%2C" class="d">,</a> <a href="vimfn.txt.html#remove%28%29" class="l">remove()</a> and <a href="vimfn.txt.html#insert%28%29" class="l">insert()</a><a href="repeat.txt.html#." class="d">.</a>


<span class="h">Blob identity </span>

<a href="vimeval.txt.html#Blobs" class="d">Blobs</a> can be compared <a href="luaref.txt.html#for" class="d">for</a> equality: 
<span class="e">	if blob == 0z001122</span>
And <a href="luaref.txt.html#for" class="d">for</a> equal identity: 
<span class="e">	if blob is otherblob</span>
							<span id="blob-identity" class="t">blob-identity</span> <span id="E977" class="t">E977</span>
When variable "aa" <a href="motion.txt.html#is" class="d">is</a> <a href="insert.txt.html#a" class="d">a</a> <a href="vimeval.txt.html#Blob" class="d">Blob</a> and you assign <a href="motion.txt.html#it" class="d">it</a> to another variable "bb"<a href="motion.txt.html#%2C" class="d">,</a> both
<a href="vimeval.txt.html#variables" class="d">variables</a> refer to the same Blob.  Then the "<a href="motion.txt.html#is" class="d">is</a>" <a href="motion.txt.html#operator" class="d">operator</a> returns true.

When making <a href="insert.txt.html#a" class="d">a</a> copy using [:] or <a href="vimfn.txt.html#copy%28%29" class="l">copy()</a> the values are the same, but the
identity <a href="motion.txt.html#is" class="d">is</a> different: 
<span class="e">	:let blob = 0z112233</span>
<span class="e">	:let blob2 = blob</span>
<span class="e">	:echo blob == blob2</span>
	1 
<span class="e">	:echo blob is blob2</span>
	1 
<span class="e">	:let blob3 = blob[:]</span>
<span class="e">	:echo blob == blob3</span>
	1 
<span class="e">	:echo blob is blob3</span>
	<a href="motion.txt.html#0" class="d">0</a>

Making <a href="insert.txt.html#a" class="d">a</a> copy of <a href="insert.txt.html#a" class="d">a</a> <a href="vimeval.txt.html#Blob" class="d">Blob</a> <a href="motion.txt.html#is" class="d">is</a> done with the <a href="vimfn.txt.html#copy%28%29" class="l">copy()</a> function.  Using [:] also
works, <a href="motion.txt.html#as" class="d">as</a> explained above.


<span class="h">1.6 More about variables </span>
							<span id="more-variables" class="t">more-variables</span>
If you need to know the type of <a href="insert.txt.html#a" class="d">a</a> variable or expression, use the <a href="vimfn.txt.html#type%28%29" class="l">type()</a>
function.

When the '!' flag <a href="motion.txt.html#is" class="d">is</a> included in the <a href="options.txt.html#%27shada%27" class="o">'shada'</a> option, global <a href="vimeval.txt.html#variables" class="d">variables</a> that
start with an <a href="change.txt.html#uppercase" class="d">uppercase</a> letter, and don't contain <a href="insert.txt.html#a" class="d">a</a> <a href="change.txt.html#lowercase" class="d">lowercase</a> letter, are
stored in the <a href="starting.txt.html#shada" class="d">shada</a> file <a href="starting.txt.html#shada-file" class="l">shada-file</a><a href="repeat.txt.html#." class="d">.</a>

When the <a href="options.txt.html#%27sessionoptions%27" class="o">'sessionoptions'</a> option contains "global"<a href="motion.txt.html#%2C" class="d">,</a> global <a href="vimeval.txt.html#variables" class="d">variables</a> that
start with an <a href="change.txt.html#uppercase" class="d">uppercase</a> letter and contain <a href="motion.txt.html#at" class="d">at</a> least one <a href="change.txt.html#lowercase" class="d">lowercase</a> letter are
stored in the session file <a href="starting.txt.html#session-file" class="l">session-file</a><a href="repeat.txt.html#." class="d">.</a>

<span class="h">variable name		can be stored where </span>
my_var_6		not
My_Var_6		session file
MY_VAR_6		<a href="starting.txt.html#shada" class="d">shada</a> file


It's possible to form <a href="insert.txt.html#a" class="d">a</a> variable name with curly braces, see
<a href="vimeval.txt.html#curly-braces-names" class="l">curly-braces-names</a><a href="repeat.txt.html#." class="d">.</a>

<span class="h">==============================================================================</span>
2. Expression <a href="syntax.txt.html#syntax" class="d">syntax</a>					<span id="expression-syntax" class="t">expression-syntax</span>

Expression <a href="syntax.txt.html#syntax" class="d">syntax</a> summary, from least to most significant:

<a href="vimeval.txt.html#expr1" class="l">expr1</a>  	<a href="vimeval.txt.html#expr2" class="d">expr2</a>
	<a href="vimeval.txt.html#expr2" class="d">expr2</a> <a href="pattern.txt.html#%3F" class="d">?</a> <a href="vimeval.txt.html#expr1" class="d">expr1</a> <a href="cmdline.txt.html#%3A" class="d">:</a> <a href="vimeval.txt.html#expr1" class="d">expr1</a>	if-then-else

<a href="vimeval.txt.html#expr2" class="l">expr2</a>  	<a href="vimeval.txt.html#expr3" class="d">expr3</a>
	<a href="vimeval.txt.html#expr3" class="d">expr3</a> || <a href="vimeval.txt.html#expr3" class="d">expr3</a> <a href="userfunc.txt.html#..." class="d">...</a>	logical OR

<a href="vimeval.txt.html#expr3" class="l">expr3</a>  	<a href="vimeval.txt.html#expr4" class="d">expr4</a>
	<a href="vimeval.txt.html#expr4" class="d">expr4</a> &amp;&amp; <a href="vimeval.txt.html#expr4" class="d">expr4</a> <a href="userfunc.txt.html#..." class="d">...</a>	logical AND

<a href="vimeval.txt.html#expr4" class="l">expr4</a>  	<a href="vimeval.txt.html#expr5" class="d">expr5</a>
	<a href="vimeval.txt.html#expr5" class="d">expr5</a> <a href="change.txt.html#%3D%3D" class="d">==</a> <a href="vimeval.txt.html#expr5" class="d">expr5</a>		equal
	<a href="vimeval.txt.html#expr5" class="d">expr5</a> != <a href="vimeval.txt.html#expr5" class="d">expr5</a>		not equal
	<a href="vimeval.txt.html#expr5" class="d">expr5</a> <a href="change.txt.html#%3E" class="d">&gt;</a>	 <a href="vimeval.txt.html#expr5" class="d">expr5</a>		greater than
	<a href="vimeval.txt.html#expr5" class="d">expr5</a> &gt;= <a href="vimeval.txt.html#expr5" class="d">expr5</a>		greater than or equal
	<a href="vimeval.txt.html#expr5" class="d">expr5</a> <a href="change.txt.html#%3C" class="d">&lt;</a>	 <a href="vimeval.txt.html#expr5" class="d">expr5</a>		smaller than
	<a href="vimeval.txt.html#expr5" class="d">expr5</a> &lt;= <a href="vimeval.txt.html#expr5" class="d">expr5</a>		smaller than or equal
	<a href="vimeval.txt.html#expr5" class="d">expr5</a> =~ <a href="vimeval.txt.html#expr5" class="d">expr5</a>		<a href="pattern.txt.html#regexp" class="d">regexp</a> matches
	<a href="vimeval.txt.html#expr5" class="d">expr5</a> !~ <a href="vimeval.txt.html#expr5" class="d">expr5</a>		<a href="pattern.txt.html#regexp" class="d">regexp</a> doesn't match

	<a href="vimeval.txt.html#expr5" class="d">expr5</a> ==? <a href="vimeval.txt.html#expr5" class="d">expr5</a>		equal, ignoring <a href="change.txt.html#case" class="d">case</a>
	<a href="vimeval.txt.html#expr5" class="d">expr5</a> ==# <a href="vimeval.txt.html#expr5" class="d">expr5</a>		equal, match <a href="change.txt.html#case" class="d">case</a>
	etc.			As above, append <a href="pattern.txt.html#%3F" class="d">?</a> <a href="luaref.txt.html#for" class="d">for</a> ignoring case, <a href="pattern.txt.html#%23" class="d">#</a> <a href="luaref.txt.html#for" class="d">for</a>
				matching <a href="change.txt.html#case" class="d">case</a>

	<a href="vimeval.txt.html#expr5" class="d">expr5</a> <a href="motion.txt.html#is" class="d">is</a> <a href="vimeval.txt.html#expr5" class="d">expr5</a>		same <a href="vimeval.txt.html#List" class="l">List</a><a href="motion.txt.html#%2C" class="d">,</a> <a href="vimeval.txt.html#Dictionary" class="l">Dictionary</a> or <a href="vimeval.txt.html#Blob" class="l">Blob</a> instance
	<a href="vimeval.txt.html#expr5" class="d">expr5</a> isnot <a href="vimeval.txt.html#expr5" class="d">expr5</a>	different <a href="vimeval.txt.html#List" class="l">List</a><a href="motion.txt.html#%2C" class="d">,</a> <a href="vimeval.txt.html#Dictionary" class="l">Dictionary</a> or <a href="vimeval.txt.html#Blob" class="l">Blob</a>
				instance

<a href="vimeval.txt.html#expr5" class="l">expr5</a>  	<a href="vimeval.txt.html#expr6" class="d">expr6</a>
	<a href="vimeval.txt.html#expr6" class="d">expr6</a> <a href="motion.txt.html#%2B" class="d">+</a>	 <a href="vimeval.txt.html#expr6" class="d">expr6</a> <a href="userfunc.txt.html#..." class="d">...</a>	number addition, <a href="vimeval.txt.html#list" class="d">list</a> or <a href="vimeval.txt.html#blob" class="d">blob</a> concatenation
	<a href="vimeval.txt.html#expr6" class="d">expr6</a> <a href="motion.txt.html#-" class="d">-</a>	 <a href="vimeval.txt.html#expr6" class="d">expr6</a> <a href="userfunc.txt.html#..." class="d">...</a>	number subtraction
	<a href="vimeval.txt.html#expr6" class="d">expr6</a> <a href="repeat.txt.html#." class="d">.</a>	 <a href="vimeval.txt.html#expr6" class="d">expr6</a> <a href="userfunc.txt.html#..." class="d">...</a>	<a href="vimeval.txt.html#string" class="d">string</a> concatenation
	<a href="vimeval.txt.html#expr6" class="d">expr6</a> .. <a href="vimeval.txt.html#expr6" class="d">expr6</a> <a href="userfunc.txt.html#..." class="d">...</a>	<a href="vimeval.txt.html#string" class="d">string</a> concatenation

<a href="vimeval.txt.html#expr6" class="l">expr6</a>  	<a href="vimeval.txt.html#expr7" class="d">expr7</a>
	<a href="vimeval.txt.html#expr7" class="d">expr7</a> *	 <a href="vimeval.txt.html#expr7" class="d">expr7</a> <a href="userfunc.txt.html#..." class="d">...</a>	number multiplication
	<a href="vimeval.txt.html#expr7" class="d">expr7</a> <a href="pattern.txt.html#%2F" class="d">/</a>	 <a href="vimeval.txt.html#expr7" class="d">expr7</a> <a href="userfunc.txt.html#..." class="d">...</a>	number division
	<a href="vimeval.txt.html#expr7" class="d">expr7</a> <a href="motion.txt.html#%25" class="d">%</a>	 <a href="vimeval.txt.html#expr7" class="d">expr7</a> <a href="userfunc.txt.html#..." class="d">...</a>	number modulo

<a href="vimeval.txt.html#expr7" class="l">expr7</a>  	<a href="vimeval.txt.html#expr8" class="d">expr8</a>
	<a href="change.txt.html#%21" class="d">!</a> <a href="vimeval.txt.html#expr7" class="d">expr7</a>			logical NOT
	<a href="motion.txt.html#-" class="d">-</a> <a href="vimeval.txt.html#expr7" class="d">expr7</a>			unary minus
	<a href="motion.txt.html#%2B" class="d">+</a> <a href="vimeval.txt.html#expr7" class="d">expr7</a>			unary plus

<a href="vimeval.txt.html#expr8" class="l">expr8</a>  	<a href="vimeval.txt.html#expr9" class="d">expr9</a>
	expr8[expr1]		byte of <a href="insert.txt.html#a" class="d">a</a> <a href="vimeval.txt.html#String" class="d">String</a> or item of <a href="insert.txt.html#a" class="d">a</a> <a href="vimeval.txt.html#List" class="l">List</a>
	expr8[expr1 <a href="cmdline.txt.html#%3A" class="d">:</a> expr1]	<a href="vimeval.txt.html#substring" class="d">substring</a> of <a href="insert.txt.html#a" class="d">a</a> <a href="vimeval.txt.html#String" class="d">String</a> or <a href="vimeval.txt.html#sublist" class="d">sublist</a> of <a href="insert.txt.html#a" class="d">a</a> <a href="vimeval.txt.html#List" class="l">List</a>
	expr8.name		entry in <a href="insert.txt.html#a" class="d">a</a> <a href="vimeval.txt.html#Dictionary" class="l">Dictionary</a>
	expr8(expr1, ...)	function call with <a href="vimeval.txt.html#Funcref" class="l">Funcref</a> variable
	expr8-&gt;name(expr1, ...)	<a href="vimeval.txt.html#method" class="l">method</a> call

<a href="vimeval.txt.html#expr9" class="l">expr9</a>  	number			number constant
	"<a href="vimeval.txt.html#string" class="d">string</a>"		<a href="vimeval.txt.html#string" class="d">string</a> constant, <a href="intro.txt.html#backslash" class="d">backslash</a> <a href="motion.txt.html#is" class="d">is</a> special
	<span class="e">'string'</span>  		<a href="vimeval.txt.html#string" class="d">string</a> constant, <a href="motion.txt.html#%27" class="d">'</a> <a href="motion.txt.html#is" class="d">is</a> doubled
	[expr1, ...]		<a href="vimeval.txt.html#List" class="l">List</a>
	`{expr1: expr1, ...}`	<a href="vimeval.txt.html#Dictionary" class="l">Dictionary</a>
	#{key: expr1, ...}	<a href="vimeval.txt.html#Dictionary" class="l">Dictionary</a>
	&amp;option			option value
	(expr1)			nested <a href="vimeval.txt.html#expression" class="d">expression</a>
	variable		internal variable
	va{ria}ble		internal variable with curly braces
	$VAR			environment variable
	<a href="vimeval.txt.html#%40r" class="d">@r</a>			contents of <a href="intro.txt.html#register" class="d">register</a> "<a href="change.txt.html#r" class="d">r</a>"
	function(expr1, ...)	function call
	func{ti}on(expr1, ...)	function call with curly braces
	`{args <a href="vimeval.txt.html#-%3E" class="d">-&gt;</a> expr1}`	<a href="vimeval.txt.html#lambda" class="d">lambda</a> <a href="vimeval.txt.html#expression" class="d">expression</a>


"<a href="userfunc.txt.html#..." class="d">...</a>" indicates that the operations in this level can be concatenated.
Example: 
<span class="e">	&amp;nu || &amp;list &amp;&amp; &amp;shell == "csh"</span>
<span class="e"></span>
All expressions within one level are parsed from left to right.

Expression nesting <a href="motion.txt.html#is" class="d">is</a> limited to 1000 levels deep (300 when build with MSVC)
to avoid running out of stack and crashing. <span id="E1169" class="t">E1169</span>


<span class="h">------------------------------------------------------------------------------</span>
<a href="vimeval.txt.html#expr1" class="d">expr1</a>				<span id="expr1" class="t">expr1</span> <span id="ternary" class="t">ternary</span> <span id="falsy-operator" class="t">falsy-operator</span> <span id="%3F%3F" class="t">??</span> <span id="E109" class="t">E109</span>

The <a href="vimeval.txt.html#ternary" class="d">ternary</a> operator: <a href="vimeval.txt.html#expr2" class="d">expr2</a> <a href="pattern.txt.html#%3F" class="d">?</a> <a href="vimeval.txt.html#expr1" class="d">expr1</a> <a href="cmdline.txt.html#%3A" class="d">:</a> <a href="vimeval.txt.html#expr1" class="d">expr1</a>
The <a href="vimeval.txt.html#falsy" class="d">falsy</a> operator:   <a href="vimeval.txt.html#expr2" class="d">expr2</a> <a href="vimeval.txt.html#%3F%3F" class="d">??</a> <a href="vimeval.txt.html#expr1" class="d">expr1</a>

<span class="h">Ternary operator </span>

The <a href="vimeval.txt.html#expression" class="d">expression</a> before the '?' <a href="motion.txt.html#is" class="d">is</a> evaluated to <a href="insert.txt.html#a" class="d">a</a> number.  If <a href="motion.txt.html#it" class="d">it</a> evaluates to
<a href="vimeval.txt.html#TRUE" class="l">TRUE</a><a href="motion.txt.html#%2C" class="d">,</a> the result <a href="motion.txt.html#is" class="d">is</a> the value of the <a href="vimeval.txt.html#expression" class="d">expression</a> between the '?' and ':',
otherwise the result <a href="motion.txt.html#is" class="d">is</a> the value of the <a href="vimeval.txt.html#expression" class="d">expression</a> after the ':'.
Example: 
<span class="e">	:echo lnum == 1 ? "top" : lnum</span>
<span class="e"></span>
Since the first <a href="vimeval.txt.html#expression" class="d">expression</a> <a href="motion.txt.html#is" class="d">is</a> an "<a href="vimeval.txt.html#expr2" class="d">expr2</a>"<a href="motion.txt.html#%2C" class="d">,</a> <a href="motion.txt.html#it" class="d">it</a> cannot contain another ?:.  The
other two expressions can, thus allow <a href="luaref.txt.html#for" class="d">for</a> recursive use of ?:.
Example: 
<span class="e">	:echo lnum == 1 ? "top" : lnum == 1000 ? "last" : lnum</span>
<span class="e"></span>
To keep this readable, using <a href="repeat.txt.html#line-continuation" class="l">line-continuation</a> <a href="motion.txt.html#is" class="d">is</a> suggested: 
<span class="e">	:echo lnum == 1</span>
<span class="e">	:\	? "top"</span>
<span class="e">	:\	: lnum == 1000</span>
<span class="e">	:\		? "last"</span>
<span class="e">	:\		: lnum</span>
<span class="e"></span>
You should always <a href="change.txt.html#put" class="d">put</a> <a href="insert.txt.html#a" class="d">a</a> <a href="intro.txt.html#space" class="d">space</a> before the ':', otherwise <a href="motion.txt.html#it" class="d">it</a> can be mistaken <a href="luaref.txt.html#for" class="d">for</a>
use in <a href="insert.txt.html#a" class="d">a</a> variable such <a href="motion.txt.html#as" class="d">as</a> "<a href="userfunc.txt.html#a%3A1" class="d">a:1</a>"<a href="repeat.txt.html#." class="d">.</a>

<span class="h">Falsy operator </span>

This <a href="motion.txt.html#is" class="d">is</a> also known <a href="motion.txt.html#as" class="d">as</a> the "null coalescing <a href="motion.txt.html#operator" class="d">operator</a>"<a href="motion.txt.html#%2C" class="d">,</a> but that's too
complicated, thus we just call <a href="motion.txt.html#it" class="d">it</a> the <a href="vimeval.txt.html#falsy" class="d">falsy</a> operator.

The <a href="vimeval.txt.html#expression" class="d">expression</a> before the '??' <a href="motion.txt.html#is" class="d">is</a> evaluated.  If <a href="motion.txt.html#it" class="d">it</a> evaluates to
<a href="vimeval.txt.html#truthy" class="l">truthy</a><a href="motion.txt.html#%2C" class="d">,</a> this <a href="motion.txt.html#is" class="d">is</a> used <a href="motion.txt.html#as" class="d">as</a> the result.  Otherwise the <a href="vimeval.txt.html#expression" class="d">expression</a> after the '??'
<a href="motion.txt.html#is" class="d">is</a> evaluated and used <a href="motion.txt.html#as" class="d">as</a> the result.  This <a href="motion.txt.html#is" class="d">is</a> most useful to have <a href="insert.txt.html#a" class="d">a</a> default
value <a href="luaref.txt.html#for" class="d">for</a> an <a href="vimeval.txt.html#expression" class="d">expression</a> that may result in zero or empty: 
<span class="e">	echo theList ?? 'list is empty'</span>
<span class="e">	echo GetName() ?? 'unknown'</span>
<span class="e"></span>
These are similar, but not equal: 
<span class="e">	expr2 ?? expr1</span>
<span class="e">	expr2 ? expr2 : expr1</span>
In the second line "<a href="vimeval.txt.html#expr2" class="d">expr2</a>" <a href="motion.txt.html#is" class="d">is</a> evaluated twice.


<span class="h">------------------------------------------------------------------------------</span>
<a href="vimeval.txt.html#expr2" class="d">expr2</a> and <a href="vimeval.txt.html#expr3" class="d">expr3</a>						<span id="expr2" class="t">expr2</span> <span id="expr3" class="t">expr3</span>

<a href="vimeval.txt.html#expr3" class="d">expr3</a> || <a href="vimeval.txt.html#expr3" class="d">expr3</a> ..	logical OR		<span id="expr-barbar" class="t">expr-barbar</span>
<a href="vimeval.txt.html#expr4" class="d">expr4</a> &amp;&amp; <a href="vimeval.txt.html#expr4" class="d">expr4</a> ..	logical AND		<span id="expr-%26%26" class="t">expr-&amp;&amp;</span>

The "||" and "&amp;&amp;" operators take one argument on each side.  The arguments
are (converted to) Numbers.  The result is:

<span class="h">    input			 output </span>
<span class="h">n1	n2		n1 || n2	n1 &amp;&amp; n2 </span>
<a href="vimeval.txt.html#FALSE" class="l">FALSE</a>  	<a href="vimeval.txt.html#FALSE" class="l">FALSE</a>  		<a href="vimeval.txt.html#FALSE" class="l">FALSE</a>  		<a href="vimeval.txt.html#FALSE" class="l">FALSE</a>
<a href="vimeval.txt.html#FALSE" class="l">FALSE</a>  	<a href="vimeval.txt.html#TRUE" class="l">TRUE</a>  		<a href="vimeval.txt.html#TRUE" class="l">TRUE</a>  		<a href="vimeval.txt.html#FALSE" class="l">FALSE</a>
<a href="vimeval.txt.html#TRUE" class="l">TRUE</a>  	<a href="vimeval.txt.html#FALSE" class="l">FALSE</a>  		<a href="vimeval.txt.html#TRUE" class="l">TRUE</a>  		<a href="vimeval.txt.html#FALSE" class="l">FALSE</a>
<a href="vimeval.txt.html#TRUE" class="l">TRUE</a>  	<a href="vimeval.txt.html#TRUE" class="l">TRUE</a>  		<a href="vimeval.txt.html#TRUE" class="l">TRUE</a>  		<a href="vimeval.txt.html#TRUE" class="l">TRUE</a>

The operators can be concatenated, <a href="luaref.txt.html#for" class="d">for</a> example: 
<span class="e"></span>
<span class="e">	&amp;nu || &amp;list &amp;&amp; &amp;shell == "csh"</span>
<span class="e"></span>
<span class="n">Note</span> that "&amp;&amp;" takes precedence over "||"<a href="motion.txt.html#%2C" class="d">,</a> so this has the meaning of: 
<span class="e"></span>
<span class="e">	&amp;nu || (&amp;list &amp;&amp; &amp;shell == "csh")</span>
<span class="e"></span>
Once the result <a href="motion.txt.html#is" class="d">is</a> known, the <a href="vimeval.txt.html#expression" class="d">expression</a> "short-circuits"<a href="motion.txt.html#%2C" class="d">,</a> that is, further
arguments are not evaluated.  This <a href="motion.txt.html#is" class="d">is</a> like what happens in C.  For example: 
<span class="e"></span>
<span class="e">	let a = 1</span>
<span class="e">	echo a || b</span>
<span class="e"></span>
This <a href="motion.txt.html#is" class="d">is</a> valid even if there <a href="motion.txt.html#is" class="d">is</a> no variable called "<a href="motion.txt.html#b" class="d">b</a>" because "<a href="insert.txt.html#a" class="d">a</a>" <a href="motion.txt.html#is" class="d">is</a> <a href="vimeval.txt.html#TRUE" class="l">TRUE</a><a href="motion.txt.html#%2C" class="d">,</a>
so the result must be <a href="vimeval.txt.html#TRUE" class="l">TRUE</a><a href="repeat.txt.html#." class="d">.</a>  Similarly below: 
<span class="e"></span>
<span class="e">	echo exists("b") &amp;&amp; b == "yes"</span>
<span class="e"></span>
This <a href="motion.txt.html#is" class="d">is</a> valid whether "<a href="motion.txt.html#b" class="d">b</a>" has been defined or not.  The second clause will
only be evaluated if "<a href="motion.txt.html#b" class="d">b</a>" has been defined.


<span class="h">------------------------------------------------------------------------------</span>
<a href="vimeval.txt.html#expr4" class="d">expr4</a>							<span id="expr4" class="t">expr4</span>

<a href="vimeval.txt.html#expr5" class="d">expr5</a> <span class="s">{cmp}</span> <a href="vimeval.txt.html#expr5" class="d">expr5</a>

Compare two <a href="vimeval.txt.html#expr5" class="d">expr5</a> expressions, resulting in <a href="insert.txt.html#a" class="d">a</a> <a href="motion.txt.html#0" class="d">0</a> if <a href="motion.txt.html#it" class="d">it</a> evaluates to false, or 1
if <a href="motion.txt.html#it" class="d">it</a> evaluates to true.

			<span id="expr-%3D%3D" class="t">expr-==</span>  <span id="expr-%21%3D" class="t">expr-!=</span>  <span id="expr-%3E" class="t">expr-&gt;</span>      	 <span id="expr-%3E%3D" class="t">expr-&gt;=</span>
			<span id="expr-%3C" class="t">expr-&lt;</span>   <span id="expr-%3C%3D" class="t">expr-&lt;=</span>  <span id="expr-%3D~" class="t">expr-=~</span>  <span id="expr-%21~" class="t">expr-!~</span>
			<span id="expr-%3D%3D%23" class="t">expr-==#</span> <span id="expr-%21%3D%23" class="t">expr-!=#</span> <span id="expr-%3E%23" class="t">expr-&gt;#</span>  <span id="expr-%3E%3D%23" class="t">expr-&gt;=#</span>
			<span id="expr-%3C%23" class="t">expr-&lt;#</span>  <span id="expr-%3C%3D%23" class="t">expr-&lt;=#</span> <span id="expr-%3D~%23" class="t">expr-=~#</span> <span id="expr-%21~%23" class="t">expr-!~#</span>
			<span id="expr-%3D%3D%3F" class="t">expr-==?</span> <span id="expr-%21%3D%3F" class="t">expr-!=?</span> <span id="expr-%3E%3F" class="t">expr-&gt;?</span>  <span id="expr-%3E%3D%3F" class="t">expr-&gt;=?</span>
			<span id="expr-%3C%3F" class="t">expr-&lt;?</span>  <span id="expr-%3C%3D%3F" class="t">expr-&lt;=?</span> <span id="expr-%3D~%3F" class="t">expr-=~?</span> <span id="expr-%21~%3F" class="t">expr-!~?</span>
			<span id="expr-is" class="t">expr-is</span> <span id="expr-isnot" class="t">expr-isnot</span> <span id="expr-is%23" class="t">expr-is#</span> <span id="expr-isnot%23" class="t">expr-isnot#</span>
			<span id="expr-is%3F" class="t">expr-is?</span> <span id="expr-isnot%3F" class="t">expr-isnot?</span>
<span class="h">		use 'ignorecase'    match case	   ignore case </span>
equal			<a href="change.txt.html#%3D%3D" class="d">==</a>		==#		==?
not equal		!=		!=#		!=?
greater than		<a href="change.txt.html#%3E" class="d">&gt;</a>		&gt;#		&gt;?
greater than or equal	&gt;=		&gt;=#		&gt;=?
smaller than		<a href="change.txt.html#%3C" class="d">&lt;</a>		&lt;#		&lt;?
smaller than or equal	&lt;=		&lt;=#		&lt;=?
<a href="pattern.txt.html#regexp" class="d">regexp</a> matches		=~		=~#		=~?
<a href="pattern.txt.html#regexp" class="d">regexp</a> doesn't match	!~		!~#		!~?
same instance		<a href="motion.txt.html#is" class="d">is</a>		is#		is?
different instance	isnot		isnot#		isnot?

Examples:
"abc" ==# "Abc"	  evaluates to <a href="motion.txt.html#0" class="d">0</a>
"abc" ==? "Abc"	  evaluates to 1
"abc" <a href="change.txt.html#%3D%3D" class="d">==</a> "Abc"	  evaluates to 1 if <a href="options.txt.html#%27ignorecase%27" class="o">'ignorecase'</a> <a href="motion.txt.html#is" class="d">is</a> set, <a href="motion.txt.html#0" class="d">0</a> otherwise

							<span id="E691" class="t">E691</span> <span id="E692" class="t">E692</span>
<a href="insert.txt.html#A" class="d">A</a> <a href="vimeval.txt.html#List" class="l">List</a> can only be compared with <a href="insert.txt.html#a" class="d">a</a> <a href="vimeval.txt.html#List" class="l">List</a> and only "equal"<a href="motion.txt.html#%2C" class="d">,</a> "not equal"<a href="motion.txt.html#%2C" class="d">,</a>
"<a href="motion.txt.html#is" class="d">is</a>" and "isnot" can be used.  This compares the values of the list,
recursively.  Ignoring <a href="change.txt.html#case" class="d">case</a> means <a href="change.txt.html#case" class="d">case</a> <a href="motion.txt.html#is" class="d">is</a> ignored when comparing item values.

							<span id="E735" class="t">E735</span> <span id="E736" class="t">E736</span>
<a href="insert.txt.html#A" class="d">A</a> <a href="vimeval.txt.html#Dictionary" class="l">Dictionary</a> can only be compared with <a href="insert.txt.html#a" class="d">a</a> <a href="vimeval.txt.html#Dictionary" class="l">Dictionary</a> and only "equal"<a href="motion.txt.html#%2C" class="d">,</a> "not
equal"<a href="motion.txt.html#%2C" class="d">,</a> "<a href="motion.txt.html#is" class="d">is</a>" and "isnot" can be used.  This compares the key/values of the
<a href="vimeval.txt.html#Dictionary" class="l">Dictionary</a> recursively.  Ignoring <a href="change.txt.html#case" class="d">case</a> means <a href="change.txt.html#case" class="d">case</a> <a href="motion.txt.html#is" class="d">is</a> ignored when comparing
item values.

							<span id="E694" class="t">E694</span>
<a href="insert.txt.html#A" class="d">A</a> <a href="vimeval.txt.html#Funcref" class="l">Funcref</a> can only be compared with <a href="insert.txt.html#a" class="d">a</a> <a href="vimeval.txt.html#Funcref" class="l">Funcref</a> and only "equal"<a href="motion.txt.html#%2C" class="d">,</a> "not
equal"<a href="motion.txt.html#%2C" class="d">,</a> "<a href="motion.txt.html#is" class="d">is</a>" and "isnot" can be used.  Case <a href="motion.txt.html#is" class="d">is</a> never ignored.  Whether
arguments or <a href="insert.txt.html#a" class="d">a</a> <a href="vimeval.txt.html#Dictionary" class="d">Dictionary</a> are bound (with <a href="insert.txt.html#a" class="d">a</a> partial) matters.  The
<a href="vimeval.txt.html#Dictionaries" class="d">Dictionaries</a> must also be equal (or the same, in <a href="change.txt.html#case" class="d">case</a> of "<a href="motion.txt.html#is" class="d">is</a>"<a href="motion.txt.html#%29" class="d">)</a> and the
arguments must be equal (or the same).

To compare Funcrefs to see if they refer to the same function, ignoring bound
<a href="vimeval.txt.html#Dictionary" class="d">Dictionary</a> and arguments, use <a href="vimfn.txt.html#get%28%29" class="l">get()</a> to get the function name: 
<span class="e">	if get(Part1, 'name') == get(Part2, 'name')</span>
<span class="e">	   " Part1 and Part2 refer to the same function</span>
<span class="e"></span>
Using "<a href="motion.txt.html#is" class="d">is</a>" or "isnot" with <a href="insert.txt.html#a" class="d">a</a> <a href="vimeval.txt.html#List" class="l">List</a><a href="motion.txt.html#%2C" class="d">,</a> <a href="vimeval.txt.html#Dictionary" class="l">Dictionary</a> or <a href="vimeval.txt.html#Blob" class="l">Blob</a> checks whether
the expressions are referring to the same <a href="vimeval.txt.html#List" class="l">List</a><a href="motion.txt.html#%2C" class="d">,</a> <a href="vimeval.txt.html#Dictionary" class="l">Dictionary</a> or <a href="vimeval.txt.html#Blob" class="l">Blob</a>
instance.  <a href="insert.txt.html#A" class="d">A</a> copy of <a href="insert.txt.html#a" class="d">a</a> <a href="vimeval.txt.html#List" class="l">List</a> <a href="motion.txt.html#is" class="d">is</a> different from the original <a href="vimeval.txt.html#List" class="l">List</a><a href="repeat.txt.html#." class="d">.</a>  When
using "<a href="motion.txt.html#is" class="d">is</a>" without <a href="insert.txt.html#a" class="d">a</a> <a href="vimeval.txt.html#List" class="l">List</a><a href="motion.txt.html#%2C" class="d">,</a> <a href="vimeval.txt.html#Dictionary" class="l">Dictionary</a> or <a href="vimeval.txt.html#Blob" class="l">Blob</a><a href="motion.txt.html#%2C" class="d">,</a> <a href="motion.txt.html#it" class="d">it</a> <a href="motion.txt.html#is" class="d">is</a> equivalent to
using "equal"<a href="motion.txt.html#%2C" class="d">,</a> using "isnot" <a href="motion.txt.html#is" class="d">is</a> equivalent to using "not equal"<a href="repeat.txt.html#." class="d">.</a>  Except that
<a href="insert.txt.html#a" class="d">a</a> different type means the values are different: 
<span class="e">	echo 4 == '4'</span>
<span class="e">	1</span>
<span class="e">	echo 4 is '4'</span>
<span class="e">	0</span>
<span class="e">	echo 0 is []</span>
<span class="e">	0</span>
"is#"<a href="pattern.txt.html#%2F" class="d">/</a>"isnot#" and "is?"<a href="pattern.txt.html#%2F" class="d">/</a>"isnot?" can be used to match and ignore case.

When comparing <a href="insert.txt.html#a" class="d">a</a> <a href="vimeval.txt.html#String" class="d">String</a> with <a href="insert.txt.html#a" class="d">a</a> Number, the <a href="vimeval.txt.html#String" class="d">String</a> <a href="motion.txt.html#is" class="d">is</a> converted to <a href="insert.txt.html#a" class="d">a</a> Number,
and the comparison <a href="motion.txt.html#is" class="d">is</a> done on Numbers.  This means that: 
<span class="e">	echo 0 == 'x'</span>
<span class="e">	1</span>
because 'x' converted to <a href="insert.txt.html#a" class="d">a</a> <a href="vimeval.txt.html#Number" class="d">Number</a> <a href="motion.txt.html#is" class="d">is</a> zero.  However: 
<span class="e">	echo [0] == ['x']</span>
<span class="e">	0</span>
Inside <a href="insert.txt.html#a" class="d">a</a> <a href="vimeval.txt.html#List" class="d">List</a> or <a href="vimeval.txt.html#Dictionary" class="d">Dictionary</a> this conversion <a href="motion.txt.html#is" class="d">is</a> not used.

When comparing two Strings, this <a href="motion.txt.html#is" class="d">is</a> done with strcmp() or stricmp().  This
results in the mathematical difference (comparing byte values), not
necessarily the alphabetical difference in the local language.

When using the operators with <a href="insert.txt.html#a" class="d">a</a> trailing '#', or the short version and
<a href="options.txt.html#%27ignorecase%27" class="o">'ignorecase'</a> <a href="motion.txt.html#is" class="d">is</a> off, the comparing <a href="motion.txt.html#is" class="d">is</a> done with strcmp(): <a href="change.txt.html#case" class="d">case</a> matters.

When using the operators with <a href="insert.txt.html#a" class="d">a</a> trailing '?', or the short version and
<a href="options.txt.html#%27ignorecase%27" class="o">'ignorecase'</a> <a href="motion.txt.html#is" class="d">is</a> set, the comparing <a href="motion.txt.html#is" class="d">is</a> done with stricmp(): <a href="change.txt.html#case" class="d">case</a> <a href="motion.txt.html#is" class="d">is</a> ignored.

<a href="options.txt.html#%27smartcase%27" class="o">'smartcase'</a> <a href="motion.txt.html#is" class="d">is</a> not used.

The "=~" and "!~" operators match the lefthand argument with the righthand
argument, which <a href="motion.txt.html#is" class="d">is</a> used <a href="motion.txt.html#as" class="d">as</a> <a href="insert.txt.html#a" class="d">a</a> pattern.  See <a href="pattern.txt.html#pattern" class="l">pattern</a> <a href="luaref.txt.html#for" class="d">for</a> what <a href="insert.txt.html#a" class="d">a</a> <a href="pattern.txt.html#pattern" class="d">pattern</a> is.
This matching <a href="motion.txt.html#is" class="d">is</a> always done like <a href="options.txt.html#%27magic%27" class="o">'magic'</a> was set and <a href="options.txt.html#%27cpoptions%27" class="o">'cpoptions'</a> <a href="motion.txt.html#is" class="d">is</a> empty, no
matter what the actual value of <a href="options.txt.html#%27magic%27" class="o">'magic'</a> or <a href="options.txt.html#%27cpoptions%27" class="o">'cpoptions'</a> is.  This makes scripts
portable.  To avoid backslashes in the <a href="pattern.txt.html#regexp" class="d">regexp</a> <a href="pattern.txt.html#pattern" class="d">pattern</a> to be doubled, use <a href="insert.txt.html#a" class="d">a</a>
single-quote string, see <a href="vimeval.txt.html#literal-string" class="l">literal-string</a><a href="repeat.txt.html#." class="d">.</a>
Since <a href="insert.txt.html#a" class="d">a</a> <a href="vimeval.txt.html#string" class="d">string</a> <a href="motion.txt.html#is" class="d">is</a> considered to be <a href="insert.txt.html#a" class="d">a</a> single line, <a href="insert.txt.html#a" class="d">a</a> multi-line <a href="pattern.txt.html#pattern" class="d">pattern</a>
(containing \n, backslash-n) will not match.  However, <a href="insert.txt.html#a" class="d">a</a> literal NL character
can be matched like an ordinary character.  Examples:
	"foo\nbar" =~ "\n"	evaluates to 1
	"foo\nbar" =~ "\\n"	evaluates to <a href="motion.txt.html#0" class="d">0</a>


<span class="h">------------------------------------------------------------------------------</span>
<a href="vimeval.txt.html#expr5" class="d">expr5</a> and <a href="vimeval.txt.html#expr6" class="d">expr6</a>						<span id="expr5" class="t">expr5</span> <span id="expr6" class="t">expr6</span>

<a href="vimeval.txt.html#expr6" class="d">expr6</a> <a href="motion.txt.html#%2B" class="d">+</a> <a href="vimeval.txt.html#expr6" class="d">expr6</a>   <a href="vimeval.txt.html#Number" class="d">Number</a> addition, <a href="vimeval.txt.html#List" class="l">List</a> or <a href="vimeval.txt.html#Blob" class="l">Blob</a> concatenation    	<span id="expr-%2B" class="t">expr-+</span>
<a href="vimeval.txt.html#expr6" class="d">expr6</a> <a href="motion.txt.html#-" class="d">-</a> <a href="vimeval.txt.html#expr6" class="d">expr6</a>   <a href="vimeval.txt.html#Number" class="d">Number</a> subtraction				<span id="expr--" class="t">expr--</span>
<a href="vimeval.txt.html#expr6" class="d">expr6</a> <a href="repeat.txt.html#." class="d">.</a> <a href="vimeval.txt.html#expr6" class="d">expr6</a>   <a href="vimeval.txt.html#String" class="d">String</a> concatenation				<span id="expr-." class="t">expr-.</span>
<a href="vimeval.txt.html#expr6" class="d">expr6</a> .. <a href="vimeval.txt.html#expr6" class="d">expr6</a>  <a href="vimeval.txt.html#String" class="d">String</a> concatenation				<span id="expr-.." class="t">expr-..</span>

For <a href="vimeval.txt.html#Lists" class="l">Lists</a> only "<a href="motion.txt.html#%2B" class="d">+</a>" <a href="motion.txt.html#is" class="d">is</a> possible and then both <a href="vimeval.txt.html#expr6" class="d">expr6</a> must be <a href="insert.txt.html#a" class="d">a</a> list.  The
result <a href="motion.txt.html#is" class="d">is</a> <a href="insert.txt.html#a" class="d">a</a> new <a href="vimeval.txt.html#list" class="d">list</a> with the two lists Concatenated.

For <a href="vimeval.txt.html#String" class="d">String</a> concatenation ".." <a href="motion.txt.html#is" class="d">is</a> preferred, since "<a href="repeat.txt.html#." class="d">.</a>" <a href="motion.txt.html#is" class="d">is</a> ambiguous, <a href="motion.txt.html#it" class="d">it</a> <a href="motion.txt.html#is" class="d">is</a> also
used <a href="luaref.txt.html#for" class="d">for</a> <a href="vimeval.txt.html#Dict" class="l">Dict</a> member access and floating point numbers.

<a href="vimeval.txt.html#expr7" class="d">expr7</a> * <a href="vimeval.txt.html#expr7" class="d">expr7</a>  <a href="vimeval.txt.html#Number" class="d">Number</a> multiplication				<span id="expr-star" class="t">expr-star</span>
<a href="vimeval.txt.html#expr7" class="d">expr7</a> <a href="pattern.txt.html#%2F" class="d">/</a> <a href="vimeval.txt.html#expr7" class="d">expr7</a>  <a href="vimeval.txt.html#Number" class="d">Number</a> division					<span id="expr-%2F" class="t">expr-/</span>
<a href="vimeval.txt.html#expr7" class="d">expr7</a> <a href="motion.txt.html#%25" class="d">%</a> <a href="vimeval.txt.html#expr7" class="d">expr7</a>  <a href="vimeval.txt.html#Number" class="d">Number</a> modulo					<span id="expr-%25" class="t">expr-%</span>

For all, except "<a href="repeat.txt.html#." class="d">.</a>" and ".."<a href="motion.txt.html#%2C" class="d">,</a> Strings are converted to Numbers.
For bitwise operators see <a href="vimfn.txt.html#and%28%29" class="l">and()</a><a href="motion.txt.html#%2C" class="d">,</a> <a href="vimfn.txt.html#or%28%29" class="l">or()</a> and <a href="vimfn.txt.html#xor%28%29" class="l">xor()</a><a href="repeat.txt.html#." class="d">.</a>

<span class="n">Note</span> the difference between "<a href="motion.txt.html#%2B" class="d">+</a>" and "<a href="repeat.txt.html#." class="d">.</a>"<a href="cmdline.txt.html#%3A" class="d">:</a>
	"123" <a href="motion.txt.html#%2B" class="d">+</a> "456" <a href="change.txt.html#%3D" class="d">=</a> 579
	"123" <a href="repeat.txt.html#." class="d">.</a> "456" <a href="change.txt.html#%3D" class="d">=</a> "123456"

Since '.' has the same precedence <a href="motion.txt.html#as" class="d">as</a> '+' and '-', you need to read: 
<span class="e">	1 . 90 + 90.0</span>
As: 
<span class="e">	(1 . 90) + 90.0</span>
That works, since the <a href="vimeval.txt.html#String" class="d">String</a> "190" <a href="motion.txt.html#is" class="d">is</a> automatically converted to the <a href="vimeval.txt.html#Number" class="d">Number</a>
190, which can be added to the <a href="vimeval.txt.html#Float" class="d">Float</a> 90.0.  However: 
<span class="e">	1 . 90 * 90.0</span>
Should be read as: 
<span class="e">	1 . (90 * 90.0)</span>
Since '.' has lower precedence than "*"<a href="repeat.txt.html#." class="d">.</a>  This does NOT work, since this
attempts to concatenate <a href="insert.txt.html#a" class="d">a</a> <a href="vimeval.txt.html#Float" class="d">Float</a> and <a href="insert.txt.html#a" class="d">a</a> String.

When dividing <a href="insert.txt.html#a" class="d">a</a> <a href="vimeval.txt.html#Number" class="d">Number</a> by zero the result depends on the value:
	  <a href="motion.txt.html#0" class="d">0</a> <a href="pattern.txt.html#%2F" class="d">/</a> <a href="motion.txt.html#0" class="d">0</a>  <a href="change.txt.html#%3D" class="d">=</a> -0x80000000	(like NaN <a href="luaref.txt.html#for" class="d">for</a> Float)
	 &gt;0 <a href="pattern.txt.html#%2F" class="d">/</a> <a href="motion.txt.html#0" class="d">0</a>  <a href="change.txt.html#%3D" class="d">=</a>  0x7fffffff	(like positive infinity)
	 &lt;0 <a href="pattern.txt.html#%2F" class="d">/</a> <a href="motion.txt.html#0" class="d">0</a>  <a href="change.txt.html#%3D" class="d">=</a> -0x7fffffff	(like negative infinity)
	(before Vim 7.2 <a href="motion.txt.html#it" class="d">it</a> was always 0x7fffffff)

When 64-bit <a href="vimeval.txt.html#Number" class="d">Number</a> <a href="support.txt.html#support" class="d">support</a> <a href="motion.txt.html#is" class="d">is</a> enabled:
	  <a href="motion.txt.html#0" class="d">0</a> <a href="pattern.txt.html#%2F" class="d">/</a> <a href="motion.txt.html#0" class="d">0</a>  <a href="change.txt.html#%3D" class="d">=</a> -0x8000000000000000	(like NaN <a href="luaref.txt.html#for" class="d">for</a> Float)
	 &gt;0 <a href="pattern.txt.html#%2F" class="d">/</a> <a href="motion.txt.html#0" class="d">0</a>  <a href="change.txt.html#%3D" class="d">=</a>  0x7fffffffffffffff	(like positive infinity)
	 &lt;0 <a href="pattern.txt.html#%2F" class="d">/</a> <a href="motion.txt.html#0" class="d">0</a>  <a href="change.txt.html#%3D" class="d">=</a> -0x7fffffffffffffff	(like negative infinity)

When the righthand side of '%' <a href="motion.txt.html#is" class="d">is</a> zero, the result <a href="motion.txt.html#is" class="d">is</a> 0.

None of these work <a href="luaref.txt.html#for" class="d">for</a> <a href="vimeval.txt.html#Funcref" class="l">Funcref</a>s.

<a href="repeat.txt.html#." class="d">.</a> and <a href="motion.txt.html#%25" class="d">%</a> <a href="diff.txt.html#do" class="d">do</a> not work <a href="luaref.txt.html#for" class="d">for</a> Float. <span id="E804" class="t">E804</span>


<span class="h">------------------------------------------------------------------------------</span>
<a href="vimeval.txt.html#expr7" class="d">expr7</a>							<span id="expr7" class="t">expr7</span>

<a href="change.txt.html#%21" class="d">!</a> <a href="vimeval.txt.html#expr7" class="d">expr7</a>			logical NOT		<span id="expr-%21" class="t">expr-!</span>
<a href="motion.txt.html#-" class="d">-</a> <a href="vimeval.txt.html#expr7" class="d">expr7</a>			unary minus		<span id="expr-unary--" class="t">expr-unary--</span>
<a href="motion.txt.html#%2B" class="d">+</a> <a href="vimeval.txt.html#expr7" class="d">expr7</a>			unary plus		<span id="expr-unary-%2B" class="t">expr-unary-+</span>

For '!' <a href="vimeval.txt.html#TRUE" class="l">TRUE</a> becomes <a href="vimeval.txt.html#FALSE" class="l">FALSE</a><a href="motion.txt.html#%2C" class="d">,</a> <a href="vimeval.txt.html#FALSE" class="l">FALSE</a> becomes <a href="vimeval.txt.html#TRUE" class="l">TRUE</a> (one).
For '-' the sign of the number <a href="motion.txt.html#is" class="d">is</a> changed.
For '+' the number <a href="motion.txt.html#is" class="d">is</a> unchanged.  <span class="n">Note:</span> "++" has no effect.

<a href="insert.txt.html#A" class="d">A</a> <a href="vimeval.txt.html#String" class="d">String</a> will be converted to <a href="insert.txt.html#a" class="d">a</a> <a href="vimeval.txt.html#Number" class="d">Number</a> first.

These three can be repeated and mixed.  Examples:
	!-1	    <a href="change.txt.html#%3D%3D" class="d">==</a> <a href="motion.txt.html#0" class="d">0</a>
	!!8	    <a href="change.txt.html#%3D%3D" class="d">==</a> 1
	--9	    <a href="change.txt.html#%3D%3D" class="d">==</a> 9


<span class="h">------------------------------------------------------------------------------</span>
<a href="vimeval.txt.html#expr8" class="d">expr8</a>							<span id="expr8" class="t">expr8</span>

This <a href="vimeval.txt.html#expression" class="d">expression</a> <a href="motion.txt.html#is" class="d">is</a> either <a href="vimeval.txt.html#expr9" class="l">expr9</a> or <a href="insert.txt.html#a" class="d">a</a> sequence of the alternatives below,
in any order.  E.g., these are all possible:
	expr8[expr1].name
	expr8.name[expr1]
	expr8(expr1, ...)[expr1].name
	expr8-&gt;(expr1, ...)[expr1]
Evaluation <a href="motion.txt.html#is" class="d">is</a> always from left to right.


expr8[expr1]		item of <a href="vimeval.txt.html#String" class="d">String</a> or <a href="vimeval.txt.html#List" class="l">List</a>  	<span id="expr-%5B%5D" class="t">expr-[]</span> <span id="E111" class="t">E111</span>
							<span id="subscript" class="t">subscript</span>
In legacy Vim script:
If <a href="vimeval.txt.html#expr8" class="d">expr8</a> <a href="motion.txt.html#is" class="d">is</a> <a href="insert.txt.html#a" class="d">a</a> <a href="vimeval.txt.html#Number" class="d">Number</a> or <a href="vimeval.txt.html#String" class="d">String</a> this results in <a href="insert.txt.html#a" class="d">a</a> <a href="vimeval.txt.html#String" class="d">String</a> that contains the
expr1'th single byte from expr8.  <a href="vimeval.txt.html#expr8" class="d">expr8</a> <a href="motion.txt.html#is" class="d">is</a> used <a href="motion.txt.html#as" class="d">as</a> <a href="insert.txt.html#a" class="d">a</a> <a href="vimeval.txt.html#String" class="d">String</a> (a number <a href="motion.txt.html#is" class="d">is</a>
automatically converted to <a href="insert.txt.html#a" class="d">a</a> String), <a href="vimeval.txt.html#expr1" class="d">expr1</a> <a href="motion.txt.html#as" class="d">as</a> <a href="insert.txt.html#a" class="d">a</a> Number.  This doesn't
recognize <a href="mbyte.txt.html#multibyte" class="d">multibyte</a> encodings, see <span class="e">byteidx()</span> <a href="luaref.txt.html#for" class="d">for</a> an alternative, or use
<span class="e">split()</span> to turn the <a href="vimeval.txt.html#string" class="d">string</a> into <a href="insert.txt.html#a" class="d">a</a> <a href="vimeval.txt.html#list" class="d">list</a> of characters.  Example, to get the
byte under the cursor: 
<span class="e">	:let c = getline(".")[col(".") - 1]</span>
<span class="e"></span>
Index zero gives the first byte.  This <a href="motion.txt.html#is" class="d">is</a> like <a href="motion.txt.html#it" class="d">it</a> works in C.  Careful:
text column numbers start with one!  Example, to get the byte under the
cursor: 
<span class="e">	:let c = getline(".")[col(".") - 1]</span>
<span class="e"></span>
Index zero gives the first byte.  Careful: text column numbers start with one!

If the length of the <a href="vimeval.txt.html#String" class="d">String</a> <a href="motion.txt.html#is" class="d">is</a> <a href="various.txt.html#less" class="d">less</a> than the index, the result <a href="motion.txt.html#is" class="d">is</a> an empty
String.  <a href="insert.txt.html#A" class="d">A</a> negative <a href="index.txt.html#index" class="d">index</a> always results in an empty <a href="vimeval.txt.html#string" class="d">string</a> (reason: backward
compatibility).  Use [-1:] to get the last byte.

If <a href="vimeval.txt.html#expr8" class="d">expr8</a> <a href="motion.txt.html#is" class="d">is</a> <a href="insert.txt.html#a" class="d">a</a> <a href="vimeval.txt.html#List" class="l">List</a> then <a href="motion.txt.html#it" class="d">it</a> results the item <a href="motion.txt.html#at" class="d">at</a> <a href="index.txt.html#index" class="d">index</a> expr1.  See <a href="vimeval.txt.html#list-index" class="l">list-index</a>
<a href="luaref.txt.html#for" class="d">for</a> possible <a href="index.txt.html#index" class="d">index</a> values.  If the <a href="index.txt.html#index" class="d">index</a> <a href="motion.txt.html#is" class="d">is</a> out of range this results in an
error.  Example: 
<span class="e">	:let item = mylist[-1]		" get last item</span>
<span class="e"></span>
Generally, if <a href="insert.txt.html#a" class="d">a</a> <a href="vimeval.txt.html#List" class="l">List</a> <a href="index.txt.html#index" class="d">index</a> <a href="motion.txt.html#is" class="d">is</a> equal to or higher than the length of the
<a href="vimeval.txt.html#List" class="l">List</a><a href="motion.txt.html#%2C" class="d">,</a> or more negative than the length of the <a href="vimeval.txt.html#List" class="l">List</a><a href="motion.txt.html#%2C" class="d">,</a> this results in an
error.


expr8[expr1a <a href="cmdline.txt.html#%3A" class="d">:</a> expr1b]	<a href="vimeval.txt.html#substring" class="d">substring</a> or <a href="vimeval.txt.html#sublist" class="l">sublist</a>  		<span id="expr-%5B%3A%5D" class="t">expr-[:]</span> <span id="substring" class="t">substring</span>

If <a href="vimeval.txt.html#expr8" class="d">expr8</a> <a href="motion.txt.html#is" class="d">is</a> <a href="insert.txt.html#a" class="d">a</a> <a href="vimeval.txt.html#String" class="d">String</a> this results in the <a href="vimeval.txt.html#substring" class="d">substring</a> with the bytes or
characters from expr1a to and including expr1b.  <a href="vimeval.txt.html#expr8" class="d">expr8</a> <a href="motion.txt.html#is" class="d">is</a> used <a href="motion.txt.html#as" class="d">as</a> <a href="insert.txt.html#a" class="d">a</a> String,
expr1a and expr1b are used <a href="motion.txt.html#as" class="d">as</a> <a href="insert.txt.html#a" class="d">a</a> Number.

In legacy Vim <a href="usr_41.txt.html#script" class="d">script</a> the indexes are byte indexes.  This doesn't recognize
<a href="mbyte.txt.html#multibyte" class="d">multibyte</a> encodings, see <a href="vimfn.txt.html#byteidx%28%29" class="l">byteidx()</a> <a href="luaref.txt.html#for" class="d">for</a> computing the indexes.  If <a href="vimeval.txt.html#expr8" class="d">expr8</a> <a href="motion.txt.html#is" class="d">is</a>
<a href="insert.txt.html#a" class="d">a</a> <a href="vimeval.txt.html#Number" class="d">Number</a> <a href="motion.txt.html#it" class="d">it</a> <a href="motion.txt.html#is" class="d">is</a> first converted to <a href="insert.txt.html#a" class="d">a</a> String.

The item <a href="motion.txt.html#at" class="d">at</a> <a href="index.txt.html#index" class="d">index</a> expr1b <a href="motion.txt.html#is" class="d">is</a> included, <a href="motion.txt.html#it" class="d">it</a> <a href="motion.txt.html#is" class="d">is</a> inclusive.  For an <a href="motion.txt.html#exclusive" class="d">exclusive</a> <a href="index.txt.html#index" class="d">index</a>
use the <a href="vimfn.txt.html#slice%28%29" class="l">slice()</a> function.

If expr1a <a href="motion.txt.html#is" class="d">is</a> omitted zero <a href="motion.txt.html#is" class="d">is</a> used.  If expr1b <a href="motion.txt.html#is" class="d">is</a> omitted the length of the
<a href="vimeval.txt.html#string" class="d">string</a> minus one <a href="motion.txt.html#is" class="d">is</a> used.

<a href="insert.txt.html#A" class="d">A</a> negative number can be used to measure from the <a href="intro.txt.html#end" class="d">end</a> of the string.  -1 <a href="motion.txt.html#is" class="d">is</a>
the last character, -2 the last but one, etc.

If an <a href="index.txt.html#index" class="d">index</a> goes out of range <a href="luaref.txt.html#for" class="d">for</a> the <a href="vimeval.txt.html#string" class="d">string</a> characters are omitted.  If
expr1b <a href="motion.txt.html#is" class="d">is</a> smaller than expr1a the result <a href="motion.txt.html#is" class="d">is</a> an empty string.

Examples: 
<span class="e">	:let c = name[-1:]		" last byte of a string</span>
<span class="e">	:let c = name[0:-1]		" the whole string</span>
<span class="e">	:let c = name[-2:-2]		" last but one byte of a string</span>
<span class="e">	:let s = line(".")[4:]		" from the fifth byte to the end</span>
<span class="e">	:let s = s[:-3]			" remove last two bytes</span>

							<span id="slice" class="t">slice</span>
If <a href="vimeval.txt.html#expr8" class="d">expr8</a> <a href="motion.txt.html#is" class="d">is</a> <a href="insert.txt.html#a" class="d">a</a> <a href="vimeval.txt.html#List" class="l">List</a> this results in <a href="insert.txt.html#a" class="d">a</a> new <a href="vimeval.txt.html#List" class="l">List</a> with the items indicated by
the indexes expr1a and expr1b.  This works like with <a href="insert.txt.html#a" class="d">a</a> String, <a href="motion.txt.html#as" class="d">as</a> explained
just above. Also see <a href="vimeval.txt.html#sublist" class="l">sublist</a> below.  Examples: 
<span class="e">	:let l = mylist[:3]		" first four items</span>
<span class="e">	:let l = mylist[4:4]		" List with one item</span>
<span class="e">	:let l = mylist[:]		" shallow copy of a List</span>
<span class="e"></span>
If <a href="vimeval.txt.html#expr8" class="d">expr8</a> <a href="motion.txt.html#is" class="d">is</a> <a href="insert.txt.html#a" class="d">a</a> <a href="vimeval.txt.html#Blob" class="l">Blob</a> this results in <a href="insert.txt.html#a" class="d">a</a> new <a href="vimeval.txt.html#Blob" class="l">Blob</a> with the bytes in the
indexes expr1a and expr1b, inclusive.  Examples: 
<span class="e">	:let b = 0zDEADBEEF</span>
<span class="e">	:let bs = b[1:2]		" 0zADBE</span>
<span class="e">	:let bs = b[]			" copy of 0zDEADBEEF</span>
<span class="e"></span>
Using expr8[expr1] or expr8[expr1a <a href="cmdline.txt.html#%3A" class="d">:</a> expr1b] on <a href="insert.txt.html#a" class="d">a</a> <a href="vimeval.txt.html#Funcref" class="l">Funcref</a> results in an
error.

Watch out <a href="luaref.txt.html#for" class="d">for</a> confusion between <a href="insert.txt.html#a" class="d">a</a> <a href="api.txt.html#namespace" class="d">namespace</a> and <a href="insert.txt.html#a" class="d">a</a> variable followed by <a href="insert.txt.html#a" class="d">a</a> colon
<a href="luaref.txt.html#for" class="d">for</a> <a href="insert.txt.html#a" class="d">a</a> sublist: 
<span class="e">	mylist[n:]     " uses variable n</span>
<span class="e">	mylist[s:]     " uses namespace s:, error!</span>
<span class="e"></span>
<span class="e"></span>
expr8.name		entry in <a href="insert.txt.html#a" class="d">a</a> <a href="vimeval.txt.html#Dictionary" class="l">Dictionary</a>  		<span id="expr-entry" class="t">expr-entry</span>

If <a href="vimeval.txt.html#expr8" class="d">expr8</a> <a href="motion.txt.html#is" class="d">is</a> <a href="insert.txt.html#a" class="d">a</a> <a href="vimeval.txt.html#Dictionary" class="l">Dictionary</a> and <a href="motion.txt.html#it" class="d">it</a> <a href="motion.txt.html#is" class="d">is</a> followed by <a href="insert.txt.html#a" class="d">a</a> dot, then the following
name will be used <a href="motion.txt.html#as" class="d">as</a> <a href="insert.txt.html#a" class="d">a</a> key in the <a href="vimeval.txt.html#Dictionary" class="l">Dictionary</a><a href="repeat.txt.html#." class="d">.</a>  This <a href="motion.txt.html#is" class="d">is</a> just like:
expr8[name].

The name must consist of alphanumeric characters, just like <a href="insert.txt.html#a" class="d">a</a> variable name,
but <a href="motion.txt.html#it" class="d">it</a> may start with <a href="insert.txt.html#a" class="d">a</a> number.  Curly braces cannot be used.

There must not be white <a href="intro.txt.html#space" class="d">space</a> before or after the dot.

Examples: 
<span class="e">	:let dict = {"one": 1, 2: "two"}</span>
<span class="e">	:echo dict.one		" shows "1"</span>
<span class="e">	:echo dict.2		" shows "two"</span>
<span class="e">	:echo dict .2		" error because of space before the dot</span>
<span class="e"></span>
<span class="n">Note</span> that the dot <a href="motion.txt.html#is" class="d">is</a> also used <a href="luaref.txt.html#for" class="d">for</a> <a href="vimeval.txt.html#String" class="d">String</a> concatenation.  To avoid confusion
always <a href="change.txt.html#put" class="d">put</a> spaces around the dot <a href="luaref.txt.html#for" class="d">for</a> <a href="vimeval.txt.html#String" class="d">String</a> concatenation.


expr8(expr1, ...)	<a href="vimeval.txt.html#Funcref" class="l">Funcref</a> function call  		<span id="E1085" class="t">E1085</span>

When <a href="vimeval.txt.html#expr8" class="d">expr8</a> <a href="motion.txt.html#is" class="d">is</a> <a href="insert.txt.html#a" class="d">a</a> <a href="vimeval.txt.html#Funcref" class="l">Funcref</a> type variable, invoke the function <a href="motion.txt.html#it" class="d">it</a> refers to.


expr8-&gt;name([args])	<a href="vimeval.txt.html#method" class="d">method</a> call			<span id="method" class="t">method</span> <span id="-%3E" class="t">-&gt;</span>
expr8-&gt;{lambda}([args])

							<span id="E260" class="t">E260</span> <span id="E276" class="t">E276</span>
For methods that are also available <a href="motion.txt.html#as" class="d">as</a> global <a href="vimeval.txt.html#functions" class="d">functions</a> this <a href="motion.txt.html#is" class="d">is</a> the same as: 
<span class="e">	name(expr8 [, args])</span>
There can also be methods specifically <a href="luaref.txt.html#for" class="d">for</a> the type of "<a href="vimeval.txt.html#expr8" class="d">expr8</a>"<a href="repeat.txt.html#." class="d">.</a>

This allows <a href="luaref.txt.html#for" class="d">for</a> chaining, passing the value that one <a href="vimeval.txt.html#method" class="d">method</a> returns to the
next method: 
<span class="e">	mylist-&gt;filter(filterexpr)-&gt;map(mapexpr)-&gt;sort()-&gt;join()</span>

Example of using <a href="insert.txt.html#a" class="d">a</a> lambda: 
<span class="e">	GetPercentage()-&gt;{x -&gt; x * 100}()-&gt;printf('%d%%')</span>

When using <a href="vimeval.txt.html#-%3E" class="d">-&gt;</a> the <a href="vimeval.txt.html#expr7" class="l">expr7</a> operators will be applied first, thus: 
<span class="e">	-1.234-&gt;string()</span>
Is equivalent to: 
<span class="e">	(-1.234)-&gt;string()</span>
And NOT: 
<span class="e">	-(1.234-&gt;string())</span>

							<span id="E274" class="t">E274</span>
"-&gt;name(" must not contain white space.  There can be white <a href="intro.txt.html#space" class="d">space</a> before the
"<a href="vimeval.txt.html#-%3E" class="d">-&gt;</a>" and after the "<a href="motion.txt.html#%28" class="d">(</a>"<a href="motion.txt.html#%2C" class="d">,</a> thus you can split the lines like this: 
<span class="e">	mylist</span>
<span class="e">	\ -&gt;filter(filterexpr)</span>
<span class="e">	\ -&gt;map(mapexpr)</span>
<span class="e">	\ -&gt;sort()</span>
<span class="e">	\ -&gt;join()</span>
<span class="e"></span>
When using the <a href="vimeval.txt.html#lambda" class="d">lambda</a> form there must be no white <a href="intro.txt.html#space" class="d">space</a> between the <a href="motion.txt.html#%7D" class="d">}</a> and the
(.


							<span id="expr9" class="t">expr9</span>
<span class="h">------------------------------------------------------------------------------</span>
number

number			number constant			<span id="expr-number" class="t">expr-number</span>

			<span id="0x" class="t">0x</span> <span id="hex-number" class="t">hex-number</span> <span id="0o" class="t">0o</span> <span id="octal-number" class="t">octal-number</span> <span id="binary-number" class="t">binary-number</span>
Decimal, Hexadecimal (starting with <a href="vimeval.txt.html#0x" class="d">0x</a> or 0X), Binary (starting with 0b or 0B)
and Octal (starting with 0, <a href="vimeval.txt.html#0o" class="d">0o</a> or 0O).

						<span id="floating-point-format" class="t">floating-point-format</span>
Floating point numbers can be written in two forms:

	[-+]{N}.{M}
	[-+]{N}.{M}[eE][-+]{exp}

<span class="s">{N}</span> and <span class="s">{M}</span> are numbers.  Both <span class="s">{N}</span> and <span class="s">{M}</span> must be present and can only
contain digits.
[-+] means there <a href="motion.txt.html#is" class="d">is</a> an optional plus or minus sign.
<span class="s">{exp}</span> <a href="motion.txt.html#is" class="d">is</a> the exponent, power of 10.
Only <a href="insert.txt.html#a" class="d">a</a> decimal point <a href="motion.txt.html#is" class="d">is</a> accepted, not <a href="insert.txt.html#a" class="d">a</a> comma.  No matter what the current
<a href="mbyte.txt.html#locale" class="d">locale</a> is.

Examples:
	123.456
	+0.0001
	55.0
	-0.123
	1.234e03
	1.0E-6
	-3.1416e+88

These are INVALID:
	3.		empty <span class="s">{M}</span>
	1e40		missing .{M}

Rationale:
Before floating point was introduced, the text "123.456" was interpreted <a href="motion.txt.html#as" class="d">as</a>
the two numbers "123" and "456"<a href="motion.txt.html#%2C" class="d">,</a> both converted to <a href="insert.txt.html#a" class="d">a</a> <a href="vimeval.txt.html#string" class="d">string</a> and concatenated,
resulting in the <a href="vimeval.txt.html#string" class="d">string</a> "123456"<a href="repeat.txt.html#." class="d">.</a>  Since this was considered pointless, and we
could not find <a href="motion.txt.html#it" class="d">it</a> intentionally being used in Vim scripts, this backwards
incompatibility was accepted in favor of being able to use the normal <a href="intro.txt.html#notation" class="d">notation</a>
<a href="luaref.txt.html#for" class="d">for</a> floating point numbers.

							<span id="float-pi" class="t">float-pi</span> <span id="float-e" class="t">float-e</span>
<a href="insert.txt.html#A" class="d">A</a> few useful values to copy&amp;paste: 
<span class="e">	:let pi = 3.14159265359</span>
<span class="e">	:let e  = 2.71828182846</span>
Or, if you don't want to write them in <a href="motion.txt.html#as" class="d">as</a> floating-point literals, you can
also use functions, like the following: 
<span class="e">	:let pi = acos(-1.0)</span>
<span class="e">	:let e  = exp(1.0)</span>

						<span id="floating-point-precision" class="t">floating-point-precision</span>
The precision and range of floating points numbers depends on what "double"
means in the library Vim was compiled with.  There <a href="motion.txt.html#is" class="d">is</a> no way to change this <a href="motion.txt.html#at" class="d">at</a>
runtime.

The default <a href="luaref.txt.html#for" class="d">for</a> displaying <a href="insert.txt.html#a" class="d">a</a> <a href="vimeval.txt.html#Float" class="l">Float</a> <a href="motion.txt.html#is" class="d">is</a> to use 6 decimal places, like using
printf("%g"<a href="motion.txt.html#%2C" class="d">,</a> f).  You can select something else when using the <a href="vimfn.txt.html#printf%28%29" class="l">printf()</a>
function.  Example: 
<span class="e">	:echo printf('%.15e', atan(1))</span>
	7.853981633974483e-01


<span class="h">------------------------------------------------------------------------------</span>
<a href="vimeval.txt.html#string" class="d">string</a>					<span id="string" class="t">string</span> <span id="String" class="t">String</span> <span id="expr-string" class="t">expr-string</span> <span id="E114" class="t">E114</span>

"<a href="vimeval.txt.html#string" class="d">string</a>"		<a href="vimeval.txt.html#string" class="d">string</a> constant		<span id="expr-quote" class="t">expr-quote</span>

<span class="n">Note</span> that double quotes are used.

<a href="insert.txt.html#A" class="d">A</a> <a href="vimeval.txt.html#string" class="d">string</a> constant accepts these special characters:
\...	three-digit <a href="vimeval.txt.html#octal" class="d">octal</a> number (e.g., "\316"<a href="motion.txt.html#%29" class="d">)</a>
\..	two-digit <a href="vimeval.txt.html#octal" class="d">octal</a> number (must be followed by non-digit)
\.	one-digit <a href="vimeval.txt.html#octal" class="d">octal</a> number (must be followed by non-digit)
\x..	byte specified with two hex numbers (e.g., "\x1f"<a href="motion.txt.html#%29" class="d">)</a>
\x.	byte specified with one hex number (must be followed by non-hex char)
\X..	same <a href="motion.txt.html#as" class="d">as</a> \x..
\X.	same <a href="motion.txt.html#as" class="d">as</a> \x.
\u....	character specified with up to 4 hex numbers, stored <a href="motion.txt.html#as" class="d">as</a> <a href="mbyte.txt.html#UTF-8" class="d">UTF-8</a>
	(e.g., "\u02a4"<a href="motion.txt.html#%29" class="d">)</a>
\U....	same <a href="motion.txt.html#as" class="d">as</a> \u but allows up to 8 hex numbers.
\b	<a href="intro.txt.html#backspace" class="d">backspace</a> <a href="motion.txt.html#%3CBS%3E" class="s">&lt;BS&gt;</a>
\e	<a href="intro.txt.html#escape" class="d">escape</a> <a href="intro.txt.html#%3CEsc%3E" class="s">&lt;Esc&gt;</a>
\f	formfeed 0x0C
\n	newline <a href="motion.txt.html#%3CNL%3E" class="s">&lt;NL&gt;</a>
\r	return <a href="motion.txt.html#%3CCR%3E" class="s">&lt;CR&gt;</a>
\t	<a href="intro.txt.html#tab" class="d">tab</a> <a href="motion.txt.html#%3CTab%3E" class="s">&lt;Tab&gt;</a>
\\	<a href="intro.txt.html#backslash" class="d">backslash</a>
\"	double <a href="change.txt.html#quote" class="d">quote</a>
\&lt;xxx&gt;	Special key named "xxx"<a href="repeat.txt.html#." class="d">.</a>  e.g. "\&lt;C-W&gt;" <a href="luaref.txt.html#for" class="d">for</a> <a href="index.txt.html#CTRL-W" class="k">CTRL-W</a>.  This <a href="motion.txt.html#is" class="d">is</a> <a href="luaref.txt.html#for" class="d">for</a> use
	in mappings, the 0x80 byte <a href="motion.txt.html#is" class="d">is</a> escaped.
	To use the double <a href="change.txt.html#quote" class="d">quote</a> character <a href="motion.txt.html#it" class="d">it</a> must be escaped: "&lt;M-\"<a href="change.txt.html#%3E" class="d">&gt;</a>"<a href="repeat.txt.html#." class="d">.</a>
	Don't use <span class="s">&lt;Char-xxxx&gt;</span> to get <a href="insert.txt.html#a" class="d">a</a> <a href="mbyte.txt.html#UTF-8" class="d">UTF-8</a> character, use \uxxxx <a href="motion.txt.html#as" class="d">as</a>
	mentioned above.
\&lt;*xxx&gt;	Like \&lt;xxx&gt; but prepends <a href="insert.txt.html#a" class="d">a</a> modifier instead of including <a href="motion.txt.html#it" class="d">it</a> in the
	character.  E.g. "\&lt;C-w&gt;" <a href="motion.txt.html#is" class="d">is</a> one character 0x17 while "\&lt;*C-w&gt;" <a href="motion.txt.html#is" class="d">is</a> four
	bytes: 3 <a href="luaref.txt.html#for" class="d">for</a> the CTRL modifier and then character "<a href="motion.txt.html#W" class="d">W</a>"<a href="repeat.txt.html#." class="d">.</a>

<span class="n">Note</span> that "\xff" <a href="motion.txt.html#is" class="d">is</a> stored <a href="motion.txt.html#as" class="d">as</a> the byte 255, which may be invalid in some
encodings.  Use "\u00ff" to store character 255 correctly <a href="motion.txt.html#as" class="d">as</a> UTF-8.

<span class="n">Note</span> that "\000" and "\x00" force the <a href="intro.txt.html#end" class="d">end</a> of the string.


<span class="h">------------------------------------------------------------------------------</span>
<a href="vimeval.txt.html#blob-literal" class="d">blob-literal</a>				<span id="blob-literal" class="t">blob-literal</span> <span id="E973" class="t">E973</span>

Hexadecimal <a href="starting.txt.html#starting" class="d">starting</a> with 0z or 0Z, with an arbitrary number of bytes.
The sequence must be an even number of hex characters.  Example: 
<span class="e">	:let b = 0zFF00ED015DAF</span>
<span class="e"></span>
<span class="e"></span>
<span class="h">------------------------------------------------------------------------------</span>
<a href="vimeval.txt.html#literal-string" class="d">literal-string</a>						<span id="literal-string" class="t">literal-string</span> <span id="E115" class="t">E115</span>

<span class="o">'string'</span>		<a href="vimeval.txt.html#string" class="d">string</a> constant			<span id="expr-%27" class="t">expr-'</span>

<span class="n">Note</span> that single quotes are used.

This <a href="vimeval.txt.html#string" class="d">string</a> <a href="motion.txt.html#is" class="d">is</a> taken <a href="motion.txt.html#as" class="d">as</a> <a href="motion.txt.html#it" class="d">it</a> is.  No backslashes are removed or have <a href="insert.txt.html#a" class="d">a</a> special
meaning.  The only exception <a href="motion.txt.html#is" class="d">is</a> that two quotes stand <a href="luaref.txt.html#for" class="d">for</a> one <a href="change.txt.html#quote." class="d">quote.</a>

Single quoted strings are useful <a href="luaref.txt.html#for" class="d">for</a> patterns, so that backslashes <a href="diff.txt.html#do" class="d">do</a> not need
to be doubled.  These two commands are equivalent: 
<span class="e">	if a =~ "\\s*"</span>
<span class="e">	if a =~ '\s*'</span>
<span class="e"></span>
<span class="e"></span>
<span class="h">------------------------------------------------------------------------------</span>
<a href="vimeval.txt.html#interpolated-string" class="d">interpolated-string</a>				<span id="%24quote" class="t">$quote</span> <span id="interpolated-string" class="t">interpolated-string</span>

<a href="motion.txt.html#%24" class="d">$</a>"<a href="vimeval.txt.html#string" class="d">string</a>"		interpolated <a href="vimeval.txt.html#string" class="d">string</a> constant		<span id="expr-%24quote" class="t">expr-$quote</span>
$'string'		interpolated literal <a href="vimeval.txt.html#string" class="d">string</a> constant	<span id="expr-%24%27" class="t">expr-$'</span>

Interpolated strings are an extension of the <a href="vimeval.txt.html#string" class="l">string</a> and <a href="vimeval.txt.html#literal-string" class="l">literal-string</a><a href="motion.txt.html#%2C" class="d">,</a>
allowing the inclusion of Vim <a href="usr_41.txt.html#script" class="d">script</a> expressions (see <a href="vimeval.txt.html#expr1" class="l">expr1</a>).  Any
<a href="vimeval.txt.html#expression" class="d">expression</a> returning <a href="insert.txt.html#a" class="d">a</a> value can be enclosed between curly braces.  The value
<a href="motion.txt.html#is" class="d">is</a> converted to <a href="insert.txt.html#a" class="d">a</a> string.  All the text and results of the expressions
are concatenated to make <a href="insert.txt.html#a" class="d">a</a> new string.
								<span id="E1278" class="t">E1278</span>
To include an opening brace '{' or closing brace '}' in the <a href="vimeval.txt.html#string" class="d">string</a> content
double it.  For double quoted strings using <a href="insert.txt.html#a" class="d">a</a> <a href="intro.txt.html#backslash" class="d">backslash</a> also works.  <a href="insert.txt.html#A" class="d">A</a> single
closing brace '}' will result in an error.

Examples: 
<span class="e">	let your_name = input("What's your name? ")</span>
<span class="h">	What's your name?  Peter </span>

<span class="e">	echo</span>
<span class="e">	echo $"Hello, {your_name}!"</span>
<span class="h">	Hello, Peter! </span>

<span class="e">	echo $"The square root of {{9}} is {sqrt(9)}"</span>
<span class="h">	The square root of {9} is 3.0 </span>

						<span id="string-offset-encoding" class="t">string-offset-encoding</span>
<a href="insert.txt.html#A" class="d">A</a> <a href="vimeval.txt.html#string" class="d">string</a> consists of multiple characters.  <a href="mbyte.txt.html#UTF-8" class="d">UTF-8</a> uses one byte <a href="luaref.txt.html#for" class="d">for</a> ASCII
characters, two bytes <a href="luaref.txt.html#for" class="d">for</a> other latin characters and more bytes <a href="luaref.txt.html#for" class="d">for</a> other
characters.

<a href="insert.txt.html#A" class="d">A</a> <a href="vimeval.txt.html#string" class="d">string</a> offset can <a href="intro.txt.html#count" class="d">count</a> characters or bytes.  Other programs may use
UTF-16 encoding (16-bit words) and an offset of UTF-16 words.  Some <a href="vimeval.txt.html#functions" class="d">functions</a>
use byte offsets, usually <a href="luaref.txt.html#for" class="d">for</a> <a href="mbyte.txt.html#UTF-8" class="d">UTF-8</a> encoding.  Other <a href="vimeval.txt.html#functions" class="d">functions</a> use character
offsets, in which <a href="change.txt.html#case" class="d">case</a> the encoding doesn't matter.

The different offsets <a href="luaref.txt.html#for" class="d">for</a> the <a href="vimeval.txt.html#string" class="d">string</a> "<a href="insert.txt.html#a" class="d">a</a>©😊" are below:

  <a href="mbyte.txt.html#UTF-8" class="d">UTF-8</a> offsets:
      [0]: 61, [1]: C2, [2]: A9, [3]: F0, [4]: 9F, [5]: 98, [6]: 8A
  UTF-16 offsets:
      [0]: 0061, [1]: 00A9, [2]: D83D, [3]: DE0A
  UTF-32 (character) offsets:
      [0]: 00000061, [1]: 000000A9, [2]: 0001F60A

You can use the "<a href="various.txt.html#g8" class="d">g8</a>" and "<a href="various.txt.html#ga" class="d">ga</a>" commands on <a href="insert.txt.html#a" class="d">a</a> character to see the
decimal/hex/octal values.

The <a href="vimeval.txt.html#functions" class="d">functions</a> <a href="vimfn.txt.html#byteidx%28%29" class="l">byteidx()</a><a href="motion.txt.html#%2C" class="d">,</a> <a href="vimfn.txt.html#utf16idx%28%29" class="l">utf16idx()</a> and <a href="vimfn.txt.html#charidx%28%29" class="l">charidx()</a> can be used to convert
between these indices.  The <a href="vimeval.txt.html#functions" class="d">functions</a> <a href="vimfn.txt.html#strlen%28%29" class="l">strlen()</a><a href="motion.txt.html#%2C" class="d">,</a> <a href="vimfn.txt.html#strutf16len%28%29" class="l">strutf16len()</a> and
<a href="vimfn.txt.html#strcharlen%28%29" class="l">strcharlen()</a> return the number of bytes, UTF-16 code units and characters in
<a href="insert.txt.html#a" class="d">a</a> <a href="vimeval.txt.html#string" class="d">string</a> respectively.

<span class="h">------------------------------------------------------------------------------</span>
option						<span id="expr-option" class="t">expr-option</span> <span id="E112" class="t">E112</span> <span id="E113" class="t">E113</span>

&amp;option			option value, local value if possible
&amp;g:option		global option value
&amp;l:option		local option value

Examples: 
<span class="e">	echo "tabstop is " .. &amp;tabstop</span>
<span class="e">	if &amp;expandtab</span>
<span class="e"></span>
Any option name can be used here.  See <a href="options.txt.html#options" class="l">options</a><a href="repeat.txt.html#." class="d">.</a>  When using the local value
and there <a href="motion.txt.html#is" class="d">is</a> no buffer-local or window-local value, the global value <a href="motion.txt.html#is" class="d">is</a> used
anyway.


<span class="h">------------------------------------------------------------------------------</span>
<a href="intro.txt.html#register" class="d">register</a>						<span id="expr-register" class="t">expr-register</span> <span id="%40r" class="t">@r</span>

<a href="vimeval.txt.html#%40r" class="d">@r</a>			contents of <a href="intro.txt.html#register" class="d">register</a> 'r'

The result <a href="motion.txt.html#is" class="d">is</a> the contents of the named register, <a href="motion.txt.html#as" class="d">as</a> <a href="insert.txt.html#a" class="d">a</a> single string.
Newlines are inserted where required.  To get the contents of the unnamed
<a href="intro.txt.html#register" class="d">register</a> use <a href="repeat.txt.html#%40" class="d">@</a>" or @@.  See <a href="change.txt.html#registers" class="l">registers</a> <a href="luaref.txt.html#for" class="d">for</a> an explanation of the available
registers.

When using the '=' <a href="intro.txt.html#register" class="d">register</a> you get the <a href="vimeval.txt.html#expression" class="d">expression</a> itself, not what <a href="motion.txt.html#it" class="d">it</a>
evaluates to.  Use <a href="vimfn.txt.html#eval%28%29" class="l">eval()</a> to evaluate it.


nesting							<span id="expr-nesting" class="t">expr-nesting</span> <span id="E110" class="t">E110</span>
<span class="h">-------</span>
(expr1)			nested <a href="vimeval.txt.html#expression" class="d">expression</a>


<span class="h">------------------------------------------------------------------------------</span>
environment variable					<span id="expr-env" class="t">expr-env</span>

$VAR			environment variable

The <a href="vimeval.txt.html#String" class="d">String</a> value of any environment variable.  When <a href="motion.txt.html#it" class="d">it</a> <a href="motion.txt.html#is" class="d">is</a> not defined, the
result <a href="motion.txt.html#is" class="d">is</a> an empty string.

The <a href="vimeval.txt.html#functions" class="d">functions</a> <span class="e">getenv()</span> and <span class="e">setenv()</span> can also be used and work <a href="luaref.txt.html#for" class="d">for</a>
environment <a href="vimeval.txt.html#variables" class="d">variables</a> with non-alphanumeric names.
The function <span class="e">environ()</span> can be used to get <a href="insert.txt.html#a" class="d">a</a> <a href="vimeval.txt.html#Dict" class="d">Dict</a> with all environment
variables.


						<span id="expr-env-expand" class="t">expr-env-expand</span>
<span class="n">Note</span> that there <a href="motion.txt.html#is" class="d">is</a> <a href="insert.txt.html#a" class="d">a</a> difference between using $VAR directly and using
expand("$VAR").  Using <a href="motion.txt.html#it" class="d">it</a> directly will only expand environment <a href="vimeval.txt.html#variables" class="d">variables</a> that
are known inside the current Vim session.  Using <a href="vimfn.txt.html#expand%28%29" class="d">expand()</a> will first try using
the environment <a href="vimeval.txt.html#variables" class="d">variables</a> known inside the current Vim session.  If that
fails, <a href="insert.txt.html#a" class="d">a</a> shell will be used to expand the variable.  This can be slow, but <a href="motion.txt.html#it" class="d">it</a>
does expand all <a href="vimeval.txt.html#variables" class="d">variables</a> that the shell knows about.  Example: 
<span class="e">	:echo $shell</span>
<span class="e">	:echo expand("$shell")</span>
The first one probably doesn't echo anything, the second echoes the $shell
variable (if your shell supports it).


<span class="h">------------------------------------------------------------------------------</span>
internal variable					<span id="expr-variable" class="t">expr-variable</span>

variable		internal variable
See below <a href="vimeval.txt.html#internal-variables" class="l">internal-variables</a><a href="repeat.txt.html#." class="d">.</a>


<span class="h">------------------------------------------------------------------------------</span>
function call		<span id="expr-function" class="t">expr-function</span> <span id="E116" class="t">E116</span> <span id="E118" class="t">E118</span> <span id="E119" class="t">E119</span> <span id="E120" class="t">E120</span>

function(expr1, ...)	function call
See below <a href="vimeval.txt.html#functions" class="l">functions</a><a href="repeat.txt.html#." class="d">.</a>


<span class="h">------------------------------------------------------------------------------</span>
<a href="vimeval.txt.html#lambda" class="d">lambda</a> <a href="vimeval.txt.html#expression" class="d">expression</a>				<span id="expr-lambda" class="t">expr-lambda</span> <span id="lambda" class="t">lambda</span>

`{args <a href="vimeval.txt.html#-%3E" class="d">-&gt;</a> expr1}`	<a href="vimeval.txt.html#lambda" class="d">lambda</a> <a href="vimeval.txt.html#expression" class="d">expression</a>			<span id="E451" class="t">E451</span>

<a href="insert.txt.html#A" class="d">A</a> <a href="vimeval.txt.html#lambda" class="d">lambda</a> <a href="vimeval.txt.html#expression" class="d">expression</a> creates <a href="insert.txt.html#a" class="d">a</a> new unnamed function which returns the result of
evaluating <a href="vimeval.txt.html#expr1" class="l">expr1</a><a href="repeat.txt.html#." class="d">.</a>  Lambda expressions differ from <a href="vimeval.txt.html#user-function" class="l">user-function</a><a href="change.txt.html#s" class="d">s</a> in
the following ways:

1. The body of the <a href="vimeval.txt.html#lambda" class="d">lambda</a> <a href="vimeval.txt.html#expression" class="d">expression</a> <a href="motion.txt.html#is" class="d">is</a> an <a href="vimeval.txt.html#expr1" class="l">expr1</a> and not <a href="insert.txt.html#a" class="d">a</a> sequence of <a href="intro.txt.html#Ex" class="l">Ex</a>
   commands.
2. The prefix "a:" should not be used <a href="luaref.txt.html#for" class="d">for</a> arguments.  E.g.: 
<span class="e">	:let F = {arg1, arg2 -&gt; arg1 - arg2}</span>
<span class="e">	:echo F(5, 2)</span>
	3

The arguments are optional.  Example: 
<span class="e">	:let F = {-&gt; 'error function'}</span>
<span class="e">	:echo F('ignored')</span>
	error function
							<span id="closure" class="t">closure</span>
Lambda expressions can access outer scope <a href="vimeval.txt.html#variables" class="d">variables</a> and arguments.  This <a href="motion.txt.html#is" class="d">is</a>
often called <a href="insert.txt.html#a" class="d">a</a> closure.  Example where "<a href="insert.txt.html#i" class="d">i</a>" and "a:arg" are used in <a href="insert.txt.html#a" class="d">a</a> <a href="vimeval.txt.html#lambda" class="d">lambda</a>
while they already exist in the function scope.  They remain valid even after
the function returns: 
<span class="e">	:function Foo(arg)</span>
<span class="e">	:  let i = 3</span>
<span class="e">	:  return {x -&gt; x + i - a:arg}</span>
<span class="e">	:endfunction</span>
<span class="e">	:let Bar = Foo(4)</span>
<span class="e">	:echo Bar(6)</span>
	5
<span class="n">Note</span> that the <a href="vimeval.txt.html#variables" class="d">variables</a> must exist in the outer scope before the <a href="vimeval.txt.html#lambda" class="d">lambda</a> <a href="motion.txt.html#is" class="d">is</a>
defined <a href="luaref.txt.html#for" class="d">for</a> this to work.  See also <a href="userfunc.txt.html#%3Afunc-closure" class="l">:func-closure</a><a href="repeat.txt.html#." class="d">.</a>

Lambda and <a href="vimeval.txt.html#closure" class="d">closure</a> <a href="support.txt.html#support" class="d">support</a> can be checked with: 
<span class="e">	if has('lambda')</span>
<span class="e"></span>
Examples <a href="luaref.txt.html#for" class="d">for</a> using <a href="insert.txt.html#a" class="d">a</a> <a href="vimeval.txt.html#lambda" class="d">lambda</a> <a href="vimeval.txt.html#expression" class="d">expression</a> with <a href="vimfn.txt.html#sort%28%29" class="l">sort()</a><a href="motion.txt.html#%2C" class="d">,</a> <a href="vimfn.txt.html#map%28%29" class="l">map()</a> and <a href="vimfn.txt.html#filter%28%29" class="l">filter()</a><a href="cmdline.txt.html#%3A" class="d">:</a> 
<span class="e">	:echo map([1, 2, 3], {idx, val -&gt; val + 1})</span>
	[2, 3, 4] 
<span class="e">	:echo sort([3,7,2,1,4], {a, b -&gt; a - b})</span>
	[1, 2, 3, 4, 7]

The <a href="vimeval.txt.html#lambda" class="d">lambda</a> <a href="vimeval.txt.html#expression" class="d">expression</a> <a href="motion.txt.html#is" class="d">is</a> also useful <a href="luaref.txt.html#for" class="d">for</a> jobs and timers: 
<span class="e">	:let timer = timer_start(500,</span>
<span class="e">			\ {-&gt; execute("echo 'Handler called'", "")},</span>
<span class="e">			\ {'repeat': 3})</span>
	Handler called
	Handler called
	Handler called

<span class="n">Note</span> that <a href="motion.txt.html#it" class="d">it</a> <a href="motion.txt.html#is" class="d">is</a> possible to cause memory to be used and not freed if the
<a href="vimeval.txt.html#closure" class="d">closure</a> <a href="motion.txt.html#is" class="d">is</a> referenced by the <a href="repeat.txt.html#context" class="d">context</a> <a href="motion.txt.html#it" class="d">it</a> depends on: 
<span class="e">	function Function()</span>
<span class="e">	   let x = 0</span>
<span class="e">	   let F = {-&gt; x}</span>
<span class="e">	 endfunction</span>
The <a href="vimeval.txt.html#closure" class="d">closure</a> uses "<a href="change.txt.html#x" class="d">x</a>" from the function scope, and "<a href="motion.txt.html#F" class="d">F</a>" in that same scope
refers to the closure.  This cycle results in the memory not being freed.
Recommendation: don't <a href="diff.txt.html#do" class="d">do</a> this.

Notice how <a href="vimfn.txt.html#execute%28%29" class="d">execute()</a> <a href="motion.txt.html#is" class="d">is</a> used to execute an <a href="intro.txt.html#Ex" class="d">Ex</a> command.  That's ugly though.


Lambda expressions have internal names like '&lt;lambda&gt;42'.  If you get an error
<a href="luaref.txt.html#for" class="d">for</a> <a href="insert.txt.html#a" class="d">a</a> <a href="vimeval.txt.html#lambda" class="d">lambda</a> expression, you can find what <a href="motion.txt.html#it" class="d">it</a> <a href="motion.txt.html#is" class="d">is</a> with the following command: 
<span class="e">	:function &lt;lambda&gt;42</span>
See also: <a href="vimeval.txt.html#numbered-function" class="l">numbered-function</a>

<span class="h">==============================================================================</span>
3. Internal variable				<span id="internal-variables" class="t">internal-variables</span> <span id="E461" class="t">E461</span>

An internal variable name can be made up of letters, digits and '_'.  But <a href="motion.txt.html#it" class="d">it</a>
cannot start with <a href="insert.txt.html#a" class="d">a</a> digit.  It's also possible to use curly braces, see
<a href="vimeval.txt.html#curly-braces-names" class="l">curly-braces-names</a><a href="repeat.txt.html#." class="d">.</a>

An internal variable <a href="motion.txt.html#is" class="d">is</a> created with the "<a href="vimeval.txt.html#%3Alet" class="d">:let</a>" command <a href="vimeval.txt.html#%3Alet" class="l">:let</a><a href="repeat.txt.html#." class="d">.</a>
An internal variable <a href="motion.txt.html#is" class="d">is</a> explicitly destroyed with the "<a href="vimeval.txt.html#%3Aunlet" class="d">:unlet</a>" command
<a href="vimeval.txt.html#%3Aunlet" class="l">:unlet</a><a href="repeat.txt.html#." class="d">.</a>
Using <a href="insert.txt.html#a" class="d">a</a> name that <a href="motion.txt.html#is" class="d">is</a> not an internal variable or refers to <a href="insert.txt.html#a" class="d">a</a> variable that has
been destroyed results in an error.

						<span id="variable-scope" class="t">variable-scope</span>
There are several name spaces <a href="luaref.txt.html#for" class="d">for</a> variables.  Which one <a href="motion.txt.html#is" class="d">is</a> to be used <a href="motion.txt.html#is" class="d">is</a>
specified by what <a href="motion.txt.html#is" class="d">is</a> prepended:

		(nothing) In <a href="insert.txt.html#a" class="d">a</a> function: local to <a href="insert.txt.html#a" class="d">a</a> function; otherwise: global
<a href="vimeval.txt.html#buffer-variable" class="l">buffer-variable</a>    <a href="vimeval.txt.html#b%3A" class="d">b:</a>  	  Local to the current buffer.
<a href="vimeval.txt.html#window-variable" class="l">window-variable</a>    <a href="vimeval.txt.html#w%3A" class="d">w:</a>  	  Local to the current window.
<a href="vimeval.txt.html#tabpage-variable" class="l">tabpage-variable</a>   <a href="vimeval.txt.html#t%3A" class="d">t:</a>  	  Local to the current <a href="intro.txt.html#tab" class="d">tab</a> page.
<a href="vimeval.txt.html#global-variable" class="l">global-variable</a>    <a href="vimeval.txt.html#g%3A" class="d">g:</a>  	  Global.
<a href="vimeval.txt.html#local-variable" class="l">local-variable</a>     <a href="vimeval.txt.html#l%3A" class="d">l:</a>  	  Local to <a href="insert.txt.html#a" class="d">a</a> function.
<a href="vimeval.txt.html#script-variable" class="l">script-variable</a>    s:  	  Local to <a href="insert.txt.html#a" class="d">a</a> <a href="repeat.txt.html#%3Asource" class="l">:source</a><a href="change.txt.html#d" class="d">d</a> Vim script.
<a href="userfunc.txt.html#function-argument" class="l">function-argument</a>  a:  	  Function argument (only inside <a href="insert.txt.html#a" class="d">a</a> function).
<a href="vimeval.txt.html#vim-variable" class="l">vim-variable</a>       <a href="vimeval.txt.html#v%3A" class="d">v:</a>  	  Global, predefined by Vim.

The scope name by itself can be used <a href="motion.txt.html#as" class="d">as</a> <a href="insert.txt.html#a" class="d">a</a> <a href="vimeval.txt.html#Dictionary" class="l">Dictionary</a><a href="repeat.txt.html#." class="d">.</a>  For example, to
delete all <a href="map.txt.html#script-local" class="d">script-local</a> variables: 
<span class="e">	:for k in keys(s:)</span>
<span class="e">	:    unlet s:[k]</span>
<span class="e">	:endfor</span>

						<span id="buffer-variable" class="t">buffer-variable</span> <span id="b%3Avar" class="t">b:var</span> <span id="b%3A" class="t">b:</span>
<a href="insert.txt.html#A" class="d">A</a> variable name that <a href="motion.txt.html#is" class="d">is</a> preceded with "<a href="vimeval.txt.html#b%3A" class="d">b:</a>" <a href="motion.txt.html#is" class="d">is</a> local to the current buffer.
Thus you can have several "b:foo" variables, one <a href="luaref.txt.html#for" class="d">for</a> each buffer.
This kind of variable <a href="motion.txt.html#is" class="d">is</a> deleted when the buffer <a href="motion.txt.html#is" class="d">is</a> wiped out or deleted with
<a href="windows.txt.html#%3Abdelete" class="l">:bdelete</a><a href="repeat.txt.html#." class="d">.</a>

One local buffer variable <a href="motion.txt.html#is" class="d">is</a> predefined:
					<span id="b%3Achangedtick" class="t">b:changedtick</span> <span id="changetick" class="t">changetick</span>
<a href="vimeval.txt.html#b%3Achangedtick" class="d">b:changedtick</a>	The total number of changes to the current buffer.  It <a href="motion.txt.html#is" class="d">is</a>
		incremented <a href="luaref.txt.html#for" class="d">for</a> each change.  An <a href="undo.txt.html#undo" class="d">undo</a> command <a href="motion.txt.html#is" class="d">is</a> also <a href="insert.txt.html#a" class="d">a</a> change
		in this case.  Resetting <a href="options.txt.html#%27modified%27" class="o">'modified'</a> when <a href="editing.txt.html#writing" class="d">writing</a> the buffer <a href="motion.txt.html#is" class="d">is</a>
		also counted.
		This can be used to perform an action only when the buffer has
		changed.  Example: 
<span class="e">		    :if my_changedtick != b:changedtick</span>
<span class="e">		    :	let my_changedtick = b:changedtick</span>
<span class="e">		    :	call My_Update()</span>
<span class="e">		    :endif</span>
		You cannot change or delete the <a href="vimeval.txt.html#b%3Achangedtick" class="d">b:changedtick</a> variable.

						<span id="window-variable" class="t">window-variable</span> <span id="w%3Avar" class="t">w:var</span> <span id="w%3A" class="t">w:</span>
<a href="insert.txt.html#A" class="d">A</a> variable name that <a href="motion.txt.html#is" class="d">is</a> preceded with "<a href="vimeval.txt.html#w%3A" class="d">w:</a>" <a href="motion.txt.html#is" class="d">is</a> local to the current window.  It
<a href="motion.txt.html#is" class="d">is</a> deleted when the <a href="windows.txt.html#window" class="d">window</a> <a href="motion.txt.html#is" class="d">is</a> closed.

						<span id="tabpage-variable" class="t">tabpage-variable</span> <span id="t%3Avar" class="t">t:var</span> <span id="t%3A" class="t">t:</span>
<a href="insert.txt.html#A" class="d">A</a> variable name that <a href="motion.txt.html#is" class="d">is</a> preceded with "<a href="vimeval.txt.html#t%3A" class="d">t:</a>" <a href="motion.txt.html#is" class="d">is</a> local to the current <a href="intro.txt.html#tab" class="d">tab</a> page,
It <a href="motion.txt.html#is" class="d">is</a> deleted when the <a href="intro.txt.html#tab" class="d">tab</a> page <a href="motion.txt.html#is" class="d">is</a> closed.

						<span id="global-variable" class="t">global-variable</span> <span id="g%3Avar" class="t">g:var</span> <span id="g%3A" class="t">g:</span>
Inside <a href="vimeval.txt.html#functions" class="d">functions</a> global <a href="vimeval.txt.html#variables" class="d">variables</a> are accessed with "<a href="vimeval.txt.html#g%3A" class="d">g:</a>"<a href="repeat.txt.html#." class="d">.</a>  Omitting this will
access <a href="insert.txt.html#a" class="d">a</a> variable local to <a href="insert.txt.html#a" class="d">a</a> function.  But "<a href="vimeval.txt.html#g%3A" class="d">g:</a>" can also be used in any other
place if you like.

						<span id="local-variable" class="t">local-variable</span> <span id="l%3Avar" class="t">l:var</span> <span id="l%3A" class="t">l:</span>
Inside <a href="vimeval.txt.html#functions" class="d">functions</a> local <a href="vimeval.txt.html#variables" class="d">variables</a> are accessed without prepending anything.
But you can also prepend "<a href="vimeval.txt.html#l%3A" class="d">l:</a>" if you like.  However, without prepending "<a href="vimeval.txt.html#l%3A" class="d">l:</a>"
you may run into reserved variable names.  For example "<a href="intro.txt.html#count" class="d">count</a>"<a href="repeat.txt.html#." class="d">.</a>  By itself <a href="motion.txt.html#it" class="d">it</a>
refers to "<a href="vvars.txt.html#v%3Acount" class="d">v:count</a>"<a href="repeat.txt.html#." class="d">.</a>  Using "l:count" you can have <a href="insert.txt.html#a" class="d">a</a> local variable with the
same name.

						<span id="script-variable" class="t">script-variable</span> <span id="s%3Avar" class="t">s:var</span>
In <a href="insert.txt.html#a" class="d">a</a> Vim <a href="usr_41.txt.html#script" class="d">script</a> <a href="vimeval.txt.html#variables" class="d">variables</a> <a href="starting.txt.html#starting" class="d">starting</a> with "s:" can be used.  They cannot be
accessed from outside of the scripts, thus are local to the script.

They can be used in:
<a href="motion.txt.html#-" class="d">-</a> commands executed while the <a href="usr_41.txt.html#script" class="d">script</a> <a href="motion.txt.html#is" class="d">is</a> sourced
<a href="motion.txt.html#-" class="d">-</a> <a href="vimeval.txt.html#functions" class="d">functions</a> defined in the <a href="usr_41.txt.html#script" class="d">script</a>
<a href="motion.txt.html#-" class="d">-</a> autocommands defined in the <a href="usr_41.txt.html#script" class="d">script</a>
<a href="motion.txt.html#-" class="d">-</a> <a href="vimeval.txt.html#functions" class="d">functions</a> and autocommands defined in <a href="vimeval.txt.html#functions" class="d">functions</a> and autocommands which were
  defined in the <a href="usr_41.txt.html#script" class="d">script</a> (recursively)
<a href="motion.txt.html#-" class="d">-</a> user defined commands defined in the <a href="usr_41.txt.html#script" class="d">script</a>
Thus not in:
<a href="motion.txt.html#-" class="d">-</a> other scripts sourced from this one
<a href="motion.txt.html#-" class="d">-</a> mappings
<a href="motion.txt.html#-" class="d">-</a> <a href="gui.txt.html#menus" class="d">menus</a>
<a href="motion.txt.html#-" class="d">-</a> etc.

Script <a href="vimeval.txt.html#variables" class="d">variables</a> can be used to avoid conflicts with global variable names.
Take this example: 
<span class="e"></span>
<span class="e">	let s:counter = 0</span>
<span class="e">	function MyCounter()</span>
<span class="e">	  let s:counter = s:counter + 1</span>
<span class="e">	  echo s:counter</span>
<span class="e">	endfunction</span>
<span class="e">	command Tick call MyCounter()</span>
<span class="e"></span>
You can now invoke "Tick" from any script, and the "s:counter" variable in
that <a href="usr_41.txt.html#script" class="d">script</a> will not be changed, only the "s:counter" in the <a href="usr_41.txt.html#script" class="d">script</a> where
"Tick" was defined <a href="motion.txt.html#is" class="d">is</a> used.

Another example that does the same: 
<span class="e"></span>
<span class="e">	let s:counter = 0</span>
<span class="e">	command Tick let s:counter = s:counter + 1 | echo s:counter</span>
<span class="e"></span>
When calling <a href="insert.txt.html#a" class="d">a</a> function and invoking <a href="insert.txt.html#a" class="d">a</a> user-defined command, the <a href="repeat.txt.html#context" class="d">context</a> <a href="luaref.txt.html#for" class="d">for</a>
<a href="usr_41.txt.html#script" class="d">script</a> <a href="vimeval.txt.html#variables" class="d">variables</a> <a href="motion.txt.html#is" class="d">is</a> set to the <a href="usr_41.txt.html#script" class="d">script</a> where the function or command was
defined.

The <a href="usr_41.txt.html#script" class="d">script</a> <a href="vimeval.txt.html#variables" class="d">variables</a> are also available when <a href="insert.txt.html#a" class="d">a</a> function <a href="motion.txt.html#is" class="d">is</a> defined inside <a href="insert.txt.html#a" class="d">a</a>
function that <a href="motion.txt.html#is" class="d">is</a> defined in <a href="insert.txt.html#a" class="d">a</a> script.  Example: 
<span class="e"></span>
<span class="e">	let s:counter = 0</span>
<span class="e">	function StartCounting(incr)</span>
<span class="e">	  if a:incr</span>
<span class="e">	    function MyCounter()</span>
<span class="e">	      let s:counter = s:counter + 1</span>
<span class="e">	    endfunction</span>
<span class="e">	  else</span>
<span class="e">	    function MyCounter()</span>
<span class="e">	      let s:counter = s:counter - 1</span>
<span class="e">	    endfunction</span>
<span class="e">	  endif</span>
<span class="e">	endfunction</span>
<span class="e"></span>
This defines the MyCounter() function either <a href="luaref.txt.html#for" class="d">for</a> counting up or counting down
when calling StartCounting().  It doesn't matter from where StartCounting() <a href="motion.txt.html#is" class="d">is</a>
called, the s:counter variable will be accessible in MyCounter().

When the same <a href="usr_41.txt.html#script" class="d">script</a> <a href="motion.txt.html#is" class="d">is</a> sourced again <a href="motion.txt.html#it" class="d">it</a> will use the same <a href="usr_41.txt.html#script" class="d">script</a> variables.
They will remain valid <a href="motion.txt.html#as" class="d">as</a> long <a href="motion.txt.html#as" class="d">as</a> Vim <a href="motion.txt.html#is" class="d">is</a> running.  This can be used to
maintain <a href="insert.txt.html#a" class="d">a</a> counter: 
<span class="e"></span>
<span class="e">	if !exists("s:counter")</span>
<span class="e">	  let s:counter = 1</span>
<span class="e">	  echo "script executed for the first time"</span>
<span class="e">	else</span>
<span class="e">	  let s:counter = s:counter + 1</span>
<span class="e">	  echo "script executed " .. s:counter .. " times now"</span>
<span class="e">	endif</span>
<span class="e"></span>
<span class="n">Note</span> that this means that <a href="filetype.txt.html#filetype" class="d">filetype</a> plugins don't get <a href="insert.txt.html#a" class="d">a</a> different set of <a href="usr_41.txt.html#script" class="d">script</a>
<a href="vimeval.txt.html#variables" class="d">variables</a> <a href="luaref.txt.html#for" class="d">for</a> each buffer.  Use local buffer <a href="vimeval.txt.html#variables" class="d">variables</a> instead <a href="vimeval.txt.html#b%3Avar" class="l">b:var</a><a href="repeat.txt.html#." class="d">.</a>


<span class="c">PREDEFINED VIM VARIABLES</span>			<span id="vim-variable" class="t">vim-variable</span> <span id="v%3Avar" class="t">v:var</span> <span id="v%3A" class="t">v:</span>
								<span id="E963" class="t">E963</span>

The alphabetic <a href="vimeval.txt.html#list" class="d">list</a> of all builtin <a href="vimeval.txt.html#variables" class="d">variables</a> and details are in <a href="insert.txt.html#a" class="d">a</a> separate
<a href="helphelp.txt.html#help" class="d">help</a> file: <a href="vvars.txt.html#vvars" class="l">vvars</a><a href="repeat.txt.html#." class="d">.</a>

<span class="h">==============================================================================</span>
4. Builtin Functions				<span id="vim-function" class="t">vim-function</span> <span id="functions" class="t">functions</span>

The Vimscript subsystem (referred to <a href="motion.txt.html#as" class="d">as</a> "<a href="vimeval.txt.html#eval" class="d">eval</a>" internally) provides builtin
functions.  Scripts can also define <a href="vimeval.txt.html#user-function" class="l">user-function</a>s.

See <a href="usr_41.txt.html#function-list" class="l">function-list</a> to browse <a href="vimeval.txt.html#functions" class="d">functions</a> by topic.

The alphabetic <a href="vimeval.txt.html#list" class="d">list</a> of all builtin <a href="vimeval.txt.html#functions" class="d">functions</a> and details are in <a href="insert.txt.html#a" class="d">a</a> separate
<a href="helphelp.txt.html#help" class="d">help</a> file: <a href="vimfn.txt.html#builtin-functions" class="l">builtin-functions</a><a href="repeat.txt.html#." class="d">.</a>

<span class="h">==============================================================================</span>
5. Defining <a href="vimeval.txt.html#functions" class="d">functions</a>					<span id="user-function" class="t">user-function</span>

New <a href="vimeval.txt.html#functions" class="d">functions</a> can be defined.  These can be called just like builtin
functions.  The function takes arguments, executes <a href="insert.txt.html#a" class="d">a</a> sequence of <a href="intro.txt.html#Ex" class="d">Ex</a> commands
and can return <a href="insert.txt.html#a" class="d">a</a> value.

You can find most information about defining <a href="vimeval.txt.html#functions" class="d">functions</a> in <a href="userfunc.txt.html#userfunc.txt" class="l">userfunc.txt</a><a href="repeat.txt.html#." class="d">.</a>

<span class="h">==============================================================================</span>
6. Curly braces names					<span id="curly-braces-names" class="t">curly-braces-names</span>

In most places where you can use <a href="insert.txt.html#a" class="d">a</a> variable, you can use <a href="insert.txt.html#a" class="d">a</a> "curly braces name"
variable.  This <a href="motion.txt.html#is" class="d">is</a> <a href="insert.txt.html#a" class="d">a</a> regular variable name with one or more expressions
wrapped in braces <a href="intro.txt.html#%7B%7D" class="d">{}</a> like this: 
<span class="e">	my_{adjective}_variable</span>
<span class="e"></span>
When Vim encounters this, <a href="motion.txt.html#it" class="d">it</a> evaluates the <a href="vimeval.txt.html#expression" class="d">expression</a> inside the braces, puts
that in place of the expression, and re-interprets the whole <a href="motion.txt.html#as" class="d">as</a> <a href="insert.txt.html#a" class="d">a</a> variable
name.  So in the above example, if the variable "adjective" was set to
"noisy"<a href="motion.txt.html#%2C" class="d">,</a> then the <a href="intro.txt.html#reference" class="d">reference</a> would be to "my_noisy_variable"<a href="motion.txt.html#%2C" class="d">,</a> whereas if
"adjective" was set to "quiet"<a href="motion.txt.html#%2C" class="d">,</a> then <a href="motion.txt.html#it" class="d">it</a> would be to "my_quiet_variable"<a href="repeat.txt.html#." class="d">.</a>

One application <a href="luaref.txt.html#for" class="d">for</a> this <a href="motion.txt.html#is" class="d">is</a> to create <a href="insert.txt.html#a" class="d">a</a> set of <a href="vimeval.txt.html#variables" class="d">variables</a> governed by an option
value.  For example, the statement 
<span class="e">	echo my_{&amp;background}_message</span>
<span class="e"></span>
would output the contents of "my_dark_message" or "my_light_message" depending
on the current value of <a href="options.txt.html#%27background%27" class="o">'background'</a>.

You can use multiple brace pairs: 
<span class="e">	echo my_{adverb}_{adjective}_message</span>
..or even nest them: 
<span class="e">	echo my_{ad{end_of_word}}_message</span>
where "end_of_word" <a href="motion.txt.html#is" class="d">is</a> either "verb" or "jective"<a href="repeat.txt.html#." class="d">.</a>

However, the <a href="vimeval.txt.html#expression" class="d">expression</a> inside the braces must evaluate to <a href="insert.txt.html#a" class="d">a</a> valid single
variable name, e.g. this <a href="motion.txt.html#is" class="d">is</a> invalid: 
<span class="e">	:let foo='a + b'</span>
<span class="e">	:echo c{foo}d</span>
.. since the result of expansion <a href="motion.txt.html#is" class="d">is</a> "ca <a href="motion.txt.html#%2B" class="d">+</a> bd"<a href="motion.txt.html#%2C" class="d">,</a> which <a href="motion.txt.html#is" class="d">is</a> not <a href="insert.txt.html#a" class="d">a</a> variable name.

						<span id="curly-braces-function-names" class="t">curly-braces-function-names</span>
You can call and define <a href="vimeval.txt.html#functions" class="d">functions</a> by an evaluated name in <a href="insert.txt.html#a" class="d">a</a> similar way.
Example: 
<span class="e">	:let func_end='whizz'</span>
<span class="e">	:call my_func_{func_end}(parameter)</span>
<span class="e"></span>
This would call the function "my_func_whizz(parameter)"<a href="repeat.txt.html#." class="d">.</a>

This does NOT work: 
<span class="e">  :let i = 3</span>
<span class="e">  :let @{i} = ''  " error</span>
<span class="e">  :echo @{i}      " error</span>
<span class="e"></span>
<span class="h">==============================================================================</span>
7. Commands						<span id="expression-commands" class="t">expression-commands</span>

<a href="vimeval.txt.html#%3Alet" class="d">:let</a> <span class="s">{var-name}</span> <a href="change.txt.html#%3D" class="d">=</a> <span class="s">{expr1}</span>				<span id="%3Alet" class="t">:let</span> <span id="E18" class="t">E18</span>
			Set internal variable <span class="s">{var-name}</span> to the result of the
			<a href="vimeval.txt.html#expression" class="d">expression</a> <span class="s">{expr1}</span>.  The variable will get the type
			from the <span class="s">{expr}</span>.  If <span class="s">{var-name}</span> didn't exist yet, <a href="motion.txt.html#it" class="d">it</a>
			<a href="motion.txt.html#is" class="d">is</a> created.

<a href="vimeval.txt.html#%3Alet" class="d">:let</a> <span class="s">{var-name}</span>[<span class="s">{idx}</span>] <a href="change.txt.html#%3D" class="d">=</a> <span class="s">{expr1}</span>			<span id="E689" class="t">E689</span>
			Set <a href="insert.txt.html#a" class="d">a</a> <a href="vimeval.txt.html#list" class="d">list</a> item to the result of the <a href="vimeval.txt.html#expression" class="d">expression</a>
			<span class="s">{expr1}</span>.  <span class="s">{var-name}</span> must refer to <a href="insert.txt.html#a" class="d">a</a> <a href="vimeval.txt.html#list" class="d">list</a> and <span class="s">{idx}</span>
			must be <a href="insert.txt.html#a" class="d">a</a> valid <a href="index.txt.html#index" class="d">index</a> in that list.  For nested <a href="vimeval.txt.html#list" class="d">list</a>
			the <a href="index.txt.html#index" class="d">index</a> can be repeated.
			This cannot be used to add an item to <a href="insert.txt.html#a" class="d">a</a> <a href="vimeval.txt.html#List" class="l">List</a><a href="repeat.txt.html#." class="d">.</a>
			This cannot be used to set <a href="insert.txt.html#a" class="d">a</a> byte in <a href="insert.txt.html#a" class="d">a</a> String.  You
			can <a href="diff.txt.html#do" class="d">do</a> that like this: 
<span class="e">				:let var = var[0:2] .. 'X' .. var[4:]</span>
			When <span class="s">{var-name}</span> <a href="motion.txt.html#is" class="d">is</a> <a href="insert.txt.html#a" class="d">a</a> <a href="vimeval.txt.html#Blob" class="l">Blob</a> then <span class="s">{idx}</span> can be the
			length of the blob, in which <a href="change.txt.html#case" class="d">case</a> one byte <a href="motion.txt.html#is" class="d">is</a>
			appended.

							<span id="E711" class="t">E711</span> <span id="E719" class="t">E719</span>
<a href="vimeval.txt.html#%3Alet" class="d">:let</a> <span class="s">{var-name}</span>[<span class="s">{idx1}</span>:<span class="s">{idx2}</span>] <a href="change.txt.html#%3D" class="d">=</a> <span class="s">{expr1}</span>		<span id="E708" class="t">E708</span> <span id="E709" class="t">E709</span> <span id="E710" class="t">E710</span>
			Set <a href="insert.txt.html#a" class="d">a</a> sequence of items in <a href="insert.txt.html#a" class="d">a</a> <a href="vimeval.txt.html#List" class="l">List</a> to the result of
			the <a href="vimeval.txt.html#expression" class="d">expression</a> <span class="s">{expr1}</span>, which must be <a href="insert.txt.html#a" class="d">a</a> <a href="vimeval.txt.html#list" class="d">list</a> with the
			correct number of items.
			<span class="s">{idx1}</span> can be omitted, zero <a href="motion.txt.html#is" class="d">is</a> used instead.
			<span class="s">{idx2}</span> can be omitted, meaning the <a href="intro.txt.html#end" class="d">end</a> of the list.
			When the selected range of items <a href="motion.txt.html#is" class="d">is</a> partly past the
			<a href="intro.txt.html#end" class="d">end</a> of the list, items will be added.

			<span id="%3Alet%2B%3D" class="t">:let+=</span> <span id="%3Alet-%3D" class="t">:let-=</span> <span id="%3Aletstar%3D" class="t">:letstar=</span>
			<span id="%3Alet%2F%3D" class="t">:let/=</span> <span id="%3Alet%25%3D" class="t">:let%=</span> <span id="%3Alet.%3D" class="t">:let.=</span> <span id="%3Alet..%3D" class="t">:let..=</span> <span id="E734" class="t">E734</span>
<a href="vimeval.txt.html#%3Alet" class="d">:let</a> <span class="s">{var}</span> += <span class="s">{expr1}</span>	Like "<a href="vimeval.txt.html#%3Alet" class="d">:let</a> <span class="s">{var}</span> <a href="change.txt.html#%3D" class="d">=</a> <span class="s">{var}</span> <a href="motion.txt.html#%2B" class="d">+</a> <span class="s">{expr1}</span>"<a href="repeat.txt.html#." class="d">.</a>
<a href="vimeval.txt.html#%3Alet" class="d">:let</a> <span class="s">{var}</span> -= <span class="s">{expr1}</span>	Like "<a href="vimeval.txt.html#%3Alet" class="d">:let</a> <span class="s">{var}</span> <a href="change.txt.html#%3D" class="d">=</a> <span class="s">{var}</span> <a href="motion.txt.html#-" class="d">-</a> <span class="s">{expr1}</span>"<a href="repeat.txt.html#." class="d">.</a>
`:let <span class="s">{var}</span> *<a href="change.txt.html#%3D" class="d">=</a> <span class="s">{expr1}</span>`	Like "<a href="vimeval.txt.html#%3Alet" class="d">:let</a> <span class="s">{var}</span> <a href="change.txt.html#%3D" class="d">=</a> <span class="s">{var}</span> * <span class="s">{expr1}</span>"<a href="repeat.txt.html#." class="d">.</a>
<a href="vimeval.txt.html#%3Alet" class="d">:let</a> <span class="s">{var}</span> /= <span class="s">{expr1}</span>	Like "<a href="vimeval.txt.html#%3Alet" class="d">:let</a> <span class="s">{var}</span> <a href="change.txt.html#%3D" class="d">=</a> <span class="s">{var}</span> <a href="pattern.txt.html#%2F" class="d">/</a> <span class="s">{expr1}</span>"<a href="repeat.txt.html#." class="d">.</a>
<a href="vimeval.txt.html#%3Alet" class="d">:let</a> <span class="s">{var}</span> %= <span class="s">{expr1}</span>	Like "<a href="vimeval.txt.html#%3Alet" class="d">:let</a> <span class="s">{var}</span> <a href="change.txt.html#%3D" class="d">=</a> <span class="s">{var}</span> <a href="motion.txt.html#%25" class="d">%</a> <span class="s">{expr1}</span>"<a href="repeat.txt.html#." class="d">.</a>
<a href="vimeval.txt.html#%3Alet" class="d">:let</a> <span class="s">{var}</span> .= <span class="s">{expr1}</span>	Like "<a href="vimeval.txt.html#%3Alet" class="d">:let</a> <span class="s">{var}</span> <a href="change.txt.html#%3D" class="d">=</a> <span class="s">{var}</span> <a href="repeat.txt.html#." class="d">.</a> <span class="s">{expr1}</span>"<a href="repeat.txt.html#." class="d">.</a>
<a href="vimeval.txt.html#%3Alet" class="d">:let</a> <span class="s">{var}</span> ..= <span class="s">{expr1}</span>	Like "<a href="vimeval.txt.html#%3Alet" class="d">:let</a> <span class="s">{var}</span> <a href="change.txt.html#%3D" class="d">=</a> <span class="s">{var}</span> .. <span class="s">{expr1}</span>"<a href="repeat.txt.html#." class="d">.</a>
			These fail if <span class="s">{var}</span> was not set yet and when the type
			of <span class="s">{var}</span> and <span class="s">{expr1}</span> don't fit the operator.
			<span class="e">+=</span> modifies <a href="insert.txt.html#a" class="d">a</a> <a href="vimeval.txt.html#List" class="l">List</a> or <a href="insert.txt.html#a" class="d">a</a> <a href="vimeval.txt.html#Blob" class="l">Blob</a> in-place instead of
			creating <a href="insert.txt.html#a" class="d">a</a> new one.


<a href="vimeval.txt.html#%3Alet" class="d">:let</a> ${env-name} <a href="change.txt.html#%3D" class="d">=</a> <span class="s">{expr1}</span>			<span id="%3Alet-environment" class="t">:let-environment</span> <span id="%3Alet-%24" class="t">:let-$</span>
			Set environment variable <span class="s">{env-name}</span> to the result of
			the <a href="vimeval.txt.html#expression" class="d">expression</a> <span class="s">{expr1}</span>.  The type <a href="motion.txt.html#is" class="d">is</a> always String.
<a href="vimeval.txt.html#%3Alet" class="d">:let</a> ${env-name} .= <span class="s">{expr1}</span>
			Append <span class="s">{expr1}</span> to the environment variable <span class="s">{env-name}</span>.
			If the environment variable didn't exist yet this
			works like "<a href="change.txt.html#%3D" class="d">=</a>"<a href="repeat.txt.html#." class="d">.</a>

<a href="vimeval.txt.html#%3Alet" class="d">:let</a> @{reg-name} <a href="change.txt.html#%3D" class="d">=</a> <span class="s">{expr1}</span>			<span id="%3Alet-register" class="t">:let-register</span> <span id="%3Alet-%40" class="t">:let-@</span>
			Write the result of the <a href="vimeval.txt.html#expression" class="d">expression</a> <span class="s">{expr1}</span> in <a href="intro.txt.html#register" class="d">register</a>
			<span class="s">{reg-name}</span>.  <span class="s">{reg-name}</span> must be <a href="insert.txt.html#a" class="d">a</a> single letter, and
			must be the name of <a href="insert.txt.html#a" class="d">a</a> writable <a href="intro.txt.html#register" class="d">register</a> (see
			<a href="change.txt.html#registers" class="l">registers</a>).  "<a href="repeat.txt.html#%40%40" class="d">@@</a>" can be used <a href="luaref.txt.html#for" class="d">for</a> the unnamed
			register, "<a href="change.txt.html#%40%2F" class="d">@/</a>" <a href="luaref.txt.html#for" class="d">for</a> the search pattern.
			If the result of <span class="s">{expr1}</span> ends in <a href="insert.txt.html#a" class="d">a</a> <a href="motion.txt.html#%3CCR%3E" class="s">&lt;CR&gt;</a> or <a href="motion.txt.html#%3CNL%3E" class="s">&lt;NL&gt;</a>, the
			<a href="intro.txt.html#register" class="d">register</a> will be linewise, otherwise <a href="motion.txt.html#it" class="d">it</a> will be set to
			charwise.
			This can be used to clear the last search pattern: 
<span class="e">				:let @/ = ""</span>
			This <a href="motion.txt.html#is" class="d">is</a> different from searching <a href="luaref.txt.html#for" class="d">for</a> an empty string,
			that would match everywhere.

<a href="vimeval.txt.html#%3Alet" class="d">:let</a> @{reg-name} .= <span class="s">{expr1}</span>
			Append <span class="s">{expr1}</span> to <a href="intro.txt.html#register" class="d">register</a> <span class="s">{reg-name}</span>.  If the
			<a href="intro.txt.html#register" class="d">register</a> was empty it's like setting <a href="motion.txt.html#it" class="d">it</a> to <span class="s">{expr1}</span>.

<a href="vimeval.txt.html#%3Alet" class="d">:let</a> &amp;{option-name} <a href="change.txt.html#%3D" class="d">=</a> <span class="s">{expr1}</span>			<span id="%3Alet-option" class="t">:let-option</span> <span id="%3Alet-%26" class="t">:let-&amp;</span>
			Set option <span class="s">{option-name}</span> to the result of the
			<a href="vimeval.txt.html#expression" class="d">expression</a> <span class="s">{expr1}</span>.  <a href="insert.txt.html#A" class="d">A</a> <a href="vimeval.txt.html#String" class="d">String</a> or <a href="vimeval.txt.html#Number" class="d">Number</a> value <a href="motion.txt.html#is" class="d">is</a>
			always converted to the type of the option.
			For an option local to <a href="insert.txt.html#a" class="d">a</a> <a href="windows.txt.html#window" class="d">window</a> or buffer the effect
			<a href="motion.txt.html#is" class="d">is</a> just like using the <a href="options.txt.html#%3Aset" class="l">:set</a> command: both the local
			value and the global value are changed.
			Example: 
<span class="e">				:let &amp;path = &amp;path .. ',/usr/local/include'</span>
<span class="e"></span>
<a href="vimeval.txt.html#%3Alet" class="d">:let</a> &amp;{option-name} .= <span class="s">{expr1}</span>
			For <a href="insert.txt.html#a" class="d">a</a> <a href="vimeval.txt.html#string" class="d">string</a> option: Append <span class="s">{expr1}</span> to the value.
			Does not <a href="insert.txt.html#insert" class="d">insert</a> <a href="insert.txt.html#a" class="d">a</a> comma like <a href="options.txt.html#%3Aset%2B%3D" class="l">:set+=</a><a href="repeat.txt.html#." class="d">.</a>

<a href="vimeval.txt.html#%3Alet" class="d">:let</a> &amp;{option-name} += <span class="s">{expr1}</span>
<a href="vimeval.txt.html#%3Alet" class="d">:let</a> &amp;{option-name} -= <span class="s">{expr1}</span>
			For <a href="insert.txt.html#a" class="d">a</a> number or <a href="options.txt.html#boolean" class="d">boolean</a> option: Add or subtract
			<span class="s">{expr1}</span>.

<a href="vimeval.txt.html#%3Alet" class="d">:let</a> &amp;l:{option-name} <a href="change.txt.html#%3D" class="d">=</a> <span class="s">{expr1}</span>
<a href="vimeval.txt.html#%3Alet" class="d">:let</a> &amp;l:{option-name} .= <span class="s">{expr1}</span>
<a href="vimeval.txt.html#%3Alet" class="d">:let</a> &amp;l:{option-name} += <span class="s">{expr1}</span>
<a href="vimeval.txt.html#%3Alet" class="d">:let</a> &amp;l:{option-name} -= <span class="s">{expr1}</span>
			Like above, but only set the local value of an option
			(if there <a href="motion.txt.html#is" class="d">is</a> one).  Works like <a href="options.txt.html#%3Asetlocal" class="l">:setlocal</a><a href="repeat.txt.html#." class="d">.</a>

<a href="vimeval.txt.html#%3Alet" class="d">:let</a> &amp;g:{option-name} <a href="change.txt.html#%3D" class="d">=</a> <span class="s">{expr1}</span>
<a href="vimeval.txt.html#%3Alet" class="d">:let</a> &amp;g:{option-name} .= <span class="s">{expr1}</span>
<a href="vimeval.txt.html#%3Alet" class="d">:let</a> &amp;g:{option-name} += <span class="s">{expr1}</span>
<a href="vimeval.txt.html#%3Alet" class="d">:let</a> &amp;g:{option-name} -= <span class="s">{expr1}</span>
			Like above, but only set the global value of an option
			(if there <a href="motion.txt.html#is" class="d">is</a> one).  Works like <a href="options.txt.html#%3Asetglobal" class="l">:setglobal</a><a href="repeat.txt.html#." class="d">.</a>

<a href="vimeval.txt.html#%3Alet" class="d">:let</a> [{name1}, <span class="s">{name2}</span>, ...] <a href="change.txt.html#%3D" class="d">=</a> <span class="s">{expr1}</span>		<span id="%3Alet-unpack" class="t">:let-unpack</span> <span id="E687" class="t">E687</span> <span id="E688" class="t">E688</span>
			<span class="s">{expr1}</span> must evaluate to <a href="insert.txt.html#a" class="d">a</a> <a href="vimeval.txt.html#List" class="l">List</a><a href="repeat.txt.html#." class="d">.</a>  The first item in
			the <a href="vimeval.txt.html#list" class="d">list</a> <a href="motion.txt.html#is" class="d">is</a> assigned to <span class="s">{name1}</span>, the second item to
			<span class="s">{name2}</span>, etc.
			The number of names must match the number of items in
			the <a href="vimeval.txt.html#List" class="l">List</a><a href="repeat.txt.html#." class="d">.</a>
			Each name can be one of the items of the "<a href="vimeval.txt.html#%3Alet" class="d">:let</a>"
			command <a href="motion.txt.html#as" class="d">as</a> mentioned above.
			Example: 
<span class="e">				:let [s, item] = GetItem(s)</span>
			Detail: <span class="s">{expr1}</span> <a href="motion.txt.html#is" class="d">is</a> evaluated first, then the
			assignments are done in sequence.  This matters if
			<span class="s">{name2}</span> depends on <span class="s">{name1}</span>.  Example: 
<span class="e">				:let x = [0, 1]</span>
<span class="e">				:let i = 0</span>
<span class="e">				:let [i, x[i]] = [1, 2]</span>
<span class="e">				:echo x</span>
			The result <a href="motion.txt.html#is" class="d">is</a> [0, 2].

<a href="vimeval.txt.html#%3Alet" class="d">:let</a> [{name1}, <span class="s">{name2}</span>, ...] .= <span class="s">{expr1}</span>
<a href="vimeval.txt.html#%3Alet" class="d">:let</a> [{name1}, <span class="s">{name2}</span>, ...] += <span class="s">{expr1}</span>
<a href="vimeval.txt.html#%3Alet" class="d">:let</a> [{name1}, <span class="s">{name2}</span>, ...] -= <span class="s">{expr1}</span>
			Like above, but append/add/subtract the value <a href="luaref.txt.html#for" class="d">for</a> each
			<a href="vimeval.txt.html#List" class="l">List</a> item.

<a href="vimeval.txt.html#%3Alet" class="d">:let</a> [{name}, ..., <a href="motion.txt.html#%3B" class="d">;</a> <span class="s">{lastname}</span>] <a href="change.txt.html#%3D" class="d">=</a> <span class="s">{expr1}</span>				<span id="E452" class="t">E452</span>
			Like <a href="vimeval.txt.html#%3Alet-unpack" class="l">:let-unpack</a> above, but the <a href="vimeval.txt.html#List" class="l">List</a> may have more
			items than there are names.  <a href="insert.txt.html#A" class="d">A</a> <a href="vimeval.txt.html#list" class="d">list</a> of the remaining
			items <a href="motion.txt.html#is" class="d">is</a> assigned to <span class="s">{lastname}</span>.  If there are no
			remaining items <span class="s">{lastname}</span> <a href="motion.txt.html#is" class="d">is</a> set to an empty list.
			Example: 
<span class="e">				:let [a, b; rest] = ["aval", "bval", 3, 4]</span>

<a href="vimeval.txt.html#%3Alet" class="d">:let</a> [{name}, ..., <a href="motion.txt.html#%3B" class="d">;</a> <span class="s">{lastname}</span>] .= <span class="s">{expr1}</span>
<a href="vimeval.txt.html#%3Alet" class="d">:let</a> [{name}, ..., <a href="motion.txt.html#%3B" class="d">;</a> <span class="s">{lastname}</span>] += <span class="s">{expr1}</span>
<a href="vimeval.txt.html#%3Alet" class="d">:let</a> [{name}, ..., <a href="motion.txt.html#%3B" class="d">;</a> <span class="s">{lastname}</span>] -= <span class="s">{expr1}</span>
			Like above, but append/add/subtract the value <a href="luaref.txt.html#for" class="d">for</a> each
			<a href="vimeval.txt.html#List" class="l">List</a> item.

						<span id="%3Alet%3D%3C%3C" class="t">:let=&lt;&lt;</span> <span id="%3Alet-heredoc" class="t">:let-heredoc</span>
					<span id="E990" class="t">E990</span> <span id="E991" class="t">E991</span> <span id="E172" class="t">E172</span> <span id="E221" class="t">E221</span> <span id="E1145" class="t">E1145</span>
<a href="vimeval.txt.html#%3Alet" class="d">:let</a> <span class="s">{var-name}</span> =&lt;&lt; <span class="s">[trim]</span> <span class="s">[eval]</span> <span class="s">{endmarker}</span>
text...
text...
<span class="s">{endmarker}</span>
			Set internal variable <span class="s">{var-name}</span> to <a href="insert.txt.html#a" class="d">a</a> <a href="vimeval.txt.html#List" class="l">List</a>
			containing the lines of text bounded by the <a href="vimeval.txt.html#string" class="d">string</a>
			<span class="s">{endmarker}</span>.

			If "<a href="vimeval.txt.html#eval" class="d">eval</a>" <a href="motion.txt.html#is" class="d">is</a> not specified, then each line of text <a href="motion.txt.html#is" class="d">is</a>
			used <a href="motion.txt.html#as" class="d">as</a> <a href="insert.txt.html#a" class="d">a</a> <a href="vimeval.txt.html#literal-string" class="l">literal-string</a><a href="motion.txt.html#%2C" class="d">,</a> except that single quotes
			does not need to be doubled.
			If "<a href="vimeval.txt.html#eval" class="d">eval</a>" <a href="motion.txt.html#is" class="d">is</a> specified, then any Vim <a href="vimeval.txt.html#expression" class="d">expression</a> in the
			form <span class="s">{expr}</span> <a href="motion.txt.html#is" class="d">is</a> evaluated and the result replaces the
			expression, like with <a href="vimeval.txt.html#interpolated-string" class="l">interpolated-string</a><a href="repeat.txt.html#." class="d">.</a>
			Example where <a href="options.txt.html#%24HOME" class="d">$HOME</a> <a href="motion.txt.html#is" class="d">is</a> expanded: 
<span class="e">				let lines =&lt;&lt; trim eval END</span>
<span class="e">				  some text</span>
<span class="e">				  See the file {$HOME}/.vimrc</span>
<span class="e">				  more text</span>
<span class="e">				END</span>
			There can be multiple Vim expressions in <a href="insert.txt.html#a" class="d">a</a> single line
			but an <a href="vimeval.txt.html#expression" class="d">expression</a> cannot span multiple lines.  If any
			<a href="vimeval.txt.html#expression" class="d">expression</a> evaluation fails, then the assignment fails.

			<span class="s">{endmarker}</span> must not contain white space.
			<span class="s">{endmarker}</span> cannot start with <a href="insert.txt.html#a" class="d">a</a> lower <a href="change.txt.html#case" class="d">case</a> character.
			The last line should <a href="intro.txt.html#end" class="d">end</a> only with the <span class="s">{endmarker}</span>
			<a href="vimeval.txt.html#string" class="d">string</a> without any other character.  Watch out <a href="luaref.txt.html#for" class="d">for</a>
			white <a href="intro.txt.html#space" class="d">space</a> after <span class="s">{endmarker}</span>!

			Without "trim" any white <a href="intro.txt.html#space" class="d">space</a> characters in the lines
			of text are preserved.  If "trim" <a href="motion.txt.html#is" class="d">is</a> specified before
			<span class="s">{endmarker}</span>, then indentation <a href="motion.txt.html#is" class="d">is</a> stripped so you can
			do: 
<span class="e">				let text =&lt;&lt; trim END</span>
<span class="e">				   if ok</span>
<span class="e">				     echo 'done'</span>
<span class="e">				   endif</span>
<span class="e">				END</span>
			Results in: <a href="motion.txt.html#%60%5B" class="d">`[</a>"if ok"<a href="motion.txt.html#%2C" class="d">,</a> "  echo <span class="o">'done'</span>"<a href="motion.txt.html#%2C" class="d">,</a> "endif"<a href="motion.txt.html#%5D%60" class="d">]`</a>
			The marker must line up with "let" and the indentation
			of the first line <a href="motion.txt.html#is" class="d">is</a> removed from all the text lines.
			Specifically: all the leading indentation exactly
			matching the leading indentation of the first
			non-empty text line <a href="motion.txt.html#is" class="d">is</a> stripped from the input lines.
			All leading indentation exactly matching the leading
			indentation before <span class="e">let</span> <a href="motion.txt.html#is" class="d">is</a> stripped from the line
			containing <span class="s">{endmarker}</span>.  <span class="n">Note</span> that the difference
			between <a href="intro.txt.html#space" class="d">space</a> and <a href="intro.txt.html#tab" class="d">tab</a> matters here.

			If <span class="s">{var-name}</span> didn't exist yet, <a href="motion.txt.html#it" class="d">it</a> <a href="motion.txt.html#is" class="d">is</a> created.
			Cannot be followed by another command, but can be
			followed by <a href="insert.txt.html#a" class="d">a</a> comment.

			To avoid line continuation to be applied, consider
			adding 'C' to <a href="options.txt.html#%27cpoptions%27" class="o">'cpoptions'</a>: 
<span class="e">				set cpo+=C</span>
<span class="e">				let var =&lt;&lt; END</span>
<span class="e">				   \ leading backslash</span>
<span class="e">				END</span>
<span class="e">				set cpo-=C</span>

			Examples: 
<span class="e">				let var1 =&lt;&lt; END</span>
<span class="e">				Sample text 1</span>
<span class="e">				    Sample text 2</span>
<span class="e">				Sample text 3</span>
<span class="e">				END</span>
<span class="e"></span>
<span class="e">				let data =&lt;&lt; trim DATA</span>
<span class="e">					1 2 3 4</span>
<span class="e">					5 6 7 8</span>
<span class="e">				DATA</span>
<span class="e"></span>
<span class="e">				let code =&lt;&lt; trim eval CODE</span>
<span class="e">				   let v = {10 + 20}</span>
<span class="e">				   let h = "{$HOME}"</span>
<span class="e">				   let s = "{Str1()} abc {Str2()}"</span>
<span class="e">				   let n = {MyFunc(3, 4)}</span>
<span class="e">				CODE</span>

								<span id="E121" class="t">E121</span>
<a href="vimeval.txt.html#%3Alet" class="d">:let</a> <span class="s">{var-name}</span>	..	<a href="vimeval.txt.html#List" class="d">List</a> the value of variable <span class="s">{var-name}</span>.  Multiple
			variable names may be given.  Special names recognized
			here:				<span id="E738" class="t">E738</span>
			  <a href="vimeval.txt.html#g%3A" class="d">g:</a>	global <a href="vimeval.txt.html#variables" class="d">variables</a>
			  <a href="vimeval.txt.html#b%3A" class="d">b:</a>	local buffer <a href="vimeval.txt.html#variables" class="d">variables</a>
			  <a href="vimeval.txt.html#w%3A" class="d">w:</a>	local <a href="windows.txt.html#window" class="d">window</a> <a href="vimeval.txt.html#variables" class="d">variables</a>
			  <a href="vimeval.txt.html#t%3A" class="d">t:</a>	local <a href="intro.txt.html#tab" class="d">tab</a> page <a href="vimeval.txt.html#variables" class="d">variables</a>
			  s:	<a href="map.txt.html#script-local" class="d">script-local</a> <a href="vimeval.txt.html#variables" class="d">variables</a>
			  <a href="vimeval.txt.html#l%3A" class="d">l:</a>	local function <a href="vimeval.txt.html#variables" class="d">variables</a>
			  <a href="vimeval.txt.html#v%3A" class="d">v:</a>	Vim variables.

<a href="vimeval.txt.html#%3Alet" class="d">:let</a>			<a href="vimeval.txt.html#List" class="d">List</a> the values of all variables.  The type of the
			variable <a href="motion.txt.html#is" class="d">is</a> indicated before the value:
			    <span class="s">&lt;nothing&gt;</span>	<a href="vimeval.txt.html#String" class="d">String</a>
				<a href="pattern.txt.html#%23" class="d">#</a>	<a href="vimeval.txt.html#Number" class="d">Number</a>
				*	<a href="vimeval.txt.html#Funcref" class="d">Funcref</a>


:unl[et][!] <span class="s">{name}</span> <a href="userfunc.txt.html#..." class="d">...</a>				<span id="%3Aunlet" class="t">:unlet</span> <span id="%3Aunl" class="t">:unl</span> <span id="E108" class="t">E108</span> <span id="E795" class="t">E795</span>
			Remove the internal variable <span class="s">{name}</span>.  Several variable
			names can be given, they are all removed.  The name
			may also be <a href="insert.txt.html#a" class="d">a</a> <a href="vimeval.txt.html#List" class="l">List</a> or <a href="vimeval.txt.html#Dictionary" class="l">Dictionary</a> item.
			With [!] no error message <a href="motion.txt.html#is" class="d">is</a> given <a href="luaref.txt.html#for" class="d">for</a> non-existing
			variables.
			One or more items from <a href="insert.txt.html#a" class="d">a</a> <a href="vimeval.txt.html#List" class="l">List</a> can be removed: 
<span class="e">				:unlet list[3]	  " remove fourth item</span>
<span class="e">				:unlet list[3:]   " remove fourth item to last</span>
			One item from <a href="insert.txt.html#a" class="d">a</a> <a href="vimeval.txt.html#Dictionary" class="l">Dictionary</a> can be removed <a href="motion.txt.html#at" class="d">at</a> <a href="insert.txt.html#a" class="d">a</a> time: 
<span class="e">				:unlet dict['two']</span>
<span class="e">				:unlet dict.two</span>
			This <a href="motion.txt.html#is" class="d">is</a> especially useful to clean up used global
			<a href="vimeval.txt.html#variables" class="d">variables</a> and <a href="map.txt.html#script-local" class="d">script-local</a> <a href="vimeval.txt.html#variables" class="d">variables</a> (these are not
			deleted when the <a href="usr_41.txt.html#script" class="d">script</a> ends).  Function-local
			<a href="vimeval.txt.html#variables" class="d">variables</a> are automatically deleted when the function
			ends.

:unl[et] ${env-name} <a href="userfunc.txt.html#..." class="d">...</a>			<span id="%3Aunlet-environment" class="t">:unlet-environment</span> <span id="%3Aunlet-%24" class="t">:unlet-$</span>
			Remove environment variable <span class="s">{env-name}</span>.
			Can mix <span class="s">{name}</span> and ${env-name} in one <a href="vimeval.txt.html#%3Aunlet" class="d">:unlet</a> command.
			No error message <a href="motion.txt.html#is" class="d">is</a> given <a href="luaref.txt.html#for" class="d">for</a> <a href="insert.txt.html#a" class="d">a</a> non-existing
			variable, also without !.
			If the system does not <a href="support.txt.html#support" class="d">support</a> <a href="change.txt.html#deleting" class="d">deleting</a> an environment
			variable, <a href="motion.txt.html#it" class="d">it</a> <a href="motion.txt.html#is" class="d">is</a> made empty.

						<span id="%3Acons" class="t">:cons</span> <span id="%3Aconst" class="t">:const</span>
:cons[t] <span class="s">{var-name}</span> <a href="change.txt.html#%3D" class="d">=</a> <span class="s">{expr1}</span>
:cons[t] [{name1}, <span class="s">{name2}</span>, ...] <a href="change.txt.html#%3D" class="d">=</a> <span class="s">{expr1}</span>
:cons[t] [{name}, ..., <a href="motion.txt.html#%3B" class="d">;</a> <span class="s">{lastname}</span>] <a href="change.txt.html#%3D" class="d">=</a> <span class="s">{expr1}</span>
:cons[t] <span class="s">{var-name}</span> =&lt;&lt; <span class="s">[trim]</span> <span class="s">[eval]</span> <span class="s">{marker}</span>
text...
text...
<span class="s">{marker}</span>
			Similar to <a href="vimeval.txt.html#%3Alet" class="l">:let</a><a href="motion.txt.html#%2C" class="d">,</a> but additionally lock the variable
			after setting the value.  This <a href="motion.txt.html#is" class="d">is</a> the same <a href="motion.txt.html#as" class="d">as</a> locking
			the variable with <a href="vimeval.txt.html#%3Alockvar" class="l">:lockvar</a> just after <a href="vimeval.txt.html#%3Alet" class="l">:let</a><a href="motion.txt.html#%2C" class="d">,</a> thus: 
<span class="e">				:const x = 1</span>
			<a href="motion.txt.html#is" class="d">is</a> equivalent to: 
<span class="e">				:let x = 1</span>
<span class="e">				:lockvar! x</span>
			This <a href="motion.txt.html#is" class="d">is</a> useful if you want to make sure the variable
			<a href="motion.txt.html#is" class="d">is</a> not modified.  If the value <a href="motion.txt.html#is" class="d">is</a> <a href="insert.txt.html#a" class="d">a</a> <a href="vimeval.txt.html#List" class="d">List</a> or <a href="vimeval.txt.html#Dictionary" class="d">Dictionary</a>
			literal then the items also cannot be changed: 
<span class="e">				const ll = [1, 2, 3]</span>
<span class="e">				let ll[1] = 5  " Error!</span>
			Nested references are not locked: 
<span class="e">				let lvar = ['a']</span>
<span class="e">				const lconst = [0, lvar]</span>
<span class="e">				let lconst[0] = 2  " Error!</span>
<span class="e">				let lconst[1][0] = 'b'  " OK</span>
							<span id="E995" class="t">E995</span>
			It <a href="motion.txt.html#is" class="d">is</a> an error to specify an existing variable with
			<a href="vimeval.txt.html#%3Aconst" class="l">:const</a><a href="repeat.txt.html#." class="d">.</a> 
<span class="e">				:let x = 1</span>
<span class="e">				:const x = 1  " Error!</span>
							<span id="E996" class="t">E996</span>
			<span class="n">Note</span> that environment variables, option values and
			<a href="intro.txt.html#register" class="d">register</a> values cannot be used here, since they cannot
			be locked.

:cons[t]
:cons[t] <span class="s">{var-name}</span>
			If no argument <a href="motion.txt.html#is" class="d">is</a> given or only <span class="s">{var-name}</span> <a href="motion.txt.html#is" class="d">is</a> given,
			the behavior <a href="motion.txt.html#is" class="d">is</a> the same <a href="motion.txt.html#as" class="d">as</a> <a href="vimeval.txt.html#%3Alet" class="l">:let</a><a href="repeat.txt.html#." class="d">.</a>

:lockv[ar][!] <span class="s">[depth]</span> <span class="s">{name}</span> <a href="userfunc.txt.html#..." class="d">...</a>			<span id="%3Alockvar" class="t">:lockvar</span> <span id="%3Alockv" class="t">:lockv</span>
			Lock the internal variable <span class="s">{name}</span>.  Locking means that
			<a href="motion.txt.html#it" class="d">it</a> can no longer be changed (until <a href="motion.txt.html#it" class="d">it</a> <a href="motion.txt.html#is" class="d">is</a> unlocked).
			<a href="insert.txt.html#A" class="d">A</a> locked variable can be deleted: 
<span class="e">				:lockvar v</span>
<span class="e">				:let v = 'asdf'	  " fails!</span>
<span class="e">				:unlet v	  " works</span>
							<span id="E741" class="t">E741</span> <span id="E940" class="t">E940</span> <span id="E1122" class="t">E1122</span>
			If you try to change <a href="insert.txt.html#a" class="d">a</a> locked variable you get an
			error message: "E741: Value <a href="motion.txt.html#is" class="d">is</a> locked: <span class="s">{name}</span>"<a href="repeat.txt.html#." class="d">.</a>
			If you try to lock or unlock <a href="insert.txt.html#a" class="d">a</a> built-in variable you
			will get an error message "E940: Cannot lock or unlock
			variable <span class="s">{name}</span>"<a href="repeat.txt.html#." class="d">.</a>

			<span class="s">[depth]</span> <a href="motion.txt.html#is" class="d">is</a> relevant when locking <a href="insert.txt.html#a" class="d">a</a> <a href="vimeval.txt.html#List" class="l">List</a> or
			<a href="vimeval.txt.html#Dictionary" class="l">Dictionary</a><a href="repeat.txt.html#." class="d">.</a>  It specifies how deep the locking goes:
				<a href="motion.txt.html#0" class="d">0</a>	Lock the variable <span class="s">{name}</span> but not its
					value.
				1	Lock the <a href="vimeval.txt.html#List" class="l">List</a> or <a href="vimeval.txt.html#Dictionary" class="l">Dictionary</a> itself,
					cannot add or remove items, but can
					still change their values.
				2	Also lock the values, cannot change
					the items.  If an item <a href="motion.txt.html#is" class="d">is</a> <a href="insert.txt.html#a" class="d">a</a> <a href="vimeval.txt.html#List" class="l">List</a> or
					<a href="vimeval.txt.html#Dictionary" class="l">Dictionary</a><a href="motion.txt.html#%2C" class="d">,</a> cannot add or remove
					items, but can still change the
					values.
				3	Like 2 but <a href="luaref.txt.html#for" class="d">for</a> the <a href="vimeval.txt.html#List" class="l">List</a> <a href="pattern.txt.html#%2F" class="d">/</a>
					<a href="vimeval.txt.html#Dictionary" class="l">Dictionary</a> in the <a href="vimeval.txt.html#List" class="l">List</a> <a href="pattern.txt.html#%2F" class="d">/</a>
					<a href="vimeval.txt.html#Dictionary" class="l">Dictionary</a><a href="motion.txt.html#%2C" class="d">,</a> one level deeper.
			The default <span class="s">[depth]</span> <a href="motion.txt.html#is" class="d">is</a> 2, thus when <span class="s">{name}</span> <a href="motion.txt.html#is" class="d">is</a> <a href="insert.txt.html#a" class="d">a</a> <a href="vimeval.txt.html#List" class="l">List</a>
			or <a href="vimeval.txt.html#Dictionary" class="l">Dictionary</a> the values cannot be changed.

			Example with <span class="s">[depth]</span> 0: 
<span class="e">				let mylist = [1, 2, 3]</span>
<span class="e">				lockvar 0 mylist</span>
<span class="e">				let mylist[0] = 77	" OK</span>
<span class="e">				call add(mylist, 4)	" OK</span>
<span class="e">				let mylist = [7, 8, 9]  " Error!</span>
								<span id="E743" class="t">E743</span>
			For unlimited depth use [!] and omit <span class="s">[depth]</span>.
			However, there <a href="motion.txt.html#is" class="d">is</a> <a href="insert.txt.html#a" class="d">a</a> maximum depth of 100 to catch
			loops.

			<span class="n">Note</span> that when two <a href="vimeval.txt.html#variables" class="d">variables</a> refer to the same <a href="vimeval.txt.html#List" class="l">List</a>
			and you lock one of them, the <a href="vimeval.txt.html#List" class="l">List</a> will also be
			locked when used through the other variable.
			Example: 
<span class="e">				:let l = [0, 1, 2, 3]</span>
<span class="e">				:let cl = l</span>
<span class="e">				:lockvar l</span>
<span class="e">				:let cl[1] = 99		" won't work!</span>
			You may want to make <a href="insert.txt.html#a" class="d">a</a> copy of <a href="insert.txt.html#a" class="d">a</a> <a href="vimeval.txt.html#list" class="d">list</a> to avoid this.
			See <a href="vimfn.txt.html#deepcopy%28%29" class="l">deepcopy()</a><a href="repeat.txt.html#." class="d">.</a>


:unlo[ckvar][!] <span class="s">[depth]</span> <span class="s">{name}</span> <a href="userfunc.txt.html#..." class="d">...</a>			<span id="%3Aunlockvar" class="t">:unlockvar</span> <span id="%3Aunlo" class="t">:unlo</span>
			Unlock the internal variable <span class="s">{name}</span>.  Does the
			opposite of <a href="vimeval.txt.html#%3Alockvar" class="l">:lockvar</a><a href="repeat.txt.html#." class="d">.</a>

			No error <a href="motion.txt.html#is" class="d">is</a> given if <span class="s">{name}</span> does not exist.

<a href="vimeval.txt.html#%3Aif" class="d">:if</a> <span class="s">{expr1}</span>			<span id="%3Aif" class="t">:if</span> <span id="%3Aend" class="t">:end</span> <span id="%3Aendif" class="t">:endif</span> <span id="%3Aen" class="t">:en</span> <span id="E171" class="t">E171</span> <span id="E579" class="t">E579</span> <span id="E580" class="t">E580</span>
:en[dif]		Execute the commands until the next matching <span class="e">:else</span>
			or <span class="e">:endif</span> if <span class="s">{expr1}</span> evaluates to non-zero.
			Although the short forms work, <a href="motion.txt.html#it" class="d">it</a> <a href="motion.txt.html#is" class="d">is</a> recommended to
			always use <span class="e">:endif</span> to avoid confusion and to make
			auto-indenting work properly.

			From <span class="i">Vim version 4.5</span> until 5.0, every <a href="intro.txt.html#Ex" class="d">Ex</a> command in
			between the <span class="e">:if</span> and <span class="e">:endif</span> <a href="motion.txt.html#is" class="d">is</a> ignored.  These two
			commands were just to allow <a href="luaref.txt.html#for" class="d">for</a> future expansions in <a href="insert.txt.html#a" class="d">a</a>
			backward compatible way.  Nesting was allowed.  <span class="n">Note</span>
			that any <span class="e">:else</span> or <span class="e">:elseif</span> was ignored, the <span class="e">else</span>
			part was not executed either.

			You can use this to remain compatible with older
			versions: 
<span class="e">				:if version &gt;= 500</span>
<span class="e">				:  version-5-specific-commands</span>
<span class="e">				:endif</span>
			The commands still need to be parsed to find the
			<span class="e">endif</span>.  Sometimes an older Vim has <a href="insert.txt.html#a" class="d">a</a> problem with <a href="insert.txt.html#a" class="d">a</a>
			new command.  For example, <span class="e">:silent</span> <a href="motion.txt.html#is" class="d">is</a> recognized <a href="motion.txt.html#as" class="d">as</a>
			<a href="insert.txt.html#a" class="d">a</a> <span class="e">:substitute</span> command.  In that <a href="change.txt.html#case" class="d">case</a> <span class="e">:execute</span> can
			avoid problems: 
<span class="e">				:if version &gt;= 600</span>
<span class="e">				:  execute "silent 1,$delete"</span>
<span class="e">				:endif</span>

			<span class="n">NOTE:</span> The <span class="e">:append</span> and <span class="e">:insert</span> commands don't work
			properly in between <span class="e">:if</span> and <span class="e">:endif</span>.

						<span id="%3Aelse" class="t">:else</span> <span id="%3Ael" class="t">:el</span> <span id="E581" class="t">E581</span> <span id="E583" class="t">E583</span>
:el[se]			Execute the commands until the next matching <span class="e">:else</span>
			or <span class="e">:endif</span> if they previously were not being
			executed.

					<span id="%3Aelseif" class="t">:elseif</span> <span id="%3Aelsei" class="t">:elsei</span> <span id="E582" class="t">E582</span> <span id="E584" class="t">E584</span>
:elsei[f] <span class="s">{expr1}</span>	Short <a href="luaref.txt.html#for" class="d">for</a> <span class="e">:else</span> <span class="e">:if</span>, with the addition that there
			<a href="motion.txt.html#is" class="d">is</a> no extra <span class="e">:endif</span>.

:wh[ile] <span class="s">{expr1}</span>			<span id="%3Awhile" class="t">:while</span> <span id="%3Aendwhile" class="t">:endwhile</span> <span id="%3Awh" class="t">:wh</span> <span id="%3Aendw" class="t">:endw</span>
						<span id="E170" class="t">E170</span> <span id="E585" class="t">E585</span> <span id="E588" class="t">E588</span> <span id="E733" class="t">E733</span>
:endw[hile]		Repeat the commands between <span class="e">:while</span> and <span class="e">:endwhile</span>,
			<a href="motion.txt.html#as" class="d">as</a> long <a href="motion.txt.html#as" class="d">as</a> <span class="s">{expr1}</span> evaluates to non-zero.
			When an error <a href="motion.txt.html#is" class="d">is</a> detected from <a href="insert.txt.html#a" class="d">a</a> command inside the
			loop, execution continues after the <span class="e">endwhile</span>.
			Example: 
<span class="e">				:let lnum = 1</span>
<span class="e">				:while lnum &lt;= line("$")</span>
<span class="e">				   :call FixLine(lnum)</span>
<span class="e">				   :let lnum = lnum + 1</span>
<span class="e">				:endwhile</span>

			<span class="n">NOTE:</span> The <span class="e">:append</span> and <span class="e">:insert</span> commands don't work
			properly inside <a href="insert.txt.html#a" class="d">a</a> <span class="e">:while</span> and <span class="e">:for</span> loop.

<a href="vimeval.txt.html#%3Afor" class="d">:for</a> <span class="s">{var}</span> in <span class="s">{object}</span>					<span id="%3Afor" class="t">:for</span> <span id="E690" class="t">E690</span> <span id="E732" class="t">E732</span>
:endfo[r]						<span id="%3Aendfo" class="t">:endfo</span> <span id="%3Aendfor" class="t">:endfor</span>
			Repeat the commands between <span class="e">:for</span> and <span class="e">:endfor</span> <a href="luaref.txt.html#for" class="d">for</a>
			each item in <span class="s">{object}</span>.  <span class="s">{object}</span> can be <a href="insert.txt.html#a" class="d">a</a> <a href="vimeval.txt.html#List" class="l">List</a><a href="motion.txt.html#%2C" class="d">,</a>
			<a href="insert.txt.html#a" class="d">a</a> <a href="vimeval.txt.html#Blob" class="l">Blob</a> or <a href="insert.txt.html#a" class="d">a</a> <a href="vimeval.txt.html#String" class="l">String</a><a href="repeat.txt.html#." class="d">.</a>

			Variable <span class="s">{var}</span> <a href="motion.txt.html#is" class="d">is</a> set to the value of each item.

			When an error <a href="motion.txt.html#is" class="d">is</a> detected <a href="luaref.txt.html#for" class="d">for</a> <a href="insert.txt.html#a" class="d">a</a> command inside the
			loop, execution continues after the <span class="e">endfor</span>.
			Changing <span class="s">{object}</span> inside the loop affects what items
			are used.  Make <a href="insert.txt.html#a" class="d">a</a> copy if this <a href="motion.txt.html#is" class="d">is</a> unwanted: 
<span class="e">				:for item in copy(mylist)</span>

			When <span class="s">{object}</span> <a href="motion.txt.html#is" class="d">is</a> <a href="insert.txt.html#a" class="d">a</a> <a href="vimeval.txt.html#List" class="l">List</a> and not making <a href="insert.txt.html#a" class="d">a</a> copy, Vim
			stores <a href="insert.txt.html#a" class="d">a</a> <a href="intro.txt.html#reference" class="d">reference</a> to the next item in the <a href="vimeval.txt.html#List" class="l">List</a>
			before executing the commands with the current item.
			Thus the current item can be removed without effect.
			Removing any later item means <a href="motion.txt.html#it" class="d">it</a> will not be found.
			Thus the following example works (an inefficient way
			to make <a href="insert.txt.html#a" class="d">a</a> <a href="vimeval.txt.html#List" class="l">List</a> empty): 
<span class="e">				for item in mylist</span>
<span class="e">				   call remove(mylist, 0)</span>
<span class="e">				endfor</span>
			<span class="n">Note</span> that reordering the <a href="vimeval.txt.html#List" class="l">List</a> (e.g., with <a href="vimfn.txt.html#sort%28%29" class="d">sort()</a> or
			reverse()) may have unexpected effects.

			When <span class="s">{object}</span> <a href="motion.txt.html#is" class="d">is</a> <a href="insert.txt.html#a" class="d">a</a> <a href="vimeval.txt.html#Blob" class="l">Blob</a><a href="motion.txt.html#%2C" class="d">,</a> Vim always makes <a href="insert.txt.html#a" class="d">a</a> copy to
			iterate over.  Unlike with <a href="vimeval.txt.html#List" class="l">List</a><a href="motion.txt.html#%2C" class="d">,</a> modifying the
			<a href="vimeval.txt.html#Blob" class="l">Blob</a> does not affect the iteration.

			When <span class="s">{object}</span> <a href="motion.txt.html#is" class="d">is</a> <a href="insert.txt.html#a" class="d">a</a> <a href="vimeval.txt.html#String" class="l">String</a> each item <a href="motion.txt.html#is" class="d">is</a> <a href="insert.txt.html#a" class="d">a</a> <a href="vimeval.txt.html#string" class="d">string</a> with
			one character, plus any combining characters.

<a href="vimeval.txt.html#%3Afor" class="d">:for</a> [{var1}, <span class="s">{var2}</span>, ...] in <span class="s">{listlist}</span>
:endfo[r]
			Like <span class="e">:for</span> above, but each item in <span class="s">{listlist}</span> must be
			<a href="insert.txt.html#a" class="d">a</a> list, of which each item <a href="motion.txt.html#is" class="d">is</a> assigned to <span class="s">{var1}</span>,
			<span class="s">{var2}</span>, etc.  Example: 
<span class="e">				:for [lnum, col] in [[1, 3], [2, 5], [3, 8]]</span>
<span class="e">				   :echo getline(lnum)[col]</span>
<span class="e">				:endfor</span>

						<span id="%3Acontinue" class="t">:continue</span> <span id="%3Acon" class="t">:con</span> <span id="E586" class="t">E586</span>
:con[tinue]		When used inside <a href="insert.txt.html#a" class="d">a</a> <span class="e">:while</span> or <span class="e">:for</span> loop, jumps back
			to the start of the loop.

			If <a href="motion.txt.html#it" class="d">it</a> <a href="motion.txt.html#is" class="d">is</a> used after <a href="insert.txt.html#a" class="d">a</a> <span class="e">:try</span> inside the loop but
			before the matching <span class="e">:finally</span> (if present), the
			commands following the <span class="e">:finally</span> up to the matching
			<span class="e">:endtry</span> are executed first.  This process applies to
			all nested <span class="e">:try</span>s inside the loop.  The outermost
			<span class="e">:endtry</span> then jumps back to the start of the loop.

						<span id="%3Abreak" class="t">:break</span> <span id="%3Abrea" class="t">:brea</span> <span id="E587" class="t">E587</span>
:brea[k]		When used inside <a href="insert.txt.html#a" class="d">a</a> <span class="e">:while</span> or <span class="e">:for</span> loop, skips to
			the command after the matching <span class="e">:endwhile</span> or
			<span class="e">:endfor</span>.
			If <a href="motion.txt.html#it" class="d">it</a> <a href="motion.txt.html#is" class="d">is</a> used after <a href="insert.txt.html#a" class="d">a</a> <span class="e">:try</span> inside the loop but
			before the matching <span class="e">:finally</span> (if present), the
			commands following the <span class="e">:finally</span> up to the matching
			<span class="e">:endtry</span> are executed first.  This process applies to
			all nested <span class="e">:try</span>s inside the loop.  The outermost
			<span class="e">:endtry</span> then jumps to the command after the loop.

<a href="vimeval.txt.html#%3Atry" class="d">:try</a>				<span id="%3Atry" class="t">:try</span> <span id="%3Aendt" class="t">:endt</span> <span id="%3Aendtry" class="t">:endtry</span> <span id="E600" class="t">E600</span> <span id="E601" class="t">E601</span> <span id="E602" class="t">E602</span>
:endt[ry]		Change the error handling <a href="luaref.txt.html#for" class="d">for</a> the commands between
			<span class="e">:try</span> and <span class="e">:endtry</span> including everything being
			executed across <span class="e">:source</span> commands, function calls,
			or <a href="autocmd.txt.html#autocommand" class="d">autocommand</a> invocations.

			When an error or interrupt <a href="motion.txt.html#is" class="d">is</a> detected and there <a href="motion.txt.html#is" class="d">is</a>
			<a href="insert.txt.html#a" class="d">a</a> <span class="e">:finally</span> command following, execution continues
			after the <span class="e">:finally</span>.  Otherwise, or when the
			<span class="e">:endtry</span> <a href="motion.txt.html#is" class="d">is</a> reached thereafter, the next
			(dynamically) surrounding <span class="e">:try</span> <a href="motion.txt.html#is" class="d">is</a> checked <a href="luaref.txt.html#for" class="d">for</a>
			<a href="insert.txt.html#a" class="d">a</a> corresponding <span class="e">:finally</span> etc.  Then the <a href="usr_41.txt.html#script" class="d">script</a>
			processing <a href="motion.txt.html#is" class="d">is</a> terminated.  Whether <a href="insert.txt.html#a" class="d">a</a> function
			definition has an "abort" argument does not matter.
			Example: 
<span class="e">		try | call Unknown() | finally | echomsg "cleanup" | endtry</span>
<span class="e">		echomsg "not reached"</span>

			Moreover, an error or interrupt (dynamically) inside
			<span class="e">:try</span> and <span class="e">:endtry</span> <a href="motion.txt.html#is" class="d">is</a> converted to an exception.  It
			can be caught <a href="motion.txt.html#as" class="d">as</a> if <a href="motion.txt.html#it" class="d">it</a> were thrown by <a href="insert.txt.html#a" class="d">a</a> <span class="e">:throw</span>
			command (see <span class="e">:catch</span>).  In this case, the <a href="usr_41.txt.html#script" class="d">script</a>
			processing <a href="motion.txt.html#is" class="d">is</a> not terminated.

			The value "Vim:Interrupt" <a href="motion.txt.html#is" class="d">is</a> used <a href="luaref.txt.html#for" class="d">for</a> an interrupt
			exception.  An error in <a href="insert.txt.html#a" class="d">a</a> Vim command <a href="motion.txt.html#is" class="d">is</a> converted
			to <a href="insert.txt.html#a" class="d">a</a> value of the form "Vim({command}):{errmsg}"<a href="motion.txt.html#%2C" class="d">,</a>
			other <a href="message.txt.html#errors" class="d">errors</a> are converted to <a href="insert.txt.html#a" class="d">a</a> value of the form
			"Vim:{errmsg}"<a href="repeat.txt.html#." class="d">.</a>  <span class="s">{command}</span> <a href="motion.txt.html#is" class="d">is</a> the full command name,
			and <span class="s">{errmsg}</span> <a href="motion.txt.html#is" class="d">is</a> the message that <a href="motion.txt.html#is" class="d">is</a> displayed if the
			error exception <a href="motion.txt.html#is" class="d">is</a> not caught, always beginning with
			the error number.
			Examples: 
<span class="e">		try | sleep 100 | catch /^Vim:Interrupt$/ | endtry</span>
<span class="e">		try | edit | catch /^Vim(edit):E\d\+/ | echo "error" | endtry</span>

					<span id="%3Acat" class="t">:cat</span> <span id="%3Acatch" class="t">:catch</span> <span id="E603" class="t">E603</span> <span id="E604" class="t">E604</span> <span id="E605" class="t">E605</span>
:cat[ch] /{pattern}/	The following commands until the next <span class="e">:catch</span>,
			<span class="e">:finally</span>, or <span class="e">:endtry</span> that belongs to the same
			<span class="e">:try</span> <a href="motion.txt.html#as" class="d">as</a> the <span class="e">:catch</span> are executed when an exception
			matching <span class="s">{pattern}</span> <a href="motion.txt.html#is" class="d">is</a> being thrown and has not yet
			been caught by <a href="insert.txt.html#a" class="d">a</a> previous <span class="e">:catch</span>.  Otherwise, these
			commands are skipped.
			When <span class="s">{pattern}</span> <a href="motion.txt.html#is" class="d">is</a> omitted all <a href="message.txt.html#errors" class="d">errors</a> are caught.
			Examples: 
<span class="e">		:catch /^Vim:Interrupt$/	 " catch interrupts (CTRL-C)</span>
<span class="e">		:catch /^Vim\%((\a\+)\)\=:E/	 " catch all Vim errors</span>
<span class="e">		:catch /^Vim\%((\a\+)\)\=:/	 " catch errors and interrupts</span>
<span class="e">		:catch /^Vim(write):/		 " catch all errors in :write</span>
<span class="e">		:catch /^Vim\%((\a\+)\)\=:E123:/ " catch error E123</span>
<span class="e">		:catch /my-exception/		 " catch user exception</span>
<span class="e">		:catch /.*/			 " catch everything</span>
<span class="e">		:catch				 " same as /.*/</span>

			Another character can be used instead of <a href="pattern.txt.html#%2F" class="d">/</a> around the
			<span class="s">{pattern}</span>, so long <a href="motion.txt.html#as" class="d">as</a> <a href="motion.txt.html#it" class="d">it</a> does not have <a href="insert.txt.html#a" class="d">a</a> special
			meaning (e.g., <a href="motion.txt.html#%27" class="d">'</a>|<a href="motion.txt.html#%27" class="d">'</a> or <a href="motion.txt.html#%27" class="d">'</a>"<a href="motion.txt.html#%27%29" class="d">')</a> and doesn't occur inside
			<span class="s">{pattern}</span>.
			Information about the exception <a href="motion.txt.html#is" class="d">is</a> available in
			<a href="vvars.txt.html#v%3Aexception" class="l">v:exception</a><a href="repeat.txt.html#." class="d">.</a>  Also see <a href="vimeval.txt.html#throw-variables" class="l">throw-variables</a><a href="repeat.txt.html#." class="d">.</a>
			<span class="n">NOTE:</span> It <a href="motion.txt.html#is" class="d">is</a> not reliable to "<a href="vimeval.txt.html#%3Acatch" class="d">:catch</a>" the TEXT of
			an error message because <a href="motion.txt.html#it" class="d">it</a> may vary in different
			locales.

					<span id="%3Afina" class="t">:fina</span> <span id="%3Afinally" class="t">:finally</span> <span id="E606" class="t">E606</span> <span id="E607" class="t">E607</span>
:fina[lly]		The following commands until the matching <span class="e">:endtry</span>
			are executed whenever the part between the matching
			<span class="e">:try</span> and the <span class="e">:finally</span> <a href="motion.txt.html#is" class="d">is</a> left:  either by falling
			through to the <span class="e">:finally</span> or by <a href="insert.txt.html#a" class="d">a</a> <span class="e">:continue</span>,
			<span class="e">:break</span>, <span class="e">:finish</span>, or <span class="e">:return</span>, or by an error or
			interrupt or exception (see <span class="e">:throw</span>).

							<span id="%3Ath" class="t">:th</span> <span id="%3Athrow" class="t">:throw</span> <span id="E608" class="t">E608</span>
:th[row] <span class="s">{expr1}</span>	The <span class="s">{expr1}</span> <a href="motion.txt.html#is" class="d">is</a> evaluated and thrown <a href="motion.txt.html#as" class="d">as</a> an exception.
			If the <span class="e">:throw</span> <a href="motion.txt.html#is" class="d">is</a> used after <a href="insert.txt.html#a" class="d">a</a> <span class="e">:try</span> but before the
			first corresponding <span class="e">:catch</span>, commands are skipped
			until the first <span class="e">:catch</span> matching <span class="s">{expr1}</span> <a href="motion.txt.html#is" class="d">is</a> reached.
			If there <a href="motion.txt.html#is" class="d">is</a> no such <span class="e">:catch</span> or if the <span class="e">:throw</span> <a href="motion.txt.html#is" class="d">is</a>
			used after <a href="insert.txt.html#a" class="d">a</a> <span class="e">:catch</span> but before the <span class="e">:finally</span>, the
			commands following the <span class="e">:finally</span> (if present) up to
			the matching <span class="e">:endtry</span> are executed.  If the <span class="e">:throw</span>
			<a href="motion.txt.html#is" class="d">is</a> after the <span class="e">:finally</span>, commands up to the <span class="e">:endtry</span>
			are skipped.  At the <span class="e">:endtry</span>, this process applies
			again <a href="luaref.txt.html#for" class="d">for</a> the next dynamically surrounding <span class="e">:try</span>
			(which may be found in <a href="insert.txt.html#a" class="d">a</a> calling function or sourcing
			script), until <a href="insert.txt.html#a" class="d">a</a> matching <span class="e">:catch</span> has been found.
			If the exception <a href="motion.txt.html#is" class="d">is</a> not caught, the command processing
			<a href="motion.txt.html#is" class="d">is</a> terminated.
			Example: 
<span class="e">		:try | throw "oops" | catch /^oo/ | echo "caught" | endtry</span>
			<span class="n">Note</span> that "catch" may need to be on <a href="insert.txt.html#a" class="d">a</a> separate line
			<a href="luaref.txt.html#for" class="d">for</a> when an error causes the parsing to skip the whole
			line and not see the "|" that separates the commands.

							<span id="%3Aec" class="t">:ec</span> <span id="%3Aecho" class="t">:echo</span>
:ec[ho] <span class="s">{expr1}</span> ..	Echoes each <span class="s">{expr1}</span>, with <a href="insert.txt.html#a" class="d">a</a> <a href="intro.txt.html#space" class="d">space</a> in between.  The
			first <span class="s">{expr1}</span> starts on <a href="insert.txt.html#a" class="d">a</a> new line.
			Also see <a href="cmdline.txt.html#%3Acomment" class="l">:comment</a><a href="repeat.txt.html#." class="d">.</a>
			Use "\n" to start <a href="insert.txt.html#a" class="d">a</a> new line.  Use "\r" to move the
			cursor to the first column.
			Uses the highlighting set by the <span class="e">:echohl</span> command.
			Cannot be followed by <a href="insert.txt.html#a" class="d">a</a> comment.
			Example: 
<span class="e">		:echo "the value of 'shell' is" &amp;shell</span>
							<span id="%3Aecho-redraw" class="t">:echo-redraw</span>
			<a href="insert.txt.html#A" class="d">A</a> later redraw may make the message disappear again.
			And since Vim mostly postpones redrawing until it's
			finished with <a href="insert.txt.html#a" class="d">a</a> sequence of commands this happens
			quite often.  To avoid that <a href="insert.txt.html#a" class="d">a</a> command from before the
			<span class="e">:echo</span> causes <a href="insert.txt.html#a" class="d">a</a> redraw afterwards (redraws are often
			postponed until you type something), force <a href="insert.txt.html#a" class="d">a</a> redraw
			with the <span class="e">:redraw</span> command.  Example: 
<span class="e">		:new | redraw | echo "there is a new window"</span>
							<span id="%3Aecho-self-refer" class="t">:echo-self-refer</span>
			When printing nested containers echo prints second
			occurrence of the self-referencing container using
			"[...@level]" (self-referencing <a href="vimeval.txt.html#List" class="l">List</a><a href="motion.txt.html#%29" class="d">)</a> or
			"<span class="s">{...@level}</span>" (self-referencing <a href="vimeval.txt.html#Dict" class="l">Dict</a>): 
<span class="e">		:let l = []</span>
<span class="e">		:call add(l, l)</span>
<span class="e">		:let l2 = []</span>
<span class="e">		:call add(l2, [l2])</span>
<span class="e">		:echo l l2</span>
			echoes "[[...@0]] [[[...@0]]]"<a href="repeat.txt.html#." class="d">.</a> Echoing "[l]" will
			echo "[[[...@1]]]" because <a href="motion.txt.html#l" class="d">l</a> first occurs <a href="motion.txt.html#at" class="d">at</a> second
			level.

							<span id="%3Aechon" class="t">:echon</span>
<a href="vimeval.txt.html#%3Aechon" class="d">:echon</a> <span class="s">{expr1}</span> ..	Echoes each <span class="s">{expr1}</span>, without anything added.  Also see
			<a href="cmdline.txt.html#%3Acomment" class="l">:comment</a><a href="repeat.txt.html#." class="d">.</a>
			Uses the highlighting set by the <span class="e">:echohl</span> command.
			Cannot be followed by <a href="insert.txt.html#a" class="d">a</a> comment.
			Example: 
<span class="e">				:echon "the value of 'shell' is " &amp;shell</span>

			<span class="n">Note</span> the difference between using <span class="e">:echo</span>, which <a href="motion.txt.html#is" class="d">is</a> <a href="insert.txt.html#a" class="d">a</a>
			Vim command, and <span class="e">:!echo</span>, which <a href="motion.txt.html#is" class="d">is</a> an external shell
			command: 
<span class="e">		:!echo %		--&gt; filename</span>
			The arguments of "<a href="various.txt.html#%3A%21" class="d">:!</a>" are expanded, see <a href="cmdline.txt.html#%3A_%25" class="l">:_%</a><a href="repeat.txt.html#." class="d">.</a> 
<span class="e">		:!echo "%"		--&gt; filename or "filename"</span>
			Like the previous example.  Whether you see the double
			quotes or not depends on your <a href="options.txt.html#%27shell%27" class="o">'shell'</a>. 
<span class="e">		:echo %			--&gt; nothing</span>
			The '%' <a href="motion.txt.html#is" class="d">is</a> an illegal character in an expression. 
<span class="e">		:echo "%"		--&gt; %</span>
			This just echoes the '%' character. 
<span class="e">		:echo expand("%")	--&gt; filename</span>
			This calls the <a href="vimfn.txt.html#expand%28%29" class="d">expand()</a> function to expand the '%'.

							<span id="%3Aechoh" class="t">:echoh</span> <span id="%3Aechohl" class="t">:echohl</span>
:echoh[l] <span class="s">{name}</span>	Use the highlight group <span class="s">{name}</span> <a href="luaref.txt.html#for" class="d">for</a> the following
			<span class="e">:echo</span>, <span class="e">:echon</span> and <span class="e">:echomsg</span> commands.  Also used
			<a href="luaref.txt.html#for" class="d">for</a> the <span class="e">input()</span> prompt.  Example: 
<span class="e">		:echohl WarningMsg | echo "Don't panic!" | echohl None</span>
			Don't forget to set the group back to "None"<a href="motion.txt.html#%2C" class="d">,</a>
			otherwise all following echo's will be highlighted.

							<span id="%3Aechom" class="t">:echom</span> <span id="%3Aechomsg" class="t">:echomsg</span>
:echom[sg] <span class="s">{expr1}</span> ..	Echo the expression(s) <a href="motion.txt.html#as" class="d">as</a> <a href="insert.txt.html#a" class="d">a</a> true message, saving the
			message in the <a href="message.txt.html#message-history" class="l">message-history</a><a href="repeat.txt.html#." class="d">.</a>
			Spaces are placed between the arguments <a href="motion.txt.html#as" class="d">as</a> with the
			<span class="e">:echo</span> command.  But unprintable characters are
			displayed, not interpreted.
			The parsing works slightly different from <span class="e">:echo</span>,
			more like <span class="e">:execute</span>.  All the expressions are first
			evaluated and concatenated before echoing anything.
			If expressions does not evaluate to <a href="insert.txt.html#a" class="d">a</a> <a href="vimeval.txt.html#Number" class="d">Number</a> or
			String, <a href="vimfn.txt.html#string%28%29" class="d">string()</a> <a href="motion.txt.html#is" class="d">is</a> used to turn <a href="motion.txt.html#it" class="d">it</a> into <a href="insert.txt.html#a" class="d">a</a> string.
			Uses the highlighting set by the <span class="e">:echohl</span> command.
			Example: 
<span class="e">		:echomsg "It's a Zizzer Zazzer Zuzz, as you can plainly see."</span>
			See <a href="vimeval.txt.html#%3Aecho-redraw" class="l">:echo-redraw</a> to avoid the message disappearing
			when the screen <a href="motion.txt.html#is" class="d">is</a> redrawn.
							<span id="%3Aechoe" class="t">:echoe</span> <span id="%3Aechoerr" class="t">:echoerr</span>
:echoe[rr] <span class="s">{expr1}</span> ..	Echo the expression(s) <a href="motion.txt.html#as" class="d">as</a> an error message, saving the
			message in the <a href="message.txt.html#message-history" class="l">message-history</a><a href="repeat.txt.html#." class="d">.</a>  When used in <a href="insert.txt.html#a" class="d">a</a>
			<a href="usr_41.txt.html#script" class="d">script</a> or function the line number will be added.
			Spaces are placed between the arguments <a href="motion.txt.html#as" class="d">as</a> with the
			<span class="e">:echomsg</span> command.  When used inside <a href="insert.txt.html#a" class="d">a</a> try conditional,
			the message <a href="motion.txt.html#is" class="d">is</a> raised <a href="motion.txt.html#as" class="d">as</a> an error exception instead
			(see <a href="vimeval.txt.html#try-echoerr" class="l">try-echoerr</a>).
			Example: 
<span class="e">		:echoerr "This script just failed!"</span>
			If you just want <a href="insert.txt.html#a" class="d">a</a> highlighted message use <span class="e">:echohl</span>.
			And to get <a href="insert.txt.html#a" class="d">a</a> beep: 
<span class="e">		:exe "normal \&lt;Esc&gt;"</span>

							<span id="%3Aeval" class="t">:eval</span>
<a href="vimeval.txt.html#%3Aeval" class="d">:eval</a> <span class="s">{expr}</span>		Evaluate <span class="s">{expr}</span> and <a href="editing.txt.html#discard" class="d">discard</a> the result.  Example: 
<span class="e">				:eval Getlist()-&gt;Filter()-&gt;append('$')</span>
<span class="e"></span>
			The <a href="vimeval.txt.html#expression" class="d">expression</a> <a href="motion.txt.html#is" class="d">is</a> supposed to have <a href="insert.txt.html#a" class="d">a</a> side effect,
			since the resulting value <a href="motion.txt.html#is" class="d">is</a> not used.  In the example
			the <span class="e">append()</span> call appends the <a href="vimeval.txt.html#List" class="d">List</a> with text to the
			buffer.  This <a href="motion.txt.html#is" class="d">is</a> similar to <span class="e">:call</span> but works with any
			expression.

			The command can be shortened to <span class="e">:ev</span> or <span class="e">:eva</span>, but
			these are hard to recognize and therefore not to be
			used.

			The command cannot be followed by "|" and another
			command, since "|" <a href="motion.txt.html#is" class="d">is</a> seen <a href="motion.txt.html#as" class="d">as</a> part of the expression.


							<span id="%3Aexe" class="t">:exe</span> <span id="%3Aexecute" class="t">:execute</span>
:exe[cute] <span class="s">{expr1}</span> ..	Executes the <a href="vimeval.txt.html#string" class="d">string</a> that results from the evaluation
			of <span class="s">{expr1}</span> <a href="motion.txt.html#as" class="d">as</a> an <a href="intro.txt.html#Ex" class="d">Ex</a> command.
			Multiple arguments are concatenated, with <a href="insert.txt.html#a" class="d">a</a> <a href="intro.txt.html#space" class="d">space</a> in
			between.  To avoid the extra <a href="intro.txt.html#space" class="d">space</a> use the ".."
			<a href="motion.txt.html#operator" class="d">operator</a> to concatenate strings into one argument.
			<span class="s">{expr1}</span> <a href="motion.txt.html#is" class="d">is</a> used <a href="motion.txt.html#as" class="d">as</a> the processed command, command line
			editing keys are not recognized.
			Cannot be followed by <a href="insert.txt.html#a" class="d">a</a> comment.
			Examples: 
<span class="e">		:execute "buffer" nextbuf</span>
<span class="e">		:execute "normal" count .. "w"</span>

			"<a href="vimeval.txt.html#%3Aexecute" class="d">:execute</a>" can be used to append <a href="insert.txt.html#a" class="d">a</a> command to commands
			that don't accept <a href="insert.txt.html#a" class="d">a</a> <a href="motion.txt.html#%27" class="d">'</a>|<a href="motion.txt.html#%27." class="d">'.</a>  Example: 
<span class="e">		:execute '!ls' | echo "theend"</span>
<span class="e"></span>
			"<a href="vimeval.txt.html#%3Aexecute" class="d">:execute</a>" <a href="motion.txt.html#is" class="d">is</a> also <a href="insert.txt.html#a" class="d">a</a> nice way to avoid having to type
			<a href="intro.txt.html#control" class="d">control</a> characters in <a href="insert.txt.html#a" class="d">a</a> Vim <a href="usr_41.txt.html#script" class="d">script</a> <a href="luaref.txt.html#for" class="d">for</a> <a href="insert.txt.html#a" class="d">a</a> "<a href="various.txt.html#%3Anormal" class="d">:normal</a>"
			command: 
<span class="e">		:execute "normal ixxx\&lt;Esc&gt;"</span>
			This has an <a href="intro.txt.html#%3CEsc%3E" class="s">&lt;Esc&gt;</a> character, see <a href="vimeval.txt.html#expr-string" class="l">expr-string</a><a href="repeat.txt.html#." class="d">.</a>

			Be careful to correctly <a href="intro.txt.html#escape" class="d">escape</a> special characters in
			file names.  The <a href="vimfn.txt.html#fnameescape%28%29" class="l">fnameescape()</a> function can be used
			<a href="luaref.txt.html#for" class="d">for</a> Vim commands, <a href="vimfn.txt.html#shellescape%28%29" class="l">shellescape()</a> <a href="luaref.txt.html#for" class="d">for</a> <a href="various.txt.html#%3A%21" class="l">:!</a> commands.
			Examples: 
<span class="e">		:execute "e " .. fnameescape(filename)</span>
<span class="e">		:execute "!ls " .. shellescape(filename, 1)</span>

			<span class="n">Note:</span> The executed <a href="vimeval.txt.html#string" class="d">string</a> may be any command-line, but
			<a href="starting.txt.html#starting" class="d">starting</a> or ending "if"<a href="motion.txt.html#%2C" class="d">,</a> "while" and "<a href="luaref.txt.html#for" class="d">for</a>" does not
			always work, because when commands are skipped the
			"<a href="vimeval.txt.html#%3Aexecute" class="d">:execute</a>" <a href="motion.txt.html#is" class="d">is</a> not evaluated and Vim loses track of
			where blocks start and end.  Also "break" and
			"continue" should not be inside "<a href="vimeval.txt.html#%3Aexecute" class="d">:execute</a>"<a href="repeat.txt.html#." class="d">.</a>
			This example does not work, because the "<a href="vimeval.txt.html#%3Aexecute" class="d">:execute</a>" <a href="motion.txt.html#is" class="d">is</a>
			not evaluated and Vim does not see the "while"<a href="motion.txt.html#%2C" class="d">,</a> and
			gives an error <a href="luaref.txt.html#for" class="d">for</a> finding an "<a href="vimeval.txt.html#%3Aendwhile" class="d">:endwhile</a>"<a href="cmdline.txt.html#%3A" class="d">:</a> 
<span class="e">		:if 0</span>
<span class="e">		: execute 'while i &gt; 5'</span>
<span class="e">		:  echo "test"</span>
<span class="e">		: endwhile</span>
<span class="e">		:endif</span>

			It <a href="motion.txt.html#is" class="d">is</a> allowed to have <a href="insert.txt.html#a" class="d">a</a> "while" or "if" command
			completely in the executed string: 
<span class="e">		:execute 'while i &lt; 5 | echo i | let i = i + 1 | endwhile'</span>


							<span id="%3Aexe-comment" class="t">:exe-comment</span>
			"<a href="vimeval.txt.html#%3Aexecute" class="d">:execute</a>"<a href="motion.txt.html#%2C" class="d">,</a> "<a href="vimeval.txt.html#%3Aecho" class="d">:echo</a>" and "<a href="vimeval.txt.html#%3Aechon" class="d">:echon</a>" cannot be followed by
			<a href="insert.txt.html#a" class="d">a</a> comment directly, because they see the <a href="motion.txt.html#%27" class="d">'</a>"<a href="motion.txt.html#%27" class="d">'</a> <a href="motion.txt.html#as" class="d">as</a> the
			start of <a href="insert.txt.html#a" class="d">a</a> string.  But, you can use <a href="motion.txt.html#%27" class="d">'</a>|<a href="motion.txt.html#%27" class="d">'</a> followed by <a href="insert.txt.html#a" class="d">a</a>
			comment.  Example: 
<span class="e">		:echo "foo" | "this is a comment</span>
<span class="e"></span>
<span class="h">==============================================================================</span>
8. Exception handling					<span id="exception-handling" class="t">exception-handling</span>

The Vim <a href="usr_41.txt.html#script" class="d">script</a> language comprises an exception handling feature.  This <a href="motion.txt.html#section" class="d">section</a>
explains how <a href="motion.txt.html#it" class="d">it</a> can be used in <a href="insert.txt.html#a" class="d">a</a> Vim script.

Exceptions may be raised by Vim on an error or on interrupt, see
<a href="vimeval.txt.html#catch-errors" class="l">catch-errors</a> and <a href="vimeval.txt.html#catch-interrupt" class="l">catch-interrupt</a><a href="repeat.txt.html#." class="d">.</a>  You can also explicitly throw an
exception by using the "<a href="vimeval.txt.html#%3Athrow" class="d">:throw</a>" command, see <a href="vimeval.txt.html#throw-catch" class="l">throw-catch</a><a href="repeat.txt.html#." class="d">.</a>


<span class="c">TRY CONDITIONALS</span>					<span id="try-conditionals" class="t">try-conditionals</span>

Exceptions can be caught or can cause cleanup code to be executed.  You can
use <a href="insert.txt.html#a" class="d">a</a> try conditional to specify catch clauses (that catch exceptions) and/or
<a href="insert.txt.html#a" class="d">a</a> finally clause (to be executed <a href="luaref.txt.html#for" class="d">for</a> cleanup).
   <a href="insert.txt.html#A" class="d">A</a> try conditional begins with <a href="insert.txt.html#a" class="d">a</a> <a href="vimeval.txt.html#%3Atry" class="l">:try</a> command and ends <a href="motion.txt.html#at" class="d">at</a> the matching
<a href="vimeval.txt.html#%3Aendtry" class="l">:endtry</a> command.  In between, you can use <a href="insert.txt.html#a" class="d">a</a> <a href="vimeval.txt.html#%3Acatch" class="l">:catch</a> command to start
<a href="insert.txt.html#a" class="d">a</a> catch clause, or <a href="insert.txt.html#a" class="d">a</a> <a href="vimeval.txt.html#%3Afinally" class="l">:finally</a> command to start <a href="insert.txt.html#a" class="d">a</a> finally clause.  There may
be none or multiple catch clauses, but there <a href="motion.txt.html#is" class="d">is</a> <a href="motion.txt.html#at" class="d">at</a> most one finally clause,
which must not be followed by any catch clauses.  The lines before the catch
clauses and the finally clause <a href="motion.txt.html#is" class="d">is</a> called <a href="insert.txt.html#a" class="d">a</a> try block. 
<span class="e"></span>
<span class="e">     :try</span>
<span class="e">     :	...</span>
<span class="e">     :	...				TRY BLOCK</span>
<span class="e">     :	...</span>
<span class="e">     :catch /{pattern}/</span>
<span class="e">     :	...</span>
<span class="e">     :	...				CATCH CLAUSE</span>
<span class="e">     :	...</span>
<span class="e">     :catch /{pattern}/</span>
<span class="e">     :	...</span>
<span class="e">     :	...				CATCH CLAUSE</span>
<span class="e">     :	...</span>
<span class="e">     :finally</span>
<span class="e">     :	...</span>
<span class="e">     :	...				FINALLY CLAUSE</span>
<span class="e">     :	...</span>
<span class="e">     :endtry</span>
<span class="e"></span>
The try conditional allows to watch code <a href="luaref.txt.html#for" class="d">for</a> exceptions and to take the
appropriate actions.  Exceptions from the try block may be caught.  Exceptions
from the try block and also the catch clauses may cause cleanup actions.
   When no exception <a href="motion.txt.html#is" class="d">is</a> thrown during execution of the try block, the <a href="intro.txt.html#control" class="d">control</a>
<a href="motion.txt.html#is" class="d">is</a> transferred to the finally clause, if present.  After its execution, the
<a href="usr_41.txt.html#script" class="d">script</a> continues with the line following the "<a href="vimeval.txt.html#%3Aendtry" class="d">:endtry</a>"<a href="repeat.txt.html#." class="d">.</a>
   When an exception occurs during execution of the try block, the remaining
lines in the try block are skipped.  The exception <a href="motion.txt.html#is" class="d">is</a> matched against the
patterns specified <a href="motion.txt.html#as" class="d">as</a> arguments to the "<a href="vimeval.txt.html#%3Acatch" class="d">:catch</a>" commands.  The catch clause
after the first matching "<a href="vimeval.txt.html#%3Acatch" class="d">:catch</a>" <a href="motion.txt.html#is" class="d">is</a> taken, other catch clauses are not
executed.  The catch clause ends when the next "<a href="vimeval.txt.html#%3Acatch" class="d">:catch</a>"<a href="motion.txt.html#%2C" class="d">,</a> "<a href="vimeval.txt.html#%3Afinally" class="d">:finally</a>"<a href="motion.txt.html#%2C" class="d">,</a> or
"<a href="vimeval.txt.html#%3Aendtry" class="d">:endtry</a>" command <a href="motion.txt.html#is" class="d">is</a> reached <a href="motion.txt.html#-" class="d">-</a> whatever <a href="motion.txt.html#is" class="d">is</a> first.  Then, the finally clause
(if present) <a href="motion.txt.html#is" class="d">is</a> executed.  When the "<a href="vimeval.txt.html#%3Aendtry" class="d">:endtry</a>" <a href="motion.txt.html#is" class="d">is</a> reached, the <a href="usr_41.txt.html#script" class="d">script</a> execution
continues in the following line <a href="motion.txt.html#as" class="d">as</a> usual.
   When an exception that does not match any of the patterns specified by the
"<a href="vimeval.txt.html#%3Acatch" class="d">:catch</a>" commands <a href="motion.txt.html#is" class="d">is</a> thrown in the try block, the exception <a href="motion.txt.html#is" class="d">is</a> not caught by
that try conditional and none of the catch clauses <a href="motion.txt.html#is" class="d">is</a> executed.  Only the
finally clause, if present, <a href="motion.txt.html#is" class="d">is</a> taken.  The exception pends during execution of
the finally clause.  It <a href="motion.txt.html#is" class="d">is</a> resumed <a href="motion.txt.html#at" class="d">at</a> the "<a href="vimeval.txt.html#%3Aendtry" class="d">:endtry</a>"<a href="motion.txt.html#%2C" class="d">,</a> so that commands after
the "<a href="vimeval.txt.html#%3Aendtry" class="d">:endtry</a>" are not executed and the exception might be caught elsewhere,
see <a href="vimeval.txt.html#try-nesting" class="l">try-nesting</a><a href="repeat.txt.html#." class="d">.</a>
   When during execution of <a href="insert.txt.html#a" class="d">a</a> catch clause another exception <a href="motion.txt.html#is" class="d">is</a> thrown, the
remaining lines in that catch clause are not executed.  The new exception <a href="motion.txt.html#is" class="d">is</a>
not matched against the patterns in any of the "<a href="vimeval.txt.html#%3Acatch" class="d">:catch</a>" commands of the same
try conditional and none of its catch clauses <a href="motion.txt.html#is" class="d">is</a> taken.  If there is, however,
<a href="insert.txt.html#a" class="d">a</a> finally clause, <a href="motion.txt.html#it" class="d">it</a> <a href="motion.txt.html#is" class="d">is</a> executed, and the exception pends during its
execution.  The commands following the "<a href="vimeval.txt.html#%3Aendtry" class="d">:endtry</a>" are not executed.  The new
exception might, however, be caught elsewhere, see <a href="vimeval.txt.html#try-nesting" class="l">try-nesting</a><a href="repeat.txt.html#." class="d">.</a>
   When during execution of the finally clause (if present) an exception <a href="motion.txt.html#is" class="d">is</a>
thrown, the remaining lines in the finally clause are skipped.  If the finally
clause has been taken because of an exception from the try block or one of the
catch clauses, the original (pending) exception <a href="motion.txt.html#is" class="d">is</a> discarded.  The commands
following the "<a href="vimeval.txt.html#%3Aendtry" class="d">:endtry</a>" are not executed, and the exception from the finally
clause <a href="motion.txt.html#is" class="d">is</a> propagated and can be caught elsewhere, see <a href="vimeval.txt.html#try-nesting" class="l">try-nesting</a><a href="repeat.txt.html#." class="d">.</a>

The finally clause <a href="motion.txt.html#is" class="d">is</a> also executed, when <a href="insert.txt.html#a" class="d">a</a> "<a href="vimeval.txt.html#%3Abreak" class="d">:break</a>" or "<a href="vimeval.txt.html#%3Acontinue" class="d">:continue</a>" <a href="luaref.txt.html#for" class="d">for</a>
<a href="insert.txt.html#a" class="d">a</a> "<a href="vimeval.txt.html#%3Awhile" class="d">:while</a>" loop enclosing the complete try conditional <a href="motion.txt.html#is" class="d">is</a> executed from the
try block or <a href="insert.txt.html#a" class="d">a</a> catch clause.  Or when <a href="insert.txt.html#a" class="d">a</a> "<a href="userfunc.txt.html#%3Areturn" class="d">:return</a>" or "<a href="repeat.txt.html#%3Afinish" class="d">:finish</a>" <a href="motion.txt.html#is" class="d">is</a> executed
from the try block or <a href="insert.txt.html#a" class="d">a</a> catch clause of <a href="insert.txt.html#a" class="d">a</a> try conditional in <a href="insert.txt.html#a" class="d">a</a> function or
sourced script, respectively.  The "<a href="vimeval.txt.html#%3Abreak" class="d">:break</a>"<a href="motion.txt.html#%2C" class="d">,</a> "<a href="vimeval.txt.html#%3Acontinue" class="d">:continue</a>"<a href="motion.txt.html#%2C" class="d">,</a> "<a href="userfunc.txt.html#%3Areturn" class="d">:return</a>"<a href="motion.txt.html#%2C" class="d">,</a> or
"<a href="repeat.txt.html#%3Afinish" class="d">:finish</a>" pends during execution of the finally clause and <a href="motion.txt.html#is" class="d">is</a> resumed when the
"<a href="vimeval.txt.html#%3Aendtry" class="d">:endtry</a>" <a href="motion.txt.html#is" class="d">is</a> reached.  It is, however, discarded when an exception <a href="motion.txt.html#is" class="d">is</a> thrown
from the finally clause.
   When <a href="insert.txt.html#a" class="d">a</a> "<a href="vimeval.txt.html#%3Abreak" class="d">:break</a>" or "<a href="vimeval.txt.html#%3Acontinue" class="d">:continue</a>" <a href="luaref.txt.html#for" class="d">for</a> <a href="insert.txt.html#a" class="d">a</a> "<a href="vimeval.txt.html#%3Awhile" class="d">:while</a>" loop enclosing the complete
try conditional or when <a href="insert.txt.html#a" class="d">a</a> "<a href="userfunc.txt.html#%3Areturn" class="d">:return</a>" or "<a href="repeat.txt.html#%3Afinish" class="d">:finish</a>" <a href="motion.txt.html#is" class="d">is</a> encountered in the finally
clause, the rest of the finally clause <a href="motion.txt.html#is" class="d">is</a> skipped, and the "<a href="vimeval.txt.html#%3Abreak" class="d">:break</a>"<a href="motion.txt.html#%2C" class="d">,</a>
"<a href="vimeval.txt.html#%3Acontinue" class="d">:continue</a>"<a href="motion.txt.html#%2C" class="d">,</a> "<a href="userfunc.txt.html#%3Areturn" class="d">:return</a>" or "<a href="repeat.txt.html#%3Afinish" class="d">:finish</a>" <a href="motion.txt.html#is" class="d">is</a> executed <a href="motion.txt.html#as" class="d">as</a> usual.  If the finally
clause has been taken because of an exception or an earlier "<a href="vimeval.txt.html#%3Abreak" class="d">:break</a>"<a href="motion.txt.html#%2C" class="d">,</a>
"<a href="vimeval.txt.html#%3Acontinue" class="d">:continue</a>"<a href="motion.txt.html#%2C" class="d">,</a> "<a href="userfunc.txt.html#%3Areturn" class="d">:return</a>"<a href="motion.txt.html#%2C" class="d">,</a> or "<a href="repeat.txt.html#%3Afinish" class="d">:finish</a>" from the try block or <a href="insert.txt.html#a" class="d">a</a> catch clause,
this pending exception or command <a href="motion.txt.html#is" class="d">is</a> discarded.

For examples see <a href="vimeval.txt.html#throw-catch" class="l">throw-catch</a> and <a href="vimeval.txt.html#try-finally" class="l">try-finally</a><a href="repeat.txt.html#." class="d">.</a>


<span class="c">NESTING OF TRY CONDITIONALS</span>				<span id="try-nesting" class="t">try-nesting</span>

Try conditionals can be nested arbitrarily.  That is, <a href="insert.txt.html#a" class="d">a</a> complete try
conditional can be <a href="change.txt.html#put" class="d">put</a> into the try block, <a href="insert.txt.html#a" class="d">a</a> catch clause, or the finally
clause of another try conditional.  If the inner try conditional does not
catch an exception thrown in its try block or throws <a href="insert.txt.html#a" class="d">a</a> new exception from one
of its catch clauses or its finally clause, the outer try conditional <a href="motion.txt.html#is" class="d">is</a>
checked according to the rules above.  If the inner try conditional <a href="motion.txt.html#is" class="d">is</a> in the
try block of the outer try conditional, its catch clauses are checked, but
otherwise only the finally clause <a href="motion.txt.html#is" class="d">is</a> executed.  It does not matter <a href="luaref.txt.html#for" class="d">for</a>
nesting, whether the inner try conditional <a href="motion.txt.html#is" class="d">is</a> directly contained in the outer
one, or whether the outer one sources <a href="insert.txt.html#a" class="d">a</a> <a href="usr_41.txt.html#script" class="d">script</a> or calls <a href="insert.txt.html#a" class="d">a</a> function containing
the inner try conditional.

When none of the active try conditionals catches an exception, just their
finally clauses are executed.  Thereafter, the <a href="usr_41.txt.html#script" class="d">script</a> processing terminates.
An error message <a href="motion.txt.html#is" class="d">is</a> displayed in <a href="change.txt.html#case" class="d">case</a> of an uncaught exception explicitly
thrown by <a href="insert.txt.html#a" class="d">a</a> "<a href="vimeval.txt.html#%3Athrow" class="d">:throw</a>" command.  For uncaught error and interrupt exceptions
implicitly raised by Vim, the error message(s) or interrupt message are shown
<a href="motion.txt.html#as" class="d">as</a> usual.

For examples see <a href="vimeval.txt.html#throw-catch" class="l">throw-catch</a><a href="repeat.txt.html#." class="d">.</a>


<span class="c">EXAMINING EXCEPTION HANDLING CODE</span>			<span id="except-examine" class="t">except-examine</span>

Exception handling code can get tricky.  If you are in doubt what happens, set
<a href="options.txt.html#%27verbose%27" class="o">'verbose'</a> to 13 or use the ":13verbose" command modifier when sourcing your
<a href="usr_41.txt.html#script" class="d">script</a> file.  Then you see when an exception <a href="motion.txt.html#is" class="d">is</a> thrown, discarded, caught, or
finished.  When using <a href="insert.txt.html#a" class="d">a</a> verbosity level of <a href="motion.txt.html#at" class="d">at</a> least 14, things pending in
<a href="insert.txt.html#a" class="d">a</a> finally clause are also shown.  This information <a href="motion.txt.html#is" class="d">is</a> also given in debug mode
(see <a href="repeat.txt.html#debug-scripts" class="l">debug-scripts</a>).


<span class="c">THROWING AND CATCHING EXCEPTIONS</span>			<span id="throw-catch" class="t">throw-catch</span>

You can throw any number or <a href="vimeval.txt.html#string" class="d">string</a> <a href="motion.txt.html#as" class="d">as</a> an exception.  Use the <a href="vimeval.txt.html#%3Athrow" class="l">:throw</a> command
and pass the value to be thrown <a href="motion.txt.html#as" class="d">as</a> argument: 
<span class="e">	:throw 4711</span>
<span class="e">	:throw "string"</span>
							<span id="throw-expression" class="t">throw-expression</span>
You can also specify an <a href="vimeval.txt.html#expression" class="d">expression</a> argument.  The <a href="vimeval.txt.html#expression" class="d">expression</a> <a href="motion.txt.html#is" class="d">is</a> then evaluated
first, and the result <a href="motion.txt.html#is" class="d">is</a> thrown: 
<span class="e">	:throw 4705 + strlen("string")</span>
<span class="e">	:throw strpart("strings", 0, 6)</span>
<span class="e"></span>
An exception might be thrown during evaluation of the argument of the "<a href="vimeval.txt.html#%3Athrow" class="d">:throw</a>"
command.  Unless <a href="motion.txt.html#it" class="d">it</a> <a href="motion.txt.html#is" class="d">is</a> caught there, the <a href="vimeval.txt.html#expression" class="d">expression</a> evaluation <a href="motion.txt.html#is" class="d">is</a> abandoned.
The "<a href="vimeval.txt.html#%3Athrow" class="d">:throw</a>" command then does not throw <a href="insert.txt.html#a" class="d">a</a> new exception.
   Example: 
<span class="e"></span>
<span class="e">	:function! Foo(arg)</span>
<span class="e">	:  try</span>
<span class="e">	:    throw a:arg</span>
<span class="e">	:  catch /foo/</span>
<span class="e">	:  endtry</span>
<span class="e">	:  return 1</span>
<span class="e">	:endfunction</span>
<span class="e">	:</span>
<span class="e">	:function! Bar()</span>
<span class="e">	:  echo "in Bar"</span>
<span class="e">	:  return 4710</span>
<span class="e">	:endfunction</span>
<span class="e">	:</span>
<span class="e">	:throw Foo("arrgh") + Bar()</span>
<span class="e"></span>
This throws "arrgh"<a href="motion.txt.html#%2C" class="d">,</a> and "in Bar" <a href="motion.txt.html#is" class="d">is</a> not displayed since Bar() <a href="motion.txt.html#is" class="d">is</a> not
executed. 
<span class="e">	:throw Foo("foo") + Bar()</span>
however displays "in Bar" and throws 4711.

Any other command that takes an <a href="vimeval.txt.html#expression" class="d">expression</a> <a href="motion.txt.html#as" class="d">as</a> argument might also be
abandoned by an (uncaught) exception during the <a href="vimeval.txt.html#expression" class="d">expression</a> evaluation.  The
exception <a href="motion.txt.html#is" class="d">is</a> then propagated to the caller of the command.
   Example: 
<span class="e"></span>
<span class="e">	:if Foo("arrgh")</span>
<span class="e">	:  echo "then"</span>
<span class="e">	:else</span>
<span class="e">	:  echo "else"</span>
<span class="e">	:endif</span>
<span class="e"></span>
Here neither of "then" or "else" <a href="motion.txt.html#is" class="d">is</a> displayed.

							<span id="catch-order" class="t">catch-order</span>
Exceptions can be caught by <a href="insert.txt.html#a" class="d">a</a> try conditional with one or more <a href="vimeval.txt.html#%3Acatch" class="l">:catch</a>
commands, see <a href="vimeval.txt.html#try-conditionals" class="l">try-conditionals</a><a href="repeat.txt.html#." class="d">.</a>   The values to be caught by each "<a href="vimeval.txt.html#%3Acatch" class="d">:catch</a>"
command can be specified <a href="motion.txt.html#as" class="d">as</a> <a href="insert.txt.html#a" class="d">a</a> <a href="pattern.txt.html#pattern" class="d">pattern</a> argument.  The subsequent catch clause
gets executed when <a href="insert.txt.html#a" class="d">a</a> matching exception <a href="motion.txt.html#is" class="d">is</a> caught.
   Example: 
<span class="e"></span>
<span class="e">	:function! Foo(value)</span>
<span class="e">	:  try</span>
<span class="e">	:    throw a:value</span>
<span class="e">	:  catch /^\d\+$/</span>
<span class="e">	:    echo "Number thrown"</span>
<span class="e">	:  catch /.*/</span>
<span class="e">	:    echo "String thrown"</span>
<span class="e">	:  endtry</span>
<span class="e">	:endfunction</span>
<span class="e">	:</span>
<span class="e">	:call Foo(0x1267)</span>
<span class="e">	:call Foo('string')</span>
<span class="e"></span>
The first call to Foo() displays "<a href="vimeval.txt.html#Number" class="d">Number</a> thrown"<a href="motion.txt.html#%2C" class="d">,</a> the second "<a href="vimeval.txt.html#String" class="d">String</a> thrown"<a href="repeat.txt.html#." class="d">.</a>
An exception <a href="motion.txt.html#is" class="d">is</a> matched against the "<a href="vimeval.txt.html#%3Acatch" class="d">:catch</a>" commands in the order they are
specified.  Only the first match counts.  So you should place the more
specific "<a href="vimeval.txt.html#%3Acatch" class="d">:catch</a>" first.  The following order does not make sense: 
<span class="e"></span>
<span class="e">	:  catch /.*/</span>
<span class="e">	:    echo "String thrown"</span>
<span class="e">	:  catch /^\d\+$/</span>
<span class="e">	:    echo "Number thrown"</span>
<span class="e"></span>
The first "<a href="vimeval.txt.html#%3Acatch" class="d">:catch</a>" here matches always, so that the second catch clause <a href="motion.txt.html#is" class="d">is</a>
never taken.

							<span id="throw-variables" class="t">throw-variables</span>
If you catch an exception by <a href="insert.txt.html#a" class="d">a</a> general pattern, you may access the exact value
in the variable <a href="vvars.txt.html#v%3Aexception" class="l">v:exception</a><a href="cmdline.txt.html#%3A" class="d">:</a> 
<span class="e"></span>
<span class="e">	:  catch /^\d\+$/</span>
<span class="e">	:    echo "Number thrown.  Value is" v:exception</span>
<span class="e"></span>
You may also be interested where an exception was thrown.  This <a href="motion.txt.html#is" class="d">is</a> stored in
<a href="vvars.txt.html#v%3Athrowpoint" class="l">v:throwpoint</a><a href="repeat.txt.html#." class="d">.</a>  And you can obtain the stack trace from <a href="vvars.txt.html#v%3Astacktrace" class="l">v:stacktrace</a><a href="repeat.txt.html#." class="d">.</a>
<span class="n">Note</span> that "<a href="vvars.txt.html#v%3Aexception" class="d">v:exception</a>"<a href="motion.txt.html#%2C" class="d">,</a> "<a href="vvars.txt.html#v%3Astacktrace" class="d">v:stacktrace</a>" and "<a href="vvars.txt.html#v%3Athrowpoint" class="d">v:throwpoint</a>" are valid <a href="luaref.txt.html#for" class="d">for</a> the
exception most recently caught <a href="motion.txt.html#as" class="d">as</a> long <a href="motion.txt.html#it" class="d">it</a> <a href="motion.txt.html#is" class="d">is</a> not finished.
   Example: 
<span class="e"></span>
<span class="e">	:function! Caught()</span>
<span class="e">	:  if v:exception != ""</span>
<span class="e">	:    echo 'Caught "' .. v:exception .. '" in ' .. v:throwpoint</span>
<span class="e">	:  else</span>
<span class="e">	:    echo 'Nothing caught'</span>
<span class="e">	:  endif</span>
<span class="e">	:endfunction</span>
<span class="e">	:</span>
<span class="e">	:function! Foo()</span>
<span class="e">	:  try</span>
<span class="e">	:    try</span>
<span class="e">	:      try</span>
<span class="e">	:	 throw 4711</span>
<span class="e">	:      finally</span>
<span class="e">	:	 call Caught()</span>
<span class="e">	:      endtry</span>
<span class="e">	:    catch /.*/</span>
<span class="e">	:      call Caught()</span>
<span class="e">	:      throw "oops"</span>
<span class="e">	:    endtry</span>
<span class="e">	:  catch /.*/</span>
<span class="e">	:    call Caught()</span>
<span class="e">	:  finally</span>
<span class="e">	:    call Caught()</span>
<span class="e">	:  endtry</span>
<span class="e">	:endfunction</span>
<span class="e">	:</span>
<span class="e">	:call Foo()</span>
<span class="e"></span>
This displays 
<span class="e"></span>
<span class="e">	Nothing caught</span>
<span class="e">	Caught "4711" in function Foo, line 4</span>
<span class="e">	Caught "oops" in function Foo, line 10</span>
<span class="e">	Nothing caught</span>
<span class="e"></span>
<a href="insert.txt.html#A" class="d">A</a> practical example:  The following command ":LineNumber" displays the line
number in the <a href="usr_41.txt.html#script" class="d">script</a> or function where <a href="motion.txt.html#it" class="d">it</a> has been used: 
<span class="e"></span>
<span class="e">	:function! LineNumber()</span>
<span class="e">	:    return substitute(v:throwpoint, '.*\D\(\d\+\).*', '\1', "")</span>
<span class="e">	:endfunction</span>
<span class="e">	:command! LineNumber try | throw "" | catch | echo LineNumber() | endtry</span>

							<span id="try-nested" class="t">try-nested</span>
An exception that <a href="motion.txt.html#is" class="d">is</a> not caught by <a href="insert.txt.html#a" class="d">a</a> try conditional can be caught by
<a href="insert.txt.html#a" class="d">a</a> surrounding try conditional: 
<span class="e"></span>
<span class="e">	:try</span>
<span class="e">	:  try</span>
<span class="e">	:    throw "foo"</span>
<span class="e">	:  catch /foobar/</span>
<span class="e">	:    echo "foobar"</span>
<span class="e">	:  finally</span>
<span class="e">	:    echo "inner finally"</span>
<span class="e">	:  endtry</span>
<span class="e">	:catch /foo/</span>
<span class="e">	:  echo "foo"</span>
<span class="e">	:endtry</span>
<span class="e"></span>
The inner try conditional does not catch the exception, just its finally
clause <a href="motion.txt.html#is" class="d">is</a> executed.  The exception <a href="motion.txt.html#is" class="d">is</a> then caught by the outer try
conditional.  The example displays "inner finally" and then "foo"<a href="repeat.txt.html#." class="d">.</a>

							<span id="throw-from-catch" class="t">throw-from-catch</span>
You can catch an exception and throw <a href="insert.txt.html#a" class="d">a</a> new one to be caught elsewhere from the
catch clause: 
<span class="e"></span>
<span class="e">	:function! Foo()</span>
<span class="e">	:  throw "foo"</span>
<span class="e">	:endfunction</span>
<span class="e">	:</span>
<span class="e">	:function! Bar()</span>
<span class="e">	:  try</span>
<span class="e">	:    call Foo()</span>
<span class="e">	:  catch /foo/</span>
<span class="e">	:    echo "Caught foo, throw bar"</span>
<span class="e">	:    throw "bar"</span>
<span class="e">	:  endtry</span>
<span class="e">	:endfunction</span>
<span class="e">	:</span>
<span class="e">	:try</span>
<span class="e">	:  call Bar()</span>
<span class="e">	:catch /.*/</span>
<span class="e">	:  echo "Caught" v:exception</span>
<span class="e">	:endtry</span>
<span class="e"></span>
This displays "Caught foo, throw <a href="motion.txt.html#bar" class="d">bar</a>" and then "Caught <a href="motion.txt.html#bar" class="d">bar</a>"<a href="repeat.txt.html#." class="d">.</a>

							<span id="rethrow" class="t">rethrow</span>
There <a href="motion.txt.html#is" class="d">is</a> no real <a href="vimeval.txt.html#rethrow" class="d">rethrow</a> in the Vim <a href="usr_41.txt.html#script" class="d">script</a> language, but you may throw
"<a href="vvars.txt.html#v%3Aexception" class="d">v:exception</a>" instead: 
<span class="e"></span>
<span class="e">	:function! Bar()</span>
<span class="e">	:  try</span>
<span class="e">	:    call Foo()</span>
<span class="e">	:  catch /.*/</span>
<span class="e">	:    echo "Rethrow" v:exception</span>
<span class="e">	:    throw v:exception</span>
<span class="e">	:  endtry</span>
<span class="e">	:endfunction</span>
							<span id="try-echoerr" class="t">try-echoerr</span>
<span class="n">Note</span> that this <a href="vimeval.txt.html#method" class="d">method</a> cannot be used to "<a href="vimeval.txt.html#rethrow" class="d">rethrow</a>" Vim error or interrupt
exceptions, because <a href="motion.txt.html#it" class="d">it</a> <a href="motion.txt.html#is" class="d">is</a> not possible to fake Vim internal exceptions.
Trying so causes an error exception.  You should throw your own exception
denoting the situation.  If you want to cause <a href="insert.txt.html#a" class="d">a</a> Vim error exception containing
the original error exception value, you can use the <a href="vimeval.txt.html#%3Aechoerr" class="l">:echoerr</a> command: 
<span class="e"></span>
<span class="e">	:try</span>
<span class="e">	:  try</span>
<span class="e">	:    asdf</span>
<span class="e">	:  catch /.*/</span>
<span class="e">	:    echoerr v:exception</span>
<span class="e">	:  endtry</span>
<span class="e">	:catch /.*/</span>
<span class="e">	:  echo v:exception</span>
<span class="e">	:endtry</span>
<span class="e"></span>
This code displays

<span class="h">	Vim(echoerr):Vim:E492: Not an editor command:	asdf </span>


<span class="c">CLEANUP CODE</span>						<span id="try-finally" class="t">try-finally</span>

Scripts often change global settings and restore them <a href="motion.txt.html#at" class="d">at</a> their end.  If the
user however interrupts the <a href="usr_41.txt.html#script" class="d">script</a> by pressing <a href="pattern.txt.html#CTRL-C" class="k">CTRL-C</a>, the settings remain in
an inconsistent state.  The same may happen to you in the <a href="develop.txt.html#development" class="d">development</a> phase of
<a href="insert.txt.html#a" class="d">a</a> <a href="usr_41.txt.html#script" class="d">script</a> when an error occurs or you explicitly throw an exception without
catching it.  You can solve these problems by using <a href="insert.txt.html#a" class="d">a</a> try conditional with
<a href="insert.txt.html#a" class="d">a</a> finally clause <a href="luaref.txt.html#for" class="d">for</a> restoring the settings.  Its execution <a href="motion.txt.html#is" class="d">is</a> guaranteed on
normal <a href="intro.txt.html#control" class="d">control</a> flow, on error, on an explicit "<a href="vimeval.txt.html#%3Athrow" class="d">:throw</a>"<a href="motion.txt.html#%2C" class="d">,</a> and on interrupt.
(Note that <a href="message.txt.html#errors" class="d">errors</a> and interrupts from inside the try conditional are converted
to exceptions.  When not caught, they terminate the <a href="usr_41.txt.html#script" class="d">script</a> after the finally
clause has been executed.)
Example: 
<span class="e"></span>
<span class="e">	:try</span>
<span class="e">	:  let s:saved_ts = &amp;ts</span>
<span class="e">	:  set ts=17</span>
<span class="e">	:</span>
<span class="e">	:  " Do the hard work here.</span>
<span class="e">	:</span>
<span class="e">	:finally</span>
<span class="e">	:  let &amp;ts = s:saved_ts</span>
<span class="e">	:  unlet s:saved_ts</span>
<span class="e">	:endtry</span>
<span class="e"></span>
This <a href="vimeval.txt.html#method" class="d">method</a> should be used locally whenever <a href="insert.txt.html#a" class="d">a</a> function or part of <a href="insert.txt.html#a" class="d">a</a> <a href="usr_41.txt.html#script" class="d">script</a>
changes global settings which need to be restored on failure or normal exit of
that function or <a href="usr_41.txt.html#script" class="d">script</a> part.

							<span id="break-finally" class="t">break-finally</span>
Cleanup code works also when the try block or <a href="insert.txt.html#a" class="d">a</a> catch clause <a href="motion.txt.html#is" class="d">is</a> left by
<a href="insert.txt.html#a" class="d">a</a> "<a href="vimeval.txt.html#%3Acontinue" class="d">:continue</a>"<a href="motion.txt.html#%2C" class="d">,</a> "<a href="vimeval.txt.html#%3Abreak" class="d">:break</a>"<a href="motion.txt.html#%2C" class="d">,</a> "<a href="userfunc.txt.html#%3Areturn" class="d">:return</a>"<a href="motion.txt.html#%2C" class="d">,</a> or "<a href="repeat.txt.html#%3Afinish" class="d">:finish</a>"<a href="repeat.txt.html#." class="d">.</a>
   Example: 
<span class="e"></span>
<span class="e">	:let first = 1</span>
<span class="e">	:while 1</span>
<span class="e">	:  try</span>
<span class="e">	:    if first</span>
<span class="e">	:      echo "first"</span>
<span class="e">	:      let first = 0</span>
<span class="e">	:      continue</span>
<span class="e">	:    else</span>
<span class="e">	:      throw "second"</span>
<span class="e">	:    endif</span>
<span class="e">	:  catch /.*/</span>
<span class="e">	:    echo v:exception</span>
<span class="e">	:    break</span>
<span class="e">	:  finally</span>
<span class="e">	:    echo "cleanup"</span>
<span class="e">	:  endtry</span>
<span class="e">	:  echo "still in while"</span>
<span class="e">	:endwhile</span>
<span class="e">	:echo "end"</span>
<span class="e"></span>
This displays "first"<a href="motion.txt.html#%2C" class="d">,</a> "cleanup"<a href="motion.txt.html#%2C" class="d">,</a> "second"<a href="motion.txt.html#%2C" class="d">,</a> "cleanup"<a href="motion.txt.html#%2C" class="d">,</a> and "<a href="intro.txt.html#end" class="d">end</a>"<a href="repeat.txt.html#." class="d">.</a> 
<span class="e"></span>
<span class="e">	:function! Foo()</span>
<span class="e">	:  try</span>
<span class="e">	:    return 4711</span>
<span class="e">	:  finally</span>
<span class="e">	:    echo "cleanup\n"</span>
<span class="e">	:  endtry</span>
<span class="e">	:  echo "Foo still active"</span>
<span class="e">	:endfunction</span>
<span class="e">	:</span>
<span class="e">	:echo Foo() "returned by Foo"</span>
<span class="e"></span>
This displays "cleanup" and "4711 returned by Foo"<a href="repeat.txt.html#." class="d">.</a>  You don't need to add an
extra "<a href="userfunc.txt.html#%3Areturn" class="d">:return</a>" in the finally clause.  (Above all, this would override the
return value.)

							<span id="except-from-finally" class="t">except-from-finally</span>
Using either of "<a href="vimeval.txt.html#%3Acontinue" class="d">:continue</a>"<a href="motion.txt.html#%2C" class="d">,</a> "<a href="vimeval.txt.html#%3Abreak" class="d">:break</a>"<a href="motion.txt.html#%2C" class="d">,</a> "<a href="userfunc.txt.html#%3Areturn" class="d">:return</a>"<a href="motion.txt.html#%2C" class="d">,</a> "<a href="repeat.txt.html#%3Afinish" class="d">:finish</a>"<a href="motion.txt.html#%2C" class="d">,</a> or "<a href="vimeval.txt.html#%3Athrow" class="d">:throw</a>" in
<a href="insert.txt.html#a" class="d">a</a> finally clause <a href="motion.txt.html#is" class="d">is</a> possible, but not recommended since <a href="motion.txt.html#it" class="d">it</a> abandons the
cleanup actions <a href="luaref.txt.html#for" class="d">for</a> the try conditional.  But, of course, interrupt and error
exceptions might get raised from <a href="insert.txt.html#a" class="d">a</a> finally clause.
   Example where an error in the finally clause stops an interrupt from
working correctly: 
<span class="e"></span>
<span class="e">	:try</span>
<span class="e">	:  try</span>
<span class="e">	:    echo "Press CTRL-C for interrupt"</span>
<span class="e">	:    while 1</span>
<span class="e">	:    endwhile</span>
<span class="e">	:  finally</span>
<span class="e">	:    unlet novar</span>
<span class="e">	:  endtry</span>
<span class="e">	:catch /novar/</span>
<span class="e">	:endtry</span>
<span class="e">	:echo "Script still running"</span>
<span class="e">	:sleep 1</span>
<span class="e"></span>
If you need to <a href="change.txt.html#put" class="d">put</a> commands that could fail into <a href="insert.txt.html#a" class="d">a</a> finally clause, you should
think about catching or ignoring the <a href="message.txt.html#errors" class="d">errors</a> in these commands, see
<a href="vimeval.txt.html#catch-errors" class="l">catch-errors</a> and <a href="vimeval.txt.html#ignore-errors" class="l">ignore-errors</a><a href="repeat.txt.html#." class="d">.</a>


<span class="c">CATCHING ERRORS</span>						<span id="catch-errors" class="t">catch-errors</span>

If you want to catch specific errors, you just have to <a href="change.txt.html#put" class="d">put</a> the code to be
watched in <a href="insert.txt.html#a" class="d">a</a> try block and add <a href="insert.txt.html#a" class="d">a</a> catch clause <a href="luaref.txt.html#for" class="d">for</a> the error message.  The
presence of the try conditional causes all <a href="message.txt.html#errors" class="d">errors</a> to be converted to an
exception.  No message <a href="motion.txt.html#is" class="d">is</a> displayed and <a href="vvars.txt.html#v%3Aerrmsg" class="l">v:errmsg</a> <a href="motion.txt.html#is" class="d">is</a> not set then.  To find
the right <a href="pattern.txt.html#pattern" class="d">pattern</a> <a href="luaref.txt.html#for" class="d">for</a> the "<a href="vimeval.txt.html#%3Acatch" class="d">:catch</a>" command, you have to know how the format of
the error exception is.
   Error exceptions have the following format: 
<span class="e"></span>
<span class="e">	Vim({cmdname}):{errmsg}</span>
or 
<span class="e">	Vim:{errmsg}</span>
<span class="e"></span>
<span class="s">{cmdname}</span> <a href="motion.txt.html#is" class="d">is</a> the name of the command that failed; the second form <a href="motion.txt.html#is" class="d">is</a> used when
the command name <a href="motion.txt.html#is" class="d">is</a> not known.  <span class="s">{errmsg}</span> <a href="motion.txt.html#is" class="d">is</a> the error message usually produced
when the error occurs outside try conditionals.  It always begins with
<a href="insert.txt.html#a" class="d">a</a> capital "<a href="motion.txt.html#E" class="d">E</a>"<a href="motion.txt.html#%2C" class="d">,</a> followed by <a href="insert.txt.html#a" class="d">a</a> two or three-digit error number, <a href="insert.txt.html#a" class="d">a</a> colon, and
<a href="insert.txt.html#a" class="d">a</a> space.

Examples:

The command 
<span class="e">	:unlet novar</span>
normally produces the error message 
<span class="e">	E108: No such variable: "novar"</span>
which <a href="motion.txt.html#is" class="d">is</a> converted inside try conditionals to an exception 
<span class="e">	Vim(unlet):E108: No such variable: "novar"</span>
<span class="e"></span>
The command 
<span class="e">	:dwim</span>
normally produces the error message 
<span class="e">	E492: Not an editor command: dwim</span>
which <a href="motion.txt.html#is" class="d">is</a> converted inside try conditionals to an exception 
<span class="e">	Vim:E492: Not an editor command: dwim</span>
<span class="e"></span>
You can catch all "<a href="vimeval.txt.html#%3Aunlet" class="d">:unlet</a>" <a href="message.txt.html#errors" class="d">errors</a> by <a href="insert.txt.html#a" class="d">a</a> 
<span class="e">	:catch /^Vim(unlet):/</span>
or all <a href="message.txt.html#errors" class="d">errors</a> <a href="luaref.txt.html#for" class="d">for</a> misspelled command names by <a href="insert.txt.html#a" class="d">a</a> 
<span class="e">	:catch /^Vim:E492:/</span>
<span class="e"></span>
Some error <a href="message.txt.html#messages" class="d">messages</a> may be produced by different commands: 
<span class="e">	:function nofunc</span>
and 
<span class="e">	:delfunction nofunc</span>
both produce the error message 
<span class="e">	E128: Function name must start with a capital: nofunc</span>
which <a href="motion.txt.html#is" class="d">is</a> converted inside try conditionals to an exception 
<span class="e">	Vim(function):E128: Function name must start with a capital: nofunc</span>
or 
<span class="e">	Vim(delfunction):E128: Function name must start with a capital: nofunc</span>
respectively.  You can catch the error by its number independently on the
command that caused <a href="motion.txt.html#it" class="d">it</a> if you use the following pattern: 
<span class="e">	:catch /^Vim(\a\+):E128:/</span>
<span class="e"></span>
Some commands like 
<span class="e">	:let x = novar</span>
produce multiple error messages, here: 
<span class="e">	E121: Undefined variable: novar</span>
<span class="e">	E15: Invalid expression:  novar</span>
Only the first <a href="motion.txt.html#is" class="d">is</a> used <a href="luaref.txt.html#for" class="d">for</a> the exception value, since <a href="motion.txt.html#it" class="d">it</a> <a href="motion.txt.html#is" class="d">is</a> the most specific
one (see <a href="vimeval.txt.html#except-several-errors" class="l">except-several-errors</a>).  So you can catch <a href="motion.txt.html#it" class="d">it</a> by 
<span class="e">	:catch /^Vim(\a\+):E121:/</span>
<span class="e"></span>
You can catch all <a href="message.txt.html#errors" class="d">errors</a> related to the name "nofunc" by 
<span class="e">	:catch /\&lt;nofunc\&gt;/</span>
<span class="e"></span>
You can catch all Vim <a href="message.txt.html#errors" class="d">errors</a> in the "<a href="editing.txt.html#%3Awrite" class="d">:write</a>" and "<a href="insert.txt.html#%3Aread" class="d">:read</a>" commands by 
<span class="e">	:catch /^Vim(\(write\|read\)):E\d\+:/</span>
<span class="e"></span>
You can catch all Vim <a href="message.txt.html#errors" class="d">errors</a> by the <a href="pattern.txt.html#pattern" class="d">pattern</a> 
<span class="e">	:catch /^Vim\((\a\+)\)\=:E\d\+:/</span>

							<span id="catch-text" class="t">catch-text</span>
<span class="n">NOTE:</span> You should never catch the error message text itself: 
<span class="e">	:catch /No such variable/</span>
only works in the English locale, but not when the user has selected
<a href="insert.txt.html#a" class="d">a</a> different language by the <a href="mlang.txt.html#%3Alanguage" class="l">:language</a> command.  It <a href="motion.txt.html#is" class="d">is</a> however helpful to
cite the message text in <a href="insert.txt.html#a" class="d">a</a> comment: 
<span class="e">	:catch /^Vim(\a\+):E108:/   " No such variable</span>
<span class="e"></span>
<span class="e"></span>
<span class="c">IGNORING ERRORS</span>						<span id="ignore-errors" class="t">ignore-errors</span>

You can ignore <a href="message.txt.html#errors" class="d">errors</a> in <a href="insert.txt.html#a" class="d">a</a> specific Vim command by catching them locally: 
<span class="e"></span>
<span class="e">	:try</span>
<span class="e">	:  write</span>
<span class="e">	:catch</span>
<span class="e">	:endtry</span>
<span class="e"></span>
But you are strongly recommended NOT to use this simple form, since <a href="motion.txt.html#it" class="d">it</a> could
catch more than you want.  With the "<a href="editing.txt.html#%3Awrite" class="d">:write</a>" command, some autocommands could
be executed and cause <a href="message.txt.html#errors" class="d">errors</a> not related to writing, <a href="luaref.txt.html#for" class="d">for</a> instance: 
<span class="e"></span>
<span class="e">	:au BufWritePre * unlet novar</span>
<span class="e"></span>
There could even be such <a href="message.txt.html#errors" class="d">errors</a> you are not responsible <a href="luaref.txt.html#for" class="d">for</a> <a href="motion.txt.html#as" class="d">as</a> <a href="insert.txt.html#a" class="d">a</a> <a href="usr_41.txt.html#script" class="d">script</a>
writer: <a href="insert.txt.html#a" class="d">a</a> user of your <a href="usr_41.txt.html#script" class="d">script</a> might have defined such autocommands.  You would
then hide the error from the user.
   It <a href="motion.txt.html#is" class="d">is</a> much better to use 
<span class="e"></span>
<span class="e">	:try</span>
<span class="e">	:  write</span>
<span class="e">	:catch /^Vim(write):/</span>
<span class="e">	:endtry</span>
<span class="e"></span>
which only catches real write errors.  So catch only what you'd like to ignore
intentionally.

For <a href="insert.txt.html#a" class="d">a</a> single command that does not cause execution of autocommands, you could
even suppress the conversion of <a href="message.txt.html#errors" class="d">errors</a> to exceptions by the "<a href="various.txt.html#%3Asilent%21" class="d">:silent!</a>"
command: 
<span class="e">	:silent! nunmap k</span>
This works also when <a href="insert.txt.html#a" class="d">a</a> try conditional <a href="motion.txt.html#is" class="d">is</a> active.


<span class="c">CATCHING INTERRUPTS</span>					<span id="catch-interrupt" class="t">catch-interrupt</span>

When there are active try conditionals, an interrupt (CTRL-C) <a href="motion.txt.html#is" class="d">is</a> converted to
the exception "Vim:Interrupt"<a href="repeat.txt.html#." class="d">.</a>  You can catch <a href="motion.txt.html#it" class="d">it</a> like every exception.  The
<a href="usr_41.txt.html#script" class="d">script</a> <a href="motion.txt.html#is" class="d">is</a> not terminated, then.
   Example: 
<span class="e"></span>
<span class="e">	:function! TASK1()</span>
<span class="e">	:  sleep 10</span>
<span class="e">	:endfunction</span>
<span class="e"></span>
<span class="e">	:function! TASK2()</span>
<span class="e">	:  sleep 20</span>
<span class="e">	:endfunction</span>
<span class="e"></span>
<span class="e">	:while 1</span>
<span class="e">	:  let command = input("Type a command: ")</span>
<span class="e">	:  try</span>
<span class="e">	:    if command == ""</span>
<span class="e">	:      continue</span>
<span class="e">	:    elseif command == "END"</span>
<span class="e">	:      break</span>
<span class="e">	:    elseif command == "TASK1"</span>
<span class="e">	:      call TASK1()</span>
<span class="e">	:    elseif command == "TASK2"</span>
<span class="e">	:      call TASK2()</span>
<span class="e">	:    else</span>
<span class="e">	:      echo "\nIllegal command:" command</span>
<span class="e">	:      continue</span>
<span class="e">	:    endif</span>
<span class="e">	:  catch /^Vim:Interrupt$/</span>
<span class="e">	:    echo "\nCommand interrupted"</span>
<span class="e">	:    " Caught the interrupt.  Continue with next prompt.</span>
<span class="e">	:  endtry</span>
<span class="e">	:endwhile</span>
<span class="e"></span>
You can interrupt <a href="insert.txt.html#a" class="d">a</a> task here by pressing <a href="pattern.txt.html#CTRL-C" class="k">CTRL-C</a>; the <a href="usr_41.txt.html#script" class="d">script</a> then asks <a href="luaref.txt.html#for" class="d">for</a>
<a href="insert.txt.html#a" class="d">a</a> new command.  If you press <a href="pattern.txt.html#CTRL-C" class="k">CTRL-C</a> <a href="motion.txt.html#at" class="d">at</a> the prompt, the <a href="usr_41.txt.html#script" class="d">script</a> <a href="motion.txt.html#is" class="d">is</a> terminated.

For <a href="testing.txt.html#testing" class="d">testing</a> what happens when <a href="pattern.txt.html#CTRL-C" class="k">CTRL-C</a> would be pressed on <a href="insert.txt.html#a" class="d">a</a> specific line in
your script, use the debug mode and execute the <a href="repeat.txt.html#%3Equit" class="l">&gt;quit</a> or <a href="repeat.txt.html#%3Einterrupt" class="l">&gt;interrupt</a>
command on that line.  See <a href="repeat.txt.html#debug-scripts" class="l">debug-scripts</a><a href="repeat.txt.html#." class="d">.</a>


<span class="c">CATCHING ALL</span>						<span id="catch-all" class="t">catch-all</span>

The commands 
<span class="e"></span>
<span class="e">	:catch /.*/</span>
<span class="e">	:catch //</span>
<span class="e">	:catch</span>
<span class="e"></span>
catch everything, error exceptions, interrupt exceptions and exceptions
explicitly thrown by the <a href="vimeval.txt.html#%3Athrow" class="l">:throw</a> command.  This <a href="motion.txt.html#is" class="d">is</a> useful <a href="motion.txt.html#at" class="d">at</a> the top level of
<a href="insert.txt.html#a" class="d">a</a> <a href="usr_41.txt.html#script" class="d">script</a> in order to catch unexpected things.
   Example: 
<span class="e"></span>
<span class="e">	:try</span>
<span class="e">	:</span>
<span class="e">	:  " do the hard work here</span>
<span class="e">	:</span>
<span class="e">	:catch /MyException/</span>
<span class="e">	:</span>
<span class="e">	:  " handle known problem</span>
<span class="e">	:</span>
<span class="e">	:catch /^Vim:Interrupt$/</span>
<span class="e">	:    echo "Script interrupted"</span>
<span class="e">	:catch /.*/</span>
<span class="e">	:  echo "Internal error (" .. v:exception .. ")"</span>
<span class="e">	:  echo " - occurred at " .. v:throwpoint</span>
<span class="e">	:endtry</span>
<span class="e">	:" end of script</span>
<span class="e"></span>
<span class="n">Note:</span> Catching all might catch more things than you want.  Thus, you are
strongly encouraged to catch only <a href="luaref.txt.html#for" class="d">for</a> problems that you can really handle by
specifying <a href="insert.txt.html#a" class="d">a</a> <a href="pattern.txt.html#pattern" class="d">pattern</a> argument to the "<a href="vimeval.txt.html#%3Acatch" class="d">:catch</a>"<a href="repeat.txt.html#." class="d">.</a>
   Example: Catching all could make <a href="motion.txt.html#it" class="d">it</a> nearly impossible to interrupt <a href="insert.txt.html#a" class="d">a</a> <a href="usr_41.txt.html#script" class="d">script</a>
by pressing <a href="pattern.txt.html#CTRL-C" class="k">CTRL-C</a>: 
<span class="e"></span>
<span class="e">	:while 1</span>
<span class="e">	:  try</span>
<span class="e">	:    sleep 1</span>
<span class="e">	:  catch</span>
<span class="e">	:  endtry</span>
<span class="e">	:endwhile</span>
<span class="e"></span>
<span class="e"></span>
<span class="c">EXCEPTIONS AND AUTOCOMMANDS</span>				<span id="except-autocmd" class="t">except-autocmd</span>

Exceptions may be used during execution of autocommands.  Example: 
<span class="e"></span>
<span class="e">	:autocmd User x try</span>
<span class="e">	:autocmd User x   throw "Oops!"</span>
<span class="e">	:autocmd User x catch</span>
<span class="e">	:autocmd User x   echo v:exception</span>
<span class="e">	:autocmd User x endtry</span>
<span class="e">	:autocmd User x throw "Arrgh!"</span>
<span class="e">	:autocmd User x echo "Should not be displayed"</span>
<span class="e">	:</span>
<span class="e">	:try</span>
<span class="e">	:  doautocmd User x</span>
<span class="e">	:catch</span>
<span class="e">	:  echo v:exception</span>
<span class="e">	:endtry</span>
<span class="e"></span>
This displays "Oops!" and "Arrgh!"<a href="repeat.txt.html#." class="d">.</a>

							<span id="except-autocmd-Pre" class="t">except-autocmd-Pre</span>
For some commands, autocommands get executed before the main action of the
command takes place.  If an exception <a href="motion.txt.html#is" class="d">is</a> thrown and not caught in the sequence
of autocommands, the sequence and the command that caused its execution are
abandoned and the exception <a href="motion.txt.html#is" class="d">is</a> propagated to the caller of the command.
   Example: 
<span class="e"></span>
<span class="e">	:autocmd BufWritePre * throw "FAIL"</span>
<span class="e">	:autocmd BufWritePre * echo "Should not be displayed"</span>
<span class="e">	:</span>
<span class="e">	:try</span>
<span class="e">	:  write</span>
<span class="e">	:catch</span>
<span class="e">	:  echo "Caught:" v:exception "from" v:throwpoint</span>
<span class="e">	:endtry</span>
<span class="e"></span>
Here, the "<a href="editing.txt.html#%3Awrite" class="d">:write</a>" command does not write the file currently being edited (as
you can see by checking <a href="options.txt.html#%27modified%27" class="o">'modified'</a>), since the exception from the <a href="autocmd.txt.html#BufWritePre" class="d">BufWritePre</a>
<a href="autocmd.txt.html#autocommand" class="d">autocommand</a> abandons the "<a href="editing.txt.html#%3Awrite" class="d">:write</a>"<a href="repeat.txt.html#." class="d">.</a>  The exception <a href="motion.txt.html#is" class="d">is</a> then caught and the
<a href="usr_41.txt.html#script" class="d">script</a> displays: 
<span class="e"></span>
<span class="e">	Caught: FAIL from BufWrite Auto commands for "*"</span>

							<span id="except-autocmd-Post" class="t">except-autocmd-Post</span>
For some commands, autocommands get executed after the main action of the
command has taken place.  If this main action fails and the command <a href="motion.txt.html#is" class="d">is</a> inside
an active try conditional, the autocommands are skipped and an error exception
<a href="motion.txt.html#is" class="d">is</a> thrown that can be caught by the caller of the command.
   Example: 
<span class="e"></span>
<span class="e">	:autocmd BufWritePost * echo "File successfully written!"</span>
<span class="e">	:</span>
<span class="e">	:try</span>
<span class="e">	:  write /i/m/p/o/s/s/i/b/l/e</span>
<span class="e">	:catch</span>
<span class="e">	:  echo v:exception</span>
<span class="e">	:endtry</span>
<span class="e"></span>
This just displays: 
<span class="e"></span>
<span class="e">	Vim(write):E212: Can't open file for writing (/i/m/p/o/s/s/i/b/l/e)</span>
<span class="e"></span>
If you really need to execute the autocommands even when the main action
fails, trigger the event from the catch clause.
   Example: 
<span class="e"></span>
<span class="e">	:autocmd BufWritePre  * set noreadonly</span>
<span class="e">	:autocmd BufWritePost * set readonly</span>
<span class="e">	:</span>
<span class="e">	:try</span>
<span class="e">	:  write /i/m/p/o/s/s/i/b/l/e</span>
<span class="e">	:catch</span>
<span class="e">	:  doautocmd BufWritePost /i/m/p/o/s/s/i/b/l/e</span>
<span class="e">	:endtry</span>

You can also use "<a href="various.txt.html#%3Asilent%21" class="d">:silent!</a>"<a href="cmdline.txt.html#%3A" class="d">:</a> 
<span class="e"></span>
<span class="e">	:let x = "ok"</span>
<span class="e">	:let v:errmsg = ""</span>
<span class="e">	:autocmd BufWritePost * if v:errmsg != ""</span>
<span class="e">	:autocmd BufWritePost *   let x = "after fail"</span>
<span class="e">	:autocmd BufWritePost * endif</span>
<span class="e">	:try</span>
<span class="e">	:  silent! write /i/m/p/o/s/s/i/b/l/e</span>
<span class="e">	:catch</span>
<span class="e">	:endtry</span>
<span class="e">	:echo x</span>
<span class="e"></span>
This displays "after fail"<a href="repeat.txt.html#." class="d">.</a>

If the main action of the command does not fail, exceptions from the
autocommands will be catchable by the caller of the command:  
<span class="e"></span>
<span class="e">	:autocmd BufWritePost * throw ":-("</span>
<span class="e">	:autocmd BufWritePost * echo "Should not be displayed"</span>
<span class="e">	:</span>
<span class="e">	:try</span>
<span class="e">	:  write</span>
<span class="e">	:catch</span>
<span class="e">	:  echo v:exception</span>
<span class="e">	:endtry</span>

							<span id="except-autocmd-Cmd" class="t">except-autocmd-Cmd</span>
For some commands, the normal action can be replaced by <a href="insert.txt.html#a" class="d">a</a> sequence of
autocommands.  Exceptions from that sequence will be catchable by the caller
of the command.
   Example:  For the "<a href="editing.txt.html#%3Awrite" class="d">:write</a>" command, the caller cannot know whether the file
had actually been written when the exception occurred.  You need to tell <a href="motion.txt.html#it" class="d">it</a> in
some way. 
<span class="e"></span>
<span class="e">	:if !exists("cnt")</span>
<span class="e">	:  let cnt = 0</span>
<span class="e">	:</span>
<span class="e">	:  autocmd BufWriteCmd * if &amp;modified</span>
<span class="e">	:  autocmd BufWriteCmd *   let cnt = cnt + 1</span>
<span class="e">	:  autocmd BufWriteCmd *   if cnt % 3 == 2</span>
<span class="e">	:  autocmd BufWriteCmd *     throw "BufWriteCmdError"</span>
<span class="e">	:  autocmd BufWriteCmd *   endif</span>
<span class="e">	:  autocmd BufWriteCmd *   write | set nomodified</span>
<span class="e">	:  autocmd BufWriteCmd *   if cnt % 3 == 0</span>
<span class="e">	:  autocmd BufWriteCmd *     throw "BufWriteCmdError"</span>
<span class="e">	:  autocmd BufWriteCmd *   endif</span>
<span class="e">	:  autocmd BufWriteCmd *   echo "File successfully written!"</span>
<span class="e">	:  autocmd BufWriteCmd * endif</span>
<span class="e">	:endif</span>
<span class="e">	:</span>
<span class="e">	:try</span>
<span class="e">	:	write</span>
<span class="e">	:catch /^BufWriteCmdError$/</span>
<span class="e">	:  if &amp;modified</span>
<span class="e">	:    echo "Error on writing (file contents not changed)"</span>
<span class="e">	:  else</span>
<span class="e">	:    echo "Error after writing"</span>
<span class="e">	:  endif</span>
<span class="e">	:catch /^Vim(write):/</span>
<span class="e">	:    echo "Error on writing"</span>
<span class="e">	:endtry</span>
<span class="e"></span>
When this <a href="usr_41.txt.html#script" class="d">script</a> <a href="motion.txt.html#is" class="d">is</a> sourced several times after making changes, <a href="motion.txt.html#it" class="d">it</a> displays
first 
<span class="e">	File successfully written!</span>
then 
<span class="e">	Error on writing (file contents not changed)</span>
then 
<span class="e">	Error after writing</span>
etc.

							<span id="except-autocmd-ill" class="t">except-autocmd-ill</span>
You cannot spread <a href="insert.txt.html#a" class="d">a</a> try conditional over autocommands <a href="luaref.txt.html#for" class="d">for</a> different events.
The following code <a href="motion.txt.html#is" class="d">is</a> ill-formed: 
<span class="e"></span>
<span class="e">	:autocmd BufWritePre  * try</span>
<span class="e">	:</span>
<span class="e">	:autocmd BufWritePost * catch</span>
<span class="e">	:autocmd BufWritePost *   echo v:exception</span>
<span class="e">	:autocmd BufWritePost * endtry</span>
<span class="e">	:</span>
<span class="e">	:write</span>
<span class="e"></span>
<span class="e"></span>
<span class="c">EXCEPTION HIERARCHIES AND PARAMETERIZED EXCEPTIONS</span>	<span id="except-hier-param" class="t">except-hier-param</span>

Some programming languages allow to use hierarchies of exception classes or to
pass additional information with the object of an exception class.  You can <a href="diff.txt.html#do" class="d">do</a>
similar things in Vim.
   In order to throw an exception from <a href="insert.txt.html#a" class="d">a</a> hierarchy, just throw the complete
class name with the components separated by <a href="insert.txt.html#a" class="d">a</a> colon, <a href="luaref.txt.html#for" class="d">for</a> instance throw the
<a href="vimeval.txt.html#string" class="d">string</a> "EXCEPT:MATHERR:OVERFLOW" <a href="luaref.txt.html#for" class="d">for</a> an overflow in <a href="insert.txt.html#a" class="d">a</a> mathematical library.
   When you want to pass additional information with your exception class, add
<a href="motion.txt.html#it" class="d">it</a> in parentheses, <a href="luaref.txt.html#for" class="d">for</a> instance throw the <a href="vimeval.txt.html#string" class="d">string</a> "EXCEPT:IO:WRITEERR(myfile)"
<a href="luaref.txt.html#for" class="d">for</a> an error when <a href="editing.txt.html#writing" class="d">writing</a> "myfile"<a href="repeat.txt.html#." class="d">.</a>
   With the appropriate patterns in the "<a href="vimeval.txt.html#%3Acatch" class="d">:catch</a>" command, you can catch <a href="luaref.txt.html#for" class="d">for</a>
base classes or derived classes of your hierarchy.  Additional information in
parentheses can be cut out from <a href="vvars.txt.html#v%3Aexception" class="l">v:exception</a> with the "<a href="change.txt.html#%3Asubstitute" class="d">:substitute</a>" command.
   Example: 
<span class="e"></span>
<span class="e">	:function! CheckRange(a, func)</span>
<span class="e">	:  if a:a &lt; 0</span>
<span class="e">	:    throw "EXCEPT:MATHERR:RANGE(" .. a:func .. ")"</span>
<span class="e">	:  endif</span>
<span class="e">	:endfunction</span>
<span class="e">	:</span>
<span class="e">	:function! Add(a, b)</span>
<span class="e">	:  call CheckRange(a:a, "Add")</span>
<span class="e">	:  call CheckRange(a:b, "Add")</span>
<span class="e">	:  let c = a:a + a:b</span>
<span class="e">	:  if c &lt; 0</span>
<span class="e">	:    throw "EXCEPT:MATHERR:OVERFLOW"</span>
<span class="e">	:  endif</span>
<span class="e">	:  return c</span>
<span class="e">	:endfunction</span>
<span class="e">	:</span>
<span class="e">	:function! Div(a, b)</span>
<span class="e">	:  call CheckRange(a:a, "Div")</span>
<span class="e">	:  call CheckRange(a:b, "Div")</span>
<span class="e">	:  if (a:b == 0)</span>
<span class="e">	:    throw "EXCEPT:MATHERR:ZERODIV"</span>
<span class="e">	:  endif</span>
<span class="e">	:  return a:a / a:b</span>
<span class="e">	:endfunction</span>
<span class="e">	:</span>
<span class="e">	:function! Write(file)</span>
<span class="e">	:  try</span>
<span class="e">	:    execute "write" fnameescape(a:file)</span>
<span class="e">	:  catch /^Vim(write):/</span>
<span class="e">	:    throw "EXCEPT:IO(" .. getcwd() .. ", " .. a:file .. "):WRITEERR"</span>
<span class="e">	:  endtry</span>
<span class="e">	:endfunction</span>
<span class="e">	:</span>
<span class="e">	:try</span>
<span class="e">	:</span>
<span class="e">	:  " something with arithmetic and I/O</span>
<span class="e">	:</span>
<span class="e">	:catch /^EXCEPT:MATHERR:RANGE/</span>
<span class="e">	:  let function = substitute(v:exception, '.*(\(\a\+\)).*', '\1', "")</span>
<span class="e">	:  echo "Range error in" function</span>
<span class="e">	:</span>
<span class="e">	:catch /^EXCEPT:MATHERR/	" catches OVERFLOW and ZERODIV</span>
<span class="e">	:  echo "Math error"</span>
<span class="e">	:</span>
<span class="e">	:catch /^EXCEPT:IO/</span>
<span class="e">	:  let dir = substitute(v:exception, '.*(\(.\+\),\s*.\+).*', '\1', "")</span>
<span class="e">	:  let file = substitute(v:exception, '.*(.\+,\s*\(.\+\)).*', '\1', "")</span>
<span class="e">	:  if file !~ '^/'</span>
<span class="e">	:    let file = dir .. "/" .. file</span>
<span class="e">	:  endif</span>
<span class="e">	:  echo 'I/O error for "' .. file .. '"'</span>
<span class="e">	:</span>
<span class="e">	:catch /^EXCEPT/</span>
<span class="e">	:  echo "Unspecified error"</span>
<span class="e">	:</span>
<span class="e">	:endtry</span>
<span class="e"></span>
The exceptions raised by Vim itself (on error or when pressing <a href="pattern.txt.html#CTRL-C" class="k">CTRL-C</a>) use
<a href="insert.txt.html#a" class="d">a</a> flat hierarchy:  they are all in the "Vim" class.  You cannot throw yourself
exceptions with the "Vim" prefix; they are reserved <a href="luaref.txt.html#for" class="d">for</a> Vim.
   Vim error exceptions are parameterized with the name of the command that
failed, if known.  See <a href="vimeval.txt.html#catch-errors" class="l">catch-errors</a><a href="repeat.txt.html#." class="d">.</a>


<span class="c">PECULIARITIES</span>
							<span id="except-compat" class="t">except-compat</span>
The exception handling concept requires that the command sequence causing the
exception <a href="motion.txt.html#is" class="d">is</a> aborted immediately and <a href="intro.txt.html#control" class="d">control</a> <a href="motion.txt.html#is" class="d">is</a> transferred to finally clauses
and/or <a href="insert.txt.html#a" class="d">a</a> catch clause.

In the Vim <a href="usr_41.txt.html#script" class="d">script</a> language there are cases where scripts and <a href="vimeval.txt.html#functions" class="d">functions</a>
continue after an error: in <a href="vimeval.txt.html#functions" class="d">functions</a> without the "abort" flag or in <a href="insert.txt.html#a" class="d">a</a> command
after "<a href="various.txt.html#%3Asilent%21" class="d">:silent!</a>"<a href="motion.txt.html#%2C" class="d">,</a> <a href="intro.txt.html#control" class="d">control</a> flow goes to the following line, and outside
functions, <a href="intro.txt.html#control" class="d">control</a> flow goes to the line following the outermost "<a href="vimeval.txt.html#%3Aendwhile" class="d">:endwhile</a>"
or "<a href="vimeval.txt.html#%3Aendif" class="d">:endif</a>"<a href="repeat.txt.html#." class="d">.</a>  On the other hand, <a href="message.txt.html#errors" class="d">errors</a> should be catchable <a href="motion.txt.html#as" class="d">as</a> exceptions
(thus, requiring the immediate abortion).

This problem has been solved by converting <a href="message.txt.html#errors" class="d">errors</a> to exceptions and using
immediate abortion (if not suppressed by "<a href="various.txt.html#%3Asilent%21" class="d">:silent!</a>"<a href="motion.txt.html#%29" class="d">)</a> only when <a href="insert.txt.html#a" class="d">a</a> try
conditional <a href="motion.txt.html#is" class="d">is</a> active.  This <a href="motion.txt.html#is" class="d">is</a> no restriction since an (error) exception can
be caught only from an active try conditional.  If you want an immediate
termination without catching the error, just use <a href="insert.txt.html#a" class="d">a</a> try conditional without
catch clause.  (You can cause cleanup code being executed before termination
by specifying <a href="insert.txt.html#a" class="d">a</a> finally clause.)

When no try conditional <a href="motion.txt.html#is" class="d">is</a> active, the usual abortion and continuation
behavior <a href="motion.txt.html#is" class="d">is</a> used instead of immediate abortion.  This ensures compatibility of
scripts written <a href="luaref.txt.html#for" class="d">for</a> Vim 6.1 and earlier.

However, when sourcing an existing <a href="usr_41.txt.html#script" class="d">script</a> that does not use exception handling
commands (or when calling one of its functions) from inside an active try
conditional of <a href="insert.txt.html#a" class="d">a</a> new script, you might change the <a href="intro.txt.html#control" class="d">control</a> flow of the existing
<a href="usr_41.txt.html#script" class="d">script</a> on error.  You get the immediate abortion on error and can catch the
error in the new script.  If however the sourced <a href="usr_41.txt.html#script" class="d">script</a> suppresses error
<a href="message.txt.html#messages" class="d">messages</a> by using the "<a href="various.txt.html#%3Asilent%21" class="d">:silent!</a>" command (checking <a href="luaref.txt.html#for" class="d">for</a> <a href="message.txt.html#errors" class="d">errors</a> by <a href="testing.txt.html#testing" class="d">testing</a>
<a href="vvars.txt.html#v%3Aerrmsg" class="l">v:errmsg</a> if appropriate), its execution path <a href="motion.txt.html#is" class="d">is</a> not changed.  The error <a href="motion.txt.html#is" class="d">is</a>
not converted to an exception.  (See <a href="various.txt.html#%3Asilent" class="l">:silent</a>.)  So the only remaining cause
where this happens <a href="motion.txt.html#is" class="d">is</a> <a href="luaref.txt.html#for" class="d">for</a> scripts that don't care about <a href="message.txt.html#errors" class="d">errors</a> and produce
error messages.  You probably won't want to use such code from your new
scripts.

							<span id="except-syntax-err" class="t">except-syntax-err</span>
<a href="autocmd.txt.html#Syntax" class="d">Syntax</a> <a href="message.txt.html#errors" class="d">errors</a> in the exception handling commands are never caught by any of
the "<a href="vimeval.txt.html#%3Acatch" class="d">:catch</a>" commands of the try conditional they belong to.  Its finally
clauses, however, <a href="motion.txt.html#is" class="d">is</a> executed.
   Example: 
<span class="e"></span>
<span class="e">	:try</span>
<span class="e">	:  try</span>
<span class="e">	:    throw 4711</span>
<span class="e">	:  catch /\(/</span>
<span class="e">	:    echo "in catch with syntax error"</span>
<span class="e">	:  catch</span>
<span class="e">	:    echo "inner catch-all"</span>
<span class="e">	:  finally</span>
<span class="e">	:    echo "inner finally"</span>
<span class="e">	:  endtry</span>
<span class="e">	:catch</span>
<span class="e">	:  echo 'outer catch-all caught "' .. v:exception .. '"'</span>
<span class="e">	:  finally</span>
<span class="e">	:    echo "outer finally"</span>
<span class="e">	:endtry</span>
<span class="e"></span>
This displays: 
<span class="e">    inner finally</span>
<span class="e">    outer catch-all caught "Vim(catch):E54: Unmatched \("</span>
<span class="e">    outer finally</span>
The original exception <a href="motion.txt.html#is" class="d">is</a> discarded and an error exception <a href="motion.txt.html#is" class="d">is</a> raised, instead.

							<span id="except-single-line" class="t">except-single-line</span>
The "<a href="vimeval.txt.html#%3Atry" class="d">:try</a>"<a href="motion.txt.html#%2C" class="d">,</a> "<a href="vimeval.txt.html#%3Acatch" class="d">:catch</a>"<a href="motion.txt.html#%2C" class="d">,</a> "<a href="vimeval.txt.html#%3Afinally" class="d">:finally</a>"<a href="motion.txt.html#%2C" class="d">,</a> and "<a href="vimeval.txt.html#%3Aendtry" class="d">:endtry</a>" commands can be <a href="change.txt.html#put" class="d">put</a> on
<a href="insert.txt.html#a" class="d">a</a> single line, but then <a href="syntax.txt.html#syntax" class="d">syntax</a> <a href="message.txt.html#errors" class="d">errors</a> may make <a href="motion.txt.html#it" class="d">it</a> difficult to recognize the
"catch" line, thus you better avoid this.
   Example: 
<span class="e">	:try | unlet! foo # | catch | endtry</span>
raises an error exception <a href="luaref.txt.html#for" class="d">for</a> the trailing characters after the ":unlet!"
argument, but does not see the "<a href="vimeval.txt.html#%3Acatch" class="d">:catch</a>" and "<a href="vimeval.txt.html#%3Aendtry" class="d">:endtry</a>" commands, so that the
error exception <a href="motion.txt.html#is" class="d">is</a> discarded and the "E488: Trailing characters" message gets
displayed.

							<span id="except-several-errors" class="t">except-several-errors</span>
When several <a href="message.txt.html#errors" class="d">errors</a> appear in <a href="insert.txt.html#a" class="d">a</a> single command, the first error message <a href="motion.txt.html#is" class="d">is</a>
usually the most specific one and therefore converted to the error exception.
   Example: 
<span class="e">	echo novar</span>
causes 
<span class="e">	E121: Undefined variable: novar</span>
<span class="e">	E15: Invalid expression: novar</span>
The value of the error exception inside try conditionals is: 
<span class="e">	Vim(echo):E121: Undefined variable: novar</span>
							<span id="except-syntax-error" class="t">except-syntax-error</span>
But when <a href="insert.txt.html#a" class="d">a</a> <a href="syntax.txt.html#syntax" class="d">syntax</a> error <a href="motion.txt.html#is" class="d">is</a> detected after <a href="insert.txt.html#a" class="d">a</a> normal error in the same command,
the <a href="syntax.txt.html#syntax" class="d">syntax</a> error <a href="motion.txt.html#is" class="d">is</a> used <a href="luaref.txt.html#for" class="d">for</a> the exception being thrown.
   Example: 
<span class="e">	unlet novar #</span>
causes 
<span class="e">	E108: No such variable: "novar"</span>
<span class="e">	E488: Trailing characters</span>
The value of the error exception inside try conditionals is: 
<span class="e">	Vim(unlet):E488: Trailing characters</span>
This <a href="motion.txt.html#is" class="d">is</a> done because the <a href="syntax.txt.html#syntax" class="d">syntax</a> error might change the execution path in <a href="insert.txt.html#a" class="d">a</a> way
not intended by the user.  Example: 
<span class="e">	try</span>
<span class="e">	    try | unlet novar # | catch | echo v:exception | endtry</span>
<span class="e">	catch /.*/</span>
<span class="e">	    echo "outer catch:" v:exception</span>
<span class="e">	endtry</span>
This displays "outer catch: Vim(unlet):E488: Trailing characters"<a href="motion.txt.html#%2C" class="d">,</a> and then
<a href="insert.txt.html#a" class="d">a</a> "E600: Missing <a href="vimeval.txt.html#%3Aendtry" class="d">:endtry</a>" error message <a href="motion.txt.html#is" class="d">is</a> given, see <a href="vimeval.txt.html#except-single-line" class="l">except-single-line</a><a href="repeat.txt.html#." class="d">.</a>

<span class="h">==============================================================================</span>
9. Examples						<span id="eval-examples" class="t">eval-examples</span>

<span class="h">Printing in Binary </span>

<span class="e">  :" The function Nr2Bin() returns the binary string representation of a number.</span>
<span class="e">  :func Nr2Bin(nr)</span>
<span class="e">  :  let n = a:nr</span>
<span class="e">  :  let r = ""</span>
<span class="e">  :  while n</span>
<span class="e">  :    let r = '01'[n % 2] .. r</span>
<span class="e">  :    let n = n / 2</span>
<span class="e">  :  endwhile</span>
<span class="e">  :  return r</span>
<span class="e">  :endfunc</span>
<span class="e"></span>
<span class="e">  :" The function String2Bin() converts each character in a string to a</span>
<span class="e">  :" binary string, separated with dashes.</span>
<span class="e">  :func String2Bin(str)</span>
<span class="e">  :  let out = ''</span>
<span class="e">  :  for ix in range(strlen(a:str))</span>
<span class="e">  :    let out = out .. '-' .. Nr2Bin(char2nr(a:str[ix]))</span>
<span class="e">  :  endfor</span>
<span class="e">  :  return out[1:]</span>
<span class="e">  :endfunc</span>
<span class="e"></span>
Example of its use: 
<span class="e">  :echo Nr2Bin(32)</span>
result: "100000" 
<span class="e">  :echo String2Bin("32")</span>
result: "110011-110010"


<span class="h">Sorting lines </span>

This example sorts lines with <a href="insert.txt.html#a" class="d">a</a> specific compare function. 
<span class="e"></span>
<span class="e">  :func SortBuffer()</span>
<span class="e">  :  let lines = getline(1, '$')</span>
<span class="e">  :  call sort(lines, function("Strcmp"))</span>
<span class="e">  :  call setline(1, lines)</span>
<span class="e">  :endfunction</span>
<span class="e"></span>
As <a href="insert.txt.html#a" class="d">a</a> one-liner: 
<span class="e">  :call setline(1, sort(getline(1, '$'), function("Strcmp")))</span>


<span class="h">scanf() replacement </span>
							<span id="sscanf" class="t">sscanf</span>
There <a href="motion.txt.html#is" class="d">is</a> no sscanf() function in Vim.  If you need to extract parts from <a href="insert.txt.html#a" class="d">a</a>
line, you can use <a href="vimfn.txt.html#matchstr%28%29" class="d">matchstr()</a> and <a href="vimfn.txt.html#substitute%28%29" class="d">substitute()</a> to <a href="diff.txt.html#do" class="d">do</a> it.  This example shows
how to get the file name, line number and column number out of <a href="insert.txt.html#a" class="d">a</a> line like
"foobar.txt, 123, 45"<a href="repeat.txt.html#." class="d">.</a> 
<span class="e">   :" Set up the match bit</span>
<span class="e">   :let mx='\(\f\+\),\s*\(\d\+\),\s*\(\d\+\)'</span>
<span class="e">   :"get the part matching the whole expression</span>
<span class="e">   :let l = matchstr(line, mx)</span>
<span class="e">   :"get each item out of the match</span>
<span class="e">   :let file = substitute(l, mx, '\1', '')</span>
<span class="e">   :let lnum = substitute(l, mx, '\2', '')</span>
<span class="e">   :let col = substitute(l, mx, '\3', '')</span>
<span class="e"></span>
The input <a href="motion.txt.html#is" class="d">is</a> in the variable "line"<a href="motion.txt.html#%2C" class="d">,</a> the results in the <a href="vimeval.txt.html#variables" class="d">variables</a> "file"<a href="motion.txt.html#%2C" class="d">,</a>
"lnum" and "col"<a href="repeat.txt.html#." class="d">.</a> (idea from Michael Geddes)


<span class="h">getting the scriptnames in a Dictionary </span>
						<span id="scriptnames-dictionary" class="t">scriptnames-dictionary</span>
The <span class="e">:scriptnames</span> command can be used to get <a href="insert.txt.html#a" class="d">a</a> <a href="vimeval.txt.html#list" class="d">list</a> of all <a href="usr_41.txt.html#script" class="d">script</a> files that
have been sourced.  There <a href="motion.txt.html#is" class="d">is</a> also the <span class="e">getscriptinfo()</span> function, but the
information returned <a href="motion.txt.html#is" class="d">is</a> not exactly the same.  In <a href="change.txt.html#case" class="d">case</a> you need to manipulate
the output of <span class="e">scriptnames</span> this code can be used: 
<span class="e">    " Get the output of ":scriptnames" in the scriptnames_output variable.</span>
<span class="e">    let scriptnames_output = ''</span>
<span class="e">    redir =&gt; scriptnames_output</span>
<span class="e">    silent scriptnames</span>
<span class="e">    redir END</span>
<span class="e"></span>
<span class="e">    " Split the output into lines and parse each line.	Add an entry to the</span>
<span class="e">    " "scripts" dictionary.</span>
<span class="e">    let scripts = {}</span>
<span class="e">    for line in split(scriptnames_output, "\n")</span>
<span class="e">      " Only do non-blank lines.</span>
<span class="e">      if line =~ '\S'</span>
<span class="e">	" Get the first number in the line.</span>
<span class="e">	let nr = matchstr(line, '\d\+')</span>
<span class="e">	" Get the file name, remove the script number " 123: ".</span>
<span class="e">	let name = substitute(line, '.\+:\s*', '', '')</span>
<span class="e">	" Add an item to the Dictionary</span>
<span class="e">	let scripts[nr] = name</span>
<span class="e">      endif</span>
<span class="e">    endfor</span>
<span class="e">    unlet scriptnames_output</span>
<span class="e"></span>
<span class="h">==============================================================================</span>
The <a href="vimeval.txt.html#sandbox" class="d">sandbox</a>					<span id="eval-sandbox" class="t">eval-sandbox</span> <span id="sandbox" class="t">sandbox</span>

The <a href="options.txt.html#%27foldexpr%27" class="o">'foldexpr'</a>, <a href="options.txt.html#%27formatexpr%27" class="o">'formatexpr'</a>, <a href="options.txt.html#%27includeexpr%27" class="o">'includeexpr'</a>, <a href="options.txt.html#%27indentexpr%27" class="o">'indentexpr'</a>, <a href="options.txt.html#%27statusline%27" class="o">'statusline'</a> and
<a href="options.txt.html#%27foldtext%27" class="o">'foldtext'</a> <a href="options.txt.html#options" class="d">options</a> may be evaluated in <a href="insert.txt.html#a" class="d">a</a> sandbox.  This means that you are
protected from these expressions having nasty side effects.  This gives some
safety <a href="luaref.txt.html#for" class="d">for</a> when these <a href="options.txt.html#options" class="d">options</a> are set from <a href="insert.txt.html#a" class="d">a</a> modeline.  It <a href="motion.txt.html#is" class="d">is</a> also used when
the command from <a href="insert.txt.html#a" class="d">a</a> <a href="tagsrch.txt.html#tags" class="d">tags</a> file <a href="motion.txt.html#is" class="d">is</a> executed and <a href="luaref.txt.html#for" class="d">for</a> <a href="undo.txt.html#CTRL-R" class="k">CTRL-R</a> <a href="change.txt.html#%3D" class="d">=</a> in the command line.
The <a href="vimeval.txt.html#sandbox" class="d">sandbox</a> <a href="motion.txt.html#is" class="d">is</a> also used <a href="luaref.txt.html#for" class="d">for</a> the <a href="vimeval.txt.html#%3Asandbox" class="l">:sandbox</a> command.

								<span id="E48" class="t">E48</span>
These items are not allowed in the sandbox:
	<a href="motion.txt.html#-" class="d">-</a> <a href="change.txt.html#changing" class="d">changing</a> the buffer text
	<a href="motion.txt.html#-" class="d">-</a> defining or <a href="change.txt.html#changing" class="d">changing</a> mapping, autocommands, user commands
	<a href="motion.txt.html#-" class="d">-</a> setting certain <a href="options.txt.html#options" class="d">options</a> (see <a href="options.txt.html#option-summary" class="l">option-summary</a><a href="motion.txt.html#%29" class="d">)</a>
	<a href="motion.txt.html#-" class="d">-</a> setting certain <a href="vimeval.txt.html#v%3A" class="d">v:</a> <a href="vimeval.txt.html#variables" class="d">variables</a> (see <a href="vimeval.txt.html#v%3Avar" class="l">v:var</a><a href="motion.txt.html#%29" class="d">)</a>  <span id="E794" class="t">E794</span>
	<a href="motion.txt.html#-" class="d">-</a> executing <a href="insert.txt.html#a" class="d">a</a> shell command
	<a href="motion.txt.html#-" class="d">-</a> reading or <a href="editing.txt.html#writing" class="d">writing</a> <a href="insert.txt.html#a" class="d">a</a> file
	<a href="motion.txt.html#-" class="d">-</a> jumping to another buffer or editing <a href="insert.txt.html#a" class="d">a</a> file
	<a href="motion.txt.html#-" class="d">-</a> executing Python, Perl, etc. commands
This <a href="motion.txt.html#is" class="d">is</a> not guaranteed 100% secure, but <a href="motion.txt.html#it" class="d">it</a> should block most attacks.

							<span id="%3Asan" class="t">:san</span> <span id="%3Asandbox" class="t">:sandbox</span>
:san[dbox] <span class="s">{cmd}</span>	Execute <span class="s">{cmd}</span> in the sandbox.  Useful to evaluate an
			option that may have been set from <a href="insert.txt.html#a" class="d">a</a> modeline, e.g.
			<a href="options.txt.html#%27foldexpr%27" class="o">'foldexpr'</a>.

							<span id="sandbox-option" class="t">sandbox-option</span>
<a href="insert.txt.html#A" class="d">A</a> few <a href="options.txt.html#options" class="d">options</a> contain an expression.  When this <a href="vimeval.txt.html#expression" class="d">expression</a> <a href="motion.txt.html#is" class="d">is</a> evaluated <a href="motion.txt.html#it" class="d">it</a> may
have to be done in the <a href="vimeval.txt.html#sandbox" class="d">sandbox</a> to avoid <a href="insert.txt.html#a" class="d">a</a> security risk.  But the <a href="vimeval.txt.html#sandbox" class="d">sandbox</a> <a href="motion.txt.html#is" class="d">is</a>
restrictive, thus this only happens when the option was set from an insecure
location.  Insecure in this <a href="repeat.txt.html#context" class="d">context</a> are:
<a href="motion.txt.html#-" class="d">-</a> sourcing <a href="insert.txt.html#a" class="d">a</a> .nvimrc or .exrc in the current directory
<a href="motion.txt.html#-" class="d">-</a> while executing in the <a href="vimeval.txt.html#sandbox" class="d">sandbox</a>
<a href="motion.txt.html#-" class="d">-</a> value coming from <a href="insert.txt.html#a" class="d">a</a> <a href="options.txt.html#modeline" class="d">modeline</a>
<a href="motion.txt.html#-" class="d">-</a> executing <a href="insert.txt.html#a" class="d">a</a> function that was defined in the <a href="vimeval.txt.html#sandbox" class="d">sandbox</a>

<span class="n">Note</span> that when in the <a href="vimeval.txt.html#sandbox" class="d">sandbox</a> and saving an option value and restoring it, the
option will still be marked <a href="motion.txt.html#as" class="d">as</a> <a href="motion.txt.html#it" class="d">it</a> was set in the sandbox.

<span class="h">==============================================================================</span>
Textlock							<span id="textlock" class="t">textlock</span>

In <a href="insert.txt.html#a" class="d">a</a> few situations <a href="motion.txt.html#it" class="d">it</a> <a href="motion.txt.html#is" class="d">is</a> not allowed to change the text in the buffer, jump
to another <a href="windows.txt.html#window" class="d">window</a> and some other things that might confuse or break what Vim
<a href="motion.txt.html#is" class="d">is</a> currently doing.  This mostly applies to things that happen when Vim <a href="motion.txt.html#is" class="d">is</a>
actually doing something else.  For example, <a href="insert.txt.html#a" class="d">a</a> <a href="autocmd.txt.html#TextYankPost" class="d">TextYankPost</a> <a href="autocmd.txt.html#autocommand" class="d">autocommand</a> cannot
edit the text <a href="motion.txt.html#it" class="d">it</a> <a href="motion.txt.html#is" class="d">is</a> yanking.

This <a href="motion.txt.html#is" class="d">is</a> not allowed when the <a href="vimeval.txt.html#textlock" class="d">textlock</a> <a href="motion.txt.html#is" class="d">is</a> active:
	<a href="motion.txt.html#-" class="d">-</a> <a href="change.txt.html#changing" class="d">changing</a> the buffer text
	<a href="motion.txt.html#-" class="d">-</a> jumping to another buffer or <a href="windows.txt.html#window" class="d">window</a>
	<a href="motion.txt.html#-" class="d">-</a> editing another file
	<a href="motion.txt.html#-" class="d">-</a> closing <a href="insert.txt.html#a" class="d">a</a> <a href="windows.txt.html#window" class="d">window</a> or quitting Vim
	<a href="motion.txt.html#-" class="d">-</a> etc.

<span class="h">==============================================================================</span>
Vim <a href="usr_41.txt.html#script" class="d">script</a> library					<span id="vim-script-library" class="t">vim-script-library</span>

Vim comes bundled with <a href="insert.txt.html#a" class="d">a</a> Vim <a href="usr_41.txt.html#script" class="d">script</a> library, that can be used by runtime,
<a href="usr_41.txt.html#script" class="d">script</a> authors.  Currently, <a href="motion.txt.html#it" class="d">it</a> only includes very few functions, but <a href="motion.txt.html#it" class="d">it</a> may
grow over time.

								<span id="dist%23vim" class="t">dist#vim</span>
The <a href="vimeval.txt.html#functions" class="d">functions</a> make use of the autoloaded prefix "<a href="vimeval.txt.html#dist%23vim" class="d">dist#vim</a>"<a href="repeat.txt.html#." class="d">.</a>

The following <a href="vimeval.txt.html#functions" class="d">functions</a> are available:

<span class="h">dist#vim#IsSafeExecutable(filetype, executable) </span>

This function takes <a href="insert.txt.html#a" class="d">a</a> <a href="filetype.txt.html#filetype" class="d">filetype</a> and an executable and checks whether <a href="motion.txt.html#it" class="d">it</a> <a href="motion.txt.html#is" class="d">is</a> safe
to execute the given executable.  For security reasons users may not want to
have Vim execute random executables or may have forbidden to <a href="diff.txt.html#do" class="d">do</a> so <a href="luaref.txt.html#for" class="d">for</a>
specific <a href="filetype.txt.html#filetypes" class="d">filetypes</a> by setting the "<span class="s">&lt;filetype&gt;</span>_exec" variable <a href="motion.txt.html#%28" class="d">(</a><a href="filetype.txt.html#plugin_exec" class="l">plugin_exec</a>).

It returns <a href="vimeval.txt.html#TRUE" class="l">TRUE</a> or <a href="vimeval.txt.html#FALSE" class="l">FALSE</a> to indicate whether the <a href="usr_05.txt.html#plugin" class="d">plugin</a> should run the given
executable.  It takes the following arguments:

<span class="h">	argument	type </span>

	<a href="filetype.txt.html#filetype" class="d">filetype</a>	<a href="vimeval.txt.html#string" class="d">string</a>
	executable	<a href="vimeval.txt.html#string" class="d">string</a>

<span class="h">==============================================================================</span>
<a href="cmdline.txt.html#Command-line" class="d">Command-line</a> expressions highlighting		<span id="expr-highlight" class="t">expr-highlight</span>

Expressions entered by the user in <a href="insert.txt.html#i_CTRL-R_%3D" class="l">i_CTRL-R_=</a><a href="motion.txt.html#%2C" class="d">,</a> <a href="cmdline.txt.html#c_CTRL-%5C_e" class="l">c_CTRL-\_e</a><a href="motion.txt.html#%2C" class="d">,</a> <a href="change.txt.html#quote%3D" class="l">quote=</a> are
highlighted by the built-in expressions parser.  It uses highlight groups
described in the table below, which may be overridden by colorschemes.
							<span id="hl-NvimInvalid" class="t">hl-NvimInvalid</span>
Besides the "Nvim"-prefixed highlight groups described below, there are
"NvimInvalid"-prefixed highlight groups which have the same meaning but
indicate that the token contains an error or that an error occurred just
before it.  They have mostly the same hierarchy, except that (by default) in
place of any non-Nvim-prefixed group NvimInvalid linking to <span class="e">Error</span> <a href="motion.txt.html#is" class="d">is</a> used
and some other intermediate groups are present.

<span class="h">Group                              Default link            Colored expression </span>
<span id="hl-NvimInternalError" class="t">hl-NvimInternalError</span>               None, red/red           Parser bug

<span id="hl-NvimAssignment" class="t">hl-NvimAssignment</span>                  Operator                Generic assignment
<span id="hl-NvimPlainAssignment" class="t">hl-NvimPlainAssignment</span>             NvimAssignment          <span class="e">=</span> in <a href="vimeval.txt.html#%3Alet" class="l">:let</a>
<span id="hl-NvimAugmentedAssignment" class="t">hl-NvimAugmentedAssignment</span>         NvimAssignment          Generic, <span class="e">+=</span>/<span class="e">-=</span>/<span class="e">.=</span>
<span id="hl-NvimAssignmentWithAddition" class="t">hl-NvimAssignmentWithAddition</span>      NvimAugmentedAssignment <span class="e">+=</span> in <a href="vimeval.txt.html#%3Alet%2B%3D" class="l">:let+=</a>
<span id="hl-NvimAssignmentWithSubtraction" class="t">hl-NvimAssignmentWithSubtraction</span>   NvimAugmentedAssignment <span class="e">-=</span> in <a href="vimeval.txt.html#%3Alet-%3D" class="l">:let-=</a>
<span id="hl-NvimAssignmentWithConcatenation" class="t">hl-NvimAssignmentWithConcatenation</span> NvimAugmentedAssignment <span class="e">.=</span> in <a href="vimeval.txt.html#%3Alet.%3D" class="l">:let.=</a>

<span id="hl-NvimOperator" class="t">hl-NvimOperator</span>                    Operator                Generic <a href="motion.txt.html#operator" class="d">operator</a>

<span id="hl-NvimUnaryOperator" class="t">hl-NvimUnaryOperator</span>               NvimOperator            Generic unary op
<span id="hl-NvimUnaryPlus" class="t">hl-NvimUnaryPlus</span>                   NvimUnaryOperator       <a href="vimeval.txt.html#expr-unary-%2B" class="l">expr-unary-+</a>
<span id="hl-NvimUnaryMinus" class="t">hl-NvimUnaryMinus</span>                  NvimUnaryOperator       <a href="vimeval.txt.html#expr-unary--" class="l">expr-unary--</a>
<span id="hl-NvimNot" class="t">hl-NvimNot</span>                         NvimUnaryOperator       <a href="vimeval.txt.html#expr-%21" class="l">expr-!</a>

<span id="hl-NvimBinaryOperator" class="t">hl-NvimBinaryOperator</span>              NvimOperator            Generic binary op
<span id="hl-NvimComparison" class="t">hl-NvimComparison</span>                  NvimBinaryOperator      Any <a href="vimeval.txt.html#expr4" class="l">expr4</a> <a href="motion.txt.html#operator" class="d">operator</a>
<span id="hl-NvimComparisonModifier" class="t">hl-NvimComparisonModifier</span>          NvimComparison          <span class="e">#</span>/<span class="e">?</span> near <a href="vimeval.txt.html#expr4" class="l">expr4</a> op
<span id="hl-NvimBinaryPlus" class="t">hl-NvimBinaryPlus</span>                  NvimBinaryOperator      <a href="vimeval.txt.html#expr-%2B" class="l">expr-+</a>
<span id="hl-NvimBinaryMinus" class="t">hl-NvimBinaryMinus</span>                 NvimBinaryOperator      <a href="vimeval.txt.html#expr--" class="l">expr--</a>
<span id="hl-NvimConcat" class="t">hl-NvimConcat</span>                      NvimBinaryOperator      <a href="vimeval.txt.html#expr-." class="l">expr-.</a>
<span id="hl-NvimConcatOrSubscript" class="t">hl-NvimConcatOrSubscript</span>           NvimConcat              <a href="vimeval.txt.html#expr-." class="l">expr-.</a> or <a href="vimeval.txt.html#expr-entry" class="l">expr-entry</a>
<span id="hl-NvimOr" class="t">hl-NvimOr</span>                          NvimBinaryOperator      <a href="vimeval.txt.html#expr-barbar" class="l">expr-barbar</a>
<span id="hl-NvimAnd" class="t">hl-NvimAnd</span>                         NvimBinaryOperator      <a href="vimeval.txt.html#expr-%26%26" class="l">expr-&amp;&amp;</a>
<span id="hl-NvimMultiplication" class="t">hl-NvimMultiplication</span>              NvimBinaryOperator      <a href="vimeval.txt.html#expr-star" class="l">expr-star</a>
<span id="hl-NvimDivision" class="t">hl-NvimDivision</span>                    NvimBinaryOperator      <a href="vimeval.txt.html#expr-%2F" class="l">expr-/</a>
<span id="hl-NvimMod" class="t">hl-NvimMod</span>                         NvimBinaryOperator      <a href="vimeval.txt.html#expr-%25" class="l">expr-%</a>

<span id="hl-NvimTernary" class="t">hl-NvimTernary</span>                     NvimOperator            <span class="e">?</span> in <a href="vimeval.txt.html#expr1" class="l">expr1</a>
<span id="hl-NvimTernaryColon" class="t">hl-NvimTernaryColon</span>                NvimTernary             <span class="e">:</span> in <a href="vimeval.txt.html#expr1" class="l">expr1</a>

<span id="hl-NvimParenthesis" class="t">hl-NvimParenthesis</span>                 Delimiter               Generic bracket
<span id="hl-NvimLambda" class="t">hl-NvimLambda</span>                      NvimParenthesis         <span class="e">{</span>/<span class="e">}</span> in <a href="vimeval.txt.html#lambda" class="l">lambda</a>
<span id="hl-NvimNestingParenthesis" class="t">hl-NvimNestingParenthesis</span>          NvimParenthesis         <span class="e">(</span>/<span class="e">)</span> in <a href="vimeval.txt.html#expr-nesting" class="l">expr-nesting</a>
<span id="hl-NvimCallingParenthesis" class="t">hl-NvimCallingParenthesis</span>          NvimParenthesis         <span class="e">(</span>/<span class="e">)</span> in <a href="vimeval.txt.html#expr-function" class="l">expr-function</a>

<span id="hl-NvimSubscript" class="t">hl-NvimSubscript</span>                   NvimParenthesis         Generic <a href="vimeval.txt.html#subscript" class="d">subscript</a>
<span id="hl-NvimSubscriptBracket" class="t">hl-NvimSubscriptBracket</span>            NvimSubscript           <span class="e">[</span>/<span class="e">]</span> in <a href="vimeval.txt.html#expr-%5B%5D" class="l">expr-[]</a>
<span id="hl-NvimSubscriptColon" class="t">hl-NvimSubscriptColon</span>              NvimSubscript           <span class="e">:</span> in <a href="vimeval.txt.html#expr-%5B%3A%5D" class="l">expr-[:]</a>
<span id="hl-NvimCurly" class="t">hl-NvimCurly</span>                       NvimSubscript           <span class="e">{</span>/<span class="e">}</span> in
                                                           <a href="vimeval.txt.html#curly-braces-names" class="l">curly-braces-names</a>

<span id="hl-NvimContainer" class="t">hl-NvimContainer</span>                   NvimParenthesis         Generic container
<span id="hl-NvimDict" class="t">hl-NvimDict</span>                        NvimContainer           <span class="e">{</span>/<span class="e">}</span> in <a href="vimeval.txt.html#dict" class="l">dict</a> literal
<span id="hl-NvimList" class="t">hl-NvimList</span>                        NvimContainer           <span class="e">[</span>/<span class="e">]</span> in <a href="vimeval.txt.html#list" class="l">list</a> literal

<span id="hl-NvimIdentifier" class="t">hl-NvimIdentifier</span>                  Identifier              Generic identifier
<span id="hl-NvimIdentifierScope" class="t">hl-NvimIdentifierScope</span>             NvimIdentifier          Namespace: letter
                                                           before <span class="e">:</span> in
                                                           <a href="vimeval.txt.html#internal-variables" class="l">internal-variables</a>
<span id="hl-NvimIdentifierScopeDelimiter" class="t">hl-NvimIdentifierScopeDelimiter</span>    NvimIdentifier          <span class="e">:</span> after <a href="api.txt.html#namespace" class="d">namespace</a>
                                                           letter
<span id="hl-NvimIdentifierName" class="t">hl-NvimIdentifierName</span>              NvimIdentifier          Rest of the ident
<span id="hl-NvimIdentifierKey" class="t">hl-NvimIdentifierKey</span>               NvimIdentifier          Identifier after
                                                           <a href="vimeval.txt.html#expr-entry" class="l">expr-entry</a>

<span id="hl-NvimColon" class="t">hl-NvimColon</span>                       Delimiter               <span class="e">:</span> in <a href="vimeval.txt.html#dict" class="l">dict</a> literal
<span id="hl-NvimComma" class="t">hl-NvimComma</span>                       Delimiter               <span class="e">,</span> in <a href="vimeval.txt.html#dict" class="l">dict</a> or <a href="vimeval.txt.html#list" class="l">list</a>
                                                           literal or
                                                           <a href="vimeval.txt.html#expr-function" class="l">expr-function</a>
<span id="hl-NvimArrow" class="t">hl-NvimArrow</span>                       Delimiter               <span class="e">-&gt;</span> in <a href="vimeval.txt.html#lambda" class="l">lambda</a>

<span id="hl-NvimRegister" class="t">hl-NvimRegister</span>                    SpecialChar             <a href="vimeval.txt.html#expr-register" class="l">expr-register</a>
<span id="hl-NvimNumber" class="t">hl-NvimNumber</span>                      <a href="vimeval.txt.html#Number" class="d">Number</a>                  Non-prefix digits
                                                           in integer
                                                           <a href="vimeval.txt.html#expr-number" class="l">expr-number</a>
<span id="hl-NvimNumberPrefix" class="t">hl-NvimNumberPrefix</span>                Type                    <span class="e">0</span> <a href="luaref.txt.html#for" class="d">for</a> <a href="vimeval.txt.html#octal-number" class="l">octal-number</a>
                                                           <span class="e">0x</span> <a href="luaref.txt.html#for" class="d">for</a> <a href="vimeval.txt.html#hex-number" class="l">hex-number</a>
                                                           <span class="e">0b</span> <a href="luaref.txt.html#for" class="d">for</a> <a href="vimeval.txt.html#binary-number" class="l">binary-number</a>
<span id="hl-NvimFloat" class="t">hl-NvimFloat</span>                       NvimNumber              Floating-point
                                                           number

<span id="hl-NvimOptionSigil" class="t">hl-NvimOptionSigil</span>                 Type                    <span class="e">&amp;</span> in <a href="vimeval.txt.html#expr-option" class="l">expr-option</a>
<span id="hl-NvimOptionScope" class="t">hl-NvimOptionScope</span>                 NvimIdentifierScope     Option scope if any
<span id="hl-NvimOptionScopeDelimiter" class="t">hl-NvimOptionScopeDelimiter</span>        NvimIdentifierScopeDelimiter
                                                           <span class="e">:</span> after option scope
<span id="hl-NvimOptionName" class="t">hl-NvimOptionName</span>                  NvimIdentifier          Option name

<span id="hl-NvimEnvironmentSigil" class="t">hl-NvimEnvironmentSigil</span>            NvimOptionSigil         <span class="e">$</span> in <a href="vimeval.txt.html#expr-env" class="l">expr-env</a>
<span id="hl-NvimEnvironmentName" class="t">hl-NvimEnvironmentName</span>             NvimIdentifier          Env variable name

<span id="hl-NvimString" class="t">hl-NvimString</span>                      <a href="vimeval.txt.html#String" class="d">String</a>                  Generic <a href="vimeval.txt.html#string" class="d">string</a>
<span id="hl-NvimStringBody" class="t">hl-NvimStringBody</span>                  NvimString              Generic <a href="vimeval.txt.html#string" class="d">string</a>
                                                           literal body
<span id="hl-NvimStringQuote" class="t">hl-NvimStringQuote</span>                 NvimString              Generic <a href="vimeval.txt.html#string" class="d">string</a> <a href="change.txt.html#quote" class="d">quote</a>
<span id="hl-NvimStringSpecial" class="t">hl-NvimStringSpecial</span>               SpecialChar             Generic <a href="vimeval.txt.html#string" class="d">string</a>
                                                           non-literal body

<span id="hl-NvimSingleQuote" class="t">hl-NvimSingleQuote</span>                 NvimStringQuote         <span class="e">'</span> in <a href="vimeval.txt.html#expr-%27" class="l">expr-'</a>
<span id="hl-NvimSingleQuotedBody" class="t">hl-NvimSingleQuotedBody</span>            NvimStringBody          Literal part of
                                                           <a href="vimeval.txt.html#expr-%27" class="l">expr-'</a> <a href="vimeval.txt.html#string" class="d">string</a> body
<span id="hl-NvimSingleQuotedQuote" class="t">hl-NvimSingleQuotedQuote</span>           NvimStringSpecial       <span class="e">''</span> inside <a href="vimeval.txt.html#expr-%27" class="l">expr-'</a>
                                                           <a href="vimeval.txt.html#string" class="d">string</a> body

<span id="hl-NvimDoubleQuote" class="t">hl-NvimDoubleQuote</span>                 NvimStringQuote         <span class="e">"</span> in <a href="vimeval.txt.html#expr-quote" class="l">expr-quote</a>
<span id="hl-NvimDoubleQuotedBody" class="t">hl-NvimDoubleQuotedBody</span>            NvimStringBody          Literal part of
                                                           <a href="vimeval.txt.html#expr-quote" class="l">expr-quote</a> body
<span id="hl-NvimDoubleQuotedEscape" class="t">hl-NvimDoubleQuotedEscape</span>          NvimStringSpecial       Valid <a href="vimeval.txt.html#expr-quote" class="l">expr-quote</a>
                                                           <a href="intro.txt.html#escape" class="d">escape</a> sequence
<span id="hl-NvimDoubleQuotedUnknownEscape" class="t">hl-NvimDoubleQuotedUnknownEscape</span>   NvimInvalidValue        Unrecognized
                                                           <a href="vimeval.txt.html#expr-quote" class="l">expr-quote</a> <a href="intro.txt.html#escape" class="d">escape</a>
                                                           sequence

 vim:tw=78:ts=8:noet:ft=help:norl:


</pre>
</div>
</main>
<p>Quick links:
<a href="index.html">help overview</a> &middot;
<a href="quickref.txt.html">quick reference</a> &middot;
<a href="usr_toc.txt.html">user manual toc</a> &middot;
<a href="index.html#reference_toc">reference manual toc</a>
</p>
<footer>This site is maintained by Carlo Teubner (<i>(my first name) at cteubner dot net</i>).</footer>
</body>
</html>